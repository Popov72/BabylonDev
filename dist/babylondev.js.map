{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/babylonjs-gui/babylon.gui.min.js","webpack:///./node_modules/fast-memoize/src/index.js","webpack:///./node_modules/re-resizable/lib/index.js","webpack:///./node_modules/react-draggable/build/web/react-draggable.min.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/Browser.ts","webpack:///./src/CSM/CSM.ts","webpack:///./src/CSM/CSMGUI.tsx","webpack:///./src/CSM/GlobalGUI.tsx","webpack:///./src/CSM/SplitBase.ts","webpack:///./src/CSM/SplitBaseGUI.tsx","webpack:///./src/CSM/StandardShadow.ts","webpack:///./src/CSM/StandardShadowGUI.tsx","webpack:///./src/CSM/csmShadowGenerator.ts","webpack:///./src/CSM/csmShadowMap.ts","webpack:///./src/CSM/index.ts","webpack:///./src/CSM2/CSM.ts","webpack:///./src/CSM2/CSMGUI.tsx","webpack:///./src/CSM2/DepthReducer.ts","webpack:///./src/CSM2/GlobalGUI.tsx","webpack:///./src/CSM2/MinMaxReducer.ts","webpack:///./src/CSM2/SplitBase.ts","webpack:///./src/CSM2/SplitBaseGUI.tsx","webpack:///./src/CSM2/StandardShadow.ts","webpack:///./src/CSM2/StandardShadowGUI.tsx","webpack:///./src/CSM2/cascadedShadowGenerator.ts","webpack:///./src/CSM2/index.ts","webpack:///./src/DepthMinMax/index.ts","webpack:///./src/DrawEdges/index.ts","webpack:///./src/GUI.tsx","webpack:///./src/Main.ts","webpack:///./src/MainGUI.tsx","webpack:///./src/RTTAndPostProcess/index.ts","webpack:///./src/Raymarching/index.ts","webpack:///./src/Sample.ts","webpack:///./src/SampleBasic.ts","webpack:///./src/SketchfabMarkers/DepthLinearNoShader.ts","webpack:///./src/SketchfabMarkers/DepthLinearShader.ts","webpack:///./src/SketchfabMarkers/DepthNonLinearShader.ts","webpack:///./src/SketchfabMarkers/index.ts","webpack:///./src/Split.ts","webpack:///./src/SplitGUI.tsx","webpack:///./src/Utils.ts","webpack:///./src/allSamples.ts","webpack:///external \"MaterialUI\"","webpack:///external \"MaterialUI.colors\"","webpack:///external \"BABYLON\"","webpack:///external \"jQuery\"","webpack:///external \"React\"","webpack:///external \"ReactDOM\""],"names":[],"mappings":"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a,YAAY,GAAG,IAAI,mCAAmC,SAAS,oCAAoC,YAAY,GAAG,E;;;;;;;;;;;;ACfp8sO;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC/Ia;;AAEb,8CAA8C,cAAc;;AAE5D,+BAA+B,iFAAiF;;AAEhH,YAAY,mBAAO,CAAC,oBAAO;AAC3B,8BAA8B,mBAAO,CAAC,8DAAc;;AAEpD;AACA;AACA,+DAA+D;AAC/D;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU,gBAAgB,sCAAsC,iBAAiB,EAAE;AACnF,yBAAyB,uDAAuD;AAChF;AACA;;AAEA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;;AAEA;AACA;AACA,gDAAgD,OAAO;AACvD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,wCAAwC,oDAAoD,2CAA2C,qDAAqD;AAC5L;AACA,SAAS;AACT;AACA,SAAS,EAAE;AACX;;AAEA;AACA;AACA;AACA;AACA,4CAA4C,wCAAwC,EAAE;AACtF,uCAAuC,oCAAoC,EAAE;AAC7E,mDAAmD,0CAA0C,EAAE;AAC/F;AACA,6BAA6B,aAAa;AAC1C,yEAAyE,4EAA4E,EAAE;AACvJ;AACA;AACA,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,wBAAwB;AAC3E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,iCAAiC;AAChE;AACA;AACA,+BAA+B,+BAA+B;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,6DAA6D,GAAG,qCAAqC;AACtL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,0CAA0C;AACjE;AACA;AACA,uBAAuB,yCAAyC;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAsD,iKAAiK;AACvN;AACA;AACA,SAAS;AACT;AACA,6CAA6C,2DAA2D;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,IAAI;AACb,qDAAqD;AACrD;AACA;AACA;AACA,aAAa,mBAAmB,4EAA4E,qCAAqC,yKAAyK,oCAAoC;AAC9V,kEAAkE;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,EAAE;AACnB;AACA;AACA;AACA;AACA,oCAAoC,EAAE;AACtC,+BAA+B,EAAE;AACjC,mCAAmC,EAAE;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;;;;;;;;;;;ACjwBA,eAAe,KAAiD,kBAAkB,mBAAO,CAAC,oBAAO,EAAE,mBAAO,CAAC,4BAAW,GAAG,SAAqM,CAAC,sBAAsB,mBAAmB,SAAS,cAAc,4BAA4B,YAAY,qBAAqB,2DAA2D,uCAAuC,qCAAqC,oBAAoB,EAAE,iBAAiB,4FAA4F,eAAe,wCAAwC,SAAS,EAAE,mBAAmB,8BAA8B,qDAAqD,0BAA0B,6CAA6C,sBAAsB,6DAA6D,YAAY,eAAe,SAAS,iBAAiB,iCAAiC,iBAAiB,YAAY,UAAU,sBAAsB,mBAAmB,iDAAiD,iBAAiB,kBAAkB,iBAAiB,eAAe,YAAY,eAAe,YAAY,iBAAiB;AAC11C;AACA;AACA;AACA;AACA,cAAc,aAAa,QAAQ,gBAAgB,aAAa,iBAAiB,mBAAmB,KAAK,mBAAmB,MAAM,eAAe,wCAAwC,oCAAoC,sBAAsB,aAAa,kEAAkE,mBAAmB,2DAA2D,SAAS,6BAA6B,GAAG,iBAAiB,yCAAyC,0DAA0D,iBAAiB,aAAa,WAAW,cAAc,cAAc,2CAA2C,wBAAwB,UAAU,mMAAmM,sCAAsC,aAAa,SAAS,eAAe,OAAO,2MAA2M,wBAAwB,iBAAiB,aAAa,yDAAyD,iBAAiB,aAAa,OAAO,oEAAoE,gBAAgB,uBAAuB,IAAI,yCAAyC,cAAc,oFAAoF,cAAc,oCAAoC,cAAc,sBAAsB,kBAAkB,uHAAuH,gCAAgC,gBAAgB,yCAAyC,sBAAsB,WAAW,2DAA2D,SAAS,OAAO,iBAAiB,yEAAyE,iEAAiE,4CAA4C,mBAAmB,YAAY,WAAW,iCAAiC,SAAS,GAAG,gBAAgB,qBAAqB,iCAAiC,sCAAsC,2BAA2B,uDAAuD,qBAAqB,SAAS,kBAAkB,yCAAyC,kDAAkD,WAAW,SAAS,gBAAgB,2HAA2H,eAAe,sBAAsB,kBAAkB,QAAQ,GAAG,mBAAmB,kBAAkB,eAAe,SAAS,SAAS,kBAAkB,qGAAqG,kBAAkB,8GAA8G,cAAc,uEAAuE,wDAAwD,cAAc,sEAAsE,wDAAwD,cAAc,uEAAuE,gDAAgD,cAAc,sEAAsE,gDAAgD,kBAAkB,+EAA+E,MAAM,4FAA4F,8CAA8C,SAAS,cAAc,MAAM,uDAAuD,wJAAwJ,cAAc,uEAAuE,cAAc,gPAAgP,cAAc,IAAI,8PAA8P,UAAU,QAAQ,aAAa,mBAAmB,YAAY,mBAAmB,KAAK,yCAAyC,gCAAgC,YAAY,2HAA2H,gEAAgE,EAAE,SAAS,EAAE,mBAAmB,0DAA0D,EAAE,cAAc,gDAAgD,cAAc,gDAAgD,kBAAkB,uCAAuC,sDAAsD,wBAAwB,oDAAoD,wBAAwB,EAAE,WAAW,sCAAsC,WAAW,uBAAuB,gCAAgC,aAAa,2BAA2B,OAAO,uEAAuE,gFAAgF,kBAAkB,mCAAmC,UAAU,iDAAiD,EAAE,8EAA8E,gBAAgB,oBAAoB,OAAO,+HAA+H,cAAc,yBAAyB,kEAAkE,SAAS,cAAc,iFAAiF,gBAAgB,aAAa,oGAAoG,KAAK,gBAAgB,mBAAmB,6BAA6B,mBAAmB,4BAA4B,IAAI,iCAAiC,2DAA2D,OAAO,SAAS,SAAS,QAAQ,IAAI,8BAA8B,QAAQ,cAAc,SAAS,kBAAkB,4EAA4E,GAAG,gBAAgB,YAAY,WAAW,KAAK,WAAW,+GAA+G,cAAc,iEAAiE,6CAA6C,KAAK,cAAc,oGAAoG,SAAS,gBAAgB,8CAA8C,uBAAuB,OAAO,kBAAkB,yCAAyC,kDAAkD,WAAW,OAAO,OAAO,oDAAoD,QAAQ,mDAAmD,yBAAyB,aAAa,YAAY,eAAe,8EAA8E,SAAS,8CAA8C,IAAI,sBAAsB,2HAA2H,qDAAqD,uCAAuC,mGAAmG,4BAA4B,4GAA4G,sBAAsB,gKAAgK,kBAAkB,qJAAqJ,IAAI,YAAY,kBAAkB,EAAE,kBAAkB,YAAY,8BAA8B,2FAA2F,4BAA4B,2DAA2D,kCAAkC,yCAAyC,wCAAwC,YAAY,sBAAsB,gCAAgC,0HAA0H,+BAA+B,oCAAoC,kBAAkB,wCAAwC,gBAAgB,EAAE,SAAS,4CAA4C,SAAS,0CAA0C,4FAA4F,sCAAsC,qBAAqB,wCAAwC,YAAY,sDAAsD,gEAAgE,gCAAgC,+GAA+G,mCAAmC,sCAAsC,iCAAiC,qCAAqC,oCAAoC,sCAAsC,kCAAkC,qCAAqC,IAAI,UAAU,qBAAqB,4GAA4G,0CAA0C,aAAa,qCAAqC,YAAY,2BAA2B,4CAA4C,4BAA4B,MAAM,sBAAsB,wLAAwL,EAAE,8BAA8B,gEAAgE,yJAAyJ,GAAG,iCAAiC,GAAG,cAAc,iFAAiF,gBAAgB,aAAa,oGAAoG,KAAK,aAAa,oCAAoC,YAAY,mBAAmB,KAAK,mBAAmB,sEAAsE,SAAS,wBAAwB,gBAAgB,oBAAoB,wBAAwB,oBAAoB,YAAY,kBAAkB,QAAQ,WAAW,wCAAwC,SAAS,MAAM,iCAAiC,sCAAsC,QAAQ,WAAW,yFAAyF,SAAS,gBAAgB,mBAAmB,6BAA6B,mBAAmB,4BAA4B,IAAI,iCAAiC,2DAA2D,OAAO,SAAS,SAAS,QAAQ,IAAI,8BAA8B,QAAQ,cAAc,SAAS,kBAAkB,4EAA4E,GAAG,iBAAiB,qBAAqB,iCAAiC,sCAAsC,2BAA2B,uDAAuD,qBAAqB,SAAS,eAAe,YAAY,mBAAmB,KAAK,yCAAyC,iCAAiC,aAAa,4HAA4H,gEAAgE,EAAE,SAAS,eAAe,kEAAkE,6CAA6C,KAAK,eAAe,oGAAoG,SAAS,iBAAiB,YAAY,WAAW,KAAK,WAAW,+GAA+G,mBAAmB,yCAAyC,iBAAiB,+CAA+C,uBAAuB,OAAO,mBAAmB,yCAAyC,kDAAkD,WAAW,oDAAoD,kGAAkG,2FAA2F,yLAAyL,sBAAsB,4IAA4I,oBAAoB,oBAAoB,yBAAyB,SAAS,6BAA6B,UAAU,mCAAmC,SAAS,EAAE,mBAAmB,cAAc,UAAU,qBAAqB,8EAA8E,8HAA8H,+CAA+C,YAAY,uBAAuB,EAAE,kCAAkC,8BAA8B,oBAAoB,aAAa,mBAAmB,gBAAgB,wCAAwC,wBAAwB,+BAA+B,qBAAqB,mCAAmC,OAAO,qDAAqD,IAAI,WAAW,uBAAuB,wCAAwC,qJAAqJ,oDAAoD,GAAG,uOAAuO,yJAAyJ,iCAAiC,0IAA0I,qCAAqC,cAAc,sCAAsC,8BAA8B,8CAA8C,OAAO,+BAA+B,8BAA8B,mCAAmC,YAAY,cAAc,WAAW,0IAA0I,+CAA+C,8QAA8Q,qBAAqB,4GAA4G,0CAA0C,aAAa,qCAAqC,aAAa,8BAA8B,mDAAmD,uCAAuC,wCAAwC,mCAAmC,MAAM,UAAU,yCAAyC,8FAA8F,gBAAgB,GAAG,EAAE,4CAA4C,eAAe,YAAY,GAAG,EAAE,8BAA8B,oWAAoW,qDAAqD,6DAA6D,wCAAwC,iBAAiB,sBAAsB,kBAAkB,WAAW,qBAAqB,MAAM,0CAA0C,uDAAuD,+BAA+B,IAAI,mEAAmE,yCAAyC,uBAAuB,iBAAiB,gBAAgB,IAAI,KAAK,GAAG,wDAAwD,cAAc,yEAAyE,kEAAkE,6JAA6J,0BAA0B,4BAA4B,kFAAkF,sBAAsB,0BAA0B,kCAAkC,6BAA6B,iBAAiB,gLAAgL,QAAQ,uBAAuB,GAAG,GAAG;AAC9tlB,+C;;;;;;;;;;;ACNA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;ACnBA;AAAA;IAAA;IAwDA,CAAC;IAlDG,sBAAkB,uBAAY;aAA9B;YACI,IAAI,OAAO,CAAC,aAAa,KAAK,IAAI,EAAE;gBAChC,OAAO,CAAC,aAAa;oBACjB,OAAM,CAAC,YAAY,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC,IAAI,YAAY,EAAE,CAAC,CAAC;wBAC1D,OAAM,CAAE,MAAc,CAAC,kBAAkB,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC,IAAK,MAAc,CAAC,kBAAkB,EAAE,CAAC,CAAC;4BACtG,OAAM,CAAE,MAAc,CAAC,eAAe,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC,IAAK,MAAc,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;aAC7G;YACD,OAAO,OAAO,CAAC,aAAa,CAAC;QACjC,CAAC;;;OAAA;IAEa,8BAAsB,GAApC,UAAqC,UAAmB;QACpD,UAAU,CAAC,kBAAkB;YACzB,UAAU,CAAC,kBAAkB;gBAC5B,UAAkB,CAAC,qBAAqB;gBACxC,UAAkB,CAAC,wBAAwB,CAAC;IACrD,CAAC;IAEa,6BAAqB,GAAnC,UAAoC,UAAmB;QACnD,UAAU,CAAC,iBAAiB;YACxB,UAAU,CAAC,iBAAiB;gBAC3B,UAAkB,CAAC,oBAAoB;gBACvC,UAAkB,CAAC,uBAAuB;gBAC1C,UAAkB,CAAC,uBAAuB,CAAC;IACpD,CAAC;IAED,sBAAkB,sBAAW;aAA7B;YACI,IAAM,YAAY,GAAQ,EAAE,EACtB,KAAK,GAAG,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,EAC3C,IAAI,GAAG,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;YAE9B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAClC,IAAM,IAAI,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;gBAEhC,gCAAgC;gBAChC,IAAI,OAAO,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,WAAW,EAAE;oBAClE,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC5E,iCAAiC;iBAChC;qBAAM,IAAI,OAAO,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,QAAQ,EAAE;oBACtE,IAAI,GAAG,GAAG,CAAE,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAE,CAAC;oBACrF,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;oBACpD,yCAAyC;iBACxC;qBAAM;oBACH,YAAY,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;iBAC/E;aACJ;YAED,OAAO,CAAC,GAAG,GAAG,YAAY,CAAC;YAE3B,OAAO,OAAO,CAAC,GAAG,CAAC;QACvB,CAAC;;;OAAA;IArDa,WAAG,GAAQ,IAAI,CAAC;IAEb,qBAAa,GAAQ,IAAI,CAAC;IAoD/C,cAAC;CAAA;AAxDoB,sEAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOT;AAG2B;AAChB;AAC4B;AAE1D;IAAiC,uBAAc;IAI3C,aAAY,KAAY,EAAE,MAAuB,EAAE,MAAc,EAAE,IAAY;QAA/E,YACI,kBAAM,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,SAKrC;QAHI,MAAc,CAAC,GAAG,GAAG,KAAI,CAAC;;QAC3B,kEAAkE;QAClE,0DAA0D;IAC9D,CAAC;IAES,6BAAe,GAAzB;QACI,OAAQ,IAAI,CAAC,gBAAkD,CAAC;IACpE,CAAC;IAED,sBAAW,gCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAW;YAClC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;YACvB,IAAI,CAAC,eAAe,EAAE,CAAC,gBAAgB,EAAE,CAAC;QAC9C,CAAC;;;OANA;IAQD,sBAAW,+BAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;YACvB,IAAI,CAAC,eAAe,EAAE,CAAC,gBAAgB,EAAE,CAAC;QAC9C,CAAC;;;OANA;IAQD,sBAAW,+BAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,eAAe,EAAE,CAAC,OAAO,EAAE,CAAC;YACjC,IAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;YAC3B,IAAI,CAAC,qBAAqB,EAAE,CAAC;QACjC,CAAC;;;OAPA;IASD,sBAAW,iCAAgB;aAA3B;YACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAClC,CAAC;aAED,UAA4B,GAAW;YACnC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;YAC7B,IAAI,CAAC,eAAe,EAAE,CAAC,aAAa,GAAG,GAAG,CAAC;YAE3C,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,MAAM,CAAC;YACtD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,IAAI,CAAC;YAClD,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC;YAC9D,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,QAAQ,CAAC;YAC1D,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,gBAAgB,CAAC;YACjE,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC;YAC9D,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,SAAS,CAAC;YAC5D,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,aAAa,CAAC;YACpE,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC;YAC9D,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,aAAa,CAAC;YACpE,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,gCAAgC,CAAC;YAE1F,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACrC,CAAC;;;OAnBA;IAqBD,sBAAW,qCAAoB;aAA/B;YACI,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACtC,CAAC;aAED,UAAgC,GAAY;YACxC,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;YACjC,IAAI,CAAC,eAAe,EAAE,CAAC,KAAK,GAAG,GAAG,CAAC;QACvC,CAAC;;;OALA;IAOD,sBAAW,qCAAoB;aAA/B;YACI,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACtC,CAAC;aAED,UAAgC,GAAY;YACxC,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;YACjC,IAAI,CAAC,eAAe,EAAE,CAAC,iBAAiB,GAAG,GAAG,CAAC;QACnD,CAAC;;;OALA;IAOD,sBAAW,8BAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAY;YACjC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,GAAG,GAAG,CAAC;QAC5C,CAAC;;;OALA;IAOD,sBAAW,0BAAS;aAApB;YACI,OAAO,IAAI,CAAC,UAAU,CAAC;QAC3B,CAAC;aAED,UAAqB,EAAU;YAC3B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,eAAe,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC;QACvC,CAAC;;;OALA;IAOD,sBAAW,qDAAoC;aAA/C;YACI,OAAO,IAAI,CAAC,qCAAqC,CAAC;QACtD,CAAC;aAED,UAAgD,OAAgB;YAC5D,IAAI,CAAC,qCAAqC,GAAG,OAAO,CAAC;YACrD,IAAI,CAAC,eAAe,EAAE,CAAC,iCAAiC,GAAG,OAAO,CAAC;QACvE,CAAC;;;OALA;IAOS,6BAAe,GAAzB;QACI,IAAM,OAAO,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,OAAO,CAAC;QAE/C,IAAI,CAAC,OAAO,EAAE;YACV,OAAO,IAAI,CAAC;SACf;QAED,IAAM,KAAK,GAAG,OAAO,CAAC,SAAS,CAAC;QAEhC,OAAO;YACH,KAAK,EAAE,KAAK,CAAC,eAAe;YAC5B,KAAK,EAAE,KAAK,CAAC,eAAe;SAC/B;IACL,CAAC;IAEM,uBAAS,GAAhB;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,+CAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAEhF,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACzB,CAAC;IAES,6BAAe,GAAzB;QACI,IAAM,SAAS,GAAG,IAAI,sEAAkB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAAA,CAAC;QAE9F,SAAS,CAAC,aAAa,GAAG,sEAAkB,CAAC,WAAW,CAAC;QAEzD,OAAO,SAAuC,CAAC;IACnD,CAAC;IAES,uCAAyB,GAAnC;QACK,IAAI,CAAC,eAAe,CAAC,QAA6B,CAAC,cAAc;YAC9D,IAAI,CAAC,iBAAiB,KAAK,sEAAkB,CAAC,WAAW,IAAI,IAAI,CAAC,gBAAgB,KAAK,yDAAe,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,eAAe,EAAE,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAClM,CAAC;IAES,mCAAqB,GAA/B;QACI,iBAAM,qBAAqB,WAAE,CAAC;QAE9B,IAAM,eAAe,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAE/C,eAAe,CAAC,iBAAiB,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAC/D,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC;QACjD,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;QACzC,eAAe,CAAC,+BAA+B,GAAG,IAAI,CAAC;QAEvD,eAAe,CAAC,aAAa,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAEvD,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACrC,CAAC;IAhKa,aAAS,GAAW,KAAK,CAAC;IAkK5C,UAAC;CAAA,CApKgC,uDAAc,GAoK9C;AApKoB,kEAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdO;AAqBW;AAI1C;IAAoC,0BAAY;IAE5C,gBAAY,IAAY,EAAE,MAAc,EAAE,SAAiB,EAAE,MAAoB;QAAjF,YACI,kBAAM,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,CAAC,SAKzC;QAHG,KAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,KAAI,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC;;IACjC,CAAC;IAES,0CAAyB,GAAnC;QACI,IAAM,UAAU,GAAG;YAEf,OAAO,CACH,yGACG,CACN,CAAC;QACN,CAAC,CAAC;QAEF,OAAO,UAAU,EAAE,CAAC;IACxB,CAAC;IAEL,aAAC;AAAD,CAAC,CAtBmC,qDAAY,GAsB/C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/C8B;AAOJ;AAMR;AAEc;AAoBjC;IAAuC,6BAAO;IAU1C,mBAAY,IAAY,EAAE,MAAc,EAAE,MAAc;QAAxD,YACI,kBAAM,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,SAgE9B;QA9DG,KAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,KAAI,CAAC,MAAM,GAAG;YACV;gBACI,OAAO,EAAE,aAAa;gBACtB,MAAM,EAAE,4BAA4B;gBACpC,MAAM,EAAE,gBAAgB;gBACxB,iBAAiB,EAAE,KAAK;gBACxB,QAAQ,EAAE;oBACN,UAAU,EAAE,IAAI,iDAAO,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;oBACjC,QAAQ,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;iBACjC;gBACD,SAAS,EAAE,GAAG;gBACd,UAAU,EAAE,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC/B,OAAO,EAAE;oBACL,WAAW,EAAE,CAAC,EAAE;oBAChB,UAAU,EAAE,GAAG;iBAClB;aACJ;YACD;gBACI,OAAO,EAAE,OAAO;gBAChB,MAAM,EAAE,uBAAuB;gBAC/B,MAAM,EAAE,WAAW;gBACnB,iBAAiB,EAAE,IAAI;gBACvB,QAAQ,EAAE;oBACN,UAAU,EAAE,IAAI,iDAAO,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;oBACjC,QAAQ,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;iBACjC;gBACD,SAAS,EAAE,KAAK;gBAChB,UAAU,EAAE,IAAI,gDAAM,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;gBACnC,OAAO,EAAE;oBACL,WAAW,EAAE,CAAC,EAAE;oBAChB,UAAU,EAAE,GAAG;iBAClB;aACJ;;;;;;;;;;;eAWE;YACH;gBACI,OAAO,EAAE,SAAS;gBAClB,MAAM,EAAE,yBAAyB;gBACjC,MAAM,EAAE,aAAa;gBACrB,iBAAiB,EAAE,IAAI;gBACvB,QAAQ,EAAE;oBACN,UAAU,EAAE,IAAI,iDAAO,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;oBACjC,QAAQ,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;iBACjC;gBACD,SAAS,EAAE,IAAI;gBACf,UAAU,EAAE,IAAI,gDAAM,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;gBACnC,OAAO,EAAE;oBACL,WAAW,EAAE,CAAC,EAAE;oBAChB,UAAU,EAAE,GAAG;iBAClB;aACJ;SACJ,CAAC;;IACN,CAAC;IArED,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;;;OAAA;IAqES,6CAAyB,GAAnC;QAAA,iBA8BC;QA7BG,IAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAC5B,uFAAuD,EAAtD,aAAK,EAAE,gBAA+C,CAAC;QAE9D,IAAM,WAAW,GAAG,UAAC,KAAuE,EAAE,KAAsB;YAChH,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;YACnD,QAAQ,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC;QAClC,CAAC,CAAC;QAEF,OAAO,CACH,oDAAC,8CAAc;YACX,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gBACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa,YAAe,CACnD;YACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gBACZ,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,EAAE,EAAC,OAAO,EACV,KAAK,EAAE,KAAK,EACZ,QAAQ,EAAE,WAAW,IAEnB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,UAAC,KAAU,EAAE,GAAW;oBACtC,OAAO,CACH,oDAAC,0DAAQ,IAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,IAAG,KAAK,CAAC,KAAK,CAAY,CAC3D,CAAC;gBACN,CAAC,CAAC,CACG,CACN,CACM,CACpB,CAAC;IACN,CAAC;IAEL,gBAAC;AAAD,CAAC,CA7GsC,gDAAO,GA6G7C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClIkB;AAE+B;AACrB;AACA;AAI7B;IAAuC,6BAAK;IAqCxC,mBAAY,KAAY,EAAE,MAAuB,EAAE,MAAc,EAAE,IAAY;QAA/E,YACI,kBAAM,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,SA2DrC;QAzDG,KAAI,CAAC,OAAO,GAAG,IAAI,iDAAO,EAAE,CAAC;QAC7B,KAAI,CAAC,SAAS,GAAG,IAAI,gDAAM,EAAE,CAAC;QAC9B,KAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,KAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAC3B,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,KAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,KAAI,CAAC,eAAe,GAAG,CAAC,EAAE,CAAC;QAC3B,KAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC1B,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,KAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,KAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,KAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;QACpC,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,KAAI,CAAC,gBAAgB,GAAG,yDAAe,CAAC,UAAU,CAAC;QACnD,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,KAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;QAC9B,KAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,KAAI,CAAC,iBAAiB,GAAG,yDAAe,CAAC,cAAc,CAAC;QACxD,KAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;QAC/B,KAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;QAC7B,KAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;QACpC,KAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;QAC9B,KAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC;QACjC,KAAI,CAAC,0BAA0B,GAAG,KAAK,CAAC;QAExC,KAAI,CAAC,eAAe,GAAG,CAAC,CAAC;QACzB,KAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;QAC3B,KAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACnC,KAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QAClC,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,KAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACtB,KAAI,CAAC,qCAAqC,GAAG,KAAK,CAAC;QAEnD,KAAI,CAAC,eAAe,GAAG,IAAW,CAAC;QAEnC,IAAM,IAAI,GAAG,CAAC,CAAC;QAEf,KAAI,CAAC,eAAe,GAAG,qDAAW,CAAC,WAAW,CAAC,KAAI,CAAC,IAAI,GAAG,YAAY,EAAE;YACrE,OAAO,EAAE,IAAI;YACb,QAAQ,EAAE,IAAI;SACjB,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC;QAEf,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC;QAC5C,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC;QAC5C,KAAI,CAAC,eAAe,CAAC,gCAAgC,EAAE,CAAC;QACxD,KAAI,CAAC,eAAe,CAAC,wBAAwB,GAAG,IAAI,CAAC;QAErD,IAAM,QAAQ,GAAG,IAAI,0DAAgB,CAAC,KAAI,CAAC,IAAI,GAAG,qBAAqB,EAAE,KAAK,CAAC,CAAC;QAEhF,QAAQ,CAAC,aAAa,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7C,QAAQ,CAAC,eAAe,GAAG,IAAI,CAAC;QAChC,QAAQ,CAAC,aAAa,GAAG,gDAAM,CAAC,MAAM,CAAC;QAEvC,KAAI,CAAC,eAAe,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAEzC,KAAI,CAAC,eAAe,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;;IAC3C,CAAC;IAEM,0BAAM,GAAb;QACI,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC/C,IAAI,GAAG,EAAE;YACL,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SAC5F;QAED,iBAAM,MAAM,WAAE,CAAC;IACnB,CAAC;IAED,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;;;OAAA;IAEM,8BAAU,GAAjB,UAAkB,KAAwB,EAAE,YAAoB,EAAE,MAAe;QAC7E,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAED,sBAAW,gCAAS;aAApB;YACI,OAAO,IAAI,CAAC,UAAU,CAAC;QAC3B,CAAC;;;OAAA;IAED,sBAAW,sCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAW;YAClC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;QAC3B,CAAC;;;OALA;IAOD,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;QAC3B,CAAC;;;OALA;IAOD,sBAAW,mCAAY;aAAvB;YACI,OAAO,IAAI,CAAC,aAAa,CAAC;QAC9B,CAAC;aAED,UAAwB,EAAW;YAC/B,IAAI,IAAI,CAAC,sBAAsB,IAAI,CAAC,EAAE,EAAE;gBACpC,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;gBACxE,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;aACtC;YAED,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YAExB,IAAI,CAAC,IAAI,CAAC,sBAAsB,IAAI,EAAE,EAAE;gBACpC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aACtG;YAED,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACrD,CAAC;;;OAfA;IAiBD,sBAAW,iCAAU;aAArB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;QACxC,CAAC;aAED,UAAsB,EAAU;YAC5B,IAAI,CAAC,SAAS,GAAG,gDAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;QAC9C,CAAC;;;OAJA;IAMD,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;aAED,UAA0B,EAAW;YACjC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACtB,CAAC;;;OAJA;IAMD,sBAAW,sCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAY;YACnC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;QAChC,CAAC;;;OAJA;IAMD,sBAAW,4CAAqB;aAAhC;YACI,OAAO,IAAI,CAAC,sBAAsB,CAAC;QACvC,CAAC;aAED,UAAiC,KAAc;YAC3C,IAAI,IAAI,CAAC,sBAAsB,IAAI,CAAC,KAAK,EAAE;gBACvC,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;gBACzE,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;aACvC;YAED,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;YACpC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAEvC,IAAI,CAAC,IAAI,CAAC,uBAAuB,IAAI,KAAK,EAAE;gBACxC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aACxG;QACL,CAAC;;;OAdA;IAgBD,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC9B,CAAC;;;OAJA;IAMD,sBAAW,sCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAW;YAClC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;QAChC,CAAC;;;OAJA;IAMD,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC9B,CAAC;;;OAJA;IAMD,sBAAW,0CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,wCAAiB;aAA5B;YACI,OAAO,IAAI,CAAC,kBAAkB,CAAC;QACnC,CAAC;aAED,UAA6B,GAAW;YACpC,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;QAClC,CAAC;;;OAJA;IAMD,sBAAW,uCAAgB;aAA3B;YACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAClC,CAAC;aAED,UAA4B,GAAW;YACnC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;QACjC,CAAC;;;OAJA;IAMD,sBAAW,0CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,yCAAkB;aAA7B;YACI,OAAO,IAAI,CAAC,mBAAmB,CAAC;QACpC,CAAC;aAED,UAA8B,IAAY;YACtC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QACpC,CAAC;;;OAJA;IAMD,sBAAW,6CAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAc;YAC5C,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACzC,CAAC;;;OAJA;IAMD,sBAAW,0CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,6CAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAa;YAC3C,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACzC,CAAC;;;OAJA;IAMD,sBAAW,gDAAyB;aAApC;YACI,OAAO,IAAI,CAAC,0BAA0B,CAAC;QAC3C,CAAC;aAED,UAAqC,OAAe;YAChD,IAAI,CAAC,0BAA0B,GAAG,OAAO,CAAC;QAC9C,CAAC;;;OAJA;IAMD,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAC/B,CAAC;;;OAJA;IAMD,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC9B,CAAC;;;OAJA;IAMD,sBAAW,4CAAqB;aAAhC;YACI,OAAO,IAAI,CAAC,sBAAsB,CAAC;QACvC,CAAC;aAED,UAAiC,KAAc;YAC3C,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACxC,CAAC;;;OAJA;IAMD,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAC/B,CAAC;;;OAJA;IAMD,sBAAW,uCAAgB;aAA3B;YACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAClC,CAAC;aAED,UAA4B,GAAW;YACnC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;QACjC,CAAC;;;OAJA;IAMD,sBAAW,2CAAoB;aAA/B;YACI,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACtC,CAAC;aAED,UAAgC,GAAY;YACxC,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,2CAAoB;aAA/B;YACI,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACtC,CAAC;aAED,UAAgC,GAAY;YACxC,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAY;YACjC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC9B,CAAC;;;OAJA;IAMD,sBAAW,gCAAS;aAApB;YACI,OAAO,IAAI,CAAC,UAAU,CAAC;QAC3B,CAAC;aAED,UAAqB,EAAU;YAC3B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACzB,CAAC;;;OAJA;IAMD,sBAAW,2DAAoC;aAA/C;YACI,OAAO,IAAI,CAAC,qCAAqC,CAAC;QACtD,CAAC;aAED,UAAgD,OAAgB;YAC5D,IAAI,CAAC,qCAAqC,GAAG,OAAO,CAAC;QACzD,CAAC;;;OAJA;IAMS,2CAAuB,GAAjC,UAAkC,YAA4B;QAA5B,kDAA4B;QAC1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACpD,IAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAc,CAAC;YAEtD,IAAI,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,YAAY,KAAK,YAAY,CAAC,IAAI,MAAM,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;gBAC1F,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;gBACpD,MAAM;aACT;SACJ;IACL,CAAC;IAES,+BAAW,GAArB;QACI,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC;QAE/D,IAAI,MAAM,GAAG,IAAI,gDAAM,EAAE,CAAC;QAE1B,IAAI,IAAI,GAAG,8CAAK,CAAC,gBAAgB,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC;QAEpD,IAAI,QAAQ,GAAG,oDAAU,CAAC,YAAY,CAAC,IAAI,iDAAO,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;QAEzE,gDAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAC7C,iDAAO,CAAC,yBAAyB,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAEtE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC;IACvC,CAAC;IAES,gCAAY,GAAtB;QACI,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,CAAC,mIAAmI;QAEhK,IAAI,oBAAoB,GAAG,gDAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC,CAAC;QAEhF,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAE1D,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS,KAAK,qDAAa,CAAC,MAAM,EAAE;YACpD,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAC3C,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC;YAC3C,KAAK,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;SAClC;aAAM;YACH,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;SACjB;QAED,IAAI,CAAC,GAAG,IAAI,iDAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;QACvC,IAAI,CAAC,GAAG,IAAI,iDAAO,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;QAE/C,IAAI,EAAE,GAAG,iDAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,oBAAoB,CAAC,CAAC;QAC/D,IAAI,EAAE,GAAG,iDAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,oBAAoB,CAAC,CAAC;QAC/D,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC;QAEjC,IAAI,CAAC,cAAc,CAAC,OAAO,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEnD,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC;QAEb,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QACpD,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,iDAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,oBAAoB,CAAC,CAAC;IACzF,CAAC;IAEL,gBAAC;AAAD,CAAC,CAjbsC,8CAAK,GAib3C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvc8B;AAcJ;AAKR;AAEmB;AAEH;AAGnC;IAA0C,gCAAQ;IAM9C,sBAAY,IAAY,EAAE,MAAc,EAAE,SAAiB,EAAE,MAAoB;QAAjF,YACI,kBAAM,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,CAAC,SAOzC;QALG,KAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;QACvB,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,KAAI,CAAC,UAAU,CAAC,KAAK,GAAG,GAAG,CAAC;QAC5B,KAAI,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC;;IACjC,CAAC;IAES,sCAAe,GAAzB;QAAA,iBAqiBC;QApiBG,IAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAElC,IAAM,UAAU,GAAG;YACf,mEAAmE;YAE7D,kGAAqF,EAApF,uBAAe,EAAE,0BAAmE,CAAC;YACtF,iGAAkF,EAAjF,sBAAc,EAAE,yBAAiE,CAAC;YAEnF,+FAA4E,EAA3E,oBAAY,EAAE,uBAA6D,CAAC;YAC7E,6FAAsE,EAArE,kBAAU,EAAE,qBAAyD,CAAC;YACvE,6GAA8F,EAA7F,sBAAc,EAAE,yBAA6E,CAAC;YAC/F,4GAA2F,EAA1F,qBAAa,EAAE,wBAA2E,CAAC;YAC5F,wGAAuG,EAAtG,6BAAqB,EAAE,gCAA+E,CAAC;YACxG,kGAAqF,EAApF,uBAAe,EAAE,0BAAmE,CAAC;YAEtF,wGAAuG,EAAtG,6BAAqB,EAAE,gCAA+E,CAAC;YACxG,gGAA+E,EAA9E,qBAAa,EAAE,wBAA+D,CAAC;YAChF,gGAA+E,EAA9E,qBAAa,EAAE,wBAA+D,CAAC;YAChF,sGAAiG,EAAhG,2BAAmB,EAAE,8BAA2E,CAAC;YAClG,oGAA2F,EAA1F,yBAAiB,EAAE,4BAAuE,CAAC;YAC5F,kGAAqF,EAApF,uBAAe,EAAE,0BAAmE,CAAC;YACtF,mGAAwF,EAAvF,wBAAgB,EAAE,2BAAqE,CAAC;YACzF,sGAAiG,EAAhG,2BAAmB,EAAE,8BAA2E,CAAC;YAClG,qGAA8F,EAA7F,0BAAkB,EAAE,6BAAyE,CAAC;YAC/F,yGAA0G,EAAzG,8BAAsB,EAAE,iCAAiF,CAAC;YAC3G,sGAAiG,EAAhG,2BAAmB,EAAE,8BAA2E,CAAC;YAClG,yGAA0G,EAAzG,8BAAsB,EAAE,iCAAiF,CAAC;YAC3G,4GAAmH,EAAlH,iCAAyB,EAAE,oCAAuF,CAAC;YAEpH,iGAAkF,EAAjF,sBAAc,EAAE,yBAAiE,CAAC;YACnF,mGAAwF,EAAvF,wBAAgB,EAAE,2BAAqE,CAAC;YACzF,uGAAoG,EAAnG,4BAAoB,EAAE,+BAA6E,CAAC;YACrG,uGAAoG,EAAnG,4BAAoB,EAAE,+BAA6E,CAAC;YACrG,gGAA+E,EAA9E,qBAAa,EAAE,wBAA+D,CAAC;YAChF,4FAAmE,EAAlE,iBAAS,EAAE,oBAAuD,CAAC;YACpE,uHAAoJ,EAAnJ,4CAAoC,EAAE,+CAA6G,CAAC;YAG3J,IAAM,qBAAqB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACjF,KAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,KAAe,CAAC;gBAChD,kBAAkB,CAAC,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;YACtD,CAAC,CAAC;YAEF,IAAM,oBAAoB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBAChF,KAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,KAAe,CAAC;gBAC/C,iBAAiB,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;YACpD,CAAC,CAAC;YAEF,IAAM,kBAAkB,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAClE,eAAe,CAAC,OAAO,CAAC,CAAC;gBACzB,KAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,OAAO,CAAC;YACzC,CAAC,CAAC;YAEF,IAAM,gBAAgB,GAAG,UAAC,KAAiC;gBACvD,KAAI,CAAC,QAAQ,CAAC,UAAU,GAAI,KAAK,CAAC,MAAc,CAAC,KAAK,CAAC;gBACvD,aAAa,CAAC,KAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAC5C,CAAC,CAAC;YAEF,IAAM,oBAAoB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBAChF,KAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,KAAe,CAAC;gBAC/C,iBAAiB,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;YACpD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBAC/E,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,KAAe,CAAC;gBAC9C,gBAAgB,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,2BAA2B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC3E,wBAAwB,CAAC,OAAO,CAAC,CAAC;gBAClC,KAAI,CAAC,QAAQ,CAAC,qBAAqB,GAAG,OAAO,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,qBAAqB,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBACrE,kBAAkB,CAAC,OAAO,CAAC,CAAC;gBAC5B,KAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,OAAO,CAAC;YAC5C,CAAC,CAAC;YAGF,IAAM,2BAA2B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC3E,wBAAwB,CAAC,OAAO,CAAC,CAAC;gBAClC,KAAI,CAAC,QAAQ,CAAC,qBAAqB,GAAG,OAAO,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBACxH,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC3D,gBAAgB,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAAuE;gBAChG,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC3D,gBAAgB,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,yBAAyB,GAAG,UAAC,KAAuE;gBACtG,KAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBACjE,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;YAC9D,CAAC,CAAC;YAEF,IAAM,uBAAuB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACnF,KAAI,CAAC,QAAQ,CAAC,iBAAiB,GAAG,KAAe,CAAC;gBAClD,oBAAoB,CAAC,KAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;YAC1D,CAAC,CAAC;YAEF,IAAM,qBAAqB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBAC1H,KAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC7D,kBAAkB,CAAC,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;YACtD,CAAC,CAAC;YAEF,IAAM,sBAAsB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBAC3H,KAAI,CAAC,QAAQ,CAAC,gBAAgB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC9D,mBAAmB,CAAC,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YACxD,CAAC,CAAC;YAEF,IAAM,yBAAyB,GAAG,UAAC,KAAuE;gBACtG,KAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBACjE,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;YAC9D,CAAC,CAAC;YAEF,IAAM,wBAAwB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACpF,KAAI,CAAC,QAAQ,CAAC,kBAAkB,GAAG,KAAe,CAAC;gBACnD,qBAAqB,CAAC,KAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;YAC5D,CAAC,CAAC;YAEF,IAAM,4BAA4B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC5E,yBAAyB,CAAC,OAAO,CAAC,CAAC;gBACnC,KAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,OAAO,CAAC;YACnD,CAAC,CAAC;YAEF,IAAM,yBAAyB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACrF,KAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,KAAe,CAAC;gBACpD,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;YAC9D,CAAC,CAAC;YAEF,IAAM,4BAA4B,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACxF,KAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,KAAe,CAAC;gBACvD,yBAAyB,CAAC,KAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;YACpE,CAAC,CAAC;YAEF,IAAM,+BAA+B,GAAG,UAAC,KAAuE;gBAC5G,KAAI,CAAC,QAAQ,CAAC,yBAAyB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBACvE,4BAA4B,CAAC,KAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC;YAC1E,CAAC,CAAC;YAGF,IAAM,iBAAiB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBACtH,KAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC5D,iBAAiB,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;gBAChD,mBAAmB,CAAC,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YACxD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBACxH,KAAI,CAAC,QAAQ,CAAC,gBAAgB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC9D,mBAAmB,CAAC,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;gBACpD,gBAAgB,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;gBAC9C,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;gBAC1D,oBAAoB,CAAC,KAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;gBACtD,kBAAkB,CAAC,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;gBAClD,mBAAmB,CAAC,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;gBACpD,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;gBAC1D,qBAAqB,CAAC,KAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;gBACxD,yBAAyB,CAAC,KAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;gBAChE,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;gBAC1D,yBAAyB,CAAC,KAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;gBAChE,4BAA4B,CAAC,KAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC;YAC1E,CAAC,CAAC;YAEF,IAAM,0BAA0B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC1E,uBAAuB,CAAC,OAAO,CAAC,CAAC;gBACjC,KAAI,CAAC,QAAQ,CAAC,oBAAoB,GAAG,OAAO,CAAC;YACjD,CAAC,CAAC;YAEF,IAAM,0BAA0B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC1E,uBAAuB,CAAC,OAAO,CAAC,CAAC;gBACjC,KAAI,CAAC,QAAQ,CAAC,oBAAoB,GAAG,OAAO,CAAC;YACjD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBACnE,gBAAgB,CAAC,OAAO,CAAC,CAAC;gBAC1B,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,OAAO,CAAC;YAC1C,CAAC,CAAC;YAEF,IAAM,eAAe,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBAC3E,KAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAe,CAAC;gBAC1C,YAAY,CAAC,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YAC1C,CAAC,CAAC;YAEF,IAAM,0CAA0C,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC1F,uCAAuC,CAAC,OAAO,CAAC,CAAC;gBACjD,KAAI,CAAC,QAAQ,CAAC,oCAAoC,GAAG,OAAO,CAAC;YACjE,CAAC,CAAC;YAEF,+CAAe,CAAC;gBACZ,IAAM,OAAO,GAAG,UAAC,KAAY;oBACzB,QAAS,KAAqB,CAAC,MAAM,CAAC,IAAI,EAAE;wBACxC,KAAK,kBAAkB,CAAC,CAAC;4BACrB,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC;4BAC5D,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;4BAC1D,MAAM;yBACT;qBACJ;gBACL,CAAC,CAAC;gBAEF,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;gBAElD,OAAO;oBACH,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;gBACzD,CAAC,CAAC;YACN,CAAC,EAAE,EAAE,CAAC,CAAC;YAEP,OAAO,CACH;gBACI,oDAAC,gEAAc,IAAC,eAAe,EAAE,IAAI;oBACjC,oDAAC,uEAAqB,IAAC,UAAU,EAAE,oDAAC,sDAAI,sBAAmB;wBACvD,oDAAC,4DAAU,gBAAmB,CACV;oBACxB,oDAAC,uEAAqB;wBAClB,oDAAC,sDAAI,IAAC,SAAS,QAAC,OAAO,EAAE,CAAC;4BACtB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,oBAAuB,CAC9D;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa,IAAG,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAS,CACvE;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,wBAA2B,CAClE;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,eAAe,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,qBAAqB,GAAI,CAC3H,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,uBAA0B,CACjE;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,cAAc,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,QAAQ,EAAE,oBAAoB,GAAI,CACzH,CACL,CACJ,CACa,CACX;gBACjB,oDAAC,gEAAc,IAAC,eAAe,EAAE,IAAI;oBACjC,oDAAC,uEAAqB,IAAC,UAAU,EAAE,oDAAC,sDAAI,sBAAmB;wBACvD,oDAAC,4DAAU,gBAAmB,CACV;oBACxB,oDAAC,uEAAqB;wBAClB,oDAAC,sDAAI,IAAC,SAAS,QAAC,OAAO,EAAE,CAAC;4BACtB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,qBAAqB,GAAI,CACjE,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,cAAiB,CACxD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,kBAAkB,GAAI,CAC3D,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,YAAe,CACtD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,OAAO,EAAC,KAAK,EAAE,UAAU,EAAE,OAAO,EAAC,QAAQ,EAAC,QAAQ,EAAE,gBAAgB,GAAI,CACtF,CACL;4BACL,KAAI,CAAC,mBAAmB,IAAI;gCAC9B,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,uBAA0B,CACjE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,qBAAqB,EAAE,QAAQ,EAAE,2BAA2B,GAAI,CAC7E,CACL;gCACL,KAAI,IAAI;oCACN,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;wCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,iBAAoB,CAC3D;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;wCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;4CACnC,oDAAC,iDAAY,IAAC,QAAQ,EAAE,qBAAqB,EAAE,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,cAAc,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,oBAAoB,GAAI,CAC3J,CACL;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;wCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,gBAAmB,CAC1D;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;wCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;4CACnC,oDAAC,iDAAY,IAAC,QAAQ,EAAE,qBAAqB,EAAE,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,aAAa,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,mBAAmB,GAAI,CACtJ,CACL,CACR,CACA,CACA,CACa,CACX;gBACf,KAAI,CAAC,QAAQ,IAAI;oBACf,oDAAC,gEAAc,IAAC,eAAe,EAAE,IAAI;wBACjC,oDAAC,uEAAqB,IAAC,UAAU,EAAE,oDAAC,sDAAI,sBAAmB;4BACvD,oDAAC,4DAAU,+BAAkC,CACzB;wBACxB,oDAAC,uEAAqB;4BAClB,oDAAC,sDAAI,IAAC,SAAS,QAAC,OAAO,EAAE,CAAC;gCACtB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,sBAAyB,CAChE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,cAAc,EACrB,QAAQ,EAAE,iBAAiB,IAEzB,SAAI,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,2DAAC,0DAAQ,IAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,CAAC,IAAG,CAAC,GAAG,CAAC,CAAY,EAAtD,CAAsD,CAAC,CACvF,CACN;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,qBAAwB,CAC/D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,gBAAgB,EACvB,QAAQ,EAAE,mBAAmB,IAE3B,SAAI,KAAK,CAAC,cAAc,CAAC,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,2DAAC,0DAAQ,IAAC,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,IAAG,CAAC,GAAG,CAAC,CAAY,EAA9C,CAA8C,CAAC,CAC5F,CACN;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,yBAA4B,CACnE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,oBAAoB,EAAE,QAAQ,EAAE,0BAA0B,GAAI,CAC3E,CACL;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,yBAA4B,CACnE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,oBAAoB,EAAE,QAAQ,EAAE,0BAA0B,GAAI,CAC3E,CACL;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,mBAAmB,GAAI,CAC7D,CACL;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,aAAgB,CACvD;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,eAAe,GAAI,CAC9G,CACL;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,sBAAyB,CAChE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACvC,oDAAC,wDAAM,IAAC,OAAO,EAAE,oCAAoC,EAAE,QAAQ,EAAE,0CAA0C,GAAI,CACvG,CACL,CACJ,CACa,CACX,CAClB;gBACH,oDAAC,gEAAc,IAAC,eAAe,EAAE,IAAI;oBACjC,oDAAC,uEAAqB,IAAC,UAAU,EAAE,oDAAC,sDAAI,sBAAmB;wBACvD,oDAAC,4DAAU,QAAG,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,YAAY,CAAe,CACjD;oBACxB,oDAAC,uEAAqB;wBAClB,oDAAC,sDAAI,IAAC,SAAS,QAAC,OAAO,EAAE,CAAC;4BACtB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,qBAAwB,CAC/D;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,qBAAqB,EAAE,QAAQ,EAAE,2BAA2B,GAAI,CAC7E,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,WAAc,CACrD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,aAAa,EACpB,QAAQ,EAAE,mBAAmB;oCAE7B,oDAAC,0DAAQ,IAAC,KAAK,EAAE,IAAI,gBAAsB;oCAC3C,oDAAC,0DAAQ,IAAC,KAAK,EAAE,IAAI,gBAAsB;oCAC3C,oDAAC,0DAAQ,IAAC,KAAK,EAAE,GAAG,cAAoB;oCACxC,oDAAC,0DAAQ,IAAC,KAAK,EAAE,GAAG,cAAoB,CACnC,CACN;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,WAAc,CACrD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAE,aAAa,EAAE,OAAO,EAAC,UAAU,EAAC,UAAU,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,mBAAmB,GAAI,CAC9H,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAE,mBAAmB,EAAE,OAAO,EAAC,UAAU,EAAC,UAAU,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,yBAAyB,GAAI,CAC1I,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,eAAkB,CACzD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,iBAAiB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,uBAAuB,GAAI,CAC9H,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC5C,CAAC,KAAI,CAAC,QAAQ,IAAI;oCAChB,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,eAAe,EACtB,QAAQ,EAAE,qBAAqB;wCAE/B,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,WAAW,WAAiB;wCAC7D,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,UAAU,UAAgB;wCAC3D,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,oCAAoC,kBAAwB;wCAC7F,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,gCAAgC,WAAiB;wCAClF,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,+BAA+B,iBAAuB;wCACvF,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,2BAA2B,UAAgB;wCAC5E,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,sBAAsB,cAAoB;wCAC3E,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,WAAW,WAAiB,CACxD,CACV;gCACD,KAAI,CAAC,QAAQ,IAAI;oCACf,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,eAAe,EACtB,QAAQ,EAAE,qBAAqB;wCAE/B,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,UAAU,UAAgB;wCAC3D,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,WAAW,WAAiB,CACxD,CACV,CACA;4BACN,CAAC,eAAe,KAAK,yDAAe,CAAC,WAAW,IAAI,eAAe,KAAK,yDAAe,CAAC,UAAU,CAAC,IAAI;gCACpG,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,wBAA2B,CAClE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,gBAAgB,EACvB,QAAQ,EAAE,sBAAsB;wCAEhC,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,WAAW,UAAgB;wCAC5D,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,cAAc,aAAmB;wCAClE,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,YAAY,WAAiB,CACzD,CACN,CACR;4BACF,CAAC,eAAe,KAAK,yDAAe,CAAC,WAAW,CAAC,IAAI;gCAClD,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,0BAA6B,CACpE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAE,yBAAyB,EAAE,OAAO,EAAC,UAAU,EAAC,UAAU,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,+BAA+B,GAAI,CACtJ,CACL,CACR;4BACF,CAAC,eAAe,KAAK,yDAAe,CAAC,+BAA+B,IAAI,eAAe,KAAK,yDAAe,CAAC,2BAA2B,CAAC,IAAI;gCACzI,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAE,mBAAmB,EAAE,OAAO,EAAC,UAAU,EAAC,UAAU,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,QAAQ,EAAE,yBAAyB,GAAI,CACtI,CACL,CACR;4BACF,CAAC,eAAe,KAAK,yDAAe,CAAC,+BAA+B,CAAC,IAAI;gCACtE,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,iBAAoB,CAC3D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,YAAY,EAAE,kBAAkB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,wBAAwB,GAAI,CACpI,CACL,CACR;4BACF,CAAC,eAAe,KAAK,yDAAe,CAAC,oCAAoC,IAAI,eAAe,KAAK,yDAAe,CAAC,+BAA+B,CAAC,IAAI;gCAClJ,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,sBAAyB,CAChE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,sBAAsB,EAAE,QAAQ,EAAE,4BAA4B,GAAI,CAC/E,CACL;gCACN,sBAAsB,IAAI;oCACvB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;wCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;wCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;4CACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,YAAY,EAAE,mBAAmB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,yBAAyB,GAAI,CACvI,CACL,CACR;gCACF,CAAC,sBAAsB,IAAI;oCACxB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;wCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,sBAAyB,CAChE;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;wCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;4CACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,YAAY,EAAE,sBAAsB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,4BAA4B,GAAI,CAC7I,CACL,CACR,CACJ,CACA,CACa,CACX;gBAChB,KAAI,CAAC,yBAAyB,EAAE,CAClC,CACN,CAAC;QACN,CAAC,CAAC;QAEF,OAAO,UAAU,EAAE,CAAC;IACxB,CAAC;IAES,gDAAyB,GAAnC;QACI,OAAO,CACH,yGACG,CACN,CAAC;IACN,CAAC;IAEL,mBAAC;AAAD,CAAC,CA9jByC,iDAAQ,GA8jBjD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1iBkB;AAGU;AAGO;AACgB;AAEpD,IAAM,OAAO,GAAG,KAAK,CAAC;AAEtB;IAA4C,kCAAS;IAUjD,wBAAY,KAAY,EAAE,MAAuB,EAAE,MAAc,EAAE,IAAY;QAA/E,YACI,kBAAM,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,SAMrC;QAJG,KAAI,CAAC,GAAG,GAAG,IAAW,CAAC;QACvB,KAAI,CAAC,gBAAgB,GAAG,IAAW,CAAC;QACpC,KAAI,CAAC,wBAAwB,GAAG,EAAE,CAAC;QACnC,KAAI,CAAC,WAAW,GAAG,IAAW,CAAC;;IACnC,CAAC;IAES,6CAAoB,GAA9B;QACI,OAAO,IAAI,CAAC,gBAA8C,CAAC;IAC/D,CAAC;IAED,sBAAW,sCAAU;aAArB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;QACxC,CAAC;aAED,UAAsB,EAAU;YAC5B,IAAI,CAAC,SAAS,GAAG,gDAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;YAC1C,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;QACtC,CAAC;;;OALA;IAOD,sBAAW,0CAAc;aAAzB;YACI,OAAO,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;aAED,UAA0B,EAAW;YACjC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OANA;IAQD,sBAAW,yCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,qBAAqB,EAAE,CAAC;QACjC,CAAC;;;OALA;IAOD,sBAAW,2CAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAW;YAClC,IAAI,CAAC,oBAAoB,EAAE,CAAC,MAAM,GAAG,GAAG,CAAC;YACzC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC;YAC3D,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACrC,CAAC;;;OANA;IAQD,sBAAW,yCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,oBAAoB,EAAE,CAAC,IAAI,GAAG,GAAG,CAAC;QAC3C,CAAC;;;OALA;IAOD,sBAAW,+CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,oBAAoB,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC;QAClD,CAAC;;;OALA;IAOD,sBAAW,6CAAiB;aAA5B;YACI,OAAO,IAAI,CAAC,kBAAkB,CAAC;QACnC,CAAC;aAED,UAA6B,GAAW;YACpC,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;YAC9B,IAAI,CAAC,oBAAoB,EAAE,CAAC,QAAQ,GAAG,GAAG,CAAC;QAC/C,CAAC;;;OALA;IAOD,sBAAW,4CAAgB;aAA3B;YACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAClC,CAAC;aAED,UAA4B,GAAW;YACnC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;YAC7B,IAAI,CAAC,oBAAoB,EAAE,CAAC,gBAAgB,GAAG,GAAG,CAAC;QACvD,CAAC;;;OALA;IAOD,sBAAW,+CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,oBAAoB,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC;QAClD,CAAC;;;OALA;IAOD,sBAAW,8CAAkB;aAA7B;YACI,OAAO,IAAI,CAAC,mBAAmB,CAAC;QACpC,CAAC;aAED,UAA8B,IAAY;YACtC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAChC,IAAI,CAAC,oBAAoB,EAAE,CAAC,SAAS,GAAG,IAAI,CAAC;QACjD,CAAC;;;OALA;IAOD,sBAAW,kDAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAc;YAC5C,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;YACrC,IAAI,CAAC,oBAAoB,EAAE,CAAC,aAAa,GAAG,KAAK,CAAC;QACtD,CAAC;;;OALA;IAOD,sBAAW,+CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,oBAAoB,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC;QAClD,CAAC;;;OALA;IAOD,sBAAW,kDAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAa;YAC3C,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;YACrC,IAAI,CAAC,oBAAoB,EAAE,CAAC,aAAa,GAAG,KAAK,CAAC;QACtD,CAAC;;;OALA;IAOD,sBAAW,qDAAyB;aAApC;YACI,OAAO,IAAI,CAAC,0BAA0B,CAAC;QAC3C,CAAC;aAED,UAAqC,OAAe;YAChD,IAAI,CAAC,0BAA0B,GAAG,OAAO,CAAC;YAC1C,IAAI,CAAC,oBAAoB,EAAE,CAAC,gCAAgC,GAAG,OAAO,CAAC;QAC3E,CAAC;;;OALA;IAOD,sBAAW,0CAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OANA;IAQD,sBAAW,yCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OANA;IAQD,sBAAW,2CAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAY;YACnC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;YAE5B,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,GAAG,EAAE;gBAC1B,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;gBAC3B,IAAI,CAAC,WAAW,GAAG,IAAW,CAAC;aAClC;YAED,IAAI,GAAG,EAAE;gBACL,IAAI,CAAC,WAAW,GAAG,IAAI,oDAAU,EAAE,CAAC;gBACpC,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC;aACrC;YAED,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OAhBA;IAkBD,sBAAW,iDAAqB;aAAhC;YACI,OAAO,IAAI,CAAC,sBAAsB,CAAC;QACvC,CAAC;aAED,UAAiC,KAAc;YAC3C,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;YACpC,IAAI,CAAC,GAAG,CAAC,qBAAqB,GAAG,KAAK,CAAC;YACvC,IAAI,IAAI,CAAC,sBAAsB,EAAE;gBAC7B,aAAa;gBACb,IAAI,CAAC,GAAG,CAAC,yBAAyB,CAAC,gDAAM,CAAC,QAAQ,EAAE,EAAE,IAAI,CAAC,oBAAoB,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC,oBAAoB,EAAE,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC,UAAW,CAAC,CAAC;aAC7J;iBAAM;gBACH,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;gBAC3C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;gBAE1C,IAAM,OAAK,GAAG,IAAI,WAAW,CAAC,eAAe,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,kBAAkB,EAAE,EAAE,CAAC,CAAC;gBAEzF,MAAM,CAAC,aAAa,CAAC,OAAK,CAAC,CAAC;aAC/B;YACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OAjBA;IAmBS,wCAAe,GAAzB;QACI,IAAM,KAAK,GAAG,IAAI,CAAC,GAAU,CAAC;QAE9B,OAAO;YACH,KAAK,EAAE,IAAI,iDAAO,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;YAC7E,KAAK,EAAE,IAAI,iDAAO,CAAC,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;SAC9E;IACL,CAAC;IAES,sCAAa,GAAvB;QACI,aAAa;QACb,OAAO,IAAI,CAAC,oBAAoB,EAAE,CAAC,UAAU,CAAC;IAClD,CAAC;IAES,yCAAgB,GAA1B;QAAA,iBA4EC;QA3EG,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC,UAAC,IAAI;YACvC,IAAI,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,wBAAwB,GAAG,EAAE,CAAC;QAEnC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;YACxB,OAAO;SACV;QAED,IAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC5C,IAAM,SAAS,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAEvC,IAAI,CAAC,YAAY,IAAI,CAAC,SAAS,EAAE;YAC7B,OAAO;SACV;QAED,IAAM,YAAY,GAAG,gDAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAE9C,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAEnF,IAAM,KAAK,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC7D,IAAM,KAAK,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC7D,IAAM,KAAK,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC7D,IAAM,KAAK,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAE7D,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAEnF,IAAM,IAAI,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC5D,IAAM,IAAI,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC5D,IAAM,IAAI,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC5D,IAAM,IAAI,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAE5D,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACtI,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,UAAU,EAAG,EAAE,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACjI,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,EAAE,IAAI,CAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,EAAE,IAAI,CAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,EAAE,IAAI,CAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,EAAE,IAAI,CAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAEhH,IAAM,SAAS,GAAG,UAAC,IAAY,EAAE,KAAa,EAAE,SAAwB;YACpE,IAAI,KAAK,GAAG,IAAI,8CAAI,CAAC,IAAI,GAAG,OAAO,EAAE,KAAI,CAAC,KAAK,CAAC,EAC5C,GAAG,GAAG,IAAI,0DAAgB,CAAC,IAAI,GAAG,UAAU,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC;YAE9D,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC;YAErB,GAAG,CAAC,aAAa,GAAG,KAAK,CAAC;YAC1B,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC;YAChB,GAAG,CAAC,eAAe,GAAG,KAAK,CAAC;YAC5B,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC;YAE3B,IAAM,OAAO,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEnC,IAAM,UAAU,GAAG,IAAI,oDAAU,EAAE,CAAC;YAEpC,UAAU,CAAC,SAAS,GAAG,SAAS,CAAC;YACjC,UAAU,CAAC,OAAO,GAAG,OAAO,CAAC;YAE7B,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAE9B,KAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAC,CAAC;QAEF,SAAS,CAAC,MAAM,EAAI,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAK,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;QAC3J,SAAS,CAAC,KAAK,EAAK,IAAI,gDAAM,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAG,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAE,CAAC,CAAC;QAC/I,SAAS,CAAC,OAAO,EAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAK,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;QACrJ,SAAS,CAAC,MAAM,EAAI,IAAI,gDAAM,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAG,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;QACrJ,SAAS,CAAC,KAAK,EAAK,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAK,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;QACrJ,SAAS,CAAC,QAAQ,EAAE,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAG,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;IACzJ,CAAC;IAEM,kCAAS,GAAhB;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,0DAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAE3F,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACzB,CAAC;IAEY,mCAAU,GAAvB,UAAwB,KAAwB,EAAE,YAAoB,EAAE,MAAe;;;;;wBACnF,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;wBAC5C,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC;wBAE9B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;wBACtB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;wBAExC,IAAI,CAAC,GAAG,GAAG,IAAI,0DAAgB,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;wBAC3D,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;wBACvB,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC;wBAC5C,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC;wBAC3C,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;wBAEjC,MAAc,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;wBAE/B,IAAI,CAAC,OAAO,GAAG,8CAAK,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;wBAE9D,qBAAM,8CAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC;;wBAAvD,SAAuD,CAAC;wBAExD,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;wBAEtC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC;4BACxB,IAAI,CAAC,CAAC,IAAI,IAAI,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE;gCAAE,OAAO;6BAAE;4BAExE,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE;gCAAE,OAAO;6BAAE;4BAE5B,IAAM,GAAG,GAAG,CAAC,CAAC,QAA4B,CAAC;4BAE3C,GAAG,CAAC,YAAY,GAAG,IAAI,gDAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;4BAC1C,GAAG,CAAC,aAAa,GAAG,IAAI,gDAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;4BAC3C,GAAG,CAAC,YAAY,GAAG,YAAY,CAAC;4BAChC,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC;4BAC1B,GAAG,CAAC,eAAe,GAAG,KAAK,CAAC,eAAe,CAAC;4BAE5C,IAAI,CAAC,GAAG,CAAC,cAAc,EAAE;gCACrB,GAAG,CAAC,YAAY,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;6BAC1C;4BACD,gBAAgB;4BAEhB,CAAC,CAAC,cAAc,GAAG,IAAI,CAAC;4BAExB,IAAI,KAAK,CAAC,OAAO,IAAI,CAAC,EAAE;gCACpB,IAAI,MAAM,GAAG,gDAAM,CAAC,QAAQ,EAAE,CAAC;gCAC/B,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;gCACzC,MAAM,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gCACtC,CAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC;gCAC9C,CAAC,CAAC,mBAAmB,EAAE,CAAC;6BAC3B;wBACL,CAAC,CAAC,CAAC;wBAEH,IAAI,CAAC,qBAAqB,EAAE,CAAC;wBAE7B,sBAAO,IAAI,EAAC;;;;KACf;IAES,wCAAe,GAAzB;QACI,OAAO,IAAI,yDAAe,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IAC7D,CAAC;IAES,kDAAyB,GAAnC;QACI,aAAa;QACZ,IAAI,CAAC,eAAe,CAAC,QAA6B,CAAC,cAAc,GAAG,IAAI,CAAC,gBAAgB,KAAK,yDAAe,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAChL,CAAC;IAES,8CAAqB,GAA/B;QAAA,iBAiEC;QAhEG,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACvB,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC;YAChC,IAAI,CAAC,gBAAgB,GAAG,IAAW,CAAC;SACvC;QAED,IAAM,eAAe,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAE/C,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;QAExC,eAAe,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC;QAC3C,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC;QACvD,eAAe,CAAC,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACnD,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC/C,eAAe,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAC1D,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC;QACvD,eAAe,CAAC,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC;QACrD,eAAe,CAAC,aAAa,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAC7D,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC;QACvD,eAAe,CAAC,aAAa,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAC7D,eAAe,CAAC,gCAAgC,GAAG,IAAI,CAAC,0BAA0B,CAAC;QAEnF,IAAI,CAAC,yBAAyB,EAAE,CAAC;QAEhC,MAAc,CAAC,EAAE,GAAG,eAAe,CAAC;QAErC,aAAa;QACb,IAAM,UAAU,GAAG,eAAe,CAAC,UAAW,CAAC;QAE/C,IAAI,GAAG,GAAG,CAAC,EAAE,IAAI,GAAwB,EAAE,CAAC;QAC5C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC;YACxB,IAAI,CAAC,CAAC,IAAI,IAAI,QAAQ,EAAE;gBAAE,OAAO;aAAE;YACnC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;YACnB,IAAI,OAAO,EAAE;gBACT,IAAM,QAAQ,GAAI,CAAC,CAAC,QAA6B,CAAC,cAAc,CAAC;gBACjE,IAAI,QAAQ,EAAE;oBACV,2DAA2D;oBAC3D,CAAC,CAAC,QAAQ,GAAG,KAAI,CAAC,mBAAmB,EAAE,CAAC;oBACvC,CAAC,CAAC,QAA2B,CAAC,UAAU,CAAC,gBAAgB,EAAE,QAAmB,CAAC,CAAC;iBACpF;aACJ;YACD;;;;;eAKG;QACP,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,UAAC,CAAC;YACX,CAAC,CAAC,OAAO,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC;QAEH,IAAI,OAAO,EAAE;YACT,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,GAAG,CAAC;gBACpC,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;gBAChC,KAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC;oBACxB,IAAI,CAAC,CAAC,IAAI,IAAI,QAAQ,EAAE;wBAAE,OAAO;qBAAE;oBACnC,IAAI,CAAC,CAAC,QAAQ,YAAY,wDAAc,EAAE;wBACrC,CAAC,CAAC,QAA2B,CAAC,UAAU,CAAC,kBAAkB,EAAE,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;wBACnF,CAAC,CAAC,QAA2B,CAAC,QAAQ,CAAC,aAAa,EAAE,EAAE,GAAC,EAAE,GAAC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAC,GAAG,CAAC,CAAC,CAAC;wBAChF,CAAC,CAAC,QAA2B,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,GAAC,CAAC,GAAC,IAAI,CAAC,GAAG,CAAC,IAAI,GAAC,GAAG,CAAC,CAAC,CAAC;qBACnF;gBACL,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;SACN;IACL,CAAC;IAES,4CAAmB,GAA7B;QACI,gDAAM,CAAC,YAAY,CAAC,oBAAoB,CAAC,GAAE,ktCAiD1C,CAAC;QAEF,gDAAM,CAAC,YAAY,CAAC,sBAAsB,CAAC,GAAC,ypFA4E3C,CAAC;QAEF,IAAI,GAAG,GAAG,IAAI,wDAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE;YAC/C,MAAM,EAAE,QAAQ;YAChB,QAAQ,EAAE,QAAQ;SACjB,EACD;YACI,UAAU,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC;YAC9B,QAAQ,EAAE,CAAC,OAAO,EAAE,qBAAqB,EAAE,YAAY,EAAE,aAAa,EAAE,aAAa,EAAE,kBAAkB,CAAC;YAC1G,OAAO,EAAE,CAAC,iBAAiB,CAAC;SAC/B,CACJ,CAAC;QAEF,GAAG,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,gDAAM,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,CAAC,CAAC;QAC1D,GAAG,CAAC,UAAU,CAAC,aAAa,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACpD,GAAG,CAAC,QAAQ,CAAC,aAAa,EAAE,EAAE,CAAC,CAAC;QAChC,GAAG,CAAC,QAAQ,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;QAEhC,OAAO,GAAG,CAAC;IACf,CAAC;IAES,0CAAiB,GAA3B,UAA4B,QAAiB;QACzC,IAAI,YAAY,GAAG,IAAI,sDAAY,CAAC,MAAM,CAAC,CAAC;QAE5C,aAAa;QACb,IAAI,QAAQ,GAAG,IAAI,oDAAU,CAAC,UAAU,CAAC,CAAC;QAC1C,QAAQ,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;QAEpC,iBAAiB;QACjB,IAAI,QAAQ,GAAG,IAAI,wDAAc,CAAC,UAAU,CAAC,CAAC;QAC9C,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAC;QACzB,QAAQ,CAAC,WAAW,GAAG,CAAC,CAAC;QAEzB,aAAa;QACb,IAAI,KAAK,GAAG,IAAI,oDAAU,CAAC,OAAO,CAAC,CAAC;QACpC,KAAK,CAAC,gBAAgB,CAAC,kEAAwB,CAAC,KAAK,CAAC,CAAC;QAEvD,iBAAiB;QACjB,IAAI,aAAa,GAAG,IAAI,wDAAc,CAAC,gBAAgB,CAAC,CAAC;QACzD,aAAa,CAAC,WAAW,GAAG,CAAC,CAAC;QAC9B,aAAa,CAAC,WAAW,GAAG,CAAC,CAAC;QAE9B,sBAAsB;QACtB,IAAI,cAAc,GAAG,IAAI,6DAAmB,CAAC,gBAAgB,CAAC,CAAC;QAE/D,gBAAgB;QAChB,IAAI,UAAU,GAAG,IAAI,uDAAa,CAAC,aAAa,CAAC,CAAC;QAElD,aAAa;QACb,IAAI,cAAc,GAAG,IAAI,oDAAU,CAAC,iBAAiB,CAAC,CAAC;QACvD,cAAc,CAAC,gBAAgB,CAAC,kEAAwB,CAAC,cAAc,CAAC,CAAC;QAEzE,gBAAgB;QAChB,IAAI,YAAY,GAAG,IAAI,uDAAa,CAAC,cAAc,CAAC,CAAC;QAErD,WAAW;QACX,IAAI,GAAG,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE9B,WAAW;QACX,IAAI,CAAC,GAAG,IAAI,kDAAQ,CAAC,IAAI,CAAC,CAAC;QAE3B,WAAW;QACX,IAAI,GAAG,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE9B,gBAAgB;QAChB,IAAI,CAAC,GAAG,IAAI,uDAAa,CAAC,GAAG,CAAC,CAAC;QAE/B,aAAa;QACb,IAAI,SAAS,GAAG,IAAI,oDAAU,CAAC,YAAY,CAAC,CAAC;QAC7C,SAAS,CAAC,KAAK,GAAG,IAAI,iDAAO,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;QACzC,SAAS,CAAC,UAAU,GAAG,KAAK,CAAC;QAC7B,SAAS,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAErC,gBAAgB;QAChB,IAAI,QAAQ,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE7C,aAAa;QACb,IAAI,eAAe,GAAG,IAAI,oDAAU,CAAC,iBAAiB,CAAC,CAAC;QACxD,eAAe,CAAC,gBAAgB,CAAC,kEAAwB,CAAC,cAAc,CAAC,CAAC;QAE1E,aAAa;QACb,IAAI,KAAK,GAAG,IAAI,oDAAU,CAAC,OAAO,CAAC,CAAC;QAEpC,iBAAiB;QACjB,IAAI,GAAG,GAAG,IAAI,wDAAc,CAAC,KAAK,CAAC,CAAC;QAEpC,cAAc;QACd,IAAI,YAAY,GAAG,IAAI,qDAAW,CAAC,cAAc,CAAC,CAAC;QAEnD,cAAc;QACd,IAAI,MAAM,GAAG,IAAI,qDAAW,CAAC,QAAQ,CAAC,CAAC;QAEvC,aAAa;QACb,IAAI,SAAS,GAAG,IAAI,oDAAU,CAAC,YAAY,CAAC,CAAC;QAC7C,SAAS,CAAC,KAAK,GAAG,EAAE,CAAC;QACrB,SAAS,CAAC,GAAG,GAAG,CAAC,CAAC;QAClB,SAAS,CAAC,GAAG,GAAG,EAAE,CAAC;QACnB,SAAS,CAAC,UAAU,GAAG,CAAC,CAAC;QACzB,SAAS,CAAC,aAAa,GAAI,iEAAuB,CAAC,IAAI,CAAC;QAExD,gBAAgB;QAChB,IAAI,YAAY,GAAG,IAAI,uDAAa,CAAC,eAAe,CAAC,CAAC;QAEtD,gBAAgB;QAChB,IAAI,SAAS,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE9C,gBAAgB;QAChB,IAAI,CAAC,GAAG,IAAI,uDAAa,CAAC,IAAI,CAAC,CAAC;QAEhC,WAAW;QACX,IAAI,KAAK,GAAG,IAAI,kDAAQ,CAAC,OAAO,CAAC,CAAC;QAElC,gBAAgB;QAChB,IAAI,SAAS,GAAG,IAAI,uDAAa,CAAC,WAAW,CAAC,CAAC;QAE/C,gBAAgB;QAChB,IAAI,SAAS,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE9C,oBAAoB;QACpB,IAAI,IAAI,GAAG,IAAI,2DAAiB,CAAC,MAAM,CAAC,CAAC;QACzC,IAAI,CAAC,SAAS,GAAG,qEAA2B,CAAC,IAAI,CAAC;QAElD,WAAW;QACX,IAAI,GAAG,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE9B,aAAa;QACb,IAAI,EAAE,GAAG,IAAI,oDAAU,CAAC,KAAK,CAAC,CAAC;QAC/B,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC;QACb,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,UAAU,GAAG,CAAC,CAAC;QAClB,EAAE,CAAC,aAAa,GAAI,iEAAuB,CAAC,IAAI,CAAC;QAEjD,YAAY;QACZ,IAAI,IAAI,GAAG,IAAI,mDAAS,CAAC,MAAM,CAAC,CAAC;QAEjC,eAAe;QACf,IAAI,QAAQ,GAAG,IAAI,sDAAY,CAAC,SAAS,CAAC,CAAC;QAC3C,QAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC;QAC5B,QAAQ,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;QAC3B,QAAQ,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,CAAC;QAC3B,QAAQ,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;QAC1B,QAAQ,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;QAC1B,QAAQ,CAAC,OAAO,CAAC,IAAI,GAAG,CAAC,CAAC;QAC1B,QAAQ,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;QAC7B,QAAQ,CAAC,OAAO,CAAC,OAAO,GAAG,CAAC,CAAC;QAC7B,QAAQ,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;QAC5B,QAAQ,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC;QAC5B,QAAQ,CAAC,OAAO,CAAC,UAAU,GAAG,IAAI,CAAC;QAEnC,aAAa;QACb,IAAI,EAAE,GAAG,IAAI,oDAAU,CAAC,IAAI,CAAC,CAAC;QAC9B,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAExB,YAAY;QACZ,IAAI,kBAAkB,GAAG,IAAI,mDAAS,CAAC,oBAAoB,CAAC,CAAC;QAE7D,oBAAoB;QACpB,IAAI,YAAY,GAAG,IAAI,2DAAiB,CAAC,cAAc,CAAC,CAAC;QAEzD,aAAa;QACb,IAAI,QAAQ,GAAG,IAAI,oDAAU,CAAC,WAAW,CAAC,CAAC;QAC3C,QAAQ,CAAC,KAAK,GAAG,IAAI,gDAAM,CAAC,kBAAkB,EAAE,kBAAkB,EAAE,kBAAkB,CAAC,CAAC;QACxF,QAAQ,CAAC,UAAU,GAAG,KAAK,CAAC;QAC5B,QAAQ,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAEpC,aAAa;QACb,IAAI,EAAE,GAAG,IAAI,oDAAU,CAAC,KAAK,CAAC,CAAC;QAC/B,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC;QACb,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,UAAU,GAAG,CAAC,CAAC;QAClB,EAAE,CAAC,aAAa,GAAI,iEAAuB,CAAC,IAAI,CAAC;QAEjD,aAAa;QACb,IAAI,KAAK,GAAG,IAAI,oDAAU,CAAC,OAAO,CAAC,CAAC;QACpC,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;QAClB,KAAK,CAAC,OAAO,GAAG,CAAC,CAAC;QAElB,gBAAgB;QAChB,IAAI,QAAQ,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE7C,kBAAkB;QAClB,IAAI,EAAE,GAAG,IAAI,yDAAe,CAAC,IAAI,CAAC,CAAC;QAEnC,oBAAoB;QACpB,IAAI,GAAG,GAAG,IAAI,2DAAiB,CAAC,KAAK,CAAC,CAAC;QACvC,GAAG,CAAC,SAAS,GAAG,qEAA2B,CAAC,GAAG,CAAC;QAEhD,gBAAgB;QAChB,IAAI,SAAS,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE9C,aAAa;QACb,IAAI,SAAS,GAAG,IAAI,oDAAU,CAAC,WAAW,CAAC,CAAC;QAC5C,SAAS,CAAC,KAAK,GAAG,IAAI,CAAC;QACvB,SAAS,CAAC,GAAG,GAAG,CAAC,CAAC;QAClB,SAAS,CAAC,GAAG,GAAG,CAAC,CAAC;QAClB,SAAS,CAAC,UAAU,GAAG,CAAC,CAAC;QACzB,SAAS,CAAC,aAAa,GAAI,iEAAuB,CAAC,IAAI,CAAC;QAExD,aAAa;QACb,IAAI,EAAE,GAAG,IAAI,oDAAU,CAAC,KAAK,CAAC,CAAC;QAC/B,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC;QACb,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,UAAU,GAAG,CAAC,CAAC;QAClB,EAAE,CAAC,aAAa,GAAI,iEAAuB,CAAC,IAAI,CAAC;QAEjD,aAAa;QACb,IAAI,EAAE,GAAG,IAAI,oDAAU,CAAC,KAAK,CAAC,CAAC;QAC/B,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC;QACb,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,UAAU,GAAG,CAAC,CAAC;QAClB,EAAE,CAAC,aAAa,GAAI,iEAAuB,CAAC,IAAI,CAAC;QAEjD,cAAc;QACd,IAAI,OAAO,GAAG,IAAI,qDAAW,CAAC,QAAQ,CAAC,CAAC;QAExC,WAAW;QACX,IAAI,IAAI,GAAG,IAAI,kDAAQ,CAAC,MAAM,CAAC,CAAC;QAEhC,YAAY;QACZ,IAAI,KAAK,GAAG,IAAI,mDAAS,CAAC,OAAO,CAAC,CAAC;QAEnC,aAAa;QACb,IAAI,GAAG,GAAG,IAAI,oDAAU,CAAC,KAAK,CAAC,CAAC;QAChC,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;QACZ,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;QACZ,GAAG,CAAC,UAAU,GAAG,CAAC,CAAC;QACnB,GAAG,CAAC,aAAa,GAAI,iEAAuB,CAAC,IAAI,CAAC;QAElD,WAAW;QACX,IAAI,IAAI,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE/B,oBAAoB;QACpB,IAAI,KAAK,GAAG,IAAI,2DAAiB,CAAC,MAAM,CAAC,CAAC;QAC1C,KAAK,CAAC,SAAS,GAAG,qEAA2B,CAAC,IAAI,CAAC;QAEnD,cAAc;QACd,IAAI,MAAM,GAAG,IAAI,qDAAW,CAAC,QAAQ,CAAC,CAAC;QAEvC,gBAAgB;QAChB,IAAI,EAAE,GAAG,IAAI,uDAAa,CAAC,IAAI,CAAC,CAAC;QAEjC,oBAAoB;QACpB,IAAI,GAAG,GAAG,IAAI,2DAAiB,CAAC,KAAK,CAAC,CAAC;QACvC,GAAG,CAAC,SAAS,GAAG,qEAA2B,CAAC,IAAI,CAAC;QAEjD,WAAW;QACX,IAAI,IAAI,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE/B,aAAa;QACb,IAAI,GAAG,GAAG,IAAI,oDAAU,CAAC,KAAK,CAAC,CAAC;QAChC,GAAG,CAAC,KAAK,GAAG,CAAC,CAAC;QACd,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;QACZ,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC;QACZ,GAAG,CAAC,UAAU,GAAG,CAAC,CAAC;QACnB,GAAG,CAAC,aAAa,GAAI,iEAAuB,CAAC,IAAI,CAAC;QAElD,gBAAgB;QAChB,IAAI,SAAS,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE9C,WAAW;QACX,IAAI,IAAI,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE/B,YAAY;QACZ,IAAI,KAAK,GAAG,IAAI,mDAAS,CAAC,OAAO,CAAC,CAAC;QAEnC,aAAa;QACb,IAAI,EAAE,GAAG,IAAI,oDAAU,CAAC,KAAK,CAAC,CAAC;QAC/B,EAAE,CAAC,KAAK,GAAG,CAAC,CAAC;QACb,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,GAAG,GAAG,CAAC,CAAC;QACX,EAAE,CAAC,UAAU,GAAG,CAAC,CAAC;QAClB,EAAE,CAAC,aAAa,GAAI,iEAAuB,CAAC,IAAI,CAAC;QAEjD,WAAW;QACX,IAAI,IAAI,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE/B,oBAAoB;QACpB,IAAI,KAAK,GAAG,IAAI,2DAAiB,CAAC,MAAM,CAAC,CAAC;QAC1C,KAAK,CAAC,SAAS,GAAG,qEAA2B,CAAC,IAAI,CAAC;QAEnD,gBAAgB;QAChB,IAAI,SAAS,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE9C,gBAAgB;QAChB,IAAI,SAAS,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE9C,gBAAgB;QAChB,IAAI,SAAS,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE9C,WAAW;QACX,IAAI,IAAI,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE/B,oBAAoB;QACpB,IAAI,KAAK,GAAG,IAAI,2DAAiB,CAAC,MAAM,CAAC,CAAC;QAC1C,KAAK,CAAC,SAAS,GAAG,qEAA2B,CAAC,IAAI,CAAC;QAEnD,WAAW;QACX,IAAI,IAAI,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE/B,oBAAoB;QACpB,IAAI,KAAK,GAAG,IAAI,2DAAiB,CAAC,MAAM,CAAC,CAAC;QAC1C,KAAK,CAAC,SAAS,GAAG,qEAA2B,CAAC,IAAI,CAAC;QAEnD,gBAAgB;QAChB,IAAI,SAAS,GAAG,IAAI,uDAAa,CAAC,UAAU,CAAC,CAAC;QAE9C,WAAW;QACX,IAAI,IAAI,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE/B,oBAAoB;QACpB,IAAI,KAAK,GAAG,IAAI,2DAAiB,CAAC,MAAM,CAAC,CAAC;QAC1C,KAAK,CAAC,SAAS,GAAG,qEAA2B,CAAC,IAAI,CAAC;QAEnD,WAAW;QACX,IAAI,GAAG,GAAG,IAAI,kDAAQ,CAAC,KAAK,CAAC,CAAC;QAE9B,sBAAsB;QACtB,IAAI,cAAc,GAAG,IAAI,6DAAmB,CAAC,gBAAgB,CAAC,CAAC;QAE/D,iBAAiB;QACjB,IAAI,+BAA+B,GAAG,IAAI,wDAAc,CAAC,oCAAoC,CAAC,CAAC;QAC/F,+BAA+B,CAAC,WAAW,GAAG,CAAC,CAAC;QAChD,+BAA+B,CAAC,WAAW,GAAG,CAAC,CAAC;QAEhD,aAAa;QACb,IAAI,cAAc,GAAG,IAAI,oDAAU,CAAC,gBAAgB,CAAC,CAAC;QACtD,cAAc,CAAC,gBAAgB,CAAC,kEAAwB,CAAC,cAAc,CAAC,CAAC;QAEzE,oBAAoB;QACpB,IAAI,YAAY,GAAG,IAAI,2DAAiB,CAAC,cAAc,CAAC,CAAC;QAEzD,cAAc;QACd,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC;QAC3C,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;QAC3C,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,+BAA+B,CAAC,MAAM,CAAC,CAAC;QAClE,cAAc,CAAC,MAAM,CAAC,SAAS,CAAC,+BAA+B,CAAC,SAAS,CAAC,CAAC;QAC3E,+BAA+B,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;QACtE,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;QACjC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;QACjD,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,CAAE,CAAC;QAC7C,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QACpC,YAAY,CAAC,IAAI,CAAC,SAAS,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QACtD,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC1C,eAAe,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACjD,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACtC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAChD,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;QAChD,aAAa,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QACpD,cAAc,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;QACjD,cAAc,CAAC,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;QAClD,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACvC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAClC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC3C,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QAC3C,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QACzC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACxC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC5C,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACtC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC/B,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC9B,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC9B,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QACnC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACjC,cAAc,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACnD,cAAc,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QACpD,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACxC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QACnC,cAAc,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QACzC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAC7B,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAChC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAC7B,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QAC9C,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;QAC/C,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC9C,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAChC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC;QAC/B,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACrC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACtC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QACpC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACpC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACtC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACjC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC9B,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAClC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC;QAC9B,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;QAC/B,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;QAClC,MAAM,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACrC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACtC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAChC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACjC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACvC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAC3C,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QAChC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACzC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/B,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACtC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACrC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACxC,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC9C,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACrC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACxC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAChC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACtC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACjC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAChC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QACtC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAChC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAClC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAChC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACvC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC5C,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAC3C,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACnC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QACpC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QACrC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QACtC,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACpC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;QACzC,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QACvC,KAAK,CAAC,MAAM,CAAC,SAAS,CAAC,kBAAkB,CAAC,QAAQ,CAAC,CAAC;QACpD,kBAAkB,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAChD,YAAY,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;QAC9C,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACpC,SAAS,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QACvC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAChC,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAC/B,GAAG,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QACpC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAE3C,eAAe;QACf,YAAY,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC;QACzC,YAAY,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;QAC3C,YAAY,CAAC,KAAK,EAAE,CAAC;QAErB,6CAA6C;QAC7C,YAAY,CAAC,eAAe,GAAG,IAAI,CAAC;QAEpC,OAAO,YAAY,CAAC;IACxB,CAAC;IAEM,+BAAM,GAAb;QACI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QACrD,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QAEpB;;;;;;;WAOG;IACP,CAAC;IA3gCa,wBAAS,GAAW,UAAU,CAAC;IA6gCjD,qBAAC;CAAA,CA/gC2C,kDAAS,GA+gCpD;AA/gCoB,6EAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzDJ;AAYW;AAE1C;IAA+C,qCAAY;IAA3D;;IAaA,CAAC;IAXa,qDAAyB,GAAnC;QACI,IAAM,UAAU,GAAG;YACf,OAAO,CACH,yGACG,CACN,CAAC;QACN,CAAC,CAAC;QAEF,OAAO,UAAU,EAAE,CAAC;IACxB,CAAC;IAEL,wBAAC;AAAD,CAAC,CAb8C,qDAAY,GAa1D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXkB;AAE2B;AAY9C,aAAa;AACb;IAiTI,4BAAY,OAAe,EAAE,KAAmB,EAAE,WAAuB,EAAE,gBAA0B;QAAnD,6CAAuB;QA/N/D,qCAAgC,GAAY,KAAK,CAAC;QACpD,+CAA0C,GAA8B,IAAI,CAAC;QA+NjF,IAAI,WAAW,GAAG,CAAC,EAAE;YACjB,WAAW,GAAG,CAAC,CAAC;SACnB;QAED,IAAI,KAAK,CAAC,SAAS,EAAE,IAAI,+CAAK,CAAC,4BAA4B,EAAE;YACzD,OAAO,CAAC,KAAK,CAAC,iFAAiF,CAAC,CAAC;SACpG;QAED,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,cAAc,GAAG,kBAAkB,CAAC,WAAW,CAAC;QACrD,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,OAAO,GAAG,GAAG,CAAC;QACnB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QAChC,IAAI,CAAC,kCAAkC,GAAG,KAAK,CAAC;QAChD,IAAI,CAAC,0BAA0B,GAAG,IAAI,sDAAY,CAAC,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC/F,IAAI,CAAC,cAAc,GAAG,IAAI,YAAY,CAAC,WAAW,GAAG,EAAE,CAAC,CAAC;QACzD,IAAI,CAAC,SAAS,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC;QACxC,IAAI,CAAC,cAAc,GAAG,IAAI,KAAK,CAAC,WAAW,CAAC,CAAC;QAC7C,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QAEpB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;QAC1C,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAE/B,yDAAe,CAAC,6BAA6B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAE3D,IAAI,CAAC,+BAA+B,GAAG,KAAK,CAAC;QAE7C,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAChC,CAAC;IArUD,sBAAW,6CAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,KAAa;YAClC,IAAI,KAAK,KAAK,kBAAkB,CAAC,WAAW,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,KAAK,IAAI,IAAI,CAAC,YAAY,CAAC,EAAE;gBACvF,KAAK,GAAG,CAAC,CAAC;aACb;YACD,IAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAChC,CAAC;;;OAPA;IAWD,sBAAW,2CAAW;aAAtB;YACI,OAAO,IAAI,CAAC,YAAY,CAAC;QAC7B,CAAC;;;OAAA;IAID,sBAAW,sCAAM;aAAjB;YACI,OAAO,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;aAED,UAAkB,KAAa;YAC3B,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OALA;IASD,sBAAW,2CAAW;aAAtB;YACI,OAAO,IAAI,CAAC,YAAY,CAAC;QAC7B,CAAC;aAED,UAAuB,GAAW;YAC9B,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QAC5B,CAAC;;;OAJA;IAQD,sBAAW,2CAAW;aAAtB;YACI,OAAO,IAAI,CAAC,YAAY,CAAC;QAC7B,CAAC;aAED,UAAuB,GAAW;YAC9B,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QAC5B,CAAC;;;OAJA;IAQD,sBAAW,iDAAiB;aAA5B;YACI,OAAO,IAAI,CAAC,kBAAkB,CAAC;QACnC,CAAC;aAED,UAA6B,KAAc;YACvC,IAAI,CAAC,kBAAkB,GAAG,KAAK,CAAC;QACpC,CAAC;;;OAJA;IAQD,sBAAW,iEAAiC;aAA5C;YACI,OAAO,IAAI,CAAC,kCAAkC,CAAC;QACnD,CAAC;aAED,UAA6C,KAAc;YACvD,IAAI,CAAC,kCAAkC,GAAG,KAAK,CAAC;QACpD,CAAC;;;OAJA;IASD,sBAAW,+DAA+B;aAA1C;YACI,OAAO,IAAI,CAAC,gCAAgC,CAAC;QACjD,CAAC;aAED,UAA2C,MAAe;YACtD,IAAI,IAAI,CAAC,0CAA0C,IAAI,MAAM,EAAE;gBAC3D,IAAI,CAAC,MAAM,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;gBAC7F,IAAI,CAAC,0CAA0C,GAAG,IAAI,CAAC;aAC1D;YAED,IAAI,CAAC,IAAI,CAAC,0CAA0C,IAAI,CAAC,MAAM,EAAE;gBAC7D,IAAI,CAAC,0CAA0C,GAAG,IAAI,CAAC,MAAM,CAAC,wBAAwB,CAAC,GAAG,CAAC,IAAI,CAAC,iCAAiC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aACjJ;YAED,IAAI,CAAC,gCAAgC,GAAG,MAAM,CAAC;YAE/C,IAAI,MAAM,EAAE;gBACR,IAAI,CAAC,iCAAiC,EAAE,CAAC;aAC5C;QACL,CAAC;;;OAjBA;IAqBD,sBAAW,yDAAyB;aAApC;YACI,OAAO,IAAI,CAAC,0BAA0B,CAAC;QAC3C,CAAC;aAED,UAAqC,YAA0B;YAC3D,IAAI,CAAC,0BAA0B,GAAG,YAAY,CAAC;QACnD,CAAC;;;OAJA;IAQD,sBAAW,qCAAK;aAAhB;YACI,OAAO,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;aAED,UAAiB,GAAY;YACzB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;YAClB,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC;QAC1C,CAAC;;;OALA;IASD,sBAAW,uCAAO;aAAlB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;QAChI,CAAC;;;OAAA;IAID,sBAAW,0CAAU;aAArB;YACI,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;;;OAAA;IAED,sBAAW,oCAAI;aAAf;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC7I,CAAC;aAED,UAAgB,IAAY;YACxB,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,IAAI,GAAG,IAAI,EAA7B,CAA6B,CAAC,CAAC;QAClF,CAAC;;;OAJA;IAMD,sBAAW,0CAAU;aAArB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACnJ,CAAC;aAED,UAAsB,UAAkB;YACpC,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,UAAU,GAAG,UAAU,EAAzC,CAAyC,CAAC,CAAC;QAC9F,CAAC;;;OAJA;IAMD,sBAAW,6CAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACtJ,CAAC;aAED,UAAyB,KAAa;YAClC,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,aAAa,GAAG,KAAK,EAAvC,CAAuC,CAAC,CAAC;QAC5F,CAAC;;;OAJA;IAMD,sBAAW,yCAAS;aAApB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClJ,CAAC;aAED,UAAqB,KAAa;YAC9B,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,SAAS,GAAG,KAAK,EAAnC,CAAmC,CAAC,CAAC;QACxF,CAAC;;;OAJA;IAMD,sBAAW,0CAAU;aAArB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACnJ,CAAC;aAED,UAAsB,KAAa;YAC/B,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,UAAU,GAAG,KAAK,EAApC,CAAoC,CAAC,CAAC;QACzF,CAAC;;;OAJA;IAMD,sBAAW,6CAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,aAAa,CAAC,CAAC,CAAC,KAAK,CAAC;QACzJ,CAAC;aAED,UAAyB,KAAc;YACnC,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,aAAa,GAAG,KAAK,EAAvC,CAAuC,CAAC,CAAC;QAC5F,CAAC;;;OAJA;IAMD,sBAAW,0CAAU;aAArB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACnJ,CAAC;aAED,UAAsB,KAAa;YAC/B,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,UAAU,GAAG,KAAK,EAApC,CAAoC,CAAC,CAAC;QACzF,CAAC;;;OAJA;IAMD,sBAAW,sCAAM;aAAjB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAC/I,CAAC;aAED,UAAkB,KAAa;YAC3B,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,EAAhC,CAAgC,CAAC,CAAC;QACrF,CAAC;;;OAJA;IAMD,sBAAW,gDAAgB;aAA3B;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,gBAAgB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzJ,CAAC;aAED,UAA4B,gBAAwB;YAChD,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,gBAAgB,GAAG,gBAAgB,EAArD,CAAqD,CAAC,CAAC;QAC1G,CAAC;;;OAJA;IAMD,sBAAW,gEAAgC;aAA3C;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,gCAAgC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACzK,CAAC;aAED,UAA4C,gCAAwC;YAChF,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,gCAAgC,GAAG,gCAAgC,EAArF,CAAqF,CAAC,CAAC;QAC1I,CAAC;;;OAJA;IAMD,sBAAW,wCAAQ;aAAnB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACjJ,CAAC;aAED,UAAoB,KAAa;YAC7B,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,QAAQ,GAAG,KAAK,EAAlC,CAAkC,CAAC,CAAC;QACvF,CAAC;;;OAJA;IAMD,sBAAW,kDAAkB;aAA7B;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC,CAAC,KAAK,CAAC;QAC9J,CAAC;aAED,UAA8B,KAAc;YACxC,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,kBAAkB,GAAG,KAAK,EAA5C,CAA4C,CAAC,CAAC;QACjG,CAAC;;;OAJA;IAMD,sBAAW,kDAAkB;aAA7B;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC,CAAC,KAAK,CAAC;QAC9J,CAAC;aAED,UAA8B,KAAc;YACxC,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,kBAAkB,GAAG,KAAK,EAA5C,CAA4C,CAAC,CAAC;QACjG,CAAC;;;OAJA;IAMD,sBAAW,0CAAU;aAArB;YACI,aAAa;YACb,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC;QACtJ,CAAC;aAED,UAAsB,KAAc;YAChC,aAAa;YACb,IAAI,CAAC,kBAAkB,EAAE,CAAC,OAAO,CAAC,UAAC,OAAO,IAAK,cAAO,CAAC,SAAS,CAAC,UAAU,GAAG,KAAK,EAApC,CAAoC,CAAC,CAAC;QACzF,CAAC;;;OALA;IAOD,sBAAW,0CAAU;aAArB;YACI,OAAO,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC,CAAC,IAAI,CAAC;QACrJ,CAAC;;;OAAA;IAEM,yCAAY,GAAnB;QACI,OAAO,oBAAoB,CAAC;IAChC,CAAC;IAEM,4CAAe,GAAtB,UAAuB,IAAkB,EAAE,kBAAyB;;QAAzB,8DAAyB;QAChE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE5B,IAAI,kBAAkB,EAAE;YACpB,UAAI,CAAC,WAAW,EAAC,IAAI,oBAAI,IAAI,CAAC,cAAc,EAAE,GAAE;SACnD;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,+CAAkB,GAAzB,UAA0B,IAAkB,EAAE,kBAAyB;;QAAzB,8DAAyB;QACnE,IAAM,KAAK,GAAG,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAE7C,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YACd,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;SACrC;QAED,IAAI,kBAAkB,EAAE;;gBACpB,KAAkB,sBAAI,CAAC,WAAW,EAAE,6CAAE;oBAAjC,IAAI,KAAK;oBACV,IAAI,CAAC,kBAAkB,CAAM,KAAK,CAAC,CAAC;iBACvC;;;;;;;;;SACJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAES,+CAAkB,GAA5B,UAA6B,QAAwB;QAAxB,0CAAwB;QACjD,OAAQ,IAAI,CAAC,cAAc,KAAK,kBAAkB,CAAC,WAAW,IAAI,QAAQ,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YACrF,IAAI,CAAC,cAAc,IAAI,CAAC,IAAI,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;IACjI,CAAC;IAIM,qCAAQ,GAAf;QACI,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IA6CS,iDAAoB,GAA9B;QACI,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC;QACtC,IAAI,CAAC,cAAc,EAAE,CAAC;IAC1B,CAAC;IAES,2CAAc,GAAxB;QACI,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,YAAY,EAAE,EAAE,YAAY,EAAE;YACzE,IAAM,OAAO,GAAa;gBACtB,SAAS,EAAE,IAAI,0DAAY,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC;gBACvF,iBAAiB,EAAE,CAAC;gBACpB,aAAa,EAAE,CAAC;aACnB,CAAC;YAEF,OAAO,CAAC,SAAS,CAAC,OAAO,GAAG,OAAO,CAAC;YACpC,aAAa;YACb,OAAO,CAAC,SAAS,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;YAEhD,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAChC;QAED,IAAI,IAAI,CAAC,cAAc,KAAK,kBAAkB,CAAC,WAAW,IAAI,IAAI,CAAC,cAAc,IAAI,IAAI,CAAC,YAAY,EAAE;YACpG,IAAI,CAAC,cAAc,GAAG,CAAC,CAAC;SAC3B;QAED,IAAI,CAAC,gBAAgB,EAAE,CAAC;IAC5B,CAAC;IAEM,6CAAgB,GAAvB;QACI,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;QACtC,IAAI,CAAC,MAAM,EAAE;YACT,OAAO;SACV;QAED,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,EAClB,GAAG,GAAG,MAAM,CAAC,IAAI,EACjB,WAAW,GAAG,GAAG,GAAG,IAAI,CAAC;QAE/B,IAAM,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,YAAY,GAAG,WAAW,EAC7C,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAEpD,IAAM,KAAK,GAAG,IAAI,GAAG,IAAI,EACnB,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC;QAE1B,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,YAAY,EAAE;YAC7E,IAAM,CAAC,GAAG,CAAC,YAAY,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,EAC1C,GAAG,GAAG,IAAI,GAAG,CAAC,cAAK,EAAI,CAAC,EAAC,EACzB,OAAO,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC;YAEjC,IAAM,CAAC,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;YAEnD,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,iBAAiB,GAAG,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,aAAa,CAAC;YACzI,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,WAAW,CAAC;SACzE;IACL,CAAC;IAES,8DAAiC,GAA3C;QACI,IAAM,GAAG,GAAG,IAAI,iDAAO,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,EACvE,GAAG,GAAG,IAAI,iDAAO,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;QAE9E,KAAK,IAAI,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE;YACtE,IAAM,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,SAAS,CAAC,CAAC;YAEzC,IAAI,CAAC,IAAI,EAAE;gBACP,SAAS;aACZ;YAED,IAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,EACrC,WAAW,GAAG,YAAY,CAAC,WAAW,CAAC;YAE7C,GAAG,CAAC,eAAe,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;YAC9C,GAAG,CAAC,eAAe,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;SACjD;QAED,IAAI,CAAC,0BAA0B,CAAC,WAAW,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IAC1D,CAAC;IAED,sBAAW,0CAAU;aAArB;YACI,OAAO,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,CAAC,CAAC;QACtC,CAAC;;;OAAA;IAED,oCAAO,GAAP,UAAQ,OAAgB,EAAE,YAAqB;QAC3C,IAAI,KAAK,GAAG,IAAI,CAAC;QAEjB,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,IAAI,KAAK,EAAE,EAAE,YAAY,EAAE;YACtF,KAAK,GAAG,KAAK,IAAI,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,OAAO,CAAC,OAAO,EAAE,YAAY,CAAC,CAAC;SAC1F;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,0CAAa,GAAb;QACI,IAAM,OAAO,GAA+B,EAAE,CAAC;QAE/C,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,YAAY,EAAE;YAC7E,IAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,EACtC,GAAG,GAAG,OAAO,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC;YAE7C,IAAI,GAAG,EAAE;gBACL,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aACrB;SACJ;QAED,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,2CAAc,GAAd,UAAe,OAAwB,EAAE,UAAkB;QACvD,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAExB,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,CAAC,KAAK,CAAC,aAAa,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5E,OAAO;SACV;QAED,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,cAAc,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;QAEhE,OAAO,CAAC,WAAW,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;QACzC,OAAO,CAAC,WAAW,GAAG,UAAU,GAAG,cAAc,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC;QACvE,OAAO,CAAC,WAAW,GAAG,UAAU,GAAG,QAAQ,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC;IAC/D,CAAC;IAED,4CAAe,GAAf,UAAgB,UAAkB,EAAE,MAAc;QAC9C,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAE1B,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,CAAC,KAAK,CAAC,aAAa,IAAI,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;YAC5E,OAAO;SACV;QAED,IAAI,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC;QAChC,IAAI,CAAC,MAAM,EAAE;YACT,OAAO;SACV;QAED,IAAI,eAAe,GAAG,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC;QAClD,IAAI,UAAU,GAAG,eAAe,CAAC,YAAY,EAAE,CAAC;QAEhD,IAAI,CAAC,UAAU,EAAE;YACb,OAAO;SACV;QAED,IAAM,WAAW,GAAG,MAAM,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC;QAE9C,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,YAAY,EAAE;YAC7E,IAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;YAE7C,IAAI,MAAM,GAAG,OAAO,CAAC,SAAS,CAAC,kBAAkB,EAAE,CAAC;YAEpD,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,cAAc,EAAE,YAAY,GAAG,EAAE,CAAC,CAAC;YAE3D,IAAI,eAAe,CAAC,MAAM,KAAK,yDAAe,CAAC,UAAU,EAAE;gBACvD,MAAM,CAAC,sBAAsB,CAAC,eAAe,GAAG,UAAU,GAAG,GAAG,GAAG,YAAY,EAAE,OAAO,CAAC,SAAS,CAAC,wBAAwB,EAAE,CAAC,CAAC;aAClI;iBAAM;gBACH,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,wBAAwB,EAAG,CAAC;aAChF;YAED,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,GAAG,MAAM,CAAC,IAAI,GAAG,OAAO,CAAC,aAAa,GAAG,WAAW,CAAC;SACzF;QAED,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,EAAE;YACnB,MAAM,CAAC,WAAW,CAAC,aAAa,GAAG,UAAU,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;SACvE;QAED,MAAM,CAAC,MAAM,CAAC,aAAa,GAAG,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;QACjE,IAAI,eAAe,CAAC,MAAM,KAAK,yDAAe,CAAC,UAAU,EAAE;YACvD,MAAM,CAAC,eAAe,CAAC,eAAe,GAAG,UAAU,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC;SACxE;QACD,MAAM,CAAC,QAAQ,CAAC,eAAe,GAAG,UAAU,EAAE,IAAI,CAAC,cAAc,CAAC,CAAC;QAEnE,IAAI,eAAe,CAAC,MAAM,KAAK,yDAAe,CAAC,UAAU,EAAE;YACvD,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,aAAa,EAAE,eAAe,CAAC,WAAW,EAAE,EAAE,UAAU,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,CAAC,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,eAAe,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;SAC/L;aAAM,IAAI,eAAe,CAAC,MAAM,KAAK,yDAAe,CAAC,WAAW,EAAE;YAC/D,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,aAAa,EAAE,eAAe,CAAC,WAAW,EAAE,EAAE,CAAC,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,eAAe,CAAC,gCAAgC,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,eAAe,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;SAClP;aAAM;YACH,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,aAAa,EAAE,eAAe,CAAC,WAAW,EAAE,EAAE,eAAe,CAAC,SAAS,GAAG,UAAU,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,eAAe,CAAC,UAAU,EAAE,eAAe,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;SACvN;QAED,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,UAAU,CAAC,CAAC;IACpL,CAAC;IAED,qCAAQ,GAAR;QACI,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,YAAY,EAAE;YAC7E,aAAa;YACb,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC;SACrD;IACL,CAAC;IAED,6CAAgB,GAAhB,UAAiB,UAAiD,EAAE,OAA4C;QAC5G,OAAO;IACX,CAAC;IAED,kDAAqB,GAArB,UAAsB,OAA4C;QAC9D,OAAO;QACP,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;IAC7B,CAAC;IAED,sCAAS,GAAT;QACI,OAAO;IACX,CAAC;IAED,oCAAO,GAAP;QACI,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,YAAY,EAAE;YAC7E,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,SAAS,CAAC,OAAO,EAAE,CAAC;SACpD;QACD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,IAAI,CAAC,0CAA0C,EAAE;YACjD,IAAI,CAAC,MAAM,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;YAC7F,IAAI,CAAC,0CAA0C,GAAG,IAAI,CAAC;SAC1D;IACL,CAAC;IApiBsB,8BAAW,GAAG,CAAC,CAAC,CAAC;IACjB,4BAAS,GAAG,CAAC,CAAC;IACd,4BAAS,GAAG,CAAC,CAAC;IACd,4BAAS,GAAG,CAAC,CAAC;IACd,4BAAS,GAAG,CAAC,CAAC;IACd,4BAAS,GAAG,CAAC,CAAC;IACd,4BAAS,GAAG,CAAC,CAAC;IACd,4BAAS,GAAG,CAAC,CAAC;IACd,4BAAS,GAAG,CAAC,CAAC;IA8hBzC,yBAAC;CAAA;AAxiB8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzBZ;AAKnB,IAAM,KAAK,GAAG,iDAAO,CAAC,EAAE,EAAE,CAAC;AAC3B,IAAM,QAAQ,GAAG,iDAAO,CAAC,KAAK,EAAE,CAAC;AACjC,IAAM,OAAO,GAAG,iDAAO,CAAC,IAAI,EAAE,CAAC;AAE/B,IAAI,KAAK,GAAG,IAAI,iDAAO,EAAE,EACrB,KAAK,GAAG,IAAI,iDAAO,EAAE,EACrB,MAAM,GAAG,IAAI,gDAAM,EAAE,CAAC;AAE1B;IAAkC,gCAAe;IAkC7C,sBAAY,OAAe,EAAE,KAAmB,EAAE,gBAAyB,EAAE,MAA0B;QAAvG,YACI,kBAAM,OAAO,EAAE,KAAK,EAAE,gBAAgB,CAAC,SAoB1C;QAlBG,aAAa;QACb,KAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,MAAM,CAAC;QACtC,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,KAAI,CAAC,gBAAgB,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7C,KAAI,CAAC,gBAAgB,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE7C,KAAI,CAAC,yBAAyB,GAAG,EAAE,CAAC;QAEpC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,sBAAsB,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACjE,KAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,iDAAO,EAAE,CAAC,CAAC;SACtD;QAED,KAAI,CAAC,WAAW,GAAG,IAAI,iDAAO,EAAE,CAAC;QACjC,KAAI,CAAC,WAAW,GAAG,IAAI,iDAAO,EAAE,CAAC;QACjC,KAAI,CAAC,cAAc,GAAG,IAAI,iDAAO,EAAE,CAAC;QACpC,KAAI,CAAC,eAAe,GAAG,IAAI,iDAAO,EAAE,CAAC;QACrC,KAAI,CAAC,gBAAgB,GAAG,IAAI,iDAAO,EAAE,CAAC;;IAC1C,CAAC;IAxCD,sBAAW,yCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;;;OAAA;IAID,sBAAW,yCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;;;OAAA;IAkCD,sBAAW,oCAAU;aAArB;YACI,aAAa;YACb,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;;;OAAA;IAED,sBAAW,iCAAO;aAAlB;YACI,OAAO,IAAI,CAAC,QAAQ,CAAC;QACzB,CAAC;aAED,UAAmB,OAA2B;YAC1C,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QAC5B,CAAC;;;OAJA;IAMM,yCAAkB,GAAzB;QACI,aAAa;QACb,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,aAAa;QACb,IAAI,IAAI,CAAC,gBAAgB,KAAK,KAAK,CAAC,WAAW,EAAE,IAAI,IAAI,CAAC,sBAAsB,KAAK,IAAI,CAAC,iBAAiB,EAAE;YACzG,aAAa;YACb,OAAO,IAAI,CAAC,gBAAgB,CAAC;SAChC;QAED,aAAa;QACb,IAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QAC5C,aAAa;QACb,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAErD,aAAa;QACb,IAAI,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QACzC,aAAa;QACb,IAAI,IAAI,CAAC,MAAM,CAAC,6BAA6B,EAAE,EAAE;YAC7C,aAAa;YACb,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC;SACnD;QAED,aAAa;QACb,iDAAO,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,IAAI,CAAC,iBAAiB,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QACrG,aAAa;QACb,IAAI,IAAI,CAAC,GAAG,CAAC,iDAAO,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,EAAE,iDAAO,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,EAAE;YACnE,aAAa;YACb,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,eAAe,CAAC,CAAC,kDAAkD;SAC/F;QAED,aAAa;QACb,IAAI,IAAI,CAAC,MAAM,CAAC,2BAA2B,EAAE,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE;YACpM,aAAa;YACb,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAC7C,aAAa;YACb,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAErD,IAAI,CAAC,qBAAqB,EAAE,CAAC;SAChC;QAED,aAAa;QACb,OAAO,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAED,sDAAsD;IAC5C,kDAA2B,GAArC;QACI,aAAa;QACb,IAAI,CAAC,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE;YAC7C,OAAO;SACV;QAED,IAAM,aAAa,GAAG,IAAI,CAAC,QAAQ,CAAC,iBAAiB,EAC/C,SAAS,GAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC;QAE9C,aAAa;QACb,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,EAAE,CAAC,CAAC,mIAAmI;QAE7K,aAAa;QACb,IAAM,WAAW,GAAG,gDAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,uBAAuB,EAAE,CAAC,CAAC;QACtF,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,YAAY,CAAC,sBAAsB,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE;YAC/F,iDAAO,CAAC,yBAAyB,CAAC,YAAY,CAAC,sBAAsB,CAAC,WAAW,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC,CAAC;SACjJ;QAED,mEAAmE;QACnE,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,YAAY,CAAC,sBAAsB,CAAC,MAAM,GAAG,CAAC,EAAE,EAAE,WAAW,EAAE;YACnG,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,yBAAyB,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC,CAAC;YAC7H,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC,kBAAkB;YACrE,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC,iBAAiB;YAEhD,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC,CAAC;YAE9D,IAAI,CAAC,yBAAyB,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAChE,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;SACjE;IACL,CAAC;IAES,2CAAoB,GAA9B;QACI,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;QACtF,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;QACtF,IAAI,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE5C,aAAa;QACb,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;QAExC,IAAI,CAAC,MAAM,EAAE;YACT,OAAO;SACV;QAED,mDAAmD;QACnD,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,IAAI,CAAC,yBAAyB,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE;YAC1F,IAAI,CAAC,cAAc,CAAC,UAAU,CAAC,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC,CAAC;SAC/E;QAED,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC;QAE5E,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE;YAChC,4EAA4E;YAC5E,IAAI,YAAY,GAAG,CAAC,CAAC;YACrB,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,IAAI,CAAC,yBAAyB,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE;gBAC1F,IAAM,IAAI,GAAG,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,MAAM,EAAE,CAAC;gBAChG,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;aAC/C;YAED,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;YAEjD,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,YAAY,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;YAC1E,IAAI,CAAC,WAAW,CAAC,cAAc,CAAC,CAAC,YAAY,EAAE,CAAC,YAAY,EAAE,CAAC,YAAY,CAAC,CAAC;SAChF;aAAM;YACH,+CAA+C;YAC/C,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,iCAAiC,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;YAErG,IAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC;YAE3C,aAAa;YACb,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC,kBAAkB;YAE7E,gDAAM,CAAC,aAAa,CAAC,cAAc,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,qBAAqB;YAEjF,+CAA+C;YAC/C,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,IAAI,CAAC,yBAAyB,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE;gBAC1F,iDAAO,CAAC,yBAAyB,CAAC,IAAI,CAAC,yBAAyB,CAAC,WAAW,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;gBAE9F,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;gBACxC,IAAI,CAAC,WAAW,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;aAC3C;SACJ;QAED,OAAO;IACX,CAAC;IAES,4CAAqB,GAA/B;QACI,aAAa;QACb,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;QAExC,IAAI,CAAC,MAAM,EAAE;YACT,OAAO;SACV;QAED,IAAI,CAAC,2BAA2B,EAAE,CAAC;QAEnC,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAE5B,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAEvE,oCAAoC;QACpC,aAAa;QACb,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAEpG,+DAA+D;QAC/D,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,iBAAiB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,iCAAiC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;QAExI,aAAa;QACb,gDAAM,CAAC,aAAa,CAAC,IAAI,CAAC,gBAAgB,EAAE,IAAI,CAAC,cAAc,EAAE,KAAK,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;QAE1F,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC;QAE5C,+EAA+E;QAC/E,IAAM,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,yBAAyB,CAAC;QAE5D,aAAa;QACb,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QAEtC,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;QAE/D,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE;YAC1B,uGAAuG;YACvG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;SAClE;aAAM;YACH,qIAAqI;YACrI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;SAClE;QAED,aAAa;QACb,IAAI,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE;YAClC,aAAa;YACb,gDAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;SACpJ;aAAM;YACH,aAAa;YACb,gDAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;SACpJ;QAED,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;QACxE,IAAI,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;QAExE,aAAa;QACb,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAE9E,IAAI,IAAI,CAAC,OAAO,CAAC,iBAAiB,EAAE;YAChC,mFAAmF;YACnF,uCAAuC;YACvC,aAAa;YACb,iDAAO,CAAC,yBAAyB,CAAC,OAAO,EAAE,IAAI,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC,CAAC,uBAAuB;YACjG,aAAa;YACb,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;YAEtC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,wBAAwB;YAC7G,aAAa;YACb,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,sBAAsB;YAEpF,gDAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;YAEvD,aAAa;YACb,IAAI,CAAC,iBAAiB,CAAC,aAAa,CAAC,MAAM,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;YACrE,aAAa;YACb,IAAI,CAAC,WAAW,CAAC,aAAa,CAAC,IAAI,CAAC,iBAAiB,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;SACjF;IACL,CAAC;IAlRyB,mCAAsB,GAAG;QAC/C,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;KAChC,CAAC;IA0QN,mBAAC;CAAA,CArRiC,yDAAe,GAqRhD;AArRwB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACXN;AAE+B;AAGd;AACU;AACtB;AAExB;IAAuC,6BAAM;IAKzC,mBAAY,MAAc,EAAE,MAAyB;QAArD,YACI,kBAAM,MAAM,EAAE,MAAM,CAAC,SAmBxB;QAjBG,KAAI,CAAC,OAAO,GAAG,IAAI,iDAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC/C,kDAAkD;QAC1C,KAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;QACzB,KAAI,CAAC,aAAa,GAAG,IAAI,gDAAM,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAC/C,KAAI,CAAC,WAAW,GAAG,IAAI,gDAAM,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;QAE5D,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,uDAAc,CAAC,CAAC;QAC1C,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,4CAAG,CAAC,CAAC;QAE/B,KAAI,CAAC,SAAS,GAAG,qDAAa,CAAC,MAAM,CAAC;QACtC,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,KAAI,CAAC,IAAI,GAAG,IAAI,kDAAS,CAAC,iBAAiB,EAAE,KAAI,CAAC,OAAO,EAAE,KAAI,CAAC,CAAC;QAEjE,IAAI,KAAK,GAAG,MAAM,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QAEnI,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;IACxC,CAAC;IAES,0BAAM,GAAhB;QAAA,iBAKC;QAJG,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YACtC,qDAAW,CAAC,iBAAiB,GAAG,KAAK,CAAC;YACtC,KAAI,CAAC,SAAS,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,6BAAS,GAAhB;QACI,IAAI,CAAC,IAAK,CAAC,MAAM,GAAG,GAAG,CAAC;QACxB,IAAI,CAAC,IAAK,CAAC,SAAS,EAAE,CAAC;IAC3B,CAAC;IAEY,kCAAc,GAA3B;;;;;gBACI,IAAI,CAAC,2BAA2B,EAAE,CAAC;gBAE/B,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,EAAE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,SAAU,CAAE,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,CAAiB,EACvH,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;gBAEpB,MAAM,GAAI,IAAI,CAAC,IAAmB,CAAC,MAAM,CAAE,IAAI,CAAC,IAAkB,CAAC,aAAa,CAAC,CAAC;gBAExF,KAAK,CAAC,KAAK,GAAI,IAAI,CAAC,IAAkB,CAAC,aAAa,CAAC;gBACrD,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;gBAEvB,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;gBACjD,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;gBAE/C,sBAAO,KAAK,CAAC,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC;wBAC3E,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;wBACxB,KAAK,CAAC,SAAS,EAAE,CAAC;wBAClB,KAAI,CAAC,aAAa,EAAE,CAAC;wBACrB,KAAI,CAAC,yBAAyB,EAAE,CAAC;oBACrC,CAAC,CAAC,EAAC;;;KACN;IAEM,0BAAM,GAAb;QACI,iBAAM,MAAM,WAAE,CAAC;QAEf,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,OAAO,EAAE,GAAG,MAAM,CAAC,CAAC;IACnE,CAAC;IAES,wCAAoB,GAA9B,UAA+B,cAAuB;QAC5C,oFAA4D,EAA3D,aAAK,EAAE,cAAoD,CAAC;QAEnE,KAAK,CAAC,YAAY,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACzC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;QAEpC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC;QAChC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;QACnB,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;QAElB,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IAC3B,CAAC;IAEL,gBAAC;AAAD,CAAC,CAhFsC,+CAAM,GAgF5C;;AAED,+CAAM,CAAC,mBAAmB,CAAC,KAAK,EAAE;IAC9B,aAAa,EAAE,8DAA8D;IAC7E,aAAa,EAAE,EAAE;IACjB,OAAO,EAAE,SAAS;CACrB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3F2C;AAChB;AACe;AACuB;AAEpE;IAAiC,uBAAc;IAQ3C,aAAY,KAAY,EAAE,MAAuB,EAAE,MAAc,EAAE,IAAY;QAA/E,YACI,kBAAM,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,SAsBrC;QA3BO,aAAO,GAAW,CAAC,CAAC,CAAC;QACrB,aAAO,GAAW,CAAC,CAAC,CAAC;QAMzB,KAAI,CAAC,gBAAgB,GAAG,gFAAuB,CAAC,UAAU,CAAC;QAE1D,MAAc,CAAC,GAAG,GAAG,KAAI,CAAC;QAE3B,KAAI,CAAC,aAAa,GAAG,IAAI,0DAAY,CAAC,KAAI,CAAC,MAAM,CAAC,CAAC;QACnD,KAAI,CAAC,aAAa,CAAC,yBAAyB,CAAC,GAAG,CAAC,UAAC,MAAmC;YACjF,IAAI,GAAG,GAAG,MAAM,CAAC,GAAG,EAAE,GAAG,GAAG,MAAM,CAAC,GAAG,CAAC;YACvC,IAAI,GAAG,IAAI,GAAG,EAAE;gBACZ,GAAG,GAAG,CAAC,CAAC;gBACR,GAAG,GAAG,CAAC,CAAC;aACX;YACD,IAAI,GAAG,IAAI,KAAI,CAAC,OAAO,IAAI,GAAG,IAAI,KAAI,CAAC,OAAO,EAAE;gBAC5C,KAAI,CAAC,eAAe,EAAE,CAAC,iBAAiB,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;gBACnD,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC;gBACnB,KAAI,CAAC,OAAO,GAAG,GAAG,CAAC;gBACnB,wBAAwB;aAC3B;QACL,CAAC,CAAC,CAAC;QAEH,KAAI,CAAC,aAAa,CAAC,gBAAgB,EAAE,CAAC;;IAC1C,CAAC;IAES,6BAAe,GAAzB;QACI,OAAQ,IAAI,CAAC,gBAAuD,CAAC;IACzE,CAAC;IAED,sBAAW,gCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAW;YAClC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;YACvB,IAAM,GAAG,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC;YAC9C,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,yBAAyB;YACpF,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,GAAG,GAAG,CAAC,CAAC,qCAAqC;QAClF,CAAC;;;OARA;IAUD,sBAAW,+BAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;YACvB,IAAM,GAAG,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC;YAC9C,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,CAAC,yBAAyB;YACpF,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,GAAG,GAAG,CAAC,CAAC,qCAAqC;YAC9E,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC;YAExD,IAAM,KAAK,GAAG,IAAI,WAAW,CAAC,eAAe,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,eAAe,EAAE,EAAE,CAAC,CAAC;YACtF,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;;;OAZA;IAcD,sBAAW,+BAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,eAAe,EAAE,CAAC,WAAW,GAAG,GAAG,CAAC;QAC7C,CAAC;;;OALA;IAOD,sBAAW,iCAAgB;aAA3B;YACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAClC,CAAC;aAED,UAA4B,GAAW;YACnC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;YAE7B,IAAI,CAAC,yBAAyB,EAAE,CAAC;YACjC,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OAPA;IASD,sBAAW,qCAAoB;aAA/B;YACI,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACtC,CAAC;aAED,UAAgC,GAAY;YACxC,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;YACjC,IAAI,CAAC,eAAe,EAAE,CAAC,KAAK,GAAG,GAAG,CAAC;QACvC,CAAC;;;OALA;IAOD,sBAAW,qCAAoB;aAA/B;YACI,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACtC,CAAC;aAED,UAAgC,GAAY;YACxC,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;YACjC,IAAI,CAAC,eAAe,EAAE,CAAC,iBAAiB,GAAG,GAAG,CAAC;YAC/C,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QAC7D,CAAC;;;OANA;IAQD,sBAAW,8BAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAY;YACjC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,GAAG,GAAG,CAAC;YACxC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QAC7D,CAAC;;;OANA;IAQD,sBAAW,0BAAS;aAApB;YACI,OAAO,IAAI,CAAC,UAAU,CAAC;QAC3B,CAAC;aAED,UAAqB,EAAU;YAC3B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;YACrB,IAAI,CAAC,eAAe,EAAE,CAAC,MAAM,GAAG,EAAE,CAAC;QACvC,CAAC;;;OALA;IAOD,sBAAW,wCAAuB;aAAlC;YACI,OAAO,IAAI,CAAC,wBAAwB,CAAC;QACzC,CAAC;aAED,UAAmC,IAAY;YAC3C,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;YACrC,IAAI,CAAC,eAAe,EAAE,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACzD,CAAC;;;OALA;IAOD,sBAAW,oCAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,GAAW;YACtC,IAAI,CAAC,oBAAoB,GAAG,GAAG,CAAC;YAChC,IAAI,CAAC,eAAe,EAAE,CAAC,gBAAgB,GAAG,GAAG,CAAC;QAClD,CAAC;;;OALA;IAOD,sBAAW,8BAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,IAAY;YACjC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAC3B,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC;YACzC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,UAAU,CAAC;YAExD,IAAM,KAAK,GAAG,IAAI,WAAW,CAAC,eAAe,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,eAAe,EAAE,EAAE,CAAC,CAAC;YACtF,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAChC,CAAC;;;OATA;IAWD,sBAAW,uCAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAc;YAC5C,IAAI,IAAI,CAAC,uBAAuB,KAAK,KAAK,EAAE;gBACxC,OAAO;aACV;YAED,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;YAErC,IAAI,CAAC,IAAI,CAAC,uBAAuB,EAAE;gBAC/B,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjB,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;gBACjB,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,CAAC;gBAChC,IAAI,CAAC,eAAe,EAAE,CAAC,iBAAiB,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;aAClD;iBAAM;gBACH,IAAI,CAAC,aAAa,CAAC,QAAQ,EAAE,CAAC;aACjC;QACL,CAAC;;;OAjBA;IAmBS,6BAAe,GAAzB;QACI,IAAM,GAAG,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,CAAC,EACzE,GAAG,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAEhF,OAAO;YACH,KAAK,EAAE,GAAI;YACX,KAAK,EAAE,GAAI;SACd;IACL,CAAC;IAES,2BAAa,GAAvB;QACI,OAAO,IAAI,CAAC,eAAe,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;IAC/E,CAAC;IAEM,uBAAS,GAAhB;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,+CAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAEhF,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACzB,CAAC;IAES,6BAAe,GAAzB;QACI,IAAM,SAAS,GAAG,IAAI,gFAAuB,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;QAE5E,SAAS,CAAC,WAAW,GAAG,IAAI,CAAC,eAAe,CAAC;QAE7C,OAAO,SAAuC,CAAC;IACnD,CAAC;IAES,uCAAyB,GAAnC;QACK,IAAI,CAAC,eAAe,CAAC,QAA6B,CAAC,cAAc,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC,YAAY,EAAE,CAAC;IAC/G,CAAC;IAES,mCAAqB,GAA/B;QACI,iBAAM,qBAAqB,WAAE,CAAC;QAE9B,IAAM,eAAe,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAE/C,eAAe,CAAC,iBAAiB,GAAG,IAAI,CAAC,qBAAqB,CAAC;QAC/D,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC;QACjD,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC;QACzC,eAAe,CAAC,KAAK,GAAG,IAAI,CAAC,qBAAqB;QAClD,eAAe,CAAC,sBAAsB,GAAG,IAAI,CAAC,wBAAwB,CAAC;QACvE,eAAe,CAAC,gBAAgB,GAAG,IAAI,CAAC,oBAAoB,CAAC;QAC7D,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC;QACjD,eAAe,CAAC,+BAA+B,GAAG,IAAI,CAAC;QAEvD,IAAI,CAAC,yBAAyB,EAAE,CAAC;IACrC,CAAC;IA5Na,aAAS,GAAW,KAAK,CAAC;IA8N5C,UAAC;CAAA,CAhOgC,uDAAc,GAgO9C;AAhOoB,kEAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjBO;AAMW;AAI1C;IAAoC,0BAAY;IAE5C,gBAAY,IAAY,EAAE,MAAc,EAAE,SAAiB,EAAE,MAAoB;QAAjF,YACI,kBAAM,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,CAAC,SAKzC;QAHG,KAAI,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACjC,KAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,KAAI,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC;;IACjC,CAAC;IAES,0CAAyB,GAAnC;QACI,IAAM,UAAU,GAAG;YAEf,OAAO,CACH,yGACG,CACN,CAAC;QACN,CAAC,CAAC;QAEF,OAAO,UAAU,EAAE,CAAC;IACxB,CAAC;IAEL,aAAC;AAAD,CAAC,CAtBmC,qDAAY,GAsB/C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BkB;AAE6B;AAEhD;IAAkC,gCAAa;IAK3C,sBAAY,MAAc;eACtB,kBAAM,MAAM,CAAC;IACjB,CAAC;IAEM,uCAAgB,GAAvB,UAAwB,aAA6C,EAAE,IAA+C,EAAE,uBAA8B;QAA9H,oDAA6C;QAAE,8BAAe,mDAAS,CAAC,sBAAsB;QAAE,wEAA8B;QAClJ,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QAEtC,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,OAAO,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAEnD,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;YAC9B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC9B;QAED,IAAI,aAAa,KAAK,IAAI,EAAE;YACxB,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE;gBACvB,KAAK,CAAC,cAAc,GAAG,EAAE,CAAC;aAC7B;YAED,aAAa,GAAG,IAAI,CAAC,cAAc,GAAG,IAAI,uDAAa,CAAC,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;YAE1F,aAAa,CAAC,WAAW,EAAE,CAAC,kBAAkB,CAAC,mDAAS,CAAC,uBAAuB,CAAC,CAAC;YAClF,aAAa,CAAC,OAAO,GAAG,KAAK,CAAC;YAE9B,IAAI,CAAC,gBAAgB,GAAG,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC;YAEnD,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,gBAAgB,CAAC,GAAG,aAAa,CAAC;SAC/D;QAED,iBAAM,gBAAgB,YAAC,aAAa,CAAC,WAAW,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,uBAAuB,CAAC,CAAC;IAC7F,CAAC;IAEM,+BAAQ,GAAf;QACI,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,IAAI,CAAC,cAAc,CAAC,OAAO,GAAG,IAAI,CAAC;SACtC;QAED,iBAAM,QAAQ,WAAE,CAAC;IACrB,CAAC;IAEM,iCAAU,GAAjB;QACI,iBAAM,UAAU,WAAE,CAAC;QAEnB,IAAI,IAAI,CAAC,cAAc,EAAE;YACrB,IAAI,CAAC,cAAc,CAAC,OAAO,GAAG,KAAK,CAAC;SACvC;IACL,CAAC;IAEM,8BAAO,GAAd,UAAe,UAAiB;QAAjB,8CAAiB;;QAC5B,iBAAM,OAAO,YAAC,UAAU,CAAC,CAAC;QAE1B,IAAI,IAAI,CAAC,cAAc,IAAI,UAAU,EAAE;YACnC,cAAO,IAAI,CAAC,cAAc,CAAC,WAAW,EAAE,CAAC,QAAQ,EAAE,0CAAE,cAAc,CAAC,IAAI,CAAC,gBAAgB,EAAC,CAAC;YAE3F,IAAI,CAAC,cAAc,CAAC,OAAO,EAAE,CAAC;YAC9B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;SAC9B;IACL,CAAC;IAEL,mBAAC;AAAD,CAAC,CAhEiC,4DAAa,GAgE9C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzE8B;AAOJ;AAMR;AAEc;AAqBjC;IAAuC,6BAAO;IAU1C,mBAAY,IAAY,EAAE,MAAc,EAAE,MAAc;QAAxD,YACI,kBAAM,IAAI,EAAE,MAAM,EAAE,MAAM,CAAC,SAoE9B;QAlEG,KAAI,CAAC,cAAc,GAAG,CAAC,CAAC;QACxB,KAAI,CAAC,MAAM,GAAG;YACV;gBACI,OAAO,EAAE,aAAa;gBACtB,MAAM,EAAE,4BAA4B;gBACpC,MAAM,EAAE,gBAAgB;gBACxB,iBAAiB,EAAE,KAAK;gBACxB,QAAQ,EAAE;oBACN,UAAU,EAAE,IAAI,iDAAO,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;oBACjC,QAAQ,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;iBAKjC;gBACD,SAAS,EAAE,GAAG;gBACd,UAAU,EAAE,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;gBAC/B,OAAO,EAAE;oBACL,WAAW,EAAE,CAAC,EAAE;oBAChB,UAAU,EAAE,GAAG;iBAClB;aACJ;YACD;gBACI,OAAO,EAAE,OAAO;gBAChB,MAAM,EAAE,uBAAuB;gBAC/B,MAAM,EAAE,WAAW;gBACnB,iBAAiB,EAAE,IAAI;gBACvB,QAAQ,EAAE;oBACN,UAAU,EAAE,IAAI,iDAAO,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;oBACjC,QAAQ,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;iBACjC;gBACD,SAAS,EAAE,KAAK;gBAChB,UAAU,EAAE,IAAI,gDAAM,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;gBACnC,OAAO,EAAE;oBACL,WAAW,EAAE,CAAC,EAAE;oBAChB,UAAU,EAAE,GAAG;iBAClB;aACJ;;;;;;;;;;;eAWE;YACH;gBACI,OAAO,EAAE,SAAS;gBAClB,MAAM,EAAE,yBAAyB;gBACjC,MAAM,EAAE,aAAa;gBACrB,iBAAiB,EAAE,IAAI;gBACvB,QAAQ,EAAE;oBACN,UAAU,EAAE,IAAI,iDAAO,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC;oBACjC,QAAQ,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;iBACjC;gBACD,SAAS,EAAE,IAAI;gBACf,UAAU,EAAE,IAAI,gDAAM,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC;gBACnC,OAAO,EAAE;oBACL,WAAW,EAAE,CAAC,EAAE;oBAChB,UAAU,EAAE,GAAG;iBAClB;aACJ;SACJ,CAAC;;IACN,CAAC;IAzED,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;;;OAAA;IAyES,6CAAyB,GAAnC;QAAA,iBA8BC;QA7BG,IAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAC5B,uFAAuD,EAAtD,aAAK,EAAE,gBAA+C,CAAC;QAE9D,IAAM,WAAW,GAAG,UAAC,KAAuE,EAAE,KAAsB;YAChH,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;YACnD,QAAQ,CAAC,KAAI,CAAC,cAAc,CAAC,CAAC;QAClC,CAAC,CAAC;QAEF,OAAO,CACH,oDAAC,8CAAc;YACX,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gBACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa,YAAe,CACnD;YACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gBACZ,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,EAAE,EAAC,OAAO,EACV,KAAK,EAAE,KAAK,EACZ,QAAQ,EAAE,WAAW,IAEnB,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,UAAC,KAAU,EAAE,GAAW;oBACtC,OAAO,CACH,oDAAC,0DAAQ,IAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,GAAG,IAAG,KAAK,CAAC,KAAK,CAAY,CAC3D,CAAC;gBACN,CAAC,CAAC,CACG,CACN,CACM,CACpB,CAAC;IACN,CAAC;IAEL,gBAAC;AAAD,CAAC,CAjHsC,gDAAO,GAiH7C;;;;;;;;;;;;;;ACrJD;AAAA;AAAA;AAAA;AAUmB;AAEnB;IAcI,uBAAY,MAAc;QAZ1B;;WAEG;QACI,8BAAyB,GAAG,IAAI,oDAAU,EAAgC,CAAC;QAOxE,6BAAwB,GAAY,IAAI,CAAC;QAG/C,aAAa,CAAC,cAAc,EAAE,CAAC;QAE/B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,mBAAmB,GAAG,IAAI,4DAAkB,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC;IACzE,CAAC;IAED,sBAAW,wCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;;;OAAA;IAEM,wCAAgB,GAAvB,UAAwB,aAAkC,EAAE,UAAmB,EAAE,IAA+C,EAAE,uBAA8B;QAAhK,iBAoGC;QApGgF,8BAAe,mDAAS,CAAC,sBAAsB;QAAE,wEAA8B;QAC5J,IAAI,aAAa,KAAK,IAAI,CAAC,cAAc,EAAE;YACvC,OAAO;SACV;QAED,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAEpB,IAAI,CAAC,cAAc,GAAG,aAAa,CAAC;QACpC,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,wBAAwB,GAAG,uBAAuB,CAAC;QAExD,IAAM,KAAK,GAAG,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;QAEtC,wBAAwB;QACxB,IAAI,gBAAgB,GAAG,IAAI,qDAAW,CAClC,yBAAyB,EACzB,eAAe,EAAG,SAAS;QAC3B,CAAC,SAAS,CAAC,EACX,CAAC,eAAe,CAAC,EAAE,WAAW;QAC9B,GAAG,EAAG,UAAU;QAChB,IAAI,EAAE,SAAS;QACf,mDAAS,CAAC,uBAAuB,EAAE,WAAW;QAC9C,KAAK,CAAC,SAAS,EAAE,EAAE,SAAS;QAC5B,KAAK,EAAE,WAAW;QAClB,iBAAiB,GAAG,CAAC,UAAU,CAAC,CAAC,CAAC,uBAAuB,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,UAAU;QAC3E,IAAI,EACJ,SAAS,EACT,SAAS,EACT,SAAS,EACT,mDAAS,CAAC,gBAAgB,CAC7B,CAAC;QAEF,gBAAgB,CAAC,SAAS,GAAG,KAAK,CAAC;QACnC,gBAAgB,CAAC,uBAAuB,GAAG,uBAAuB,CAAC;QAEnE,IAAI,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE,EAAE,CAAC,GAAG,IAAI,CAAC,cAAc,CAAC,eAAe,EAAE,CAAC;QAExF,gBAAgB,CAAC,OAAO,GAAG,CAAC,UAAC,CAAS,EAAE,CAAS;YAC7C,OAAO,UAAC,MAAc;gBAClB,MAAM,CAAC,UAAU,CAAC,eAAe,EAAE,KAAI,CAAC,cAAc,CAAC,CAAC;gBACxD,MAAM,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;YAC/D,CAAC,CAAC;QACN,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAET,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;QAE5C,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,8BAA8B;QAC9B,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YACnB,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACnC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAEnC,IAAI,SAAS,GAAG,IAAI,qDAAW,CAC3B,kBAAkB,GAAG,KAAK,EAC1B,eAAe,EAAG,SAAS;YAC3B,CAAC,SAAS,CAAC,EACX,IAAI,EACJ,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,EAAG,UAAU;YACpC,IAAI,EAAE,SAAS;YACf,mDAAS,CAAC,uBAAuB,EAAE,WAAW;YAC9C,KAAK,CAAC,SAAS,EAAE,EAAE,SAAS;YAC5B,KAAK,EAAE,WAAW;YAClB,UAAU,GAAG,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,UAAU;YACtG,IAAI,EACJ,SAAS,EACT,SAAS,EACT,SAAS,EACT,mDAAS,CAAC,gBAAgB,CAC7B,CAAC;YAEF,SAAS,CAAC,SAAS,GAAG,KAAK,CAAC;YAC5B,SAAS,CAAC,uBAAuB,GAAG,uBAAuB,CAAC;YAE5D,SAAS,CAAC,OAAO,GAAG,CAAC,UAAC,CAAS,EAAE,CAAS;gBACtC,OAAO,UAAC,MAAc;oBAClB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;wBAClB,MAAM,CAAC,YAAY,CAAC,SAAS,EAAE,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;qBAC1D;yBAAM;wBACH,MAAM,CAAC,cAAc,CAAC,SAAS,EAAE,IAAI,YAAY,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;qBAC9D;gBACL,CAAC,CAAC;YACN,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAET,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;YAErC,KAAK,EAAE,CAAC;YAER,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE;gBAClB,IAAI,IAAI,GAAG,UAAC,CAAS,EAAE,CAAS,EAAE,SAAsB;oBACpD,IAAI,OAAO,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;oBAC1C,OAAO;wBACH,KAAK,CAAC,SAAS,EAAE,CAAC,kBAAkB,CAAC,SAAS,CAAC,YAAY,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;wBACnF,IAAI,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,EAAE,GAAG,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC;wBACvC,KAAI,CAAC,yBAAyB,CAAC,eAAe,CAAC,EAAE,GAAG,OAAE,GAAG,OAAE,CAAC,CAAC;oBACjE,CAAC,CAAC;gBACN,CAAC,CAAC;gBACF,SAAS,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,SAAS,CAAC,CAAC,CAAC;aAChE;SACJ;IACL,CAAC;IAEM,gCAAQ,GAAf;QAAA,iBAUC;QATG,IAAI,IAAI,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACrD,OAAO;SACV;QAED,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,GAAG,CAAC;YAC1E,KAAI,CAAC,eAAgB,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;YAChD,KAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,KAAI,CAAC,eAAgB,EAAE,KAAI,CAAC,eAAgB,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,KAAI,CAAC,wBAAwB,CAAC,CAAC;YACnI,KAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC,SAAS,EAAE,CAAC,iBAAiB,CAAC,KAAI,CAAC,eAAgB,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;QACxG,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,kCAAU,GAAjB;QACI,IAAI,CAAC,IAAI,CAAC,sBAAsB,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE;YACtD,OAAO;SACV;QAED,IAAI,CAAC,cAAc,CAAC,uBAAuB,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QAChF,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;IAC3C,CAAC;IAEU,+BAAO,GAAd,UAAe,UAAiB;QAAjB,8CAAiB;QAC5B,IAAI,UAAU,EAAE;YACZ,IAAI,CAAC,yBAAyB,CAAC,KAAK,EAAE,CAAC;SAC1C;QAED,IAAI,CAAC,UAAU,EAAE,CAAC;QAElB,IAAI,IAAI,CAAC,eAAe,EAAE;YACtB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,eAAe,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBAClD,IAAI,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;aACrC;YACD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;SAC/B;QAED,IAAI,IAAI,CAAC,mBAAmB,IAAI,UAAU,EAAE;YACxC,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC;SACtC;QAED,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;IAC/B,CAAC;IAEa,4BAAc,GAA5B;QACI,gDAAM,CAAC,YAAY,CAAC,2BAA2B,GAAG,krFA6EjD,CAAC;IACN,CAAC;IACL,oBAAC;AAAD,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrPkB;AAE+B;AACrB;AACA;AAI7B;IAAuC,6BAAK;IAwCxC,mBAAY,KAAY,EAAE,MAAuB,EAAE,MAAc,EAAE,IAAY;QAA/E,YACI,kBAAM,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,SA+DrC;QA7DG,KAAI,CAAC,OAAO,GAAG,IAAI,iDAAO,EAAE,CAAC;QAC7B,KAAI,CAAC,SAAS,GAAG,IAAI,gDAAM,EAAE,CAAC;QAC9B,KAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,KAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC7B,KAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAC3B,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC;QAC3B,KAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,KAAI,CAAC,eAAe,GAAG,CAAC,EAAE,CAAC;QAC3B,KAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC1B,KAAI,CAAC,gBAAgB,GAAG,KAAK,CAAC;QAC9B,KAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;QACnC,KAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACpC,KAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;QACpC,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,KAAI,CAAC,gBAAgB,GAAG,yDAAe,CAAC,UAAU,CAAC;QACnD,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAC5B,KAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;QAC9B,KAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC;QAC5B,KAAI,CAAC,iBAAiB,GAAG,yDAAe,CAAC,cAAc,CAAC;QACxD,KAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;QAC/B,KAAI,CAAC,mBAAmB,GAAG,CAAC,CAAC;QAC7B,KAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;QACpC,KAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;QAC9B,KAAI,CAAC,uBAAuB,GAAG,CAAC,CAAC;QACjC,KAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC;QAEvC,KAAI,CAAC,eAAe,GAAG,CAAC,CAAC;QACzB,KAAI,CAAC,iBAAiB,GAAG,CAAC,CAAC;QAC3B,KAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACnC,KAAI,CAAC,qBAAqB,GAAG,KAAK,CAAC;QACnC,KAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC3B,KAAI,CAAC,UAAU,GAAG,GAAG,CAAC;QACtB,KAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QACrC,KAAI,CAAC,oBAAoB,GAAG,GAAG,CAAC;QAChC,KAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC1B,KAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QAErC,KAAI,CAAC,eAAe,GAAG,IAAW,CAAC;QAEnC,IAAM,IAAI,GAAG,CAAC,CAAC;QAEf,KAAI,CAAC,eAAe,GAAG,qDAAW,CAAC,WAAW,CAAC,KAAI,CAAC,IAAI,GAAG,YAAY,EAAE;YACrE,OAAO,EAAE,IAAI;YACb,QAAQ,EAAE,IAAI;SACjB,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC;QAEf,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC;QAC5C,KAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,GAAG,CAAC,CAAC;QAC5C,KAAI,CAAC,eAAe,CAAC,gCAAgC,EAAE,CAAC;QACxD,KAAI,CAAC,eAAe,CAAC,wBAAwB,GAAG,IAAI,CAAC;QAErD,8CAA8C;QAC9C,IAAM,QAAQ,GAAG,IAAI,0DAAgB,CAAC,KAAI,CAAC,IAAI,GAAG,qBAAqB,EAAE,KAAK,CAAC,CAAC;QAEhF,QAAQ,CAAC,aAAa,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC7C,QAAQ,CAAC,eAAe,GAAG,IAAI,CAAC;QAChC,QAAQ,CAAC,aAAa,GAAG,gDAAM,CAAC,MAAM,CAAC;QAEvC,KAAI,CAAC,eAAe,CAAC,QAAQ,GAAG,QAAQ,CAAC;QAEzC,KAAI,CAAC,eAAe,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;;IAC3C,CAAC;IAES,uCAAmB,GAA7B;QACI,gDAAM,CAAC,YAAY,CAAC,oBAAoB,CAAC,GAAE,mXAe1C,CAAC;QAEF,gDAAM,CAAC,YAAY,CAAC,sBAAsB,CAAC,GAAC,iTAU3C,CAAC;QAEF,IAAI,GAAG,GAAG,IAAI,wDAAc,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE;YAC/C,MAAM,EAAE,QAAQ;YAChB,QAAQ,EAAE,QAAQ;SACjB,EACD;YACI,UAAU,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC;YAC9B,QAAQ,EAAE,CAAC,OAAO,EAAE,qBAAqB,CAAC;SAC7C,CACJ,CAAC;QAEF,OAAO,GAAG,CAAC;IACf,CAAC;IAEM,0BAAM,GAAb;QACI,IAAM,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC/C,IAAI,GAAG,EAAE;YACL,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;SAC5F;QAED,iBAAM,MAAM,WAAE,CAAC;IACnB,CAAC;IAED,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;;;OAAA;IAEM,8BAAU,GAAjB,UAAkB,KAAwB,EAAE,YAAoB,EAAE,MAAe;QAC7E,OAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;IACjC,CAAC;IAED,sBAAW,gCAAS;aAApB;YACI,OAAO,IAAI,CAAC,UAAU,CAAC;QAC3B,CAAC;;;OAAA;IAED,sBAAW,sCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAW;YAClC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;YAC5B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;QAC3B,CAAC;;;OALA;IAOD,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;QAC3B,CAAC;;;OALA;IAOD,sBAAW,mCAAY;aAAvB;YACI,OAAO,IAAI,CAAC,aAAa,CAAC;QAC9B,CAAC;aAED,UAAwB,EAAW;YAC/B,IAAI,IAAI,CAAC,sBAAsB,IAAI,CAAC,EAAE,EAAE;gBACpC,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;gBACxE,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC;aACtC;YAED,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;YAExB,IAAI,CAAC,IAAI,CAAC,sBAAsB,IAAI,EAAE,EAAE;gBACpC,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,GAAG,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aACtG;YAED,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;QACrD,CAAC;;;OAfA;IAiBD,sBAAW,iCAAU;aAArB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;QACxC,CAAC;aAED,UAAsB,EAAU;YAC5B,IAAI,CAAC,SAAS,GAAG,gDAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;QAC9C,CAAC;;;OAJA;IAMD,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;aAED,UAA0B,EAAW;YACjC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACtB,CAAC;;;OAJA;IAMD,sBAAW,sCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAY;YACnC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;QAChC,CAAC;;;OAJA;IAMD,sBAAW,4CAAqB;aAAhC;YACI,OAAO,IAAI,CAAC,sBAAsB,CAAC;QACvC,CAAC;aAED,UAAiC,KAAc;YAC3C,IAAI,IAAI,CAAC,sBAAsB,IAAI,CAAC,KAAK,EAAE;gBACvC,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,uBAAuB,CAAC,CAAC;gBACzE,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC;aACvC;YAED,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;YACpC,IAAI,CAAC,eAAe,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAEvC,IAAI,CAAC,IAAI,CAAC,uBAAuB,IAAI,KAAK,EAAE;gBACxC,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aACxG;QACL,CAAC;;;OAdA;IAgBD,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC9B,CAAC;;;OAJA;IAMD,sBAAW,sCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAW;YAClC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;QAChC,CAAC;;;OAJA;IAMD,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC9B,CAAC;;;OAJA;IAMD,sBAAW,0CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,wCAAiB;aAA5B;YACI,OAAO,IAAI,CAAC,kBAAkB,CAAC;QACnC,CAAC;aAED,UAA6B,GAAW;YACpC,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;QAClC,CAAC;;;OAJA;IAMD,sBAAW,uCAAgB;aAA3B;YACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAClC,CAAC;aAED,UAA4B,GAAW;YACnC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;QACjC,CAAC;;;OAJA;IAMD,sBAAW,0CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,yCAAkB;aAA7B;YACI,OAAO,IAAI,CAAC,mBAAmB,CAAC;QACpC,CAAC;aAED,UAA8B,IAAY;YACtC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QACpC,CAAC;;;OAJA;IAMD,sBAAW,6CAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAc;YAC5C,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACzC,CAAC;;;OAJA;IAMD,sBAAW,0CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,6CAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAa;YAC3C,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACzC,CAAC;;;OAJA;IAMD,sBAAW,gDAAyB;aAApC;YACI,OAAO,IAAI,CAAC,0BAA0B,CAAC;QAC3C,CAAC;aAED,UAAqC,OAAe;YAChD,IAAI,CAAC,0BAA0B,GAAG,OAAO,CAAC;QAC9C,CAAC;;;OAJA;IAMD,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAC/B,CAAC;;;OAJA;IAMD,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC9B,CAAC;;;OAJA;IAMD,sBAAW,4CAAqB;aAAhC;YACI,OAAO,IAAI,CAAC,sBAAsB,CAAC;QACvC,CAAC;aAED,UAAiC,KAAc;YAC3C,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;QACxC,CAAC;;;OAJA;IAMD,sBAAW,qCAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;QAC/B,CAAC;;;OAJA;IAMD,sBAAW,uCAAgB;aAA3B;YACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAClC,CAAC;aAED,UAA4B,GAAW;YACnC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;QACjC,CAAC;;;OAJA;IAMD,sBAAW,2CAAoB;aAA/B;YACI,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACtC,CAAC;aAED,UAAgC,GAAY;YACxC,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,2CAAoB;aAA/B;YACI,OAAO,IAAI,CAAC,qBAAqB,CAAC;QACtC,CAAC;aAED,UAAgC,GAAY;YACxC,IAAI,CAAC,qBAAqB,GAAG,GAAG,CAAC;QACrC,CAAC;;;OAJA;IAMD,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAY;YACjC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;QAC9B,CAAC;;;OAJA;IAMD,sBAAW,gCAAS;aAApB;YACI,OAAO,IAAI,CAAC,UAAU,CAAC;QAC3B,CAAC;aAED,UAAqB,EAAU;YAC3B,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACzB,CAAC;;;OAJA;IAMD,sBAAW,8CAAuB;aAAlC;YACI,OAAO,IAAI,CAAC,wBAAwB,CAAC;QACzC,CAAC;aAED,UAAmC,IAAY;YAC3C,IAAI,CAAC,wBAAwB,GAAG,IAAI,CAAC;QACzC,CAAC;;;OAJA;IAMD,sBAAW,0CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,GAAW;YACtC,IAAI,CAAC,oBAAoB,GAAG,GAAG,CAAC;QACpC,CAAC;;;OAJA;IAMD,sBAAW,oCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,IAAY;YACjC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;QAC/B,CAAC;;;OAJA;IAMD,sBAAW,6CAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAc;YAC5C,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;QACzC,CAAC;;;OAJA;IAMS,2CAAuB,GAAjC,UAAkC,YAA4B;QAA5B,kDAA4B;QAC1D,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACpD,IAAM,MAAM,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAc,CAAC;YAEtD,IAAI,MAAM,KAAK,IAAI,IAAI,CAAC,MAAM,CAAC,YAAY,KAAK,YAAY,CAAC,IAAI,MAAM,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,EAAE;gBAC1F,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;gBACpD,MAAM;aACT;SACJ;IACL,CAAC;IAES,+BAAW,GAArB;QACI,IAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,YAAY,EAAE,GAAG,IAAI,CAAC;QAE/D,IAAI,MAAM,GAAG,IAAI,gDAAM,EAAE,CAAC;QAE1B,IAAI,IAAI,GAAG,8CAAK,CAAC,gBAAgB,CAAC,SAAS,GAAG,IAAI,CAAC,CAAC;QAEpD,IAAI,QAAQ,GAAG,oDAAU,CAAC,YAAY,CAAC,IAAI,iDAAO,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,IAAI,CAAC,CAAC;QAEzE,gDAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;QAC7C,iDAAO,CAAC,yBAAyB,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAEtE,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,OAAO,CAAC;IACvC,CAAC;IAES,gCAAY,GAAtB;QACI,IAAI,CAAC,MAAM,CAAC,aAAa,EAAE,CAAC,CAAC,mIAAmI;QAEhK,IAAI,oBAAoB,GAAG,gDAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC,CAAC;QAEhF,IAAI,CAAC,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;QAE1D,IAAI,KAAK,GAAG,CAAC,CAAC;QAEd,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS,KAAK,qDAAa,CAAC,MAAM,EAAE;YACpD,IAAI,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAC3C,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC;YAC3C,KAAK,GAAG,EAAE,GAAG,IAAI,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC,CAAC;SAClC;aAAM;YACH,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;SACjB;QAED,IAAI,CAAC,GAAG,IAAI,iDAAO,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;QACvC,IAAI,CAAC,GAAG,IAAI,iDAAO,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,KAAK,CAAC,CAAC;QAE/C,IAAI,EAAE,GAAG,iDAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,oBAAoB,CAAC,CAAC;QAC/D,IAAI,EAAE,GAAG,iDAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,oBAAoB,CAAC,CAAC;QAC/D,IAAI,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC;QAEjC,IAAI,CAAC,cAAc,CAAC,OAAO,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEnD,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC;QAEb,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QACpD,IAAI,CAAC,cAAc,CAAC,QAAQ,GAAG,iDAAO,CAAC,oBAAoB,CAAC,CAAC,EAAE,oBAAoB,CAAC,CAAC;IACzF,CAAC;IAEL,gBAAC;AAAD,CAAC,CA3fsC,8CAAK,GA2f3C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnhB8B;AAcJ;AAKR;AAEmB;AAEH;AAEiC;AAEpE;IAA0C,gCAAQ;IAM9C,sBAAY,IAAY,EAAE,MAAc,EAAE,SAAiB,EAAE,MAAoB;QAAjF,YACI,kBAAM,IAAI,EAAE,MAAM,EAAE,SAAS,EAAE,MAAM,CAAC,SAOzC;QALG,KAAI,CAAC,QAAQ,GAAG,MAAM,CAAC;QACvB,KAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;QAChC,KAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QACtB,KAAI,CAAC,UAAU,CAAC,KAAK,GAAG,GAAG,CAAC;QAC5B,KAAI,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC;;IACjC,CAAC;IAES,sCAAe,GAAzB;QAAA,iBAmlBC;QAllBG,IAAM,OAAO,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;QAElC,IAAM,UAAU,GAAG;YACf,mEAAmE;YAE7D,kGAAqF,EAApF,uBAAe,EAAE,0BAAmE,CAAC;YACtF,iGAAkF,EAAjF,sBAAc,EAAE,yBAAiE,CAAC;YAEnF,+FAA4E,EAA3E,oBAAY,EAAE,uBAA6D,CAAC;YAC7E,6FAAsE,EAArE,kBAAU,EAAE,qBAAyD,CAAC;YACvE,6GAA8F,EAA7F,sBAAc,EAAE,yBAA6E,CAAC;YAC/F,4GAA2F,EAA1F,qBAAa,EAAE,wBAA2E,CAAC;YAC5F,wGAAuG,EAAtG,6BAAqB,EAAE,gCAA+E,CAAC;YACxG,kGAAqF,EAApF,uBAAe,EAAE,0BAAmE,CAAC;YAEtF,wGAAuG,EAAtG,6BAAqB,EAAE,gCAA+E,CAAC;YACxG,gGAA+E,EAA9E,qBAAa,EAAE,wBAA+D,CAAC;YAChF,gGAA+E,EAA9E,qBAAa,EAAE,wBAA+D,CAAC;YAChF,sGAAiG,EAAhG,2BAAmB,EAAE,8BAA2E,CAAC;YAClG,oGAA2F,EAA1F,yBAAiB,EAAE,4BAAuE,CAAC;YAC5F,kGAAqF,EAApF,uBAAe,EAAE,0BAAmE,CAAC;YACtF,mGAAwF,EAAvF,wBAAgB,EAAE,2BAAqE,CAAC;YACzF,sGAAiG,EAAhG,2BAAmB,EAAE,8BAA2E,CAAC;YAClG,qGAA8F,EAA7F,0BAAkB,EAAE,6BAAyE,CAAC;YAC/F,yGAA0G,EAAzG,8BAAsB,EAAE,iCAAiF,CAAC;YAC3G,sGAAiG,EAAhG,2BAAmB,EAAE,8BAA2E,CAAC;YAClG,yGAA0G,EAAzG,8BAAsB,EAAE,iCAAiF,CAAC;YAC3G,4GAAmH,EAAlH,iCAAyB,EAAE,oCAAuF,CAAC;YAEpH,iGAAkF,EAAjF,sBAAc,EAAE,yBAAiE,CAAC;YACnF,mGAAwF,EAAvF,wBAAgB,EAAE,2BAAqE,CAAC;YACzF,uGAAoG,EAAnG,4BAAoB,EAAE,+BAA6E,CAAC;YACrG,uGAAoG,EAAnG,4BAAoB,EAAE,+BAA6E,CAAC;YACrG,gGAA+E,EAA9E,qBAAa,EAAE,wBAA+D,CAAC;YAChF,4FAAmE,EAAlE,iBAAS,EAAE,oBAAuD,CAAC;YACpE,0GAA6G,EAA5G,+BAAuB,EAAE,kCAAmF,CAAC;YAC9G,sGAAiG,EAAhG,2BAAmB,EAAE,8BAA2E,CAAC;YAClG,gGAA+E,EAA9E,qBAAa,EAAE,wBAA+D,CAAC;YAChF,yGAA0G,EAAzG,8BAAsB,EAAE,iCAAiF,CAAC;YAEjH,IAAM,qBAAqB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACjF,KAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,KAAe,CAAC;gBAChD,kBAAkB,CAAC,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;YACtD,CAAC,CAAC;YAEF,IAAM,oBAAoB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBAChF,KAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,KAAe,CAAC;gBAC/C,iBAAiB,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;YACpD,CAAC,CAAC;YAEF,IAAM,kBAAkB,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAClE,eAAe,CAAC,OAAO,CAAC,CAAC;gBACzB,KAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,OAAO,CAAC;YACzC,CAAC,CAAC;YAEF,IAAM,gBAAgB,GAAG,UAAC,KAAiC;gBACvD,KAAI,CAAC,QAAQ,CAAC,UAAU,GAAI,KAAK,CAAC,MAAc,CAAC,KAAK,CAAC;gBACvD,aAAa,CAAC,KAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAC5C,CAAC,CAAC;YAEF,IAAM,oBAAoB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBAChF,KAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,KAAe,CAAC;gBAC/C,iBAAiB,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;YACpD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBAC/E,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,KAAe,CAAC;gBAC9C,gBAAgB,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,2BAA2B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC3E,wBAAwB,CAAC,OAAO,CAAC,CAAC;gBAClC,KAAI,CAAC,QAAQ,CAAC,qBAAqB,GAAG,OAAO,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,qBAAqB,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBACrE,kBAAkB,CAAC,OAAO,CAAC,CAAC;gBAC5B,KAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,OAAO,CAAC;YAC5C,CAAC,CAAC;YAEF,IAAM,2BAA2B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC3E,wBAAwB,CAAC,OAAO,CAAC,CAAC;gBAClC,KAAI,CAAC,QAAQ,CAAC,qBAAqB,GAAG,OAAO,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBACxH,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC3D,gBAAgB,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAAuE;gBAChG,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC3D,gBAAgB,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,yBAAyB,GAAG,UAAC,KAAuE;gBACtG,KAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBACjE,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;YAC9D,CAAC,CAAC;YAEF,IAAM,uBAAuB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACnF,KAAI,CAAC,QAAQ,CAAC,iBAAiB,GAAG,KAAe,CAAC;gBAClD,oBAAoB,CAAC,KAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;YAC1D,CAAC,CAAC;YAEF,IAAM,qBAAqB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBAC1H,KAAI,CAAC,QAAQ,CAAC,eAAe,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC7D,kBAAkB,CAAC,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;YACtD,CAAC,CAAC;YAEF,IAAM,sBAAsB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBAC3H,KAAI,CAAC,QAAQ,CAAC,gBAAgB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC9D,mBAAmB,CAAC,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YACxD,CAAC,CAAC;YAEF,IAAM,yBAAyB,GAAG,UAAC,KAAuE;gBACtG,KAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBACjE,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;YAC9D,CAAC,CAAC;YAEF,IAAM,wBAAwB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACpF,KAAI,CAAC,QAAQ,CAAC,kBAAkB,GAAG,KAAe,CAAC;gBACnD,qBAAqB,CAAC,KAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,CAAC;YAC5D,CAAC,CAAC;YAEF,IAAM,4BAA4B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC5E,yBAAyB,CAAC,OAAO,CAAC,CAAC;gBACnC,KAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,OAAO,CAAC;YACnD,CAAC,CAAC;YAEF,IAAM,yBAAyB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACrF,KAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,KAAe,CAAC;gBACpD,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;YAC9D,CAAC,CAAC;YAEF,IAAM,4BAA4B,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACxF,KAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,KAAe,CAAC;gBACvD,yBAAyB,CAAC,KAAI,CAAC,QAAQ,CAAC,sBAAsB,CAAC,CAAC;YACpE,CAAC,CAAC;YAEF,IAAM,+BAA+B,GAAG,UAAC,KAAuE;gBAC5G,KAAI,CAAC,QAAQ,CAAC,yBAAyB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBACvE,4BAA4B,CAAC,KAAI,CAAC,QAAQ,CAAC,yBAAyB,CAAC,CAAC;YAC1E,CAAC,CAAC;YAEF,IAAM,iBAAiB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBACtH,KAAI,CAAC,QAAQ,CAAC,cAAc,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC5D,iBAAiB,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC;gBAChD,mBAAmB,CAAC,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YACxD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBACxH,KAAI,CAAC,QAAQ,CAAC,gBAAgB,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBAC9D,mBAAmB,CAAC,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;gBACpD,gBAAgB,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;gBAC9C,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;gBAC1D,oBAAoB,CAAC,KAAI,CAAC,QAAQ,CAAC,iBAAiB,CAAC,CAAC;gBACtD,kBAAkB,CAAC,KAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;gBAClD,mBAAmB,CAAC,KAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC;YACxD,CAAC,CAAC;YAEF,IAAM,0BAA0B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC1E,uBAAuB,CAAC,OAAO,CAAC,CAAC;gBACjC,KAAI,CAAC,QAAQ,CAAC,oBAAoB,GAAG,OAAO,CAAC;YACjD,CAAC,CAAC;YAEF,IAAM,0BAA0B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC1E,uBAAuB,CAAC,OAAO,CAAC,CAAC;gBACjC,KAAI,CAAC,QAAQ,CAAC,oBAAoB,GAAG,OAAO,CAAC;YACjD,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBACnE,gBAAgB,CAAC,OAAO,CAAC,CAAC;gBAC1B,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,OAAO,CAAC;YAC1C,CAAC,CAAC;YAEF,IAAM,eAAe,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBAC3E,KAAI,CAAC,QAAQ,CAAC,SAAS,GAAG,KAAe,CAAC;gBAC1C,YAAY,CAAC,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC;YAC1C,CAAC,CAAC;YAEF,IAAM,6BAA6B,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACzF,KAAI,CAAC,QAAQ,CAAC,uBAAuB,GAAG,KAAe,CAAC;gBACxD,0BAA0B,CAAC,KAAI,CAAC,QAAQ,CAAC,uBAAuB,CAAC,CAAC;YACtE,CAAC,CAAC;YAEF,IAAM,yBAAyB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBACrF,KAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,KAAe,CAAC;gBACpD,sBAAsB,CAAC,KAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC;YAC9D,CAAC,CAAC;YAEF,IAAM,mBAAmB,GAAG,UAAC,KAA4B,EAAE,KAAwB;gBAC/E,KAAI,CAAC,QAAQ,CAAC,aAAa,GAAG,KAAe,CAAC;gBAC9C,gBAAgB,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAClD,CAAC,CAAC;YAEF,IAAM,4BAA4B,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAC5E,yBAAyB,CAAC,OAAO,CAAC,CAAC;gBACnC,KAAI,CAAC,QAAQ,CAAC,sBAAsB,GAAG,OAAO,CAAC;YACnD,CAAC,CAAC;YAGF,+CAAe,CAAC;gBACZ,IAAM,OAAO,GAAG,UAAC,KAAY;oBACzB,QAAS,KAAqB,CAAC,MAAM,CAAC,IAAI,EAAE;wBACxC,KAAK,kBAAkB,CAAC,CAAC;4BACrB,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC;4BAC5D,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;4BAC1D,MAAM;yBACT;wBAED,KAAK,eAAe,CAAC,CAAC;4BAClB,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,CAAC;4BAC1D,MAAM;yBACT;qBACJ;gBACL,CAAC,CAAC;gBAEF,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;gBAElD,OAAO;oBACH,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;gBACzD,CAAC,CAAC;YACN,CAAC,EAAE,EAAE,CAAC,CAAC;YAEP,OAAO,CACH;gBACI,oDAAC,gEAAc,IAAC,eAAe,EAAE,IAAI;oBACjC,oDAAC,uEAAqB,IAAC,UAAU,EAAE,oDAAC,sDAAI,sBAAmB;wBACvD,oDAAC,4DAAU,gBAAmB,CACV;oBACxB,oDAAC,uEAAqB;wBAClB,oDAAC,sDAAI,IAAC,SAAS,QAAC,OAAO,EAAE,CAAC;4BACtB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,oBAAuB,CAC9D;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa,IAAG,KAAI,CAAC,QAAQ,CAAC,SAAS,CAAS,CACvE;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,wBAA2B,CAClE;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,eAAe,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,qBAAqB,GAAI,CAC3H,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,uBAA0B,CACjE;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,cAAc,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,QAAQ,EAAE,oBAAoB,GAAI,CACzH,CACL,CACJ,CACa,CACX;gBACjB,oDAAC,gEAAc,IAAC,eAAe,EAAE,IAAI;oBACjC,oDAAC,uEAAqB,IAAC,UAAU,EAAE,oDAAC,sDAAI,sBAAmB;wBACvD,oDAAC,4DAAU,gBAAmB,CACV;oBACxB,oDAAC,uEAAqB;wBAClB,oDAAC,sDAAI,IAAC,SAAS,QAAC,OAAO,EAAE,CAAC;4BACtB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,eAAe,EAAE,QAAQ,EAAE,qBAAqB,GAAI,CACjE,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,cAAiB,CACxD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,YAAY,EAAE,QAAQ,EAAE,kBAAkB,GAAI,CAC3D,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,YAAe,CACtD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,OAAO,EAAC,KAAK,EAAE,UAAU,EAAE,OAAO,EAAC,QAAQ,EAAC,QAAQ,EAAE,gBAAgB,GAAI,CACtF,CACL;4BACL,KAAI,CAAC,mBAAmB,IAAI;gCAC9B,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,uBAA0B,CACjE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,qBAAqB,EAAE,QAAQ,EAAE,2BAA2B,GAAI,CAC7E,CACL;gCACL,KAAI,IAAI;oCACN,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;wCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,iBAAoB,CAC3D;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;wCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;4CACnC,oDAAC,iDAAY,IAAC,QAAQ,EAAE,qBAAqB,EAAE,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,cAAc,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,oBAAoB,GAAI,CAC3J,CACL;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;wCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,gBAAmB,CAC1D;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;wCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;4CACnC,oDAAC,iDAAY,IAAC,QAAQ,EAAE,qBAAqB,EAAE,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,aAAa,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,mBAAmB,GAAI,CACtJ,CACL,CACR,CACA,CACA,CACa,CACX;gBACf,KAAI,CAAC,QAAQ,IAAI;oBACf,oDAAC,gEAAc,IAAC,eAAe,EAAE,IAAI;wBACjC,oDAAC,uEAAqB,IAAC,UAAU,EAAE,oDAAC,sDAAI,sBAAmB;4BACvD,oDAAC,4DAAU,+BAAkC,CACzB;wBACxB,oDAAC,uEAAqB;4BAClB,oDAAC,sDAAI,IAAC,SAAS,QAAC,OAAO,EAAE,CAAC;gCACtB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,sBAAyB,CAChE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,cAAc,EACrB,QAAQ,EAAE,iBAAiB,IAEzB,SAAI,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,2DAAC,0DAAQ,IAAC,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,CAAC,IAAG,CAAC,GAAG,CAAC,CAAY,EAAtD,CAAsD,CAAC,CACvF,CACN;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,qBAAwB,CAC/D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,gBAAgB,EACvB,QAAQ,EAAE,mBAAmB,IAE3B,SAAI,KAAK,CAAC,cAAc,CAAC,CAAC,IAAI,EAAE,EAAE,GAAG,CAAC,UAAC,CAAC,EAAE,CAAC,IAAK,2DAAC,0DAAQ,IAAC,GAAG,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,IAAG,CAAC,GAAG,CAAC,CAAY,EAA9C,CAA8C,CAAC,CAC5F,CACN;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,yBAA4B,CACnE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,oBAAoB,EAAE,QAAQ,EAAE,0BAA0B,GAAI,CAC3E,CACL;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,yBAA4B,CACnE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,oBAAoB,EAAE,QAAQ,EAAE,0BAA0B,GAAI,CAC3E,CACL;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,aAAgB,CACvD;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,eAAe,GAAI,CAC9G,CACL;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,oBAAuB,CAC9D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,uBAAuB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,6BAA6B,GAAI,CAC1I,CACL;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,sBAAyB,CAChE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,sBAAsB,EAAE,QAAQ,EAAE,4BAA4B,GAAI,CAC/E,CACL;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,aAAa,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE,EAAE,QAAQ,EAAE,mBAAmB,GAAI,CACtH,CACL,CACJ,CACa,CACX,CAClB;gBACH,oDAAC,gEAAc,IAAC,eAAe,EAAE,IAAI;oBACjC,oDAAC,uEAAqB,IAAC,UAAU,EAAE,oDAAC,sDAAI,sBAAmB;wBACvD,oDAAC,4DAAU,QAAG,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,YAAY,CAAe,CACjD;oBACxB,oDAAC,uEAAqB;wBAClB,oDAAC,sDAAI,IAAC,SAAS,QAAC,OAAO,EAAE,CAAC;4BACpB,CAAC,CAAC,KAAI,CAAC,QAAQ,IAAI,KAAI,CAAC,QAAQ,IAAI,eAAe,KAAK,gFAAuB,CAAC,WAAW,CAAC,IAAI;gCAC9F,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,qBAAwB,CAC/D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,qBAAqB,EAAE,QAAQ,EAAE,2BAA2B,GAAI,CAC7E,CACL,CACR;4BACH,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,WAAc,CACrD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,aAAa,EACpB,QAAQ,EAAE,mBAAmB;oCAE7B,oDAAC,0DAAQ,IAAC,KAAK,EAAE,IAAI,gBAAsB;oCAC3C,oDAAC,0DAAQ,IAAC,KAAK,EAAE,IAAI,gBAAsB;oCAC3C,oDAAC,0DAAQ,IAAC,KAAK,EAAE,GAAG,cAAoB;oCACxC,oDAAC,0DAAQ,IAAC,KAAK,EAAE,GAAG,cAAoB,CACnC,CACN;4BACL,KAAI,CAAC,QAAQ,IAAI;gCACf,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,aAAa,EAAE,QAAQ,EAAE,mBAAmB,GAAI,CAC7D,CACL,CACR;4BACH,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,WAAc,CACrD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAE,aAAa,EAAE,OAAO,EAAC,UAAU,EAAC,UAAU,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,mBAAmB,GAAI,CAC9H,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAE,mBAAmB,EAAE,OAAO,EAAC,UAAU,EAAC,UAAU,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,yBAAyB,GAAI,CAC1I,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,eAAkB,CACzD;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;oCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,iBAAiB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,uBAAuB,GAAI,CAC9H,CACL;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;gCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;4BACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;gCAC5C,CAAC,KAAI,CAAC,QAAQ,IAAI;oCAChB,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,eAAe,EACtB,QAAQ,EAAE,qBAAqB;wCAE/B,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,WAAW,WAAiB;wCAC7D,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,UAAU,UAAgB;wCAC3D,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,oCAAoC,kBAAwB;wCAC7F,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,gCAAgC,WAAiB;wCAClF,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,+BAA+B,iBAAuB;wCACvF,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,2BAA2B,UAAgB;wCAC5E,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,sBAAsB,cAAoB;wCAC3E,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,WAAW,WAAiB,CACxD,CACV;gCACD,KAAI,CAAC,QAAQ,IAAI;oCACf,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,eAAe,EACtB,QAAQ,EAAE,qBAAqB;wCAE/B,oDAAC,0DAAQ,IAAC,KAAK,EAAE,gFAAuB,CAAC,WAAW,WAAiB;wCACrE,oDAAC,0DAAQ,IAAC,KAAK,EAAE,gFAAuB,CAAC,UAAU,UAAgB;wCACnE,oDAAC,0DAAQ,IAAC,KAAK,EAAE,gFAAuB,CAAC,WAAW,WAAiB,CAChE,CACV,CACA;4BACN,CAAC,CAAC,eAAe,KAAK,yDAAe,CAAC,WAAW,IAAI,eAAe,KAAK,yDAAe,CAAC,UAAU,CAAC,IAAI,CAAC,KAAI,CAAC,QAAQ,IAAI,CAAC,eAAe,KAAK,gFAAuB,CAAC,WAAW,IAAI,eAAe,KAAK,gFAAuB,CAAC,UAAU,CAAC,IAAI,KAAI,CAAC,QAAQ,CAAC,IAAI;gCAChQ,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,wBAA2B,CAClE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,KAAK,EAAE,gBAAgB,EACvB,QAAQ,EAAE,sBAAsB;wCAEhC,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,WAAW,UAAgB;wCAC5D,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,cAAc,aAAmB;wCAClE,oDAAC,0DAAQ,IAAC,KAAK,EAAE,yDAAe,CAAC,YAAY,WAAiB,CACzD,CACN,CACR;4BACF,CAAC,CAAC,eAAe,KAAK,yDAAe,CAAC,WAAW,CAAC,IAAI,CAAC,KAAI,CAAC,QAAQ,IAAI,CAAC,eAAe,KAAK,gFAAuB,CAAC,WAAW,CAAC,IAAI,KAAI,CAAC,QAAQ,CAAC,IAAI;gCACpJ,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,0BAA6B,CACpE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAE,yBAAyB,EAAE,OAAO,EAAC,UAAU,EAAC,UAAU,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,QAAQ,EAAE,+BAA+B,GAAI,CACtJ,CACL;gCACL,KAAI,CAAC,QAAQ,IAAI;oCACf,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;wCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,wBAA2B,CAClE;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;wCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;4CACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,KAAK,EAAE,mBAAmB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,yBAAyB,GAAI,CAClI,CACL,CACR,CACJ;4BACF,CAAC,KAAI,CAAC,QAAQ,IAAI,CAAC,eAAe,KAAK,yDAAe,CAAC,+BAA+B,IAAI,eAAe,KAAK,yDAAe,CAAC,2BAA2B,CAAC,IAAI;gCAC3J,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,2DAAS,IAAC,IAAI,EAAC,QAAQ,EAAC,KAAK,EAAE,mBAAmB,EAAE,OAAO,EAAC,UAAU,EAAC,UAAU,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,QAAQ,EAAE,yBAAyB,GAAI,CACtI,CACL,CACR;4BACF,CAAC,KAAI,CAAC,QAAQ,IAAI,CAAC,eAAe,KAAK,yDAAe,CAAC,+BAA+B,CAAC,IAAI;gCACxF,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,iBAAoB,CAC3D;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,YAAY,EAAE,kBAAkB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,wBAAwB,GAAI,CACpI,CACL,CACR;4BACF,CAAC,KAAI,CAAC,QAAQ,IAAI,CAAC,eAAe,KAAK,yDAAe,CAAC,oCAAoC,IAAI,eAAe,KAAK,yDAAe,CAAC,+BAA+B,CAAC,IAAI;gCACpK,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,sBAAyB,CAChE;gCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wCACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,sBAAsB,EAAE,QAAQ,EAAE,4BAA4B,GAAI,CAC/E,CACL;gCACN,sBAAsB,IAAI;oCACvB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;wCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,kBAAqB,CAC5D;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;wCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;4CACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,YAAY,EAAE,mBAAmB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,yBAAyB,GAAI,CACvI,CACL,CACR;gCACF,CAAC,sBAAsB,IAAI;oCACxB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;wCACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,gBAAgB,sBAAyB,CAChE;oCACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;wCAC9C,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;4CACnC,oDAAC,iDAAY,IAAC,iBAAiB,EAAC,MAAM,EAAC,YAAY,EAAE,sBAAsB,EAAE,GAAG,EAAE,CAAC,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,CAAC,EAAE,QAAQ,EAAE,4BAA4B,GAAI,CAC7I,CACL,CACR,CACJ,CACA,CACa,CACX;gBAChB,KAAI,CAAC,yBAAyB,EAAE,CAClC,CACN,CAAC;QACN,CAAC,CAAC;QAEF,OAAO,UAAU,EAAE,CAAC;IACxB,CAAC;IAES,gDAAyB,GAAnC;QACI,OAAO,CACH,yGACG,CACN,CAAC;IACN,CAAC;IAEL,mBAAC;AAAD,CAAC,CA5mByC,iDAAQ,GA4mBjD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxnBkB;AAGU;AAGO;AACgB;AAEpD;IAA4C,kCAAS;IAUjD,wBAAY,KAAY,EAAE,MAAuB,EAAE,MAAc,EAAE,IAAY;QAA/E,YACI,kBAAM,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC,SAMrC;QAJG,KAAI,CAAC,GAAG,GAAG,IAAW,CAAC;QACvB,KAAI,CAAC,gBAAgB,GAAG,IAAW,CAAC;QACpC,KAAI,CAAC,wBAAwB,GAAG,EAAE,CAAC;QACnC,KAAI,CAAC,WAAW,GAAG,IAAW,CAAC;;IACnC,CAAC;IAES,6CAAoB,GAA9B;QACI,OAAO,IAAI,CAAC,gBAA8C,CAAC;IAC/D,CAAC;IAED,sBAAW,sCAAU;aAArB;YACI,OAAO,IAAI,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC;QACxC,CAAC;aAED,UAAsB,EAAU;YAC5B,IAAI,CAAC,SAAS,GAAG,gDAAM,CAAC,aAAa,CAAC,EAAE,CAAC,CAAC;YAC1C,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;QACtC,CAAC;;;OALA;IAOD,sBAAW,0CAAc;aAAzB;YACI,OAAO,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;aAED,UAA0B,EAAW;YACjC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;YAClB,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,EAAE,CAAC;YACxB,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OANA;IAQD,sBAAW,yCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,qBAAqB,EAAE,CAAC;QACjC,CAAC;;;OALA;IAOD,sBAAW,2CAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAW;YAClC,IAAI,CAAC,oBAAoB,EAAE,CAAC,MAAM,GAAG,GAAG,CAAC;YACzC,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,oBAAoB,EAAE,CAAC,MAAM,CAAC;YAC3D,IAAI,CAAC,yBAAyB,EAAE,CAAC;QACrC,CAAC;;;OANA;IAQD,sBAAW,yCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,oBAAoB,EAAE,CAAC,IAAI,GAAG,GAAG,CAAC;QAC3C,CAAC;;;OALA;IAOD,sBAAW,+CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,oBAAoB,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC;QAClD,CAAC;;;OALA;IAOD,sBAAW,6CAAiB;aAA5B;YACI,OAAO,IAAI,CAAC,kBAAkB,CAAC;QACnC,CAAC;aAED,UAA6B,GAAW;YACpC,IAAI,CAAC,kBAAkB,GAAG,GAAG,CAAC;YAC9B,IAAI,CAAC,oBAAoB,EAAE,CAAC,QAAQ,GAAG,GAAG,CAAC;QAC/C,CAAC;;;OALA;IAOD,sBAAW,4CAAgB;aAA3B;YACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAClC,CAAC;aAED,UAA4B,GAAW;YACnC,IAAI,CAAC,iBAAiB,GAAG,GAAG,CAAC;YAC7B,IAAI,CAAC,oBAAoB,EAAE,CAAC,gBAAgB,GAAG,GAAG,CAAC;QACvD,CAAC;;;OALA;IAOD,sBAAW,+CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,oBAAoB,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC;QAClD,CAAC;;;OALA;IAOD,sBAAW,8CAAkB;aAA7B;YACI,OAAO,IAAI,CAAC,mBAAmB,CAAC;QACpC,CAAC;aAED,UAA8B,IAAY;YACtC,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC;YAChC,IAAI,CAAC,oBAAoB,EAAE,CAAC,SAAS,GAAG,IAAI,CAAC;QACjD,CAAC;;;OALA;IAOD,sBAAW,kDAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAc;YAC5C,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;YACrC,IAAI,CAAC,oBAAoB,EAAE,CAAC,aAAa,GAAG,KAAK,CAAC;QACtD,CAAC;;;OALA;IAOD,sBAAW,+CAAmB;aAA9B;YACI,OAAO,IAAI,CAAC,oBAAoB,CAAC;QACrC,CAAC;aAED,UAA+B,IAAY;YACvC,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC;YACjC,IAAI,CAAC,oBAAoB,EAAE,CAAC,UAAU,GAAG,IAAI,CAAC;QAClD,CAAC;;;OALA;IAOD,sBAAW,kDAAsB;aAAjC;YACI,OAAO,IAAI,CAAC,uBAAuB,CAAC;QACxC,CAAC;aAED,UAAkC,KAAa;YAC3C,IAAI,CAAC,uBAAuB,GAAG,KAAK,CAAC;YACrC,IAAI,CAAC,oBAAoB,EAAE,CAAC,aAAa,GAAG,KAAK,CAAC;QACtD,CAAC;;;OALA;IAOD,sBAAW,qDAAyB;aAApC;YACI,OAAO,IAAI,CAAC,0BAA0B,CAAC;QAC3C,CAAC;aAED,UAAqC,OAAe;YAChD,IAAI,CAAC,0BAA0B,GAAG,OAAO,CAAC;YAC1C,IAAI,CAAC,oBAAoB,EAAE,CAAC,gCAAgC,GAAG,OAAO,CAAC;QAC3E,CAAC;;;OALA;IAOD,sBAAW,0CAAc;aAAzB;YACI,OAAO,IAAI,CAAC,eAAe,CAAC;QAChC,CAAC;aAED,UAA0B,GAAW;YACjC,IAAI,CAAC,eAAe,GAAG,GAAG,CAAC;YAC3B,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OANA;IAQD,sBAAW,yCAAa;aAAxB;YACI,OAAO,IAAI,CAAC,cAAc,CAAC;QAC/B,CAAC;aAED,UAAyB,GAAW;YAChC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,GAAG,CAAC;YAC1B,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OANA;IAQD,sBAAW,2CAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,GAAY;YACnC,IAAI,CAAC,gBAAgB,GAAG,GAAG,CAAC;YAE5B,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,GAAG,EAAE;gBAC1B,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;gBAC3B,IAAI,CAAC,WAAW,GAAG,IAAW,CAAC;aAClC;YAED,IAAI,GAAG,EAAE;gBACL,IAAI,CAAC,WAAW,GAAG,IAAI,oDAAU,EAAE,CAAC;gBACpC,IAAI,CAAC,WAAW,CAAC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC;aACrC;YAED,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OAhBA;IAkBD,sBAAW,iDAAqB;aAAhC;YACI,OAAO,IAAI,CAAC,sBAAsB,CAAC;QACvC,CAAC;aAED,UAAiC,KAAc;YAC3C,IAAI,CAAC,sBAAsB,GAAG,KAAK,CAAC;YACpC,IAAI,CAAC,GAAG,CAAC,qBAAqB,GAAG,KAAK,CAAC;YACvC,IAAI,IAAI,CAAC,sBAAsB,EAAE;gBAC7B,IAAI,CAAC,GAAG,CAAC,yBAAyB,CAAC,gDAAM,CAAC,QAAQ,EAAE,EAAG,IAAI,CAAC,oBAAoB,EAAU,CAAC,WAAW,EAAE,IAAI,CAAC,oBAAoB,EAAE,CAAC,YAAY,EAAG,CAAC,UAAW,CAAC,CAAC;aACpK;iBAAM;gBACH,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;gBAC3C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;gBAE1C,IAAM,OAAK,GAAG,IAAI,WAAW,CAAC,eAAe,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,kBAAkB,EAAE,EAAE,CAAC,CAAC;gBAEzF,MAAM,CAAC,aAAa,CAAC,OAAK,CAAC,CAAC;aAC/B;YACD,IAAI,CAAC,gBAAgB,EAAE,CAAC;QAC5B,CAAC;;;OAhBA;IAkBS,wCAAe,GAAzB;QACI,IAAM,KAAK,GAAG,IAAI,CAAC,GAAU,CAAC;QAE9B,OAAO;YACH,KAAK,EAAE,IAAI,iDAAO,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,YAAY,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;YAC7E,KAAK,EAAE,IAAI,iDAAO,CAAC,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC;SAC9E,CAAC;IACN,CAAC;IAES,sCAAa,GAAvB;QACI,OAAQ,IAAI,CAAC,oBAAoB,EAAU,CAAC,WAAW,CAAC;IAC5D,CAAC;IAES,yCAAgB,GAA1B;QAAA,iBA4EC;QA3EG,IAAI,CAAC,wBAAwB,CAAC,OAAO,CAAC,UAAC,IAAI;YACvC,IAAI,CAAC,OAAO,EAAE,CAAC;QACnB,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,wBAAwB,GAAG,EAAE,CAAC;QAEnC,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;YACxB,OAAO;SACV;QAED,IAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAC5C,IAAM,SAAS,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QAEvC,IAAI,CAAC,YAAY,IAAI,CAAC,SAAS,EAAE;YAC7B,OAAO;SACV;QAED,IAAM,YAAY,GAAG,gDAAM,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;QAE9C,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAEnF,IAAM,KAAK,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC7D,IAAM,KAAK,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC7D,IAAM,KAAK,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC7D,IAAM,KAAK,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAE7D,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnF,IAAM,EAAE,GAAG,IAAI,iDAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,EAAE,YAAY,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QAEnF,IAAM,IAAI,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC5D,IAAM,IAAI,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC5D,IAAM,IAAI,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAC5D,IAAM,IAAI,GAAG,iDAAO,CAAC,oBAAoB,CAAC,EAAE,EAAE,YAAY,CAAC,CAAC;QAE5D,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,WAAW,EAAE,EAAE,MAAM,EAAE,CAAC,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACtI,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,UAAU,EAAG,EAAE,MAAM,EAAE,CAAC,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACjI,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,EAAE,IAAI,CAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,EAAE,IAAI,CAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,EAAE,IAAI,CAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAChH,IAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,MAAM,EAAE,CAAE,KAAK,EAAE,IAAI,CAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QAEhH,IAAM,SAAS,GAAG,UAAC,IAAY,EAAE,KAAa,EAAE,SAAwB;YACpE,IAAI,KAAK,GAAG,IAAI,8CAAI,CAAC,IAAI,GAAG,OAAO,EAAE,KAAI,CAAC,KAAK,CAAC,EAC5C,GAAG,GAAG,IAAI,0DAAgB,CAAC,IAAI,GAAG,UAAU,EAAE,KAAI,CAAC,KAAK,CAAC,CAAC;YAE9D,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC;YAErB,GAAG,CAAC,aAAa,GAAG,KAAK,CAAC;YAC1B,GAAG,CAAC,KAAK,GAAG,GAAG,CAAC;YAChB,GAAG,CAAC,eAAe,GAAG,KAAK,CAAC;YAC5B,GAAG,CAAC,eAAe,GAAG,IAAI,CAAC;YAE3B,IAAM,OAAO,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAEnC,IAAM,UAAU,GAAG,IAAI,oDAAU,EAAE,CAAC;YAEpC,UAAU,CAAC,SAAS,GAAG,SAAS,CAAC;YACjC,UAAU,CAAC,OAAO,GAAG,OAAO,CAAC;YAE7B,UAAU,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAE9B,KAAI,CAAC,wBAAwB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9C,CAAC,CAAC;QAEF,SAAS,CAAC,MAAM,EAAI,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAK,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;QAC3J,SAAS,CAAC,KAAK,EAAK,IAAI,gDAAM,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,EAAG,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAE,CAAC,CAAC;QAC/I,SAAS,CAAC,OAAO,EAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAK,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;QACrJ,SAAS,CAAC,MAAM,EAAI,IAAI,gDAAM,CAAC,CAAC,EAAE,GAAG,EAAE,CAAC,CAAC,EAAG,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;QACrJ,SAAS,CAAC,KAAK,EAAK,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAK,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;QACrJ,SAAS,CAAC,QAAQ,EAAE,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,CAAC,EAAG,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,CAAE,CAAC,CAAC;IACzJ,CAAC;IAEM,kCAAS,GAAhB;QACI,IAAI,CAAC,GAAG,GAAG,IAAI,0DAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAE3F,IAAI,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;IACzB,CAAC;IAEY,mCAAU,GAAvB,UAAwB,KAAwB,EAAE,YAAoB,EAAE,MAAe;;;;;wBACnF,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,CAAC;wBAC5C,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC;wBAE9B,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;wBACtB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;wBAExC,IAAI,CAAC,GAAG,GAAG,IAAI,0DAAgB,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;wBAC3D,IAAI,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;wBACvB,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,SAAS,CAAC;wBAC5C,IAAI,CAAC,GAAG,CAAC,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC;wBAC3C,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC;wBAEjC,MAAc,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC;wBAE/B,IAAI,CAAC,OAAO,GAAG,8CAAK,CAAC,SAAS,CAAC,YAAY,EAAE,IAAI,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC;wBAE9D,qBAAM,8CAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC;;wBAAvD,SAAuD,CAAC;wBAExD,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,IAAI,CAAC,MAAM,CAAC;wBAEtC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC;4BACxB,IAAI,CAAC,CAAC,IAAI,IAAI,QAAQ,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE;gCAAE,OAAO;6BAAE;4BAExE,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE;gCAAE,OAAO;6BAAE;4BAE5B,IAAM,GAAG,GAAG,CAAC,CAAC,QAA4B,CAAC;4BAE3C,GAAG,CAAC,YAAY,GAAG,IAAI,gDAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;4BAC1C,GAAG,CAAC,aAAa,GAAG,IAAI,gDAAM,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;4BAC3C,GAAG,CAAC,YAAY,GAAG,YAAY,CAAC;4BAChC,GAAG,CAAC,cAAc,GAAG,IAAI,CAAC;4BAC1B,GAAG,CAAC,eAAe,GAAG,KAAK,CAAC,eAAe,CAAC;4BAE5C,IAAI,CAAC,GAAG,CAAC,cAAc,EAAE;gCACrB,GAAG,CAAC,YAAY,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;6BAC1C;4BACD,gBAAgB;4BAEhB,CAAC,CAAC,cAAc,GAAG,IAAI,CAAC;4BAExB,IAAI,KAAK,CAAC,OAAO,IAAI,CAAC,EAAE;gCACpB,IAAI,MAAM,GAAG,gDAAM,CAAC,QAAQ,EAAE,CAAC;gCAC/B,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;gCACzC,MAAM,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gCACtC,CAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC;gCAC9C,CAAC,CAAC,mBAAmB,EAAE,CAAC;6BAC3B;wBACL,CAAC,CAAC,CAAC;wBAEH,IAAI,CAAC,qBAAqB,EAAE,CAAC;wBAE7B,sBAAO,IAAI,EAAC;;;;KACf;IAES,wCAAe,GAAzB;QACI,OAAO,IAAI,yDAAe,CAAC,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC;IAC7D,CAAC;IAES,kDAAyB,GAAnC;QACK,IAAI,CAAC,eAAe,CAAC,QAA6B,CAAC,cAAc,GAAG,IAAI,CAAC,gBAAgB,KAAK,yDAAe,CAAC,UAAU,CAAC,CAAC,CAAE,IAAI,CAAC,gBAAwB,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;IACrL,CAAC;IAES,8CAAqB,GAA/B;;QACI,IAAI,IAAI,CAAC,gBAAgB,EAAE;YACvB,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC;YAChC,IAAI,CAAC,gBAAgB,GAAG,IAAW,CAAC;SACvC;QAED,IAAM,eAAe,GAAG,IAAI,CAAC,eAAe,EAAE,CAAC;QAE/C,IAAI,CAAC,gBAAgB,GAAG,eAAe,CAAC;QAExC,eAAe,CAAC,IAAI,GAAG,IAAI,CAAC,cAAc,CAAC;QAC3C,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC;QACvD,eAAe,CAAC,QAAQ,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACnD,eAAe,CAAC,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC/C,eAAe,CAAC,gBAAgB,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAC1D,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC;QACvD,eAAe,CAAC,SAAS,GAAG,IAAI,CAAC,mBAAmB,CAAC;QACrD,eAAe,CAAC,aAAa,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAC7D,eAAe,CAAC,UAAU,GAAG,IAAI,CAAC,oBAAoB,CAAC;QACvD,eAAe,CAAC,aAAa,GAAG,IAAI,CAAC,uBAAuB,CAAC;QAC7D,eAAe,CAAC,gCAAgC,GAAG,IAAI,CAAC,0BAA0B,CAAC;QAEnF,IAAI,CAAC,yBAAyB,EAAE,CAAC;QAEhC,MAAc,CAAC,EAAE,GAAG,eAAe,CAAC;QAErC,IAAM,UAAU,GAAG,qBAAe,CAAC,YAAY,EAAE,0CAAE,UAAW,CAAC;QAE/D,IAAI,GAAG,GAAG,CAAC,EAAE,IAAI,GAAwB,EAAE,CAAC;QAC5C,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC;YACxB,IAAI,CAAC,CAAC,IAAI,IAAI,QAAQ,EAAE;gBAAE,OAAO;aAAE;YACnC,UAAU,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACvB,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,OAAO,CAAC,UAAC,CAAC;YACX,CAAC,CAAC,OAAO,EAAE,CAAC;QAChB,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,+BAAM,GAAb;QACI,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;QACrD,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;QAEpB;;;;;;;WAOG;IACP,CAAC;IAnaa,wBAAS,GAAW,UAAU,CAAC;IAqajD,qBAAC;CAAA,CAva2C,kDAAS,GAuapD;AAvaoB,6EAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBJ;AAEW;AAE1C;IAA+C,qCAAY;IAA3D;;IAaA,CAAC;IAXa,qDAAyB,GAAnC;QACI,IAAM,UAAU,GAAG;YACf,OAAO,CACH,yGACG,CACN,CAAC;QACN,CAAC,CAAC;QAEF,OAAO,UAAU,EAAE,CAAC;IACxB,CAAC;IAEL,wBAAC;AAAD,CAAC,CAb8C,qDAAY,GAa1D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACOkB;AAWnB,IAAM,KAAK,GAAG,iDAAO,CAAC,EAAE,EAAE,CAAC;AAC3B,IAAM,OAAO,GAAG,iDAAO,CAAC,IAAI,EAAE,CAAC;AAE/B,IAAI,KAAK,GAAG,IAAI,iDAAO,EAAE,EACrB,KAAK,GAAG,IAAI,iDAAO,EAAE,EACrB,MAAM,GAAG,IAAI,gDAAM,EAAE,CAAC;AAE1B;;;;GAIG;AACH;IAy3BI;;;;;;;;OAQG;IACH,iCAAY,OAAe,EAAE,KAAuB,EAAE,gBAA0B;;QAzyBhF;;WAEG;QACI,sCAAiC,GAAG,IAAI,oDAAU,EAAU,CAAC;QAEpE;;WAEG;QACI,qCAAgC,GAAG,IAAI,oDAAU,EAAU,CAAC;QAEnE;;;WAGG;QACI,0CAAqC,GAAG,IAAI,oDAAU,EAAQ,CAAC;QAEtE;;;WAGG;QACI,yCAAoC,GAAG,IAAI,oDAAU,EAAQ,CAAC;QAE7D,UAAK,GAAG,OAAO,CAAC;QAchB,gBAAW,GAAG,CAAC,CAAC;QAchB,YAAO,GAAG,uBAAuB,CAAC,UAAU,CAAC;QAsC7C,sBAAiB,GAAG,uBAAuB,CAAC,YAAY,CAAC;QAuCzD,sCAAiC,GAAG,GAAG,CAAC;QA0BxC,cAAS,GAAG,CAAC,CAAC;QAqCtB;;WAEG;QACI,qBAAgB,GAAW,GAAG,CAAC;QAE9B,wBAAmB,GAAG,KAAK,CAAC;QAqB5B,iBAAY,GAAG,uBAAuB,CAAC,sBAAsB,CAAC;QAmBtE;;;WAGG;QACI,sBAAiB,GAAY,KAAK,CAAC;QAWhC,qCAAgC,GAAY,KAAK,CAAC;QACpD,+CAA0C,GAA8B,IAAI,CAAC;QA4B7E,aAAQ,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAChC,aAAQ,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAyC9B,oBAAe,GAAY,IAAI,CAAC;QAEhC,iBAAY,GAAW,CAAC,CAAC;QACzB,iBAAY,GAAW,CAAC,CAAC;QA2FnC;;WAEG;QACI,uBAAkB,GAAG,CAAC,CAAC;QAW9B;;;;WAIG;QACI,uBAAkB,GAAG,KAAK,CAAC;QAsB1B,oBAAe,GAAG,iDAAO,CAAC,IAAI,EAAE,CAAC;QAKjC,oBAAe,GAAY,IAAI,iDAAO,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;QAC7F,qBAAgB,GAAY,IAAI,iDAAO,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;QAI9F,kBAAa,GAAG,CAAC,CAAC;QAElB,0BAAqB,GAAG,gDAAM,CAAC,QAAQ,EAAE,CAAC;QAyCxC,WAAM,GAAG,KAAK,CAAC;QAejB,gBAAW,GAAG,IAAI,CAAC;QAkB3B;;;WAGG;QACI,2BAAsB,GAAW,GAAG,CAAC;QAEpC,YAAO,GAAG,GAAG,CAAC;QAsQlB,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAC/B,IAAI,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,YAAY,IAAI,CAAC,EAAE;YAC3C,MAAM,gCAAgC,CAAC;SAC1C;QAED,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;QACxB,KAAK,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAC9B,IAAI,CAAC,WAAW,eAAG,IAAI,CAAC,MAAM,CAAC,YAAY,0CAAE,IAAI,uCAAI,KAAK,GAAC;QAC3D,IAAI,CAAC,0BAA0B,GAAG,IAAI,sDAAY,CAAC,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC/F,IAAI,CAAC,+BAA+B,GAAG,KAAK,CAAC;QAE7C,uBAAuB,CAAC,6BAA6B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QAEnE,4DAA4D;QAC5D,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,OAAO,EAAE,CAAC;QAE7C,IAAI,CAAC,gBAAgB,EAAE;YACnB,IAAI,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,+BAA+B,EAAE;gBACrE,IAAI,CAAC,YAAY,GAAG,mDAAS,CAAC,sBAAsB,CAAC;aACxD;iBACI,IAAI,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,2BAA2B,EAAE;gBAClE,IAAI,CAAC,YAAY,GAAG,mDAAS,CAAC,iBAAiB,CAAC;aACnD;iBACI;gBACD,IAAI,CAAC,YAAY,GAAG,mDAAS,CAAC,wBAAwB,CAAC;aAC1D;SACJ;aAAM;YACH,IAAI,IAAI,CAAC,kBAAkB,IAAI,IAAI,CAAC,2BAA2B,EAAE;gBAC7D,IAAI,CAAC,YAAY,GAAG,mDAAS,CAAC,iBAAiB,CAAC;aACnD;iBACI,IAAI,IAAI,CAAC,sBAAsB,IAAI,IAAI,CAAC,+BAA+B,EAAE;gBAC1E,IAAI,CAAC,YAAY,GAAG,mDAAS,CAAC,sBAAsB,CAAC;aACxD;iBACI;gBACD,IAAI,CAAC,YAAY,GAAG,mDAAS,CAAC,wBAAwB,CAAC;aAC1D;SACJ;QAED,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,IAAI,CAAC,kBAAkB,EAAE,CAAC;IAC9B,CAAC;IA16BD,sBAAW,+CAAU;aAArB;YACI,OAAO,EAAE,CAAC;QACd,CAAC;;;OAAA;IAED,sBAAW,+CAAU;aAArB;YACI,OAAO,IAAI,CAAC;QAChB,CAAC;;;OAAA;IAEM,+CAAa,GAApB;QACI,OAAO,EAAE,CAAC;IACd,CAAC;IAEM,0CAAQ,GAAf;QACI,IAAI,CAAC,iBAAiB,EAAE,CAAC;IAC7B,CAAC;IAmGD,sBAAW,yCAAI;QAHf;;WAEG;aACH;YACI,OAAO,IAAI,CAAC,KAAK,CAAC;QACtB,CAAC;QACD;;WAEG;aACH,UAAgB,IAAY;YACxB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QACtB,CAAC;;;OANA;IAYD,sBAAW,+CAAU;QAHrB;;WAEG;aACH;YACI,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;QACD;;WAEG;aACH,UAAsB,UAAkB;YACpC,IAAI,CAAC,WAAW,GAAG,UAAU,CAAC;QAClC,CAAC;;;OANA;IAaD,sBAAW,2CAAM;QAJjB;;;WAGG;aACH;YACI,OAAO,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;QACD;;;WAGG;aACH,UAAkB,KAAa;YAC3B,IAAI,IAAI,CAAC,OAAO,KAAK,KAAK,EAAE;gBACxB,OAAO;aACV;YAED,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;YACrB,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC;QAC1C,CAAC;;;OAbA;IAkBD,sBAAW,iEAA4B;QAHvC;;WAEG;aACH;YACI,OAAO,IAAI,CAAC,MAAM,KAAK,uBAAuB,CAAC,UAAU,CAAC;QAC9D,CAAC;QACD;;WAEG;aACH,UAAwC,KAAc;YAClD,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,KAAK,uBAAuB,CAAC,UAAU,EAAE;gBAC9D,OAAO;aACV;YACD,IAAI,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,uBAAuB,CAAC,UAAU,CAAC,CAAC,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;QACrG,CAAC;;;OATA;IAgBD,sBAAW,qDAAgB;QAJ3B;;;WAGG;aACH;YACI,OAAO,IAAI,CAAC,iBAAiB,CAAC;QAClC,CAAC;QACD;;;WAGG;aACH,UAA4B,gBAAwB;YAChD,IAAI,IAAI,CAAC,iBAAiB,KAAK,gBAAgB,EAAE;gBAC7C,OAAO;aACV;YAED,IAAI,CAAC,iBAAiB,GAAG,gBAAgB,CAAC;YAE1C,IAAI,CAAC,kBAAkB,EAAE,CAAC;YAC1B,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC;QAC1C,CAAC;;;OAdA;IAmBD,sBAAW,8DAAyB;QAHpC;;WAEG;aACH;YACI,OAAO,IAAI,CAAC,MAAM,KAAK,uBAAuB,CAAC,WAAW,CAAC;QAC/D,CAAC;QACD;;WAEG;aACH,UAAqC,KAAc;YAC/C,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,MAAM,KAAK,uBAAuB,CAAC,WAAW,EAAE;gBAC/D,OAAO;aACV;YACD,IAAI,CAAC,MAAM,GAAG,CAAC,KAAK,CAAC,CAAC,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC,CAAC,uBAAuB,CAAC,WAAW,CAAC,CAAC;QACtG,CAAC;;;OATA;IAqBD,sBAAW,qEAAgC;QAT3C;;;;;;;;WAQG;aACH;YACI,OAAO,IAAI,CAAC,iCAAiC,CAAC;QAClD,CAAC;QACD;;;;;;;;WAQG;aACH,UAA4C,gCAAwC;YAChF,IAAI,CAAC,iCAAiC,GAAG,gCAAgC,CAAC;QAC9E,CAAC;;;OAZA;IAiBD,sBAAW,6CAAQ;QADnB,mDAAmD;aACnD;YACI,OAAO,IAAI,CAAC,SAAS,CAAC;QAC1B,CAAC;aAED,UAAoB,KAAa;YAC7B,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QAC5B,CAAC;;;OAJA;IAMD;;;;OAIG;IACI,6CAAW,GAAlB;QACI,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IACD;;;;OAIG;IACI,6CAAW,GAAlB,UAAmB,QAAgB;QAC/B,IAAI,QAAQ,IAAI,GAAG,EAAE;YACjB,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;SACxB;aACI,IAAI,QAAQ,IAAI,GAAG,EAAE;YACtB,IAAI,CAAC,SAAS,GAAG,GAAG,CAAC;SACxB;aACI;YACD,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;SAC7B;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IAUD,sBAAW,uDAAkB;QAD7B,2DAA2D;aAC3D;YACI,OAAO,IAAI,CAAC,mBAAmB,CAAC;QACpC,CAAC;aAED,UAA8B,KAAc;YACxC,IAAI,CAAC,qBAAqB,CAAC,KAAK,CAAC,CAAC;QACtC,CAAC;;;OAJA;IAMD;;;;OAIG;IACI,uDAAqB,GAA5B,UAA6B,WAAoB;QAC7C,IAAI,CAAC,mBAAmB,GAAG,WAAW,CAAC;QACvC,OAAO,IAAI,CAAC;IAChB,CAAC;IAOD,sBAAW,gDAAW;QAHtB;;WAEG;aACH;YACI,OAAO,IAAI,CAAC,YAAY,CAAC;QAC7B,CAAC;aAED,UAAuB,KAAa;YAChC,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,uBAAuB,CAAC,kBAAkB,CAAC,EAAE,uBAAuB,CAAC,kBAAkB,CAAC,CAAC;YAC1H,IAAI,KAAK,KAAK,IAAI,CAAC,YAAY,EAAE;gBAC7B,OAAO;aACV;YAED,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;YAC1B,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC7B,CAAC;;;OAVA;IAmBD;;;OAGG;IACI,8CAAY,GAAnB;QACI,OAAO,IAAI,CAAC,UAAU,CAAC;IAC3B,CAAC;IAUD,sBAAW,oEAA+B;QAL1C;;;;WAIG;aACH;YACI,OAAO,IAAI,CAAC,gCAAgC,CAAC;QACjD,CAAC;aAED,UAA2C,MAAe;YACtD,IAAI,IAAI,CAAC,0CAA0C,IAAI,MAAM,EAAE;gBAC3D,IAAI,CAAC,MAAM,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;gBAC7F,IAAI,CAAC,0CAA0C,GAAG,IAAI,CAAC;aAC1D;YAED,IAAI,CAAC,IAAI,CAAC,0CAA0C,IAAI,CAAC,MAAM,EAAE;gBAC7D,IAAI,CAAC,0CAA0C,GAAG,IAAI,CAAC,MAAM,CAAC,wBAAwB,CAAC,GAAG,CAAC,IAAI,CAAC,iCAAiC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;aACjJ;YAED,IAAI,CAAC,gCAAgC,GAAG,MAAM,CAAC;YAE/C,IAAI,MAAM,EAAE;gBACR,IAAI,CAAC,iCAAiC,EAAE,CAAC;aAC5C;QACL,CAAC;;;OAjBA;IAsBS,mEAAiC,GAA3C;QACI,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;QACnF,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;QAEnF,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE;YAC/C,IAAM,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC;YAC9C,KAAK,IAAI,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,UAAU,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE;gBAChE,IAAM,IAAI,GAAG,UAAU,CAAC,SAAS,CAAC,CAAC;gBAEnC,IAAI,CAAC,IAAI,EAAE;oBACP,SAAS;iBACZ;gBAED,IAAM,YAAY,GAAG,IAAI,CAAC,eAAe,EAAE,EACrC,WAAW,GAAG,YAAY,CAAC,WAAW,CAAC;gBAE7C,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;gBACxD,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC;aAC3D;SACJ;QAED,IAAI,CAAC,0BAA0B,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC9E,CAAC;IASD,sBAAW,8DAAyB;QALpC;;;;WAIG;aACH;YACI,OAAO,IAAI,CAAC,0BAA0B,CAAC;QAC3C,CAAC;aAED,UAAqC,YAA0B;YAC3D,IAAI,CAAC,0BAA0B,GAAG,YAAY,CAAC;QACnD,CAAC;;;OAJA;IAWD;;;;;;;OAOG;IACI,mDAAiB,GAAxB,UAAyB,GAAW,EAAE,GAAW;QAC7C,IAAI,IAAI,CAAC,YAAY,KAAK,GAAG,IAAI,IAAI,CAAC,YAAY,KAAK,GAAG,EAAE;YACxD,OAAO;SACV;QAED,IAAI,GAAG,GAAG,GAAG,EAAE;YACX,GAAG,GAAG,CAAC,CAAC;YACR,GAAG,GAAG,CAAC,CAAC;SACX;QAED,IAAI,GAAG,GAAG,CAAC,EAAE;YACT,GAAG,GAAG,CAAC,CAAC;SACX;QAED,IAAI,GAAG,GAAG,CAAC,EAAE;YACT,GAAG,GAAG,CAAC,CAAC;SACX;QAED,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QACxB,IAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QACxB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;IAChC,CAAC;IAED;;;OAGG;IACI,8CAAY,GAAnB;QACI,OAAO,yBAAyB,CAAC;IACrC,CAAC;IAED;;;;;OAKG;IACI,iDAAe,GAAtB,UAAuB,IAAkB,EAAE,kBAAyB;;QAAzB,8DAAyB;QAChE,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,OAAO,IAAI,CAAC;SACf;QAED,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE;YAC7B,IAAI,CAAC,UAAU,CAAC,UAAU,GAAG,EAAE,CAAC;SACnC;QAED,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEtC,IAAI,kBAAkB,EAAE;YACpB,UAAI,CAAC,UAAU,CAAC,UAAU,EAAC,IAAI,oBAAI,IAAI,CAAC,cAAc,EAAE,GAAE;SAC7D;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAED;;;;;OAKG;IACI,oDAAkB,GAAzB,UAA0B,IAAkB,EAAE,kBAAyB;;QAAzB,8DAAyB;QACnE,IAAI,CAAC,IAAI,CAAC,UAAU,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE;YACjD,OAAO,IAAI,CAAC;SACf;QAED,IAAI,KAAK,GAAG,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAErD,IAAI,KAAK,KAAK,CAAC,CAAC,EAAE;YACd,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;SAC/C;QAED,IAAI,kBAAkB,EAAE;;gBACpB,KAAkB,sBAAI,CAAC,WAAW,EAAE,6CAAE;oBAAjC,IAAI,KAAK;oBACV,IAAI,CAAC,kBAAkB,CAAM,KAAK,CAAC,CAAC;iBACvC;;;;;;;;;SACJ;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAQD;;;OAGG;IACI,0CAAQ,GAAf;QACI,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;IAYD;;;OAGG;IACI,sDAAoB,GAA3B,UAA4B,YAAoB;QAC5C,OAAO,YAAY,IAAI,CAAC,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAChH,CAAC;IAED;;;OAGG;IACI,sDAAoB,GAA3B,UAA4B,YAAoB;QAC5C,OAAO,YAAY,IAAI,CAAC,IAAI,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IAChH,CAAC;IAmCD,sBAAW,+CAAU;QAJrB;;;WAGG;aACH;YACI,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE;gBAC3C,OAAO,CAAC,CAAC;aACZ;YACD,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;QACD;;WAEG;aACH,UAAsB,KAAa;YAC/B,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE;gBAC3C,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;gBACzB,OAAO;aACV;YACD,IAAI,IAAI,CAAC,WAAW,KAAK,KAAK,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,IAAI,EAAE;gBAC9G,OAAO;aACV;YACD,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;YACzB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAChC,CAAC;;;OAdA;IAsBD,sBAAW,0CAAK;QAJhB;;;WAGG;aACH;YACI,OAAO,IAAI,CAAC,MAAM,CAAC;QACvB,CAAC;aAED,UAAiB,GAAY;YACzB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC;YAClB,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC;QAC1C,CAAC;;;OALA;IAiBD,sBAAW,+CAAU;QARrB;;;;;;;WAOG;aACH;YACI,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;aAED,UAAsB,KAAc;YAChC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QAC7B,CAAC;;;OAJA;IAoBD,sBAAW,2CAAM;QANjB;;;;;WAKG;aACH;YACI,OAAO,IAAI,CAAC,OAAO,CAAC;QACxB,CAAC;aAED,UAAkB,KAAa;YAC3B,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC/C,IAAI,IAAI,CAAC,OAAO,IAAI,MAAM,EAAE;gBACxB,OAAO;aACV;YACD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;YACtB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;QAChC,CAAC;;;OATA;IAWD;;;OAGG;IACI,sDAAoB,GAA3B,UAA4B,UAAkB;QAC1C,OAAO,UAAU,IAAI,CAAC,IAAI,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC;IACrG,CAAC;IAED;;;;OAIG;IACI,8CAAY,GAAnB;QACI,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC;IAChC,CAAC;IAEO,+CAAa,GAArB;QACI,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;QACtC,IAAI,CAAC,MAAM,EAAE;YACT,OAAO;SACV;QAED,IAAM,IAAI,GAAG,MAAM,CAAC,IAAI,EAClB,GAAG,GAAG,MAAM,CAAC,IAAI,EACjB,WAAW,GAAG,GAAG,GAAG,IAAI,EACxB,WAAW,GAAG,IAAI,CAAC,YAAY,EAC/B,WAAW,GAAG,IAAI,CAAC,WAAW,GAAG,GAAG,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;QAEnK,IAAM,IAAI,GAAG,IAAI,GAAG,WAAW,GAAG,WAAW,EACvC,IAAI,GAAG,IAAI,GAAG,WAAW,GAAG,WAAW,CAAC;QAE9C,IAAM,KAAK,GAAG,IAAI,GAAG,IAAI,EACnB,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC;QAE1B,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,YAAY,EAAE;YAC7E,IAAM,CAAC,GAAG,CAAC,YAAY,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,EAC1C,GAAG,GAAG,IAAI,GAAG,CAAC,cAAK,EAAI,CAAC,EAAC,EACzB,OAAO,GAAG,IAAI,GAAG,KAAK,GAAG,CAAC,CAAC;YAEjC,IAAM,CAAC,GAAG,IAAI,CAAC,OAAO,GAAG,CAAC,GAAG,GAAG,OAAO,CAAC,GAAG,OAAO,CAAC;YAEnD,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,iBAAiB,GAAG,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC,aAAa,CAAC;YACnI,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,aAAa,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,WAAW,CAAC;YAEtE,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,GAAG,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,aAAa,GAAG,WAAW,CAAC;YACzG,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,iBAAiB,CAAC,GAAG,WAAW,CAAC;SACpJ;QAED,IAAI,CAAC,eAAe,GAAG,KAAK,CAAC;IACjC,CAAC;IAED;;;;;OAKG;IACI,uDAAqB,GAA5B,UAA6B,YAAoB;QAC7C,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,IAAI,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,KAAK,KAAK,CAAC,WAAW,EAAE,EAAE;YAC7D,OAAO,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC;SAChD;QAED,IAAI,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC;QAChC,IAAI,CAAC,MAAM,EAAE;YACT,OAAO,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC;SAChD;QAED,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QAE1D,IAAI,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QACzC,IAAI,IAAI,CAAC,MAAM,CAAC,6BAA6B,EAAE,EAAE;YAC7C,aAAa,GAAG,IAAI,CAAC,MAAM,CAAC,mBAAmB,CAAC;SACnD;QAED,iDAAO,CAAC,cAAc,CAAC,IAAI,CAAC,MAAM,CAAC,kBAAkB,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAChF,IAAI,IAAI,CAAC,GAAG,CAAC,iDAAO,CAAC,GAAG,CAAC,IAAI,CAAC,eAAe,EAAE,iDAAO,CAAC,EAAE,EAAE,CAAC,CAAC,KAAK,GAAG,EAAE;YACnE,IAAI,CAAC,eAAe,CAAC,CAAC,GAAG,eAAe,CAAC,CAAC,kDAAkD;SAC/F;QAED,IAAI,IAAI,CAAC,MAAM,CAAC,2BAA2B,EAAE,IAAI,CAAC,IAAI,CAAC,eAAe,IAAI,CAAC,IAAI,CAAC,gBAAgB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE;YACpM,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YAC7C,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;YAErD,IAAI,CAAC,2BAA2B,CAAC,YAAY,CAAC,CAAC;YAC/C,IAAI,CAAC,sBAAsB,CAAC,YAAY,CAAC,CAAC;YAE1C,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,yBAAyB;YAE5H,oCAAoC;YACpC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,CAAC,CAAC;YAErJ,+DAA+D;YAC/D,gDAAM,CAAC,aAAa,CAAC,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC;YAEtI,IAAI,IAAI,GAAG,CAAC,EAAE,IAAI,GAAG,KAAK,CAAC,CAAC,CAAC;YAE7B,+EAA+E;YAC/E,IAAM,YAAY,GAAG,IAAI,CAAC,0BAA0B,CAAC;YAErD,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC;YAEtD,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAE/D,IAAI,CAAC,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,MAAM,KAAK,uBAAuB,CAAC,WAAW,EAAE;gBAC1E,uGAAuG;gBACvG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;aAClE;iBAAM;gBACH,qIAAqI;gBACrI,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,YAAY,CAAC,WAAW,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;aAClE;YAED,IAAI,IAAI,CAAC,MAAM,CAAC,oBAAoB,EAAE;gBAClC,gDAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC,CAAC;aACxP;iBAAM;gBACH,gDAAM,CAAC,qBAAqB,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC,CAAC;aACxP;YAED,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAC/C,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;YAE/C,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC;YAE9H,mFAAmF;YACnF,uCAAuC;YACvC,iDAAO,CAAC,yBAAyB,CAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,EAAE,KAAK,CAAC,CAAC,CAAC,uBAAuB;YACjH,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC,CAAC;YAEtC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,wBAAwB;YAC7G,KAAK,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,sBAAsB;YAEpF,gDAAM,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;YAEvD,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC,aAAa,CAAC,MAAM,EAAE,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC,CAAC;YACrG,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC;SACjI;QAED,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,IAAI,CAAC,yBAAyB,EAAE,YAAY,GAAG,EAAE,CAAC,CAAC;QAErG,OAAO,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC;IACjD,CAAC;IAED,sDAAsD;IAC9C,6DAA2B,GAAnC,UAAoC,YAAoB;QACpD,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE;YAC3B,OAAO;SACV;QAED,IAAM,aAAa,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,iBAAiB,EAC9D,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC,aAAa,CAAC;QAE7D,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,aAAa,EAAE,CAAC,CAAC,mIAAmI;QAE7K,IAAM,WAAW,GAAG,gDAAM,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,uBAAuB,EAAE,CAAC,CAAC;QACtF,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,uBAAuB,CAAC,sBAAsB,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE;YAC1G,iDAAO,CAAC,yBAAyB,CAAC,uBAAuB,CAAC,sBAAsB,CAAC,WAAW,CAAC,EAAE,WAAW,EAAE,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;SAC1K;QAED,mEAAmE;QACnE,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,uBAAuB,CAAC,sBAAsB,CAAC,MAAM,GAAG,CAAC,EAAE,EAAE,WAAW,EAAE;YAC9G,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;YACzJ,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC,kBAAkB;YACrE,KAAK,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,CAAC,iBAAiB;YAEhD,KAAK,CAAC,UAAU,CAAC,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;YAE5E,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC;YAC9E,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;SAC/E;IACL,CAAC;IAEO,wDAAsB,GAA9B,UAA+B,YAAoB;QAC/C,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;QAC3G,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,cAAc,CAAC,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC;QAC3G,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,cAAc,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAE1D,IAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC;QAExC,IAAI,CAAC,MAAM,EAAE;YACT,OAAO;SACV;QAED,mDAAmD;QACnD,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE;YACxG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,UAAU,CAAC,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC;SAC3G;QAED,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,YAAY,CAAC,CAAC,GAAG,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,MAAM,CAAC,CAAC;QAExG,IAAI,IAAI,CAAC,iBAAiB,EAAE;YACxB,4EAA4E;YAC5E,IAAI,YAAY,GAAG,CAAC,CAAC;YACrB,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE;gBACxG,IAAM,IAAI,GAAG,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,EAAE,KAAK,CAAC,CAAC,MAAM,EAAE,CAAC;gBACxI,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,EAAE,IAAI,CAAC,CAAC;aAC/C;YAED,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;YAEjD,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,cAAc,CAAC,YAAY,EAAE,YAAY,EAAE,YAAY,CAAC,CAAC;YAC/F,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,cAAc,CAAC,CAAC,YAAY,EAAE,CAAC,YAAY,EAAE,CAAC,YAAY,CAAC,CAAC;SACrG;aAAM;YACH,+CAA+C;YAC/C,IAAM,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC;YAEzD,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,IAAI,CAAC,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC,kBAAkB;YAE3F,gDAAM,CAAC,aAAa,CAAC,cAAc,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC,qBAAqB;YAEjF,+CAA+C;YAC/C,KAAK,IAAI,WAAW,GAAG,CAAC,EAAE,WAAW,GAAG,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,MAAM,EAAE,EAAE,WAAW,EAAE;gBACxG,iDAAO,CAAC,yBAAyB,CAAC,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,WAAW,CAAC,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;gBAE5G,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;gBAC7D,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC;aAChE;SACJ;QAED,OAAO;IACX,CAAC;IAED,cAAc;IACG,qDAA6B,GAA9C,UAA+C,KAAY;QACvD,IAAI,SAAS,GAAG,KAAK,CAAC,aAAa,CAAC,iEAAuB,CAAC,oBAAoB,CAAC,CAAC;QAClF,IAAI,CAAC,SAAS,EAAE;YACZ,SAAS,GAAG,IAAI,uEAA6B,CAAC,KAAK,CAAC,CAAC;YACrD,KAAK,CAAC,aAAa,CAAC,SAAS,CAAC,CAAC;SAClC;IACL,CAAC;IAuDO,sDAAoB,GAA5B;QACI,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC;QACtC,IAAI,CAAC,oBAAoB,EAAE,CAAC;IAChC,CAAC;IAEO,sDAAoB,GAA5B;QAAA,iBAmGC;QAlGG,MAAM;QACN,IAAI,CAAC,yBAAyB,GAAG,IAAI,YAAY,CAAC,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC,CAAC;QAC1E,IAAI,CAAC,mBAAmB,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACxD,IAAI,CAAC,eAAe,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACpD,IAAI,CAAC,gBAAgB,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACrD,IAAI,CAAC,sBAAsB,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC,CAAC;QAC/D,IAAI,CAAC,gBAAgB,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAErD,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;QACpB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,mBAAmB,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;QAC7B,IAAI,CAAC,cAAc,GAAG,EAAE,CAAC;QACzB,IAAI,CAAC,gBAAgB,GAAG,EAAE,CAAC;QAC3B,IAAI,CAAC,yBAAyB,GAAG,EAAE,CAAC;QAEpC,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,YAAY,EAAE,EAAE,YAAY,EAAE;YACzE,IAAI,CAAC,SAAS,CAAC,YAAY,CAAC,GAAG;gBAC3B,iBAAiB,EAAE,CAAC;gBACpB,aAAa,EAAE,CAAC;aACnB,CAAC;YAEF,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,GAAG,gDAAM,CAAC,IAAI,EAAE,CAAC;YACjD,IAAI,CAAC,mBAAmB,CAAC,YAAY,CAAC,GAAG,gDAAM,CAAC,IAAI,EAAE,CAAC;YACvD,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,GAAG,gDAAM,CAAC,IAAI,EAAE,CAAC;YACtD,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,GAAG,IAAI,iDAAO,EAAE,CAAC;YACtD,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,GAAG,IAAI,iDAAO,EAAE,CAAC;YACtD,IAAI,CAAC,cAAc,CAAC,YAAY,CAAC,GAAG,IAAI,iDAAO,EAAE,CAAC;YAClD,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,GAAG,IAAI,iDAAO,EAAE,CAAC;YACpD,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,GAAG,IAAI,KAAK,CAAC,uBAAuB,CAAC,sBAAsB,CAAC,MAAM,CAAC,CAAC;YAEhH,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,uBAAuB,CAAC,sBAAsB,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;gBAC5E,IAAI,CAAC,yBAAyB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,iDAAO,EAAE,CAAC;aACnE;SACJ;QAED,gBAAgB;QAChB,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;QAErC,IAAM,IAAI,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,CAAC;QACvF,IAAI,CAAC,UAAU,GAAG,IAAI,6DAAmB,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,mDAAS,CAAC,iBAAiB,CAAC,CAAC;QACtM,IAAI,CAAC,UAAU,CAAC,yBAAyB,CAAC,mDAAS,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QAEhE,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,iDAAO,CAAC,iBAAiB,CAAC;QAClD,IAAI,CAAC,UAAU,CAAC,KAAK,GAAG,iDAAO,CAAC,iBAAiB,CAAC;QAClD,IAAI,CAAC,UAAU,CAAC,yBAAyB,GAAG,CAAC,CAAC;QAC9C,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,iDAAO,CAAC,qBAAqB,CAAC,CAAC;QAClE,IAAI,CAAC,UAAU,CAAC,eAAe,GAAG,KAAK,CAAC;QACxC,IAAI,CAAC,UAAU,CAAC,oBAAoB,GAAG,IAAI,CAAC;QAC5C,IAAI,IAAI,CAAC,eAAe,EAAE;YACtB,IAAI,CAAC,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC;SACnD;QAED,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,GAAG,CAAC;YACvC,IAAI,KAAI,CAAC,eAAe,EAAE;gBACtB,KAAI,CAAC,aAAa,EAAE,CAAC;aACxB;QACL,CAAC,CAAC,CAAC;QAEH,mCAAmC;QACnC,IAAI,CAAC,UAAU,CAAC,wBAAwB,CAAC,GAAG,CAAC,UAAC,KAAa;YACvD,KAAI,CAAC,aAAa,GAAG,KAAK,CAAC;YAC3B,IAAI,KAAI,CAAC,OAAO,KAAK,uBAAuB,CAAC,UAAU,EAAE;gBACrD,MAAM,CAAC,aAAa,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC;aACpC;QACL,CAAC,CAAC,CAAC;QAEH,0BAA0B;QAC1B,IAAI,CAAC,UAAU,CAAC,oBAAoB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAE3E,4BAA4B;QAC5B,IAAI,CAAC,UAAU,CAAC,uBAAuB,CAAC,GAAG,CAAC;YACxC,IAAI,KAAI,CAAC,OAAO,KAAK,uBAAuB,CAAC,UAAU,EAAE;gBACrD,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;aAC9B;QACL,CAAC,CAAC,CAAC;QAEH,wCAAwC;QACxC,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,GAAG,CAAC,UAAC,MAAM;YACzC,IAAI,KAAI,CAAC,OAAO,KAAK,uBAAuB,CAAC,UAAU,EAAE;gBACrD,MAAM,CAAC,KAAK,CAAC,uBAAuB,CAAC,SAAS,EAAE,KAAI,CAAC,KAAK,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;aAC5E;iBACI;gBACD,MAAM,CAAC,KAAK,CAAC,uBAAuB,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;aACtE;QACL,CAAC,CAAC,CAAC;QAEH,sBAAsB;QACtB,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,GAAG,CAAC,UAAC,GAAG;YACvC,KAAI,CAAC,eAAe,GAAG,KAAI,CAAC,UAAW,CAAC,QAAQ,CAAC;YACjD,KAAI,CAAC,QAAQ,GAAG,GAAG,CAAC,aAAa,EAAE,CAAC;YACpC,KAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC;YACtC,KAAI,CAAC,iBAAiB,EAAE,CAAC;QAC7B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAEO,qDAAmB,GAA3B,UAA4B,eAAoC,EAAE,kBAAuC,EAAE,oBAAyC,EAAE,kBAAuC;QACzL,IAAI,KAAa,CAAC;QAClB,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC;QAErC,IAAM,UAAU,GAAG,MAAM,CAAC,aAAa,EAAE,CAAC;QAC1C,IAAI,kBAAkB,CAAC,MAAM,EAAE;YAC3B,MAAM,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;YAC5B,KAAK,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,kBAAkB,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;gBACxD,IAAI,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACnE;YACD,MAAM,CAAC,aAAa,CAAC,UAAU,CAAC,CAAC;SACpC;QAED,KAAK,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,eAAe,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACrD,IAAI,CAAC,0BAA0B,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;SAChE;QAED,KAAK,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,kBAAkB,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;YACxD,IAAI,CAAC,0BAA0B,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;SACnE;QAED,IAAI,IAAI,CAAC,mBAAmB,EAAE;YAC1B,KAAK,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,oBAAoB,CAAC,MAAM,EAAE,KAAK,EAAE,EAAE;gBAC1D,IAAI,CAAC,0BAA0B,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;aACrE;SACJ;IACL,CAAC;IAEO,4DAA0B,GAAlC,UAAmC,OAAgB;QAAnD,iBA2FC;QA1FG,IAAI,IAAI,GAAG,OAAO,CAAC,gBAAgB,EAAE,CAAC;QACtC,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,IAAI,MAAM,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC;QAC/B,IAAI,QAAQ,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;QAErC,IAAI,CAAC,6BAA6B,CAAC,qBAAqB,GAAG,KAAK,CAAC;QAEjE,IAAI,CAAC,QAAQ,IAAI,OAAO,CAAC,aAAa,KAAK,CAAC,EAAE;YAC1C,OAAO;SACV;QAED,UAAU;QACV,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,eAAe,CAAC,CAAC;QAE1C,qBAAqB;QACrB,IAAI,KAAK,GAAG,IAAI,CAAC,uBAAuB,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;QACtD,IAAI,KAAK,CAAC,UAAU,EAAE;YAClB,OAAO;SACV;QAED,IAAI,0BAA0B,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,OAAO,CAAC,GAAG,CAAC,KAAK,SAAS,CAAC,CAAC;QAC7K,IAAI,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,0BAA0B,CAAC,EAAE;YACnD,MAAM,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAClC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,kDAAQ,CAAC,gBAAgB,CAAC,CAAC;YAE7D,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,cAAc,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,CAAC;YAEtE,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,gBAAgB,EAAE,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC;YACzF,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,WAAW,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAE5D,IAAI,KAAK,CAAC,YAAY,EAAE;gBACpB,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,aAAa,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC,YAAY,CAAC,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC,YAAY,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC,CAAC;aAChM;YAED,aAAa;YACb,IAAI,QAAQ,IAAI,QAAQ,CAAC,gBAAgB,EAAE,EAAE;gBACzC,IAAI,YAAY,GAAG,QAAQ,CAAC,mBAAmB,EAAE,CAAC;gBAClD,IAAI,YAAY,EAAE;oBACd,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,gBAAgB,EAAE,YAAY,CAAC,CAAC;oBACxD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,eAAe,EAAE,YAAY,CAAC,gBAAgB,EAAE,IAAI,IAAI,CAAC,qBAAqB,CAAC,CAAC;iBAC1G;aACJ;YAED,QAAQ;YACR,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,wBAAwB,IAAI,IAAI,CAAC,QAAQ,EAAE;gBACjE,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;gBAE/B,IAAI,QAAQ,CAAC,yBAAyB,EAAE;oBACpC,IAAM,WAAW,GAAG,QAAQ,CAAC,yBAAyB,CAAC,IAAI,CAAC,CAAC;oBAE7D,IAAI,CAAC,WAAW,EAAE;wBACd,OAAO;qBACV;oBAED,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,aAAa,EAAE,WAAW,CAAC,CAAC;oBACpD,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,kBAAkB,EAAE,GAAG,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;iBAChF;qBAAM;oBACH,IAAI,CAAC,OAAO,CAAC,WAAW,CAAC,QAAQ,EAAE,QAAQ,CAAC,oBAAoB,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;iBAC7E;aACJ;YAED,gBAAgB;YAChB,wDAAc,CAAC,yBAAyB,CAAC,IAAI,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;YAE7D,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBACzB,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;aACzC;YAED,cAAc;YACd,IAAI,CAAC,qCAAqC,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;YACjE,IAAI,CAAC,iCAAiC,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YAErE,OAAO;YACP,IAAI,CAAC,iBAAiB,CAAC,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,kDAAQ,CAAC,gBAAgB,EAAE,KAAK,EAAE,0BAA0B,EACtG,UAAC,UAAU,EAAE,KAAK,IAAK,YAAI,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,EAAE,KAAK,CAAC,EAAtC,CAAsC,CAAC,CAAC;YAEnE,IAAI,IAAI,CAAC,kBAAkB,EAAE;gBACzB,MAAM,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,KAAK,EAAE,KAAK,CAAC,CAAC;aAC1C;YAED,cAAc;YACd,IAAI,CAAC,gCAAgC,CAAC,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;YACpE,IAAI,CAAC,oCAAoC,CAAC,eAAe,CAAC,IAAI,CAAC,CAAC;SAEnE;aAAM;YACH,8CAA8C;YAC9C,IAAI,IAAI,CAAC,UAAU,EAAE;gBACjB,IAAI,CAAC,UAAU,CAAC,mBAAmB,EAAE,CAAC;aACzC;SACJ;IACL,CAAC;IAEO,oDAAkB,GAA1B;QACI,IAAI,CAAC,IAAI,CAAC,UAAU,EAAE;YAClB,OAAO;SACV;QAED,IAAI,IAAI,CAAC,MAAM,KAAK,uBAAuB,CAAC,WAAW,EAAE;YACrD,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,iDAAO,CAAC,oBAAoB,CAAC,CAAC;SACpE;aAAM;YACH,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,iDAAO,CAAC,qBAAqB,CAAC,CAAC;SACrE;IACL,CAAC;IAED;;;;OAIG;IACI,kDAAgB,GAAvB,UAAwB,UAAkD,EAAE,OAA4C;;QAAxH,iBAqDC;QApDG,IAAI,YAAY,cACZ,YAAY,EAAE,KAAK,IAChB,OAAO,CACb,CAAC;QAEF,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACpC,IAAI,CAAC,SAAS,EAAE;YACZ,IAAI,UAAU,EAAE;gBACZ,UAAU,CAAC,IAAI,CAAC,CAAC;aACpB;YACD,OAAO;SACV;QAED,IAAI,UAAU,GAAG,SAAS,CAAC,UAAU,CAAC;QACtC,IAAI,CAAC,UAAU,EAAE;YACb,IAAI,UAAU,EAAE;gBACZ,UAAU,CAAC,IAAI,CAAC,CAAC;aACpB;YACD,OAAO;SACV;QAED,IAAI,SAAS,GAAG,IAAI,KAAK,EAAW,CAAC;;YACrC,KAAiB,sCAAU,qGAAE;gBAAxB,IAAI,IAAI;gBACT,SAAS,CAAC,IAAI,OAAd,SAAS,WAAS,IAAI,CAAC,SAAS,GAAE;aACrC;;;;;;;;;QACD,IAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;YACxB,IAAI,UAAU,EAAE;gBACZ,UAAU,CAAC,IAAI,CAAC,CAAC;aACpB;YACD,OAAO;SACV;QAED,IAAI,YAAY,GAAG,CAAC,CAAC;QAErB,IAAI,UAAU,GAAG;YACb,IAAI,CAAC,KAAI,CAAC,MAAM,IAAI,CAAC,KAAI,CAAC,MAAM,CAAC,SAAS,EAAE,EAAE;gBAC1C,OAAO;aACV;YAED,OAAO,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,YAAY,CAAC,EAAE,YAAY,CAAC,YAAY,CAAC,EAAE;gBACrE,YAAY,EAAE,CAAC;gBACf,IAAI,YAAY,IAAI,SAAS,CAAC,MAAM,EAAE;oBAClC,IAAI,UAAU,EAAE;wBACZ,UAAU,CAAC,KAAI,CAAC,CAAC;qBACpB;oBACD,OAAO;iBACV;aACJ;YACD,UAAU,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC;QAC/B,CAAC,CAAC;QAEF,UAAU,EAAE,CAAC;IACjB,CAAC;IAED;;;;OAIG;IACI,uDAAqB,GAA5B,UAA6B,OAA4C;QAAzE,iBAMC;QALG,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO;YACvB,KAAI,CAAC,gBAAgB,CAAC;gBAClB,OAAO,EAAE,CAAC;YACd,CAAC,EAAE,OAAO,CAAC,CAAC;QAChB,CAAC,CAAC,CAAC;IACP,CAAC;IAED;;;;;OAKG;IACI,yCAAO,GAAd,UAAe,OAAgB,EAAE,YAAqB;QAClD,IAAI,OAAO,GAAG,EAAE,CAAC;QAEjB,IAAI,IAAI,CAAC,YAAY,KAAK,mDAAS,CAAC,wBAAwB,EAAE;YAC1D,OAAO,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;SACjC;QAED,OAAO,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;QAErC,IAAI,IAAI,CAAC,WAAW,IAAI,IAAI,CAAC,OAAO,KAAK,uBAAuB,CAAC,WAAW,EAAE;YAC1E,OAAO,CAAC,IAAI,CAAC,oBAAoB,CAAC,CAAC;SACtC;QAED,IAAI,OAAO,GAAG,CAAC,sDAAY,CAAC,YAAY,CAAC,CAAC;QAE1C,IAAI,IAAI,GAAG,OAAO,CAAC,OAAO,EAAE,CAAC;QAC7B,IAAI,QAAQ,GAAG,OAAO,CAAC,WAAW,EAAE,CAAC;QAErC,eAAe;QACf,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,qBAAqB,CAAC,sDAAY,CAAC,UAAU,CAAC,EAAE;YACxE,OAAO,CAAC,IAAI,CAAC,sDAAY,CAAC,UAAU,CAAC,CAAC;YACtC,OAAO,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC;YAC/B,OAAO,CAAC,IAAI,CAAC,8BAA8B,CAAC,CAAC;SAChD;QAED,aAAa;QACb,IAAI,QAAQ,IAAI,QAAQ,CAAC,gBAAgB,EAAE,EAAE;YACzC,IAAI,YAAY,GAAG,QAAQ,CAAC,mBAAmB,EAAE,CAAC;YAClD,IAAI,YAAY,EAAE;gBACd,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;gBAClC,IAAI,IAAI,CAAC,qBAAqB,CAAC,sDAAY,CAAC,MAAM,CAAC,EAAE;oBACjD,OAAO,CAAC,IAAI,CAAC,sDAAY,CAAC,MAAM,CAAC,CAAC;oBAClC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;iBAC/B;gBACD,IAAI,IAAI,CAAC,qBAAqB,CAAC,sDAAY,CAAC,OAAO,CAAC,EAAE;oBAClD,IAAI,YAAY,CAAC,gBAAgB,KAAK,CAAC,EAAE;wBACrC,OAAO,CAAC,IAAI,CAAC,sDAAY,CAAC,OAAO,CAAC,CAAC;wBACnC,OAAO,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC;qBAC/B;iBACJ;aACJ;SACJ;QAED,QAAQ;QACR,IAAM,SAAS,GAAG,IAAI,yDAAe,EAAE,CAAC;QACxC,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,wBAAwB,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjE,OAAO,CAAC,IAAI,CAAC,sDAAY,CAAC,mBAAmB,CAAC,CAAC;YAC/C,OAAO,CAAC,IAAI,CAAC,sDAAY,CAAC,mBAAmB,CAAC,CAAC;YAC/C,IAAI,IAAI,CAAC,kBAAkB,GAAG,CAAC,EAAE;gBAC7B,OAAO,CAAC,IAAI,CAAC,sDAAY,CAAC,wBAAwB,CAAC,CAAC;gBACpD,OAAO,CAAC,IAAI,CAAC,sDAAY,CAAC,wBAAwB,CAAC,CAAC;aACvD;YACD,IAAM,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC/B,OAAO,CAAC,IAAI,CAAC,+BAA+B,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC;YACxE,IAAI,IAAI,CAAC,kBAAkB,GAAG,CAAC,EAAE;gBAC7B,SAAS,CAAC,sBAAsB,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;aAC7C;YAED,IAAI,QAAQ,CAAC,yBAAyB,EAAE;gBACpC,OAAO,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;aACvC;iBAAM;gBACH,OAAO,CAAC,IAAI,CAAC,uBAAuB,GAAG,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;aACvE;SAEJ;aAAM;YACH,OAAO,CAAC,IAAI,CAAC,gCAAgC,CAAC,CAAC;SAClD;QAED,gBAAgB;QAChB,IAAI,OAAO,GAAU,IAAK,CAAC,kBAAkB,CAAC;QAC9C,IAAI,gBAAgB,GAAG,CAAC,CAAC;QACzB,IAAI,OAAO,EAAE;YACT,IAAI,OAAO,CAAC,cAAc,GAAG,CAAC,EAAE;gBAC5B,OAAO,CAAC,IAAI,CAAC,sBAAsB,CAAC,CAAC;gBACrC,gBAAgB,GAAG,OAAO,CAAC,cAAc,CAAC;gBAC1C,OAAO,CAAC,IAAI,CAAC,gCAAgC,GAAG,gBAAgB,CAAC,CAAC;gBAClE,wDAAc,CAAC,2CAA2C,CAAC,OAAO,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAC;aAC/F;SACJ;QAED,YAAY;QACZ,IAAI,YAAY,EAAE;YACd,OAAO,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC;YAClC,wDAAc,CAAC,0BAA0B,CAAC,OAAO,CAAC,CAAC;SACtD;QAED,qBAAqB;QACrB,IAAI,IAAI,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC9B,IAAI,IAAI,CAAC,cAAc,KAAK,IAAI,EAAE;YAC9B,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC;YAE3B,IAAI,UAAU,GAAG,WAAW,CAAC;YAC7B,IAAI,QAAQ,GAAG,CAAC,OAAO,EAAE,QAAQ,EAAE,gBAAgB,EAAE,eAAe,EAAE,WAAW,EAAE,aAAa,EAAE,cAAc,EAAE,uBAAuB,EAAE,kBAAkB,CAAC,CAAC;YAC/J,IAAI,QAAQ,GAAG,CAAC,gBAAgB,EAAE,aAAa,CAAC,CAAC;YAEjD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE,CAAC,YAAY,CAAC,UAAU,EAC1D,OAAO,EAAE,QAAQ,EACjB,QAAQ,EAAE,IAAI,EACd,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,EAAE,2BAA2B,EAAE,gBAAgB,EAAE,CAAC,CAAC;SAC3F;QAED,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,EAAE;YACzB,OAAO,KAAK,CAAC;SAChB;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAED;;;;OAIG;IACI,gDAAc,GAArB,UAAsB,OAAY,EAAE,UAAkB;QAClD,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QACxB,IAAI,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAExB,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;YAC/C,OAAO;SACV;QAED,OAAO,CAAC,QAAQ,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;QAEtC,OAAO,CAAC,WAAW,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;QACzC,OAAO,CAAC,gBAAgB,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC;QACpD,OAAO,CAAC,uBAAuB,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC,WAAW,CAAC;QAEjE,IAAM,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC;QAElC,IAAI,MAAM,IAAI,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,IAAI,EAAE;YAC1C,OAAO,CAAC,wBAAwB,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;SACzD;QAED,IAAI,IAAI,CAAC,yBAAyB,EAAE;YAChC,OAAO,CAAC,YAAY,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;YAC1C,IAAI,IAAI,CAAC,iBAAiB,KAAK,uBAAuB,CAAC,WAAW,EAAE;gBAChE,OAAO,CAAC,kBAAkB,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;aACnD;iBACI,IAAI,IAAI,CAAC,iBAAiB,KAAK,uBAAuB,CAAC,cAAc,EAAE;gBACxE,OAAO,CAAC,qBAAqB,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;aACtD;YACD,wBAAwB;SAC3B;aACI,IAAI,IAAI,CAAC,4BAA4B,EAAE;YACxC,OAAO,CAAC,WAAW,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;YACzC,IAAI,IAAI,CAAC,iBAAiB,KAAK,uBAAuB,CAAC,WAAW,EAAE;gBAChE,OAAO,CAAC,kBAAkB,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;aACnD;iBACI,IAAI,IAAI,CAAC,iBAAiB,KAAK,uBAAuB,CAAC,cAAc,EAAE;gBACxE,OAAO,CAAC,qBAAqB,GAAG,UAAU,CAAC,GAAG,IAAI,CAAC;aACtD;YACD,wBAAwB;SAC3B;IACL,CAAC;IAED;;;;;OAKG;IACI,iDAAe,GAAtB,UAAuB,UAAkB,EAAE,MAAc;QACrD,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC;QAE1B,IAAI,CAAC,KAAK,CAAC,cAAc,IAAI,CAAC,KAAK,CAAC,aAAa,EAAE;YAC/C,OAAO;SACV;QAED,IAAM,MAAM,GAAG,KAAK,CAAC,YAAY,CAAC;QAClC,IAAI,CAAC,MAAM,EAAE;YACT,OAAO;SACV;QAED,IAAM,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACtC,IAAI,CAAC,SAAS,EAAE;YACZ,OAAO;SACV;QAED,IAAM,KAAK,GAAG,SAAS,CAAC,OAAO,EAAE,CAAC,KAAK,CAAC;QAExC,MAAM,CAAC,WAAW,CAAC,aAAa,GAAG,UAAU,EAAE,IAAI,CAAC,yBAAyB,CAAC,CAAC;QAC/E,MAAM,CAAC,QAAQ,CAAC,cAAc,GAAG,UAAU,EAAE,IAAI,CAAC,mBAAmB,CAAC,CAAC;QACvE,MAAM,CAAC,QAAQ,CAAC,oBAAoB,GAAG,UAAU,EAAE,IAAI,CAAC,sBAAsB,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,sBAAsB,CAAC,CAAC;QAChI,MAAM,CAAC,QAAQ,CAAC,gBAAgB,GAAG,UAAU,EAAE,IAAI,CAAC,eAAe,CAAC,CAAC;QAErE,uCAAuC;QACvC,IAAI,IAAI,CAAC,OAAO,KAAK,uBAAuB,CAAC,UAAU,EAAE;YACrD,MAAM,CAAC,sBAAsB,CAAC,eAAe,GAAG,UAAU,EAAE,SAAS,CAAC,CAAC;YACvE,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,CAAC,GAAG,KAAK,EAAE,IAAI,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;SAC/H;aAAM,IAAI,IAAI,CAAC,OAAO,KAAK,uBAAuB,CAAC,WAAW,EAAE;YAC7D,KAAK,IAAI,YAAY,GAAG,CAAC,EAAE,YAAY,GAAG,IAAI,CAAC,YAAY,EAAE,EAAE,YAAY,EAAE;gBACzE,IAAI,CAAC,sBAAsB,CAAC,YAAY,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe;gBACjP,IAAI,CAAC,sBAAsB,CAAC,YAAY,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,eAAe;gBACjP,IAAI,CAAC,gBAAgB,CAAC,YAAY,CAAC,GAAG,YAAY,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACtN;YACD,MAAM,CAAC,sBAAsB,CAAC,eAAe,GAAG,UAAU,EAAE,SAAS,CAAC,CAAC;YACvE,MAAM,CAAC,UAAU,CAAC,cAAc,GAAG,UAAU,EAAE,SAAS,CAAC,CAAC;YAC1D,MAAM,CAAC,SAAS,CAAC,uBAAuB,GAAG,UAAU,EAAE,IAAI,CAAC,sBAAsB,CAAC,CAAC;YACpF,MAAM,CAAC,QAAQ,CAAC,iBAAiB,GAAG,UAAU,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;YACvE,MAAM,CAAC,QAAQ,CAAC,kBAAkB,GAAG,UAAU,EAAE,IAAI,CAAC,gBAAgB,CAAC,CAAC;YACxE,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,GAAG,KAAK,EAAE,IAAI,CAAC,iCAAiC,GAAG,KAAK,EAAE,IAAI,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;SACxK;aACI;YACD,MAAM,CAAC,UAAU,CAAC,eAAe,GAAG,UAAU,EAAE,SAAS,CAAC,CAAC;YAC3D,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC,WAAW,EAAE,EAAE,KAAK,EAAE,CAAC,GAAG,KAAK,EAAE,IAAI,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC;SAC/H;QAED,KAAK,CAAC,cAAc,CAAC,YAAY,CAAC,aAAa,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,YAAY,CAAC,MAAM,CAAC,EAAE,UAAU,CAAC,CAAC;IACpL,CAAC;IAED;;;;OAIG;IACI,oDAAkB,GAAzB;QACI,OAAO,IAAI,CAAC,qBAAqB,CAAC,CAAC,CAAC,CAAC;IACzC,CAAC;IAED;;;OAGG;IACI,mDAAiB,GAAxB;QACI,IAAI,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC;QAChC,IAAI,CAAC,SAAS,EAAE;YACZ,OAAO;SACV;QAED,qBAAqB;QACrB,IAAI,UAAU,GAAG,SAAS,CAAC,UAAU,CAAC;QACtC,0BAA0B;QAC1B,IAAI,CAAC,WAAW,EAAE,CAAC;QACnB,iBAAiB;QACjB,IAAI,CAAC,oBAAoB,EAAE,CAAC;QAC5B,iEAAiE;QACjE,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC1B,uBAAuB;QACvB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,wBAAwB;QACxB,IAAI,CAAC,UAAW,CAAC,UAAU,GAAG,UAAU,CAAC;IAC7C,CAAC;IAEO,6CAAW,GAAnB;QACI,IAAI,IAAI,CAAC,UAAU,EAAE;YACjB,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;YAC1B,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;SAC1B;IACL,CAAC;IAED;;;OAGG;IACI,yCAAO,GAAd;QACI,IAAI,CAAC,WAAW,EAAE,CAAC;QAEnB,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,MAAM,CAAC,gBAAgB,GAAG,IAAI,CAAC;YACpC,IAAI,CAAC,MAAM,CAAC,uBAAuB,EAAE,CAAC;SACzC;QAED,IAAI,CAAC,qCAAqC,CAAC,KAAK,EAAE,CAAC;QACnD,IAAI,CAAC,iCAAiC,CAAC,KAAK,EAAE,CAAC;QAC/C,IAAI,CAAC,oCAAoC,CAAC,KAAK,EAAE,CAAC;QAClD,IAAI,CAAC,gCAAgC,CAAC,KAAK,EAAE,CAAC;QAE9C,IAAI,IAAI,CAAC,0CAA0C,EAAE;YACjD,IAAI,CAAC,MAAM,CAAC,wBAAwB,CAAC,MAAM,CAAC,IAAI,CAAC,0CAA0C,CAAC,CAAC;YAC7F,IAAI,CAAC,0CAA0C,GAAG,IAAI,CAAC;SAC1D;IACL,CAAC;IAED;;;OAGG;IACI,2CAAS,GAAhB;QACI,IAAI,mBAAmB,GAAQ,EAAE,CAAC;QAClC,IAAI,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QAEpC,IAAI,CAAC,SAAS,EAAE;YACZ,OAAO,mBAAmB,CAAC;SAC9B;QAED,mBAAmB,CAAC,OAAO,GAAG,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC;QAC7C,mBAAmB,CAAC,OAAO,GAAG,SAAS,CAAC,aAAa,EAAE,CAAC;QACxD,mBAAmB,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACjE,mBAAmB,CAAC,QAAQ,GAAG,IAAI,CAAC,WAAW,EAAE,CAAC;QAClD,mBAAmB,CAAC,kBAAkB,GAAG,IAAI,CAAC,mBAAmB,CAAC;QAClE,mBAAmB,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC;QACjE,mBAAmB,CAAC,WAAW,GAAG,IAAI,CAAC,YAAY,CAAC;QACpD,mBAAmB,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC;QAC/D,mBAAmB,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;QAClD,mBAAmB,CAAC,MAAM,GAAG,IAAI,CAAC,OAAO,CAAC;QAC1C,mBAAmB,CAAC,+BAA+B,GAAG,IAAI,CAAC,gCAAgC,CAAC;QAC5F,mBAAmB,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;QAClD,mBAAmB,CAAC,sBAAsB,GAAG,IAAI,CAAC,sBAAsB,CAAC;QAEzE,mBAAmB,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;QACrC,mBAAmB,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC;QAEjD,mBAAmB,CAAC,4BAA4B,GAAG,IAAI,CAAC,4BAA4B,CAAC;QACrF,mBAAmB,CAAC,yBAAyB,GAAG,IAAI,CAAC,yBAAyB,CAAC;QAC/E,mBAAmB,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC7D,mBAAmB,CAAC,gCAAgC,GAAG,IAAI,CAAC,gCAAgC,CAAC;QAC7F,mBAAmB,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAE7D,mBAAmB,CAAC,UAAU,GAAG,EAAE,CAAC;QACpC,IAAI,SAAS,CAAC,UAAU,EAAE;YACtB,KAAK,IAAI,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,SAAS,CAAC,UAAU,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE;gBAC1E,IAAI,IAAI,GAAG,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC;gBAE3C,mBAAmB,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;aAChD;SACJ;QAED,OAAO,mBAAmB,CAAC;IAC/B,CAAC;IAED;;;;;OAKG;IACW,6BAAK,GAAnB,UAAoB,qBAA0B,EAAE,KAAY;QACxD,IAAI,KAAK,GAAqB,KAAK,CAAC,YAAY,CAAC,qBAAqB,CAAC,OAAO,CAAC,CAAC;QAChF,IAAI,eAAe,GAAG,IAAI,uBAAuB,CAAC,qBAAqB,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QACxF,IAAI,SAAS,GAAG,eAAe,CAAC,YAAY,EAAE,CAAC;QAE/C,KAAK,IAAI,SAAS,GAAG,CAAC,EAAE,SAAS,GAAG,qBAAqB,CAAC,UAAU,CAAC,MAAM,EAAE,SAAS,EAAE,EAAE;YACtF,IAAI,MAAM,GAAG,KAAK,CAAC,aAAa,CAAC,qBAAqB,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,CAAC;YAC9E,MAAM,CAAC,OAAO,CAAC,UAAS,IAAI;gBACxB,IAAI,CAAC,SAAS,EAAE;oBACZ,OAAO;iBACV;gBACD,IAAI,CAAC,SAAS,CAAC,UAAU,EAAE;oBACvB,SAAS,CAAC,UAAU,GAAG,EAAE,CAAC;iBAC7B;gBACD,SAAS,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACpC,CAAC,CAAC,CAAC;SACN;QAED,IAAI,qBAAqB,CAAC,4BAA4B,EAAE;YACpD,eAAe,CAAC,4BAA4B,GAAG,IAAI,CAAC;SACvD;aACI,IAAI,qBAAqB,CAAC,yBAAyB,EAAE;YACtD,eAAe,CAAC,yBAAyB,GAAG,IAAI,CAAC;SACpD;QAED,IAAI,qBAAqB,CAAC,gBAAgB,KAAK,SAAS,EAAE;YACtD,eAAe,CAAC,gBAAgB,GAAG,qBAAqB,CAAC,gBAAgB,CAAC;SAC7E;QAED,IAAI,qBAAqB,CAAC,gCAAgC,KAAK,SAAS,EAAE;YACtE,eAAe,CAAC,gCAAgC,GAAG,qBAAqB,CAAC,gCAAgC,CAAC;SAC7G;QAED,IAAI,qBAAqB,CAAC,IAAI,KAAK,SAAS,EAAE;YAC1C,eAAe,CAAC,IAAI,GAAG,qBAAqB,CAAC,IAAI,CAAC;SACrD;QAED,IAAI,qBAAqB,CAAC,UAAU,KAAK,SAAS,EAAE;YAChD,eAAe,CAAC,UAAU,GAAG,qBAAqB,CAAC,UAAU,CAAC;SACjE;QAED,IAAI,qBAAqB,CAAC,kBAAkB,KAAK,SAAS,EAAE;YACxD,eAAe,CAAC,kBAAkB,GAAG,qBAAqB,CAAC,kBAAkB,CAAC;SACjF;QAED,IAAI,qBAAqB,CAAC,QAAQ,KAAK,SAAS,EAAE;YAC9C,eAAe,CAAC,WAAW,CAAC,qBAAqB,CAAC,QAAQ,CAAC,CAAC;SAC/D;QAED,IAAI,qBAAqB,CAAC,kBAAkB,EAAE;YAC1C,eAAe,CAAC,qBAAqB,CAAC,IAAI,CAAC,CAAC;SAC/C;QAED,eAAe,CAAC,kBAAkB,GAAG,CAAC,CAAC,qBAAqB,CAAC,kBAAkB,CAAC;QAEhF,IAAI,qBAAqB,CAAC,iBAAiB,KAAK,SAAS,EAAE;YACvD,eAAe,CAAC,iBAAiB,GAAG,qBAAqB,CAAC,iBAAiB,CAAC;SAC/E;QAED,IAAI,qBAAqB,CAAC,UAAU,KAAK,SAAS,EAAE;YAC/C,eAAe,CAAC,UAAU,GAAG,qBAAqB,CAAC,UAAU,CAAC;SAClE;QAED,IAAI,qBAAqB,CAAC,MAAM,KAAK,SAAS,EAAE;YAC3C,eAAe,CAAC,MAAM,GAAG,qBAAqB,CAAC,MAAM,CAAC;SAC1D;QAED,IAAI,qBAAqB,CAAC,+BAA+B,KAAK,SAAS,EAAE;YACrE,eAAe,CAAC,+BAA+B,GAAG,qBAAqB,CAAC,+BAA+B,CAAC;SAC3G;QAED,IAAI,qBAAqB,CAAC,UAAU,KAAK,SAAS,EAAE;YAC/C,eAAe,CAAC,UAAU,GAAG,qBAAqB,CAAC,UAAU,CAAC;SAClE;QAED,IAAI,qBAAqB,CAAC,sBAAsB,KAAK,SAAS,EAAE;YAC3D,eAAe,CAAC,sBAAsB,GAAG,qBAAqB,CAAC,sBAAsB,CAAC;SAC1F;QAED,IAAI,qBAAqB,CAAC,gBAAgB,KAAK,SAAS,EAAE;YACtD,eAAe,CAAC,gBAAgB,GAAG,qBAAqB,CAAC,gBAAgB,CAAC;SAC7E;QAED,IAAI,qBAAqB,CAAC,WAAW,KAAK,SAAS,EAAE;YACjD,eAAe,CAAC,WAAW,GAAG,qBAAqB,CAAC,WAAW,CAAC;SACnE;QAED,OAAO,eAAe,CAAC;IAC3B,CAAC;IAznDuB,8CAAsB,GAAG;QAC7C,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;QAC7B,IAAI,iDAAO,CAAC,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;KAChC,CAAC;IAEF;;OAEG;IACoB,8CAAsB,GAAG,CAAC,CAAC;IAClD;;OAEG;IACoB,0CAAkB,GAAG,CAAC,CAAC;IAC9C;;OAEG;IACoB,0CAAkB,GAAG,CAAC,CAAC;IAE9C;;OAEG;IACoB,mCAAW,GAAG,CAAC,CAAC;IACvC;;;;OAIG;IACoB,kCAAU,GAAG,CAAC,CAAC;IACtC;;;;OAIG;IACoB,mCAAW,GAAG,CAAC,CAAC;IAEvC;;;;;;;OAOG;IACoB,oCAAY,GAAG,CAAC,CAAC;IACxC;;;;;;;OAOG;IACoB,sCAAc,GAAG,CAAC,CAAC;IAC1C;;;;;;;OAOG;IACoB,mCAAW,GAAG,CAAC,CAAC;IAEf,iCAAS,GAAG,IAAI,gDAAM,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;IAqjDvE,8BAAC;CAAA;AA5oDmC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvCjB;AAE+B;AAGd;AACU;AACtB;AAExB;IAAuC,6BAAM;IAKzC,mBAAY,MAAc,EAAE,MAAyB;QAArD,YACI,kBAAM,MAAM,EAAE,MAAM,CAAC,SAmBxB;QAjBG,KAAI,CAAC,OAAO,GAAG,IAAI,iDAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QAC/C,kDAAkD;QAC1C,KAAI,CAAC,OAAO,CAAC,SAAS,EAAE,CAAC;QACzB,KAAI,CAAC,aAAa,GAAG,IAAI,gDAAM,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;QAC/C,KAAI,CAAC,WAAW,GAAG,IAAI,gDAAM,CAAC,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;QAE5D,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,uDAAc,CAAC,CAAC;QAC1C,KAAI,CAAC,aAAa,CAAC,KAAK,EAAE,4CAAG,CAAC,CAAC;QAE/B,KAAI,CAAC,SAAS,GAAG,qDAAa,CAAC,MAAM,CAAC;QACtC,KAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QAEvB,KAAI,CAAC,IAAI,GAAG,IAAI,kDAAS,CAAC,iBAAiB,EAAE,KAAI,CAAC,OAAO,EAAE,KAAI,CAAC,CAAC;QAEjE,IAAI,KAAK,GAAG,MAAM,CAAC,uBAAuB,CAAC,CAAC,GAAG,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;QAEnI,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;;IACxC,CAAC;IAES,0BAAM,GAAhB;QAAA,iBAKC;QAJG,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC;YACtC,qDAAW,CAAC,iBAAiB,GAAG,KAAK,CAAC;YACtC,KAAI,CAAC,SAAS,EAAE,CAAC;QACrB,CAAC,CAAC,CAAC;IACP,CAAC;IAEM,6BAAS,GAAhB;QACI,IAAI,CAAC,IAAK,CAAC,MAAM,GAAG,GAAG,CAAC;QACxB,IAAI,CAAC,IAAK,CAAC,SAAS,EAAE,CAAC;IAC3B,CAAC;IAEY,kCAAc,GAA3B;;;;;gBACI,IAAI,CAAC,2BAA2B,EAAE,CAAC;gBAE/B,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAU,EAAE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAC,SAAU,CAAE,CAAC,SAAS,EAAE,KAAK,EAAE,KAAK,CAAiB,EACvH,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;gBAEpB,MAAM,GAAI,IAAI,CAAC,IAAmB,CAAC,MAAM,CAAE,IAAI,CAAC,IAAkB,CAAC,aAAa,CAAC,CAAC;gBAExF,KAAK,CAAC,KAAK,GAAI,IAAI,CAAC,IAAkB,CAAC,aAAa,CAAC;gBACrD,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;gBAEvB,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;gBACjD,IAAI,MAAM,CAAC,MAAM,CAAC,QAAQ,EAAE;oBACxB,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;iBACpD;qBAAM;oBACH,MAAM,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;iBAClD;gBAED,sBAAO,KAAK,CAAC,UAAU,CAAC,MAAM,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC;wBAC3E,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;wBACxB,KAAK,CAAC,SAAS,EAAE,CAAC;wBAClB,KAAI,CAAC,aAAa,EAAE,CAAC;wBACrB,KAAI,CAAC,yBAAyB,EAAE,CAAC;oBACrC,CAAC,CAAC,EAAC;;;KACN;IAEM,0BAAM,GAAb;QACI,iBAAM,MAAM,WAAE,CAAC;QAEf,MAAM,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,OAAO,EAAE,GAAG,MAAM,CAAC,CAAC;IACnE,CAAC;IAES,wCAAoB,GAA9B,UAA+B,cAAuB;QAC5C,oFAA4D,EAA3D,aAAK,EAAE,cAAoD,CAAC;QAEnE,KAAK,CAAC,YAAY,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACzC,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;QAEpC,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC;QAChC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;QACnB,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;QAElB,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IAC3B,CAAC;IAEL,gBAAC;AAAD,CAAC,CApFsC,+CAAM,GAoF5C;;AAED,+CAAM,CAAC,mBAAmB,CAAC,MAAM,EAAE;IAC/B,aAAa,EAAE,8DAA8D;IAC7E,aAAa,EAAE,EAAE;IACjB,OAAO,EAAE,SAAS;CACrB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvFgB;AAEsB;AACZ;AAE7B;IAAyC,+BAAW;IAApD;;IA4YA,CAAC;IAvYmB,mCAAa,GAA7B,UAA8B,KAAY,EAAE,MAAuB;;;;;;;wBAC/D,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC;wBACvB,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;wBACtB,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;wBAEtB,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,GAAG,IAAI,CAAC;wBAChC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;wBACnB,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;wBAElB,MAAM,CAAC,SAAS,CAAC,IAAI,iDAAO,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;wBAExC,2DAA2D;wBAE3D,qBAAM,8CAAK,CAAC,OAAO,CAAC,KAAK,EAAE,4BAA4B,EAAE,gBAAgB,CAAC;;wBAF1E,2DAA2D;wBAE3D,SAA0E,CAAC;wBAErE,OAAO,GAAG,GAAG,CAAC;wBAEpB,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC;4BACnB,IAAI,CAAC,CAAC,IAAI,IAAI,QAAQ,EAAE;gCAAE,OAAO;6BAAE;4BAEnC,IAAI,CAAC,CAAC,CAAC,QAAQ,EAAE;gCAAE,OAAO;6BAAE;4BAE5B,IAAI,MAAM,GAAG,gDAAM,CAAC,QAAQ,EAAE,CAAC;4BAC/B,MAAM,CAAC,UAAU,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;4BACnC,MAAM,CAAC,gBAAgB,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;4BACtC,CAAU,CAAC,yBAAyB,CAAC,MAAM,CAAC,CAAC;4BAC9C,CAAC,CAAC,mBAAmB,EAAE,CAAC;wBAC5B,CAAC,CAAC,CAAC;wBAEC,MAAM,GAAG,IAAI,iDAAO,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;wBAElC,GAAG,GAAG,IAAI,0DAAgB,CAAC,KAAK,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC;wBACrD,GAAG,CAAC,SAAS,GAAG,CAAC,CAAC;wBAEd,KAAK,GAAG,IAAI,0DAAgB,CAAC,OAAO,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;wBACvE,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC;wBAEhB,aAAa,GAAG,KAAK,CAAC,mBAAmB,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC;wBAE7D,aAAa,CAAC,WAAW,EAAE,CAAC,kBAAkB,CAAC,mDAAS,CAAC,uBAAuB,iCAAgC,CAAC,CAAC;wBAClH,aAAa,CAAC,qBAAqB,GAAG,IAAI,CAAC;wBAC3C,aAAa,CAAC,WAAW,EAAE,CAAC,oBAAoB,GAAG,KAAK,CAAC;wBAErD,QAAQ,GAAG,aAAa,CAAC,WAAW,EAAE,CAAC;wBAE3C,EAAE;wBACF,gDAAM,CAAC,YAAY,CAAC,mCAAmC,GAAG,mkDAwCzD,CAAC;wBAEF,EAAE;wBACF,gDAAM,CAAC,YAAY,CAAC,4BAA4B,GAAG,s/CAuClD,CAAC;wBAEF,EAAE;wBACF,gDAAM,CAAC,YAAY,CAAC,iCAAiC,GAAG,s7BA2BvD,CAAC;wBAEF,EAAE;wBACF,gDAAM,CAAC,YAAY,CAAC,gCAAgC,GAAG,0YAiBtD,CAAC;wBAIE,oBAAoB,GAAkB,EAAE,CAAC;wBAGzC,qBAAqB,GAAG,IAAK,qDAAmB,CAChD,+BAA+B,EAC/B,uBAAuB,EAAG,SAAS;wBACnC,IAAI,EACJ,CAAC,cAAc,CAAC,EAAE,WAAW;wBAC7B,GAAG,EAAG,UAAU;wBAChB,IAAI,EAAE,SAAS;wBACf,mDAAS,CAAC,uBAAuB,EAAE,WAAW;wBAC9C,IAAI,CAAC,OAAO,EAAE,SAAS;wBACvB,KAAK,EAAE,WAAW;wBAClB,SAAS,EAAE,UAAU;wBACrB,mDAAS,CAAC,sBAAsB,EAChC,SAAS,EACT,SAAS,EACT,SAAS,EACT,mDAAS,CAAC,gBAAgB,CAC7B,CAAC;wBAEF,qBAAqB,CAAC,SAAS,GAAG,KAAK,CAAC;wBACxC,qBAAqB,CAAC,uBAAuB,GAAG,KAAK,CAAC;wBAEtD,qBAAqB,CAAC,OAAO,GAAG,UAAC,MAAc;4BAC3C,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;wBAChD,CAAC,CAAC;wBAEF,oBAAoB,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;wBAE7C,CAAC,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,CAAC,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC;wBAC5D,KAAK,GAAG,CAAC,CAAC;wBAGd,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;4BACnB,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;4BACnC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;4BAEnC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;4BAElB,cAAc,GAAG,IAAK,qDAAmB,CACrC,wBAAwB,GAAG,KAAK,EAChC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,qBAAqB,CAAC,CAAC,CAAC,gBAAgB,EAAG,SAAS;4BACrH,IAAI,EAAE,aAAa;4BACnB,IAAI,EACJ,EAAE,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,EAAG,UAAU;4BACpC,IAAI,EAAE,SAAS;4BACf,mDAAS,CAAC,uBAAuB,EAAE,WAAW;4BAC9C,IAAI,CAAC,OAAO,EAAE,SAAS;4BACvB,KAAK,EAAE,WAAW;4BAClB,SAAS,EAAE,UAAU;4BACrB,mDAAS,CAAC,sBAAsB,EAChC,SAAS,EACT,SAAS,EACT,SAAS,EACT,mDAAS,CAAC,gBAAgB,CAC7B,CAAC;4BAEF,cAAc,CAAC,SAAS,GAAG,KAAK,CAAC;4BACjC,cAAc,CAAC,uBAAuB,GAAG,KAAK,CAAC;4BAE/C,oBAAoB,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;4BAE1C,KAAK,EAAE,CAAC;4BAER,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,2BAA0B,EAAE;gCAChE,IAAI,GAAG,UAAC,CAAS,EAAE,CAAS,EAAE,cAA2B;oCACzD,IAAI,MAAM,GAAG,IAAI,CAAC;oCAClB,IAAI,OAAO,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;oCAC1C,OAAO;wCACH,IAAI,MAAM,EAAE;4CACR,IAAI,OAAO,GAAG,cAAc,CAAC,YAAY,CAAC;4CAC1C,KAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;4CAC1E,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE;gDACzD,MAAM,GAAG,KAAK,CAAC;gDACf,OAAO,CAAC,GAAG,CAAC,MAAM,GAAG,CAAC,GAAG,QAAQ,GAAG,CAAC,EAAE,OAAO,CAAC,CAAC;6CACnD;yCACJ;oCACL,CAAC,CAAC;gCACN,CAAC,CAAC;gCACF,cAAc,CAAC,uBAAuB,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE,cAAc,CAAC,CAAC,CAAC;6BAE1E;yBACJ;wBAgCG,kBAAkB,GAAG,IAAI,4DAAkB,CAAC,KAAK,CAAC,CAAC;wBAEvD,KAAK,CAAC,2BAA2B,CAAC,GAAG,CAAC;4BAClC,wFAAwF;4BACxF,oBAAoB,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,kBAAkB,EAAE,CAAC,CAAC;4BAExE,kBAAkB,CAAC,YAAY,CAAC,oBAAoB,EAAE,oBAAoB,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;4BAEnG,KAAI,CAAC,OAAO,CAAC,iBAAiB,CAAC,oBAAoB,CAAC,CAAC,CAAC,CAAC,YAAY,EAAE,KAAK,CAAC,CAAC;wBAChF,CAAC,CAAC,CAAC;wBAEC,MAAM,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC,KAAK,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC;wBAEpF,KAAK,GAAG,IAAI,CAAC;wBAEjB,KAAK,CAAC,wBAAwB,CAAC,GAAG,CAAC;4BAC/B,IAAI,KAAI,CAAC,OAAO,EAAE;gCACd,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;6BACnD;wBACL,CAAC,CAAC,CAAC;wBAEH,KAAK,CAAC,uBAAuB,CAAC,GAAG,CAAC;4BAE9B,IAAI,KAAK,EAAE;gCACP,KAAI,CAAC,kBAAkB,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,QAAQ,CAAC,QAAS,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,KAAK,EAAE,QAAQ,CAAC,OAAO,EAAE,CAAC,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC;gCACnI,KAAK,GAAG,KAAK,CAAC;gCACd,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,KAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,CAAC;gCACrD,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;6BACvB;wBAEL,CAAC,CAAC,CAAC;wBAEH,sBAAO,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,EAAC;;;;KAC7B;IAEM,wCAAkB,GAAzB,UAA0B,MAAc,EAAE,OAAwB,EAAE,KAAa,EAAE,MAAc,EAAE,SAAc,EAAE,KAAS,EAAE,MAAwC;QAAnE,yCAAa,CAAC;QAAE,iCAAS;QAAE,sCAAwC;QAClK,IAAI,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC;QACpB,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;YACzB,IAAI,KAAK,GAAG,EAAE,CAAC,iBAAiB,EAAE,CAAC;YAEnC,IAAI,CAAC,KAAK,EAAE;gBACR,MAAM,IAAI,KAAK,CAAC,oCAAoC,CAAC,CAAC;aACzD;YAED,IAAI,CAAC,iBAAiB,GAAG,KAAK,CAAC;SAClC;QACD,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAE3D,IAAI,SAAS,GAAG,CAAC,CAAC,EAAE;YAChB,EAAE,CAAC,oBAAoB,CAAC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,iBAAiB,EAAE,EAAE,CAAC,2BAA2B,GAAG,SAAS,EAAE,OAAO,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;SAC3I;aAAM;YACH,EAAE,CAAC,oBAAoB,CAAC,EAAE,CAAC,WAAW,EAAE,EAAE,CAAC,iBAAiB,EAAE,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC,aAAa,EAAE,KAAK,CAAC,CAAC;SAC9G;QAED,IAAI,QAAQ,GAAG,CAAC,OAAO,CAAC,IAAI,KAAK,SAAS,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,oBAAoB,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,aAAa,CAAC;QAE3G,QAAQ,QAAQ,EAAE;YACd,KAAK,EAAE,CAAC,aAAa;gBACjB,IAAI,CAAC,MAAM,EAAE;oBACT,MAAM,GAAG,IAAI,UAAU,CAAC,CAAC,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC;iBAC/C;gBACD,QAAQ,GAAG,EAAE,CAAC,aAAa,CAAC;gBAC5B,MAAM;YACV;gBACI,IAAI,CAAC,MAAM,EAAE;oBACT,MAAM,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,KAAK,GAAG,MAAM,CAAC,CAAC;iBACjD;gBACD,QAAQ,GAAG,EAAE,CAAC,KAAK,CAAC;gBACpB,MAAM;SACb;QAED,EAAE,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,CAAC,IAAI,EAAE,QAAQ,EAAY,MAAM,CAAC,CAAC;QACxE,EAAE,CAAC,eAAe,CAAC,EAAE,CAAC,WAAW,EAAG,MAAc,CAAC,mBAAmB,CAAC,CAAC;QAExE,OAAO,MAAM,CAAC;IAClB,CAAC;IAES,gCAAU,GAApB,UAAqB,MAAoB;QACrC,IAAI,GAAG,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,CAAC;QAErB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,EAAE;YACvC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC,CAAC,CAAC;YAElB,IAAI,CAAC,GAAG,GAAG,EAAE;gBACT,GAAG,GAAG,CAAC,CAAC;aACX;YACD,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,EAAE;gBACpB,GAAG,GAAG,CAAC,CAAC;aACX;SACJ;QAED,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;IACtB,CAAC;IAEL,kBAAC;AAAD,CAAC,CA5YwC,oDAAW,GA4YnD;;AAED,oDAAW,CAAC,mBAAmB,CAAC,aAAa,EAAE;IAC3C,aAAa,EAAE,8CAA8C;IAC7D,aAAa,EAAE,EAAE;IACjB,OAAO,EAAE,WAAW;CACvB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC1ZgB;AAEkB;AAEI;AAEzC;IAAuC,6BAAW;IAAlD;;IAmVA,CAAC;IAjVa,iCAAa,GAAvB,UAAwB,KAAY,EAAE,MAAuB;QACzD,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QACtB,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QACtB,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;QAExB,MAAM,CAAC,SAAS,CAAC,iDAAO,CAAC,IAAI,EAAE,CAAC,CAAC;QAEjC,KAAK,CAAC,UAAU,GAAG,IAAI,gDAAM,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC;QAEjD,IAAI,KAAK,GAAG,IAAI,0DAAgB,CAAC,QAAQ,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;QACxE,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC;QACtB,IAAI,EAAE,GAAG,IAAI,oDAAU,CAAC,IAAI,EAAE,iDAAO,CAAC,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC;QACrD,EAAE,CAAC,OAAO,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACjC,EAAE,CAAC,QAAQ,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAClC,EAAE,CAAC,SAAS,GAAG,GAAG,CAAC;QAEnB,MAAM;QACN,IAAI,eAAe,GAAG,oEAA0B,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAE3E,IAAI,WAAW,GAAG,UAAS,IAAkB;YACzC,IAAI,KAAK,GAAG,IAAI,uDAAa,CAAC,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;YACxD,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC;YACtB,KAAK,CAAC,KAAK,GAAG,GAAG,CAAC;YAClB,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC;YACtB,KAAK,CAAC,WAAW,GAAG,EAAE,CAAC;YACvB,eAAe,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAClC,KAAK,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;YAEzB,IAAI,KAAK,GAAG,IAAI,uDAAa,EAAE,CAAC;YAChC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC;YACvB,KAAK,CAAC,KAAK,GAAG,OAAO,CAAC;YACtB,KAAK,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;YAExB,OAAO,KAAK,CAAC;QACjB,CAAC,CAAC;QAEF,IAAM,cAAc,GAAG,IAAI,CAAC;QAE5B,gDAAM,CAAC,YAAY,CAAC,oBAAoB,CAAC,GAAG,gcAatC,CAAC;QAEP,gDAAM,CAAC,YAAY,CAAC,sBAAsB,CAAC,GAAG,yWASxC,CAAC;QAEP,kBAAkB;QAClB,IAAM,aAAa,GAAG,IAAI,0DAAgB,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;QACpE,aAAa,CAAC,aAAa,GAAG,cAAc,CAAC,CAAC,CAAC,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACzF,aAAa,CAAC,eAAe,GAAG,IAAI,CAAC;QAErC,IAAI,oBAAoB,GAAG,IAAI,wDAAc,CAAC,QAAQ,EAAE,KAAK,EAAE;YAC3D,MAAM,EAAE,QAAQ;YAChB,QAAQ,EAAE,QAAQ;SACjB,EACD;YACI,UAAU,EAAE,CAAC,UAAU,CAAC;YACxB,QAAQ,EAAE,CAAC,OAAO,EAAE,qBAAqB,EAAE,WAAW,CAAC;YACvD,iBAAiB,EAAE,IAAI;SAC1B,CAAC,CAAC;QAEP,oBAAoB,CAAC,SAAS,CAAC,WAAW,EAAE,aAAa,CAAC,aAAa,CAAC,CAAC;QACzE,oBAAoB,CAAC,aAAa,GAAG,gDAAM,CAAC,MAAM,CAAC;QAEnD,IAAM,aAAa,GAAG,IAAI,0DAAgB,CAAC,gBAAgB,EAAE,KAAK,CAAC,CAAC;QACpE,aAAa,CAAC,YAAY,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAEjD,IAAM,SAAS,GAAG,IAAI,0DAAgB,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QAC3D,SAAS,CAAC,YAAY,GAAG,cAAc,CAAC,CAAC,CAAC,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACpF,IAAI,cAAc,EAAE;YAChB,SAAS,CAAC,aAAa,GAAG,SAAS,CAAC,YAAY,CAAC;YACjD,SAAS,CAAC,eAAe,GAAG,IAAI,CAAC;SACpC;QACD,yBAAyB;QAEzB,IAAM,SAAS,GAAG,IAAI,0DAAgB,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QAC3D,SAAS,CAAC,YAAY,GAAG,cAAc,CAAC,CAAC,CAAC,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACpF,IAAI,cAAc,EAAE;YAChB,SAAS,CAAC,aAAa,GAAG,SAAS,CAAC,YAAY,CAAC;YACjD,SAAS,CAAC,eAAe,GAAG,IAAI,CAAC;SACpC;QACD,yBAAyB;QAEzB,IAAM,SAAS,GAAG,IAAI,0DAAgB,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QAC3D,SAAS,CAAC,YAAY,GAAG,cAAc,CAAC,CAAC,CAAC,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACpF,IAAI,cAAc,EAAE;YAChB,SAAS,CAAC,aAAa,GAAG,SAAS,CAAC,YAAY,CAAC;YACjD,SAAS,CAAC,eAAe,GAAG,IAAI,CAAC;SACpC;QACD,yBAAyB;QAEzB,gBAAgB;QAChB,IAAM,UAAU,GAAG,UAAC,EAAU,EAAE,QAAiB,EAAE,MAAc,EAAE,SAAiB,EAAE,MAAc,EAAE,GAAc;YAChH,IAAI,CAAC,MAAM,EAAE;gBAAE,MAAM,GAAG,KAAK,CAAC;aAAE;YAChC,IAAI,CAAC,GAAG,EAAE;gBAAE,GAAG,GAAG,aAAa,CAAC;aAAE;YAClC,IAAM,MAAM,GAAG,SAAS,KAAK,GAAG;gBAChC,CAAC,CAAC,CAAC,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;gBACjE,CAAC,CAAC,SAAS,KAAK,GAAG;oBACf,CAAC,CAAC,CAAC,IAAI,iDAAO,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,iDAAO,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACjE,CAAC,CAAC,CAAC,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,MAAM,GAAG,CAAC,CAAC,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;YAEtE,IAAM,KAAK,GAAG,qDAAW,CAAC,UAAU,CAAC,EAAE,EAAE,EAAC,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,eAAe,EAAE,8CAAI,CAAC,UAAU,EAAC,EAAE,KAAK,CAAC,CAAC;YAClH,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC;YAC1B,KAAK,CAAC,QAAQ,GAAG,GAAG,CAAC;YACrB,KAAK,CAAC,gBAAgB,GAAG,CAAC,CAAC;YAC3B,OAAO,KAAK,CAAC;QACjB,CAAC,CAAC;QAEF,8CAA8C;QAC9C,IAAM,QAAQ,GAAG,UAAC,IAAkB;YAChC,IAAM,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC;YAC/B,IAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC;YAC9B,IAAM,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YACtH,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC1B,CAAC,CAAC;QAEF,IAAM,MAAM,GAAQ,EAAE,CAAC;QACvB,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB,IAAM,OAAO,GAAQ,EAAE,CAAC;QAExB,8CAA8C;QAC9C,IAAM,YAAY,GAAG,UAAC,MAAsB,EAAE,CAAS;YACnD,MAAM,CAAC,eAAa,OAAS,CAAC,GAAG,qDAAW;iBACvC,aAAa,CAAC,eAAa,OAAS,EAAE,EAAC,KAAK,EAAE,MAAM,EAAE,eAAe,EAAE,8CAAI,CAAC,UAAU,EAAE,EAAE,KAAK,CAAC,CAAC;YACtG,MAAM,CAAC,eAAa,OAAS,CAAC,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;YAC9C,MAAM,CAAC,eAAa,OAAS,CAAC,CAAC,QAAQ,GAAG,SAAS,CAAC;YACpD,OAAO,EAAE,CAAC;QACd,CAAC,CAAC;QAEF,IAAM,aAAa,GAAG,UAAC,MAAsB;YACzC,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC;gBAChB,OAAO,CAAC,YAAU,CAAG,CAAC,GAAG,8CAAI,CAAC,YAAY,CAAC,YAAU,CAAG,EAAE,EAAE,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;gBAC1E,OAAO,CAAC,YAAU,CAAG,CAAC,CAAC,QAAQ,GAAG,IAAI,iDAAO,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7D,OAAO,CAAC,YAAU,CAAG,CAAC,CAAC,QAAQ,GAAG,aAAa,CAAC;YACpD,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;QAEF,IAAM,CAAC,GAAG,GAAG,CAAC;QACd,IAAM,UAAU,GAAG,CAAC,CAAC;QACrB,IAAM,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC;QAEzB,IAAM,IAAI,GAAG;YACT,MAAM;YACN,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YACzD,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC1D,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC1D,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAI,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YAChF,EAAE,MAAM,EAAE,CAAC,UAAU,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YAC9F,EAAE,MAAM,EAAE,CAAC,CAAC,GAAG,UAAU,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YAC9E,EAAE,MAAM,EAAE,CAAC,UAAU,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YAC3F,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YAC9E,SAAS;YACT,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC1D,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC3D,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC3D,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAI,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YACjF,EAAE,MAAM,EAAE,CAAC,UAAU,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,GAAG,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YAC/F,EAAE,MAAM,EAAE,CAAC,CAAC,GAAG,UAAU,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YAC/E,EAAE,MAAM,EAAE,CAAC,UAAU,GAAG,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YAC5F,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,GAAG,CAAC,EAAE,SAAS,EAAE,GAAG,EAAE;YAC/E,UAAU;YACV,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YACzD,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC1D,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC3D,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC1D,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC3E,EAAE,MAAM,EAAE,CAAC,CAAC,GAAG,UAAU,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC5F,EAAE,MAAM,EAAE,CAAC,CAAC,GAAG,UAAU,GAAG,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;YAC3F,EAAE,MAAM,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,UAAU,GAAG,CAAC,CAAC,EAAE,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,GAAG,EAAE;SAC7E,CAAC;QAEF,IAAM,kBAAkB,GAAG;YACvB,kBAAkB;YAClB,IAAM,YAAY,YAAO,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAX,CAAW,CAAC,CAAC,CAAC,CAAC;YAChE,YAAY,CAAC,OAAO,CAAC,UAAC,KAAK;gBACvB,IAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,KAAK,EAArB,CAAqB,CAAC,CAAC;gBACpD,IAAI,IAAI,GAAmB,EAAE,CAAC;gBAC9B,CAAC,CAAC,OAAO,CAAC,UAAC,CAAC;oBACR,IAAI,CAAC,CAAC,SAAS,KAAK,GAAG,EAAE;wBACrB,IAAI,CAAC,IAAI,CAAC,IAAI,iDAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7E,IAAI,CAAC,IAAI,CAAC,IAAI,iDAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;qBAChF;oBACD,IAAI,CAAC,CAAC,SAAS,KAAK,GAAG,EAAE;wBACrB,IAAI,CAAC,IAAI,CAAC,IAAI,iDAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC7E,IAAI,CAAC,IAAI,CAAC,IAAI,iDAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBAChF;gBACL,CAAC,CAAC,CAAC;gBACH,oBAAoB;gBACpB,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAK,QAAC,CAAC,SAAS,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAA3C,CAA2C,CAAC,KAAK,CAAC,EAArE,CAAqE,CAAC,CAAC;gBAC9G,IAAI,KAAK,CAAC,MAAM,EAAE;oBACd,uBAAuB;oBACvB,YAAY,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;iBAC9B;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;QAEF,IAAM,iBAAiB,GAAG;YACtB,kBAAkB;YAClB,IAAM,YAAY,YAAO,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAX,CAAW,CAAC,CAAC,CAAC,CAAC;YAChE,YAAY,CAAC,OAAO,CAAC,UAAC,KAAK;gBACvB,IAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,SAAS,KAAK,GAAG,EAA5C,CAA4C,CAAC,CAAC;gBAC5E,IAAI,EAAE,CAAC,MAAM,EAAE;oBACX,IAAM,MAAM,YAAO,IAAI,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAX,CAAW,CAAC,CAAC,CAAC,CAAC;oBACxD,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC;wBACb,IAAM,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,EAAjB,CAAiB,CAAC,CAAC;wBAC9C,IAAM,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;wBAC/C,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxD,MAAM,CAAC,cAAY,OAAS,CAAC,GAAG,qDAAW;6BACtC,SAAS,CAAC,cAAY,OAAS,EAAE,EAAC,MAAM,UAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAC,EAAE,KAAK,CAAC,CAAC;wBACzF,MAAM,CAAC,cAAY,OAAS,CAAC,CAAC,QAAQ,GAAI,IAAI,iDAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;wBACzF,MAAM,CAAC,cAAY,OAAS,CAAC,CAAC,QAAQ,GAAG,SAAS,CAAC;wBACnD,OAAO,EAAE,CAAC;oBACd,CAAC,CAAC,CAAC;iBACN;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;QAEF,IAAM,iBAAiB,GAAG;YACtB,kBAAkB;YAClB,IAAM,YAAY,YAAO,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAX,CAAW,CAAC,CAAC,CAAC,CAAC;YAChE,YAAY,CAAC,OAAO,CAAC,UAAC,KAAK;gBACvB,IAAM,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,KAAK,IAAI,CAAC,CAAC,SAAS,KAAK,GAAG,EAA5C,CAA4C,CAAC,CAAC;gBAC5E,IAAI,EAAE,CAAC,MAAM,EAAE;oBACX,IAAM,MAAM,YAAO,IAAI,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAX,CAAW,CAAC,CAAC,CAAC,CAAC;oBACxD,MAAM,CAAC,OAAO,CAAC,UAAC,CAAC;wBACb,IAAM,CAAC,GAAG,EAAE,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC,EAAjB,CAAiB,CAAC,CAAC;wBAC9C,IAAM,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;wBAC/C,IAAM,MAAM,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;wBACxD,MAAM,CAAC,cAAY,OAAS,CAAC,GAAG,qDAAW;6BACtC,SAAS,CAAC,cAAY,OAAS,EAAE,EAAC,MAAM,UAAE,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAC,EAAE,KAAK,CAAC,CAAC;wBACzF,MAAM,CAAC,cAAY,OAAS,CAAC,CAAC,QAAQ,GAAI,IAAI,iDAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;wBACzF,MAAM,CAAC,cAAY,OAAS,CAAC,CAAC,QAAQ,GAAG,SAAS,CAAC;wBACnD,OAAO,EAAE,CAAC;oBACd,CAAC,CAAC,CAAC;iBACN;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;QAEF,IAAM,UAAU,GAAG;YACf,kBAAkB;YAClB,IAAM,YAAY,YAAO,IAAI,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAX,CAAW,CAAC,CAAC,CAAC,CAAC;YAChE,YAAY,CAAC,OAAO,CAAC,UAAC,KAAK;gBACvB,IAAM,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,KAAK,EAArB,CAAqB,CAAC,CAAC;gBACpD,IAAI,IAAI,GAAmB,EAAE,CAAC;gBAC9B,CAAC,CAAC,OAAO,CAAC,UAAC,CAAC;oBACR,IAAI,CAAC,CAAC,SAAS,KAAK,GAAG,EAAE;wBACrB,IAAI,CAAC,IAAI,CAAC,IAAI,iDAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;wBAC7E,IAAI,CAAC,IAAI,CAAC,IAAI,iDAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;qBAChF;oBACD,IAAI,CAAC,CAAC,SAAS,KAAK,GAAG,EAAE;wBACrB,IAAI,CAAC,IAAI,CAAC,IAAI,iDAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBAC7E,IAAI,CAAC,IAAI,CAAC,IAAI,iDAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;qBAChF;gBACL,CAAC,CAAC,CAAC;gBACH,oBAAoB;gBACpB,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,UAAC,CAAC,EAAE,CAAC,EAAE,CAAC,IAAK,QAAC,CAAC,SAAS,CAAC,UAAC,CAAC,IAAK,QAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAA3C,CAA2C,CAAC,KAAK,CAAC,EAArE,CAAqE,CAAC,CAAC;gBAC9G,IAAI,KAAK,CAAC,MAAM,EAAE;oBACd,aAAa,CAAC,KAAK,CAAC,CAAC;iBACxB;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC;QAEF,2CAA2C;QAC3C,kBAAkB,EAAE,CAAC;QACrB,iBAAiB,EAAE,CAAC;QACpB,iBAAiB,EAAE,CAAC;QAEpB,IAAM,KAAK,GAAQ,EAAE,CAAC;QACtB,IAAI,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC;YACd,IAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YACnB,KAAK,CAAC,UAAQ,CAAG,CAAC,GAAG,UAAU,CAAC,UAAQ,CAAG,EAAE,IAAI,iDAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAG,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;QAC9G,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,OAAO,CAAC,UAAC,CAAC,EAAE,CAAC;YACd,IAAM,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YACnB,IAAM,KAAK,GAAG,UAAU,CAAC,WAAS,CAAG,EAAE,IAAI,iDAAO,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,EAAG,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,SAAS,EAAE,KAAK,EAAE,oBAAoB,CAAC,CAAC;QAC/H,CAAC,CAAC,CAAC;QAEH,UAAU,EAAE,CAAC;QAEb,SAAS,aAAa,CAAC,IAAY;YAC/B,IAAI,aAAa,GAAG,UAAS,IAAY,EAAE,KAAa,EAAE,IAAY;gBAClE,IAAI,cAAc,GAAG,IAAI,wDAAc,CAAC,gBAAgB,EAAE,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;gBAC3E,cAAc,CAAC,QAAQ,GAAG,IAAI,CAAC;gBAC/B,cAAc,CAAC,QAAQ,CAAC,IAAI,EAAE,CAAC,EAAE,EAAE,EAAE,iBAAiB,EAAE,KAAK,EAAG,aAAa,EAAE,IAAI,CAAC,CAAC;gBACrF,IAAI,KAAK,GAAG,8CAAI,CAAC,WAAW,CAAC,WAAW,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC;gBAC7D,KAAK,CAAC,QAAQ,GAAG,IAAI,0DAAgB,CAAC,mBAAmB,EAAE,KAAK,CAAC,CAAC;gBAClE,KAAK,CAAC,QAAQ,CAAC,eAAe,GAAG,KAAK,CAAC;gBACtC,KAAK,CAAC,QAA6B,CAAC,aAAa,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;gBACxE,KAAK,CAAC,QAA6B,CAAC,cAAc,GAAG,cAAc,CAAC;gBACzE,OAAO,KAAK,CAAC;YACb,CAAC,CAAC;YACF,IAAI,KAAK,GAAG,8CAAI,CAAC,WAAW,CAAC,OAAO,EAAE;gBACtC,iDAAO,CAAC,IAAI,EAAE,EAAE,IAAI,iDAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,iDAAO,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,EAAE,CAAC,CAAC;gBACjF,IAAI,iDAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,iDAAO,CAAC,IAAI,GAAG,IAAI,EAAE,CAAC,IAAI,GAAG,IAAI,EAAE,CAAC,CAAC;aACjE,EAAE,KAAK,CAAC,CAAC;YACV,KAAK,CAAC,KAAK,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClC,IAAI,KAAK,GAAG,aAAa,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;YACjD,KAAK,CAAC,QAAQ,GAAG,IAAI,iDAAO,CAAC,GAAG,GAAG,IAAI,EAAE,CAAC,IAAI,GAAG,IAAI,EAAE,CAAC,CAAC,CAAC;YAC1D,IAAI,KAAK,GAAG,8CAAI,CAAC,WAAW,CAAC,OAAO,EAAE;gBAClC,iDAAO,CAAC,IAAI,EAAE,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,iDAAO,CAAC,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,EAAE,CAAC,CAAC;gBAClF,IAAI,iDAAO,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,EAAE,IAAI,iDAAO,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,EAAE,CAAC,CAAC;aAChE,EAAE,KAAK,CAAC,CAAC;YACd,KAAK,CAAC,KAAK,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClC,IAAI,KAAK,GAAG,aAAa,CAAC,GAAG,EAAE,OAAO,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;YACnD,KAAK,CAAC,QAAQ,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,GAAG,GAAG,IAAI,EAAE,CAAC,IAAI,GAAG,IAAI,CAAC,CAAC;YAC1D,IAAI,KAAK,GAAG,8CAAI,CAAC,WAAW,CAAC,OAAO,EAAE;gBAClC,iDAAO,CAAC,IAAI,EAAE,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAG,CAAC,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC;gBACnF,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,IAAI,GAAG,IAAI,EAAE,IAAI,GAAG,IAAI,CAAC;aAChE,EAAE,KAAK,CAAC,CAAC;YACd,KAAK,CAAC,KAAK,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;YAClC,IAAI,KAAK,GAAG,aAAa,CAAC,GAAG,EAAE,MAAM,EAAE,IAAI,GAAG,EAAE,CAAC,CAAC;YAClD,KAAK,CAAC,QAAQ,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,IAAI,GAAG,IAAI,EAAE,GAAG,GAAG,IAAI,CAAC,CAAC;QAC7D,CAAC;QAED,aAAa,CAAC,CAAC,CAAC,CAAC;IAErB,CAAC;IAEL,gBAAC;AAAD,CAAC,CAnVsC,oDAAW,GAmVjD;;AAED,oDAAW,CAAC,mBAAmB,CAAC,WAAW,EAAE;IACzC,aAAa,EAAE,kEAAkE;IACjF,aAAa,EAAE,EAAE;IACjB,OAAO,EAAE,SAAS;CACrB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChX4B;AAEO;AAYX;AAOO;AAEgB;AAEyB;AACL;AAetE,IAAY,mBAGX;AAHD,WAAY,mBAAmB;IAC3B,qEAAQ;IACR,uEAAS;AACb,CAAC,EAHW,mBAAmB,KAAnB,mBAAmB,QAG9B;AAEM,IAAM,YAAY,GAAG,oEAAU,CAAC;IACnC,IAAI,EAAE;QACJ,KAAK,EAAE,SAAS;QAChB,MAAM,EAAE,CAAC;QACT,KAAK,EAAE,KAAK;QACZ,OAAO,EAAE,CAAC;KACX;IACD,KAAK,EAAE;QACL,MAAM,EAAE,EAAE;QACV,KAAK,EAAE,EAAE;QACT,eAAe,EAAE,MAAM;QACvB,MAAM,EAAE,wBAAwB;QAChC,SAAS,EAAE,CAAC,CAAC;QACb,UAAU,EAAE,CAAC,CAAC;QACd,0BAA0B,EAAE;YAC1B,SAAS,EAAE,SAAS;SACrB;QACD,gBAAgB,EAAE;YAChB,KAAK,EAAE,EAAE;YACT,MAAM,EAAE,EAAE;YACV,SAAS,EAAE,CAAC,CAAC;SACd;KACF;IACD,MAAM,EAAE,EAAE;IACV,UAAU,EAAE;QACV,IAAI,EAAE,kBAAkB;KACzB;IACD,KAAK,EAAE;QACL,MAAM,EAAE,CAAC;QACT,YAAY,EAAE,CAAC;KAChB;IACD,IAAI,EAAE;QACJ,MAAM,EAAE,CAAC;QACT,YAAY,EAAE,CAAC;KAChB;CACJ,CAAC,CAAC,wDAAM,CAAC,CAAC;AAEX;IAYI,aAAY,IAAY,EAAE,MAAc;QACpC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;QAClB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;QAE7B,IAAI,CAAC,UAAU,GAAG;YACd,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,CAAC;YACJ,KAAK,EAAE,GAAG;YACV,MAAM,EAAE,GAAG;YACX,QAAQ,EAAE,GAAG;YACb,SAAS,EAAE,EAAE;SAChB,CAAC;QAEF,IAAI,CAAC,YAAY,GAAG,IAAW,CAAC;QAChC,IAAI,CAAC,WAAW,GAAG,mBAAmB,CAAC,SAAS,CAAC;QACjD,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QAEjB,IAAI,CAAC,UAAU,GAAG,oEAAU,CAAC,UAAC,KAAK,IAAK,QAAC;YACrC,aAAa,EAAE;gBACb,OAAO,EAAE,iBAAiB;gBAC1B,SAAS,EAAE,MAAM;gBACjB,KAAK,EAAE,OAAO;gBACd,UAAU,EAAE,QAAQ;gBACpB,YAAY,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC9B,UAAU,EAAE,eAAe;aAC5B;YACD,aAAa,EAAE;gBACX,OAAO,EAAE,iBAAiB;gBAC1B,SAAS,EAAE,MAAM;gBACjB,KAAK,EAAE,SAAS;gBAChB,UAAU,EAAE,QAAQ;gBACpB,YAAY,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC9B,eAAe,EAAE,WAAW;gBAC5B,UAAU,EAAE,MAAM;aACrB;YACD,gBAAgB,EAAE;gBACd,OAAO,EAAE,iBAAiB;gBAC1B,UAAU,EAAE,OAAO;gBACnB,SAAS,EAAE,MAAM;gBACjB,KAAK,EAAE,OAAO;gBACd,UAAU,EAAE,QAAQ;gBACpB,YAAY,EAAE,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC;gBAC9B,UAAU,EAAE,eAAe;aAC9B;SACJ,CAAC,EA3BsC,CA2BtC,CAAC,CAAC;IACR,CAAC;IAED,sBAAW,gCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,gBAAgB,CAAC;QACjC,CAAC;aAED,UAA2B,CAAU;YACjC,IAAI,CAAC,gBAAgB,GAAG,CAAC,CAAC;QAC9B,CAAC;;;OAJA;IAMD,sBAAW,gCAAe;aAA1B;YACI,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;aAED,UAA2B,CAAsB;YAC7C,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC;QACzB,CAAC;;;OAJA;IAMS,4BAAc,GAAxB;;QACI,IAAI,KAAK,GAAG,wEAAc,CAAC,EAAE,CAAC,CAAC;QAC/B,KAAK,yBACE,KAAK,KACR,SAAS,EAAE;gBACP,SAAS,EAAE,EACV;gBACD,YAAY,EAAE;oBACV,KAAK,EAAE;wBACH,OAAO,EAAE,GAAG;wBACZ,eAAe,EAAE,WAAW;wBAC5B,MAAM,EAAE,iBAAiB;wBACzB,KAAK,EAAE,OAAO;wBACd,MAAM,EAAE,MAAM;wBACd,SAAS,EAAE,QAAQ;wBACnB,SAAS,EAAE,MAAM;qBACpB;oBACD,UAAU;wBACN,GAAC,KAAK,CAAC,WAAW,CAAC,EAAE,CAAC,IAAI,CAAC,IAAG;4BAC1B,QAAQ,EAAE,SAAS;yBACtB;2BACJ;iBACJ;gBACD,iBAAiB,EAAE;oBACf,IAAI,EAAE;wBACF,YAAY,EAAE;4BACV,MAAM,EAAE,GAAG;yBACd;qBACJ;iBACJ;gBACD,wBAAwB,EAAE;oBACtB,IAAI,EAAE;wBACF,OAAO,EAAE,aAAa;wBACtB,KAAK,EAAE,+DAAM,CAAC,GAAG,CAAC;wBAClB,eAAe,EAAE,WAAW;wBAC5B,SAAS,EAAE,SAAS;wBACpB,UAAU,EAAE,eAAe;wBAC3B,YAAY,EAAE;4BACV,SAAS,EAAE,SAAS;yBACvB;qBACJ;oBACD,UAAU,EAAE;wBACR,OAAO,EAAE,iBAAiB;wBAC1B,YAAY,EAAE;4BACV,OAAO,EAAE,eAAe;yBAC3B;qBACJ;oBACD,OAAO,EAAE;wBACL,MAAM,EAAE,SAAS;wBACjB,YAAY,EAAE;4BACV,MAAM,EAAE,SAAS;yBACpB;qBACJ;iBACJ;gBACD,cAAc,EAAE;oBACZ,KAAK,EAAE;wBACH,OAAO,EAAE,GAAG;qBACf;oBACD,SAAS,EAAE;wBACP,UAAU,EAAE;4BACR,YAAY,EAAE,iBAAiB;yBAClC;qBACJ;iBACJ;gBACD,cAAc,EAAE;oBACZ,IAAI,EAAE;wBACF,KAAK,EAAE,MAAM;qBAChB;iBACJ;gBACD,OAAO,EAAE;oBACL,cAAc,EAAE;wBACZ,mBAAmB,EAAE;4BACjB,OAAO,EAAE,KAAK;yBACjB;qBACJ;iBACJ;gBACD,OAAO,EAAE;oBACL,IAAI,EAAE;wBACF,OAAO,EAAE,OAAO;qBACnB;iBACJ;gBACD,QAAQ,EAAE;oBACN,SAAS,EAAE;wBACP,UAAU,EAAE;4BACR,YAAY,EAAE,iBAAiB;yBAClC;qBACJ;iBACJ;gBACD,YAAY,EAAE;oBACV,KAAK,EAAE;wBACH,OAAO,EAAE,GAAG;wBACZ,KAAK,EAAE,SAAS;qBACnB;iBACJ;gBACD,WAAW,EAAE;oBACT,IAAI,EAAE;wBACF,SAAS,EAAE,QAAQ;wBACnB,UAAU,EAAE,GAAG;qBAClB;iBACJ;gBACD,OAAO,EAAE;oBACL,KAAK,EAAE;wBACH,eAAe,EAAE,OAAO;qBAC3B;iBACJ;gBACD,QAAQ,EAAE;oBACN,IAAI,EAAE;wBACF,eAAe,EAAE,aAAa;qBACjC;iBACJ;gBACD,SAAS,EAAE;oBACP,IAAI,EAAE;wBACF,KAAK,EAAE,OAAO;qBACjB;iBACJ;gBACD,SAAS,EAAE;oBACP,cAAc,EAAE;wBACZ,WAAW,EAAE;4BACT,KAAK,EAAE,SAAS;4BAChB,sBAAsB,EAAE;gCACpB,eAAe,EAAE,SAAS;6BAC7B;yBACJ;qBACJ;oBACD,IAAI,EAAE;wBACF,KAAK,EAAE,MAAM;wBACb,MAAM,EAAE,MAAM;wBACd,OAAO,EAAE,GAAG;qBACf;oBACD,UAAU,EAAE;wBACR,UAAU,EAAE,KAAK;wBACjB,MAAM,EAAE,MAAM;qBACjB;oBACD,KAAK,EAAE;wBACH,KAAK,EAAE,MAAM;wBACb,MAAM,EAAE,MAAM;qBACjB;iBACJ;aACJ,EAED,KAAK,EAAE,EACN,GACJ,CAAC;QAEF,OAAO,KAAK,CAAC;IACjB,CAAC;IAES,sBAAQ,GAAlB;QACI,OAAO,IAAI,CAAC;IAChB,CAAC;IAES,oBAAM,GAAhB;IACA,CAAC;IAEM,uBAAS,GAAhB;QACI,OAAO;YACH,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE;YAChC,CAAC,EAAE,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,GAAG,EAAE;SACzC,CAAC;IACN,CAAC;IAES,yBAAW,GAArB,UAAsB,KAAY;QAC9B,OAAO,IAAI,CAAC;IAChB,CAAC;IAEM,uBAAS,GAAhB;QAAA,iBA0HC;QAzHG,IAAM,KAAK,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;QAEpC,IAAM,GAAG,GAAG;YACF,qFAA8E,EAA7E,0BAAkB,EAAE,6BAAyD,CAAC;YAC/E,qMAAmK,EAAlK,cAAM,EAAE,iBAA0J,CAAC;YACpK;;;;;;kBAQJ,EARK,gBAAQ,EAAE,mBAQf,CAAC;YACG,4JAAgI,EAA/H,gBAAQ,EAAE,mBAAqH,CAAC;YACjI,sIAAkG,EAAjG,YAAI,EAAE,eAA2F,CAAC;YAEzG,IAAM,UAAU,GAAG,UAAC,CAAiB,EAAE,IAAmB;gBACtD,KAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;gBAC3B,KAAI,CAAC,UAAU,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC;gBAC3B,WAAW,CAAC,EAAE,CAAC,EAAE,KAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,KAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC;gBAC5D,cAAc,EAAE,CAAC;YACrB,CAAC,CAAC;YAEF,IAAM,YAAY,GAAG,UAAC,cAA8B;gBAA9B,sDAA8B;gBAChD,IAAM,OAAO,GAAG,KAAI,CAAC,SAAS,EAAE,CAAC;gBACjC,SAAS,CAAC;oBACN,IAAI,EAAE,OAAO,CAAC,CAAC;oBACf,GAAG,EAAE,OAAO,CAAC,CAAC;oBACd,KAAK,EAAE,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,KAAI,CAAC,UAAU,CAAC,KAAK;oBACpD,MAAM,EAAE,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,EAAE;iBACrC,CAAC,CAAC;gBACH,IAAI,cAAc,EAAE;oBAChB,KAAI,CAAC,UAAU,CAAC,CAAC,GAAG,KAAI,CAAC,eAAe,IAAI,mBAAmB,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,KAAI,CAAC,UAAU,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/I,KAAI,CAAC,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC;oBACtB,WAAW,CAAC,EAAE,CAAC,EAAE,KAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,KAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC;iBAC/D;YACL,CAAC,CAAC;YAEF,IAAM,cAAc,GAAG;gBACnB,IAAM,OAAO,GAAG,KAAI,CAAC,SAAS,EAAE,CAAC;gBACjC,WAAW,CAAC;oBACR,QAAQ,EAAG,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,KAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC;oBACjE,SAAS,EAAE,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,GAAG,OAAO,CAAC,CAAC,GAAG,KAAI,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,CAAC;iBACpE,CAAC,CAAC;YACP,CAAC,CAAC;YAEF,IAAM,YAAY,GAAG,UAAC,KAA8B,EAAE,SAA0B,EAAE,YAA4B,EAAE,KAAiB;gBAC7H,KAAI,CAAC,UAAU,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC;gBACrC,KAAI,CAAC,UAAU,CAAC,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC;gBACvC,OAAO,CAAC,EAAE,KAAK,EAAE,KAAI,CAAC,UAAU,CAAC,KAAK,EAAE,MAAM,EAAE,KAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,CAAC;gBAC1E,cAAc,EAAE,CAAC;gBACjB,YAAY,CAAC,KAAK,CAAC,CAAC;YACxB,CAAC,CAAC;YAEF,IAAM,cAAc,GAAG,UAAC,KAAY;gBAChC,IAAM,cAAc,GAAG,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;gBAC/C,cAAc,EAAE,CAAC;gBACjB,YAAY,CAAC,cAAc,CAAC,CAAC;YACjC,CAAC,CAAC;YAEF,+CAAe,CAAC;gBACZ,IAAM,OAAO,GAAG,UAAC,KAAY;oBACzB,IAAM,cAAc,GAAG,KAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;oBAC/C,qBAAqB,CAAC,CAAC,KAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;oBACxC,YAAY,CAAC,cAAc,CAAC,CAAC;oBAC7B,cAAc,EAAE,CAAC;gBACrB,CAAC,CAAC;gBAEF,MAAM,CAAC,gBAAgB,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;gBAChD,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;gBAClD,MAAM,CAAC,gBAAgB,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;gBAElD,OAAO;oBACH,MAAM,CAAC,mBAAmB,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC;oBACnD,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;oBACrD,MAAM,CAAC,mBAAmB,CAAC,QAAQ,EAAE,cAAc,CAAC,CAAC;gBACzD,CAAC,CAAC;YACN,CAAC,EAAE,EAAE,CAAC,CAAC;YAEP,OAAO,CACH,oDAAC,+DAAa,IAAC,KAAK,EAAE,KAAK;gBACvB,oDAAC,sDAAS,IAAC,QAAQ,EAAE,QAAQ,EAAE,MAAM,EAAC,YAAY,EAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,UAAU;oBACjF,oDAAC,sDAAS,IACN,IAAI,EAAE,IAAI,EACV,QAAQ,EAAE,KAAI,CAAC,UAAU,CAAC,QAAQ,EAClC,SAAS,EAAE,KAAI,CAAC,UAAU,CAAC,SAAS,EACpC,QAAQ,EAAE,QAAQ,CAAC,QAAQ,EAC3B,SAAS,EAAE,QAAQ,CAAC,SAAS,EAC7B,YAAY,EAAE,YAAY,EAC1B,MAAM,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,EACrI,KAAK,EAAE,EAAE,MAAM,EAAE,KAAI,CAAC,MAAM,EAAC;wBAG7B,oDAAC,2DAAS,IAAC,KAAK;4BACZ,oDAAC,sDAAI,IAAC,SAAS,EAAC,WAAW,EAAC,cAAc,EAAE,IAAI;gCAC5C,oDAAC,0DAAQ;oCACL,oDAAC,8DAAY,IAAC,OAAO,EAAE,KAAI,CAAC,KAAK,GAAI;oCACnC,KAAI,CAAC,gBAAgB;wCACnB,oDAAC,yEAAuB;4CACpB,oDAAC,4DAAU,IAAC,IAAI,EAAC,KAAK,EAAC,KAAK,EAAE,EAAE,SAAS,EAAE,OAAO,EAAE,WAAW,EAAE,OAAO,EAAC,EAAE,OAAO,EAAE,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAI,CAAC,EAAE,QAAQ,EAAE,kBAAkB;gDAAE,oDAAC,sDAAI,8BAA2B,CAAa,CACjK,CAEvB,CACR;4BACN,KAAI,CAAC,eAAe,EAAE,CACf,CAEJ,CACJ,CACA,CACnB,CAAC;QACN,CAAC,CAAC;QAEF,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;QAElD,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,UAAU,EAAE,UAAU,CAAC,CAAC,GAAG,CAAC,aAAa,EAAE,MAAM,CAAC,CAAC,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC;QAE9I,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAExC,gDAAe,CAAC,oDAAC,GAAG,OAAG,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;IAChD,CAAC;IAES,6BAAe,GAAzB;QACI,OAAO,CACH,oDAAC,8CAAc,OACE,CACpB,CAAC;IACN,CAAC;IAEM,qBAAO,GAAd,UAAe,IAAa;QACxB,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;IACtE,CAAC;IAEM,uBAAS,GAAhB;QACI,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,SAAS,EAAE,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,MAAM,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC;IACrH,CAAC;IAEM,uBAAS,GAAhB;QACI,gEAA+B,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QACnD,IAAI,CAAC,YAAY,GAAG,IAAW,CAAC;IACpC,CAAC;IAEL,UAAC;AAAD,CAAC;;;;;;;;;;;;;;ACtdD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4B;AAIT;AAEG;AACU;AACF;AAI9B,IAAM,cAAc,GAAG,KAAK,CAAC;AAE7B,QAAQ,CAAC,QAAQ,CAAC,kBAAkB,CAAC,KAAK,CAAC,CAAC;AAE5C,IAAM,EAAE,GAAG,gDAAO,CAAC,WAAW,CAAC;AAE/B,IAAM,MAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,cAAc,CAAsB,EACrE,MAAM,GAAG,IAAI,gDAAM,CAAC,MAAM,EAAE,IAAI,EAAE,EAAE,kBAAkB,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,oBAAoB,EAAE,KAAK,EAAE,qBAAqB,EAAE,IAAI,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;AAElK,SAAS,sBAAsB;IAC3B,MAAM,CAAC,MAAM,EAAE,CAAC;AACpB,CAAC;AAED,6CAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,QAAQ,EAAE,sBAAsB,CAAC,CAAC;AACpD,6CAAM,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,MAAM,EAAE,sBAAsB,CAAC,CAAC;AAElD,IAAI,UAAU,GAAG,+CAAM,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC;AAEvD,IAAI,EAAE,CAAC,QAAQ,CAAC,EAAE;IACd,UAAU,GAAG,EAAE,CAAC,QAAQ,CAAC,CAAC;CAC7B;AAED,IAAM,MAAM,GAAG,+CAAM,CAAC,YAAY,CAAC,UAAU,EAAE,MAAM,EAAE,MAAM,CAAW,CAAC;AAEzE,IAAI,MAAM,KAAK,IAAI,EAAE;IACjB,KAAK,CAAC,sBAAmB,UAAU,SAAK,CAAC,CAAC;CAC7C;KAAM;IACH,IAAI,QAAM,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAgB,CAAC;IAE3D;;OAEG;IAEH,MAAM,CAAC,aAAa,CAAC;QACjB,MAAM,CAAC,cAAc,CAAC,MAAM,CAAC,YAAY,EAAE,GAAG,MAAM,CAAC,CAAC;QAEtD,MAAM,CAAC,MAAM,EAAE,CAAC;QAEhB,IAAI,QAAM,EAAE;YACR,QAAM,CAAC,SAAS,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,OAAO,EAAE,GAAG,MAAM,CAAC;SACzD;IACL,CAAC,CAAC,CAAC;CACN;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtD8B;AASJ;AAIO;AAMe;AACA;AAEjD;IAAqC,2BAAG;IAIpC,iBAAY,IAAY,EAAE,MAAc,EAAE,MAAc;QAAxD,YACI,kBAAM,IAAI,EAAE,MAAM,CAAC,SAQtB;QANG,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QAEtB,KAAI,CAAC,UAAU,CAAC,KAAK,GAAG,GAAG,CAAC;QAC5B,KAAI,CAAC,UAAU,CAAC,MAAM,GAAG,GAAG,CAAC;QAC7B,KAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAC7B,KAAI,CAAC,eAAe,GAAG,wDAAmB,CAAC,QAAQ,CAAC;;IACxD,CAAC;IAES,6BAAW,GAArB,UAAsB,KAAY;QAC9B,OAAO,KAAK,CAAC;IACjB,CAAC;IAES,iCAAe,GAAzB;QAAA,iBAkGC;QAjGG,IAAM,UAAU,GAAG,oEAAU,CAAC;YAC1B,IAAI,EAAE;gBACF,QAAQ,EAAE,EAAE;aACf;SACJ,CAAC,CAAC,sDAAI,CAAC,CAAC;QAET,IAAM,UAAU,GAAG;YACf,IAAM,OAAO,GAAG,KAAI,CAAC,UAAU,EAAE,CAAC;YAC5B,2FAAsE,EAArE,mBAAW,EAAE,sBAAwD,CAAC;YACvE,2FAAkE,EAAjE,iBAAS,EAAE,oBAAsD,CAAC;YACnE,4FAAqE,EAApE,kBAAU,EAAE,qBAAwD,CAAC;YAE5E,IAAM,iBAAiB,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBACtH,KAAI,CAAC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBACtD,cAAc,CAAC,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YAC3C,CAAC,CAAC;YAEF,IAAM,eAAe,GAAG,UAAC,KAAuE,EAAE,KAAsB;gBACpH,KAAI,CAAC,OAAO,CAAC,SAAS,GAAG,KAAK,CAAC,MAAM,CAAC,KAAe,CAAC;gBACtD,YAAY,CAAC,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;YACzC,CAAC,CAAC;YAEF,IAAM,gBAAgB,GAAG,UAAC,KAAwB,EAAE,OAAgB;gBAChE,aAAa,CAAC,OAAO,CAAC,CAAC;gBACvB,KAAI,CAAC,OAAO,CAAC,UAAU,GAAG,OAAO,CAAC;YACtC,CAAC,CAAC;YAEF,+CAAe,CAAC;gBACZ,IAAM,OAAO,GAAG,UAAC,KAAY;oBACzB,QAAS,KAAqB,CAAC,MAAM,CAAC,IAAI,EAAE;wBACxC,KAAK,gBAAgB,CAAC,CAAC;4BACnB,cAAc,CAAC,KAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC;4BACvC,MAAM;yBACT;qBACJ;gBACL,CAAC,CAAC;gBAEF,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;gBAElD,OAAO;oBACH,MAAM,CAAC,mBAAmB,CAAC,eAAe,EAAE,OAAO,CAAC,CAAC;gBACzD,CAAC,CAAC;YACN,CAAC,EAAE,EAAE,CAAC,CAAC;YAEP,OAAO,CACH,oDAAC,sDAAI,IAAC,SAAS,QAAC,OAAO,EAAE,CAAC;gBACtB,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oBACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa,kBAAqB,CACzD;gBACP,oDAAC,UAAU,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC,EAAE,SAAS,EAAE,OAAO,CAAC,aAAa;oBACpD,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa;wBACnC,oDAAC,wDAAM,IAAC,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,gBAAgB,GAAI,CACvD,CACC;gBACb,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oBACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa,mBAAsB,CAC1D;gBACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oBACZ,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,EAAE,EAAC,aAAa,EAChB,KAAK,EAAE,WAAW,EAClB,QAAQ,EAAE,iBAAiB;wBAE3B,oDAAC,0DAAQ,IAAC,KAAK,EAAE,qDAAa,CAAC,YAAY,mBAAyB;wBACpE,oDAAC,0DAAQ,IAAC,KAAK,EAAE,qDAAa,CAAC,MAAM,aAAmB,CACnD,CACN;gBACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oBACZ,oDAAC,uDAAK,IAAC,SAAS,EAAE,OAAO,CAAC,aAAa,iBAAoB,CACxD;gBACP,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,CAAC;oBACZ,oDAAC,wDAAM,IACH,SAAS,EAAE,OAAO,CAAC,aAAa,EAChC,EAAE,EAAC,WAAW,EACd,KAAK,EAAE,SAAS,EAChB,QAAQ,EAAE,eAAe,IAEvB,KAAK,CAAC,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,CAAC,GAAG,CAAC,UAAC,IAAI;wBACpD,IAAM,KAAK,GAAG,KAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,IAAI,CAAE,CAAC;wBACnD,OAAO,CACH,oDAAC,0DAAQ,IAAC,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,IAAG,KAAK,CAAC,SAAS,CAAY,CACjE,CAAC;oBACN,CAAC,CAAC,CACG,CACN;gBACN,KAAI,CAAC,yBAAyB,EAAE;gBACjC,oDAAC,sDAAI,IAAC,IAAI,QAAC,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE;oBAC/D,oDAAC,wDAAM,IAAC,OAAO,EAAC,WAAW,EAAC,KAAK,EAAC,SAAS,EAAC,OAAO,EAAE,KAAI,CAAC,OAAO,CAAC,cAAc,CAAC,IAAI,CAAC,KAAI,CAAC,OAAO,CAAC,mBAE1F,CACN,CACJ,CACV,CAAC;QACN,CAAC,CAAC;QAEF,OAAO,UAAU,EAAE,CAAC;IACxB,CAAC;IAES,2CAAyB,GAAnC;QACI,OAAO,CACH,oDAAC,8CAAc,OACE,CACpB,CAAC;IACN,CAAC;IAEL,cAAC;AAAD,CAAC,CA9HoC,4CAAG,GA8HvC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClIkB;AAEsB;AAEzC;IAA+C,qCAAW;IAA1D;;IAuNA,CAAC;IArNa,yCAAa,GAAvB,UAAwB,KAAY,EAAE,MAAuB;QACzD,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QACtB,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QACtB,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;QAExB,MAAM,CAAC,SAAS,CAAC,iDAAO,CAAC,IAAI,EAAE,CAAC,CAAC;QAEjC,6DAA6D;QAC7D,IAAI,KAAK,GAAG,IAAI,0DAAgB,CAAC,OAAO,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;QAEvE,6DAA6D;QAC7D,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC;QAEtB,gCAAgC;QAChC,IAAI,MAAM,GAAG,IAAI,0DAAgB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QACnD,MAAM,CAAC,cAAc,GAAG,IAAI,iDAAO,CAAC,6BAA6B,EAAE,KAAK,CAAC,CAAC;QAE1E,+BAA+B;QAC/B,IAAI,MAAM,GAAG,qDAAW,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAC,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAC,EAAE,KAAK,CAAC,CAAC;QAC9E,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC;QAEzB,gBAAgB;QAChB,IAAM,SAAS,GAAG,KAAK,CAAC,mBAAmB,EAAE,CAAC;QAE9C,mDAAmD;QACnD,IAAI,SAAS,GAAG,IAAI,yDAAe,CAAC,WAAW,EAAE,GAAG,EAAE,IAAI,EAAE,iDAAO,CAAC,oBAAoB,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAExG,qCAAqC;QACrC,gDAAM,CAAC,YAAY,CAAC,iBAAiB,GAAG,27BAsClC,CAAC;QACP,gDAAM,CAAC,YAAY,CAAC,mBAAmB,GAAG,8SAYzC,CAAC;QAEF,IAAM,cAAc,GAAG,IAAI,wDAAc,CACrC,uBAAuB,EAAE,aAAa;QACtC,KAAK,EACL,OAAO,EAAE,cAAc;QACvB;YACI,UAAU,EAAE,CAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,CAAE;YAC1C,QAAQ,EAAE,CAAE,OAAO,EAAE,WAAW,EAAE,qBAAqB,EAAE,MAAM,EAAE,YAAY,EAAE,MAAM,EAAE,WAAW,CAAE;SACvG,CACJ,CAAC;QAEF,cAAc,CAAC,MAAM,EAAE,CAAC;QAExB,IAAM,sBAAsB,GAAG,cAAc,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAE9D,sBAAsB,CAAC,MAAM,EAAE,CAAC;QAEhC,IAAM,YAAY,GAAG,IAAI,6DAAmB,CAAC,eAAe,EAAE,GAAG,EAAE,KAAK,CAAC,CAAC;QAC1E,KAAK,CAAC,mBAAmB,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;QAE7C,YAAY,CAAC,cAAc,GAAG,UAAC,CAAC;oCAEnB,CAAC;;gBACN,IAAM,IAAI,GAAG,YAAY,CAAC,UAAW,CAAC,CAAC,CAAC,CAAC;gBACzC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,IAAI,EAAE,CAAC;gBACpC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,IAAI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE,EAAE,qHAAqH;oBACvL,IAAM,sBAAoB,GAAyD,EAAE,CAAC;oBACtF,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,OAAO;wBAC3B,sBAAoB,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;oBAC1E,CAAC,CAAC,CAAC;oBACH,IAAI,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC;oBACvB,IAAI,CAAC,QAAQ,CAAC,oBAAoB,GAAG,IAAI,CAAC,QAAQ,CAAC;oBACnD,IAAI,CAAC,QAAQ,CAAC,oBAAoB,GAAG,sBAAoB,CAAC;iBAC7D;gBACD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,oBAAoB,EAAE;;iBAAa;gBACtD,IAAI,CAAC,QAAQ,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,sBAAsB,CAAC;gBACjE,IAAI,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE;oBACnC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;wBAC5C,UAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAC,SAAS,oBAAK,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,CAAC,CAAmD,GAAE;qBAC3H;iBACJ;;YAnBL,iCAAiC;YACjC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,UAAW,CAAC,MAAM,EAAE,EAAE,CAAC;wBAA/C,CAAC;aAmBT;QACL,CAAC,CAAC;QACF,YAAY,CAAC,aAAa,GAAG;oCAEhB,CAAC;;gBACN,IAAM,IAAI,GAAG,YAAY,CAAC,UAAW,CAAC,CAAC,CAAC,CAAC;gBACzC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,oBAAoB,EAAE;;iBAAa;gBACtD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,EAAE;oBACpC,IAAI,CAAC,QAAQ,CAAC,mBAAmB,GAAG,EAAE,CAAC;oBACvC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAC,OAAO;wBAC3B,IAAI,CAAC,QAAQ,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,OAAO,CAAC,gBAAgB,CAAC,CAAC,CAAC;oBACvF,CAAC,CAAC,CAAC;iBACN;gBACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC;gBACnD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;oBAC5C,UAAI,CAAC,SAAS,CAAC,CAAC,CAAC,EAAC,SAAS,oBAAK,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,CAAC,CAAmD,GAAE;iBAC5H;;YAbL,wCAAwC;YACxC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,YAAY,CAAC,UAAW,CAAC,MAAM,EAAE,EAAE,CAAC;wBAA/C,CAAC;aAaT;QACL,CAAC,CAAC;QAEF,+BAA+B;QAC/B,gDAAM,CAAC,YAAY,CAAC,iBAAiB,GAAG,iVAalC,CAAC;QAEP,gDAAM,CAAC,YAAY,CAAC,mBAAmB,GAAG,kiBAkBzC,CAAC;QAEF,kBAAkB;QAClB,IAAI,SAAS,GAAG,IAAI,qDAAW,CAC3B,sBAAsB,EACtB,OAAO,EAAG,SAAS;QACnB,IAAI,EAAE,aAAa;QACnB,CAAC,aAAa,EAAE,eAAe,EAAE,cAAc,CAAE,EAAE,WAAW;QAC9D,GAAG,EAAG,UAAU;QAChB,IAAI,EAAE,SAAS;QACf,iDAAO,CAAC,qBAAqB,EAAE,WAAW;QAC1C,IAAI,CAAC,OAAO,CAAC,SAAS;SACzB,CAAC;QAEF,SAAS,CAAC,OAAO,GAAG,UAAC,MAAM;YACvB,MAAM,CAAC,yBAAyB,CAAC,aAAa,EAAE,SAAS,CAAC,CAAC;YAC3D,MAAM,CAAC,UAAU,CAAC,eAAe,EAAE,YAAY,CAAC,CAAC;YACjD,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC;QAC/D,CAAC,CAAC;QAEF,sBAAsB;QACtB,IAAI,QAAQ,GAAG,IAAI,mEAAyB,CAAC,IAAI,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;QACvE,IAAI,YAAY,GAAG,IAAI,iEAAuB,CAC1C,IAAI,CAAC,OAAO,EAAE,cAAc,EAAE,cAAa,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAEjF,QAAQ,CAAC,SAAS,CAAC,YAAY,CAAC,CAAC;QACjC,KAAK,CAAC,gCAAgC,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;QAC7D,KAAK,CAAC,gCAAgC,CAAC,6BAA6B,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;QAEzF,+BAA+B;QAC/B,qDAAW,CAAC,UAAU,CAAC,EAAE,EAAE,yBAAyB,EAAE,gBAAgB,EAAE,KAAK,EAAE,UAAS,MAAM;YAC1F,YAAY,CAAC,UAAW,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACtC,MAAM,CAAC,OAAO,CAAC,UAAC,IAAI;gBAChB,YAAY,CAAC,UAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACxC,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAEL,wBAAC;AAAD,CAAC,CAvN8C,oDAAW,GAuNzD;;AAED,oDAAW,CAAC,mBAAmB,CAAC,mBAAmB,EAAE;IACjD,aAAa,EAAE,kEAAkE;IACjF,aAAa,EAAE,EAAE;IACjB,OAAO,EAAE,iBAAiB;CAC7B,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxOgB;AAEsB;AAEzC;IAAyC,+BAAW;IAApD;;IAmUA,CAAC;IAjUa,mCAAa,GAAvB,UAAwB,KAAY,EAAE,MAAuB;QACzD,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC;QACvB,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,CAAC;QACvB,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,EAAE,CAAC;QAExB,MAAM,CAAC,SAAS,CAAC,iDAAO,CAAC,IAAI,EAAE,CAAC,CAAC;QAEjC,gDAAM,CAAC,YAAY,CAAC,sBAAsB,CAAC,GAAG,kTAWjD,CAAC;QAEF,gDAAM,CAAC,YAAY,CAAC,wBAAwB,CAAC,GAAG,mpQAwO/C,CAAC;QAEE,MAAM,CAAC,IAAI,GAAG,CAAC,CAAC;QAChB,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;QACnB,0BAA0B;QAE1B,IAAI,KAAK,GAAG,IAAI,0DAAgB,CAAC,OAAO,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;QACvE,KAAK,CAAC,SAAS,GAAG,GAAG,CAAC;QAEtB,IAAI,MAAM,GAAG,qDAAW,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAC,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAC,EAAE,KAAK,CAAC,CAAC;QACpF,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAEtB,IAAI,MAAM,GAAG,qDAAW,CAAC,YAAY,CAAC,QAAQ,EAAE,EAAC,KAAK,EAAE,CAAC,EAAE,MAAM,EAAE,CAAC,EAAC,EAAE,KAAK,CAAC,CAAC;QAE9E,IAAI,YAAY,GAAG,IAAI,qDAAW,CAAC,aAAa,EAAE,UAAU,EAC5D;YACI,YAAY;YACZ,SAAS;YACT,SAAS;YACT,aAAa;YACb,cAAc;YACd,QAAQ;YACR,SAAS;YACT,eAAe;YACf,UAAU;YACV,cAAc;YACd,YAAY;YACZ,MAAM;YACN,iBAAiB;SACpB,EACD;YACI,UAAU;SACb,EAAE,GAAG,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC,EAAE,UAAU,CAAC,CAAC;QAE3D,IAAI,MAAM,GAAG,KAAK,CAAC,mBAAmB,EAAE,CAAC;QACzC,IAAI,IAAI,GAAG,GAAG,CAAC;QAEf,YAAY,CAAC,OAAO,GAAG,UAAS,MAAM;YAClC,IAAI,IAAI,KAAK,CAAC,SAAS,EAAE,CAAC,YAAY,EAAE,GAAG,KAAK,CAAC;YACjD,MAAM,CAAC,QAAQ,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;YAC9B,MAAM,CAAC,UAAU,CAAC,UAAU,EAAE,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;YACpD,IAAI,IAAI,GAAG,KAAK,CAAC,SAAS,EAAE,CAAC,kBAAkB,EAAG,CAAC;YACnD,MAAM,CAAC,UAAU,CAAC,YAAY,EAAE,IAAI,iDAAO,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YACtE,MAAM,CAAC,UAAU,CAAC,aAAa,EAAE,KAAK,CAAC,YAAa,CAAC,QAAQ,CAAC,CAAC;YAC/D,MAAM,CAAC,UAAU,CAAC,cAAc,EAAE,KAAK,CAAC,YAAa,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC;YAClF,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE,KAAK,CAAC,YAAa,CAAC,IAAI,CAAC,CAAC;YACrD,MAAM,CAAC,QAAQ,CAAC,SAAS,EAAE,KAAK,CAAC,YAAa,CAAC,IAAI,CAAC,CAAC;YACrD,MAAM,CAAC,QAAQ,CAAC,QAAQ,EAAE,KAAK,CAAC,YAAa,CAAC,GAAG,CAAC,CAAC;YAEnD,MAAM,CAAC,SAAS,CAAC,SAAS,EAAE,KAAK,CAAC,YAAa,CAAC,aAAa,EAAE,CAAC,CAAC;YACjE,MAAM,CAAC,SAAS,CAAC,eAAe,EAAE,KAAK,CAAC,YAAa,CAAC,mBAAmB,EAAE,CAAC,CAAC;YAC7E,MAAM,CAAC,SAAS,CAAC,UAAU,EAAE,KAAK,CAAC,YAAa,CAAC,cAAc,EAAE,CAAC,CAAC;YACnE,MAAM,CAAC,SAAS,CAAC,cAAc,EAAE,KAAK,CAAC,YAAa,CAAC,uBAAuB,EAAE,CAAC,CAAC;YAEhF,MAAM,CAAC,SAAS,CAAC,iBAAiB,EAAE,IAAI,gDAAM,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC,EAAE,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;YAE5G,IAAI,QAAQ,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,EAAE,CAAC,SAAS,EAAE,CAAC;YAEnD,MAAM,CAAC,UAAU,CAAC,YAAY,EAC1B,IAAI,iDAAO,CACP,QAAQ,CAAC,CAAC,EACV,QAAQ,CAAC,CAAC,EACV,QAAQ,CAAC,CAAC,EACV,GAAG,CACN,CACJ,CAAC;QACN,CAAC,CAAC;IACN,CAAC;IAEL,kBAAC;AAAD,CAAC,CAnUwC,oDAAW,GAmUnD;;AAED,oDAAW,CAAC,mBAAmB,CAAC,aAAa,EAAE;IAC3C,aAAa,EAAG,oBAAoB;IACpC,aAAa,EAAG,EAAE;IAClB,OAAO,EAAE,WAAW;CACvB,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjVgB;AAEa;AAGhC,IAAM,WAAW,GAAG,CAAC,EACf,eAAe,GAAG,CAAC,CAAC;AAE1B,IAAY,aAGX;AAHD,WAAY,aAAa;IACrB,iEAAY;IACZ,qDAAM;AACV,CAAC,EAHW,aAAa,KAAb,aAAa,QAGxB;AAQD;IA0DI,gBAAY,MAAc,EAAE,MAAyB;QACjD,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC;QACtB,IAAI,CAAC,QAAQ,GAAG,IAAI,GAAG,EAAmB,CAAC;QAC3C,IAAI,CAAC,WAAW,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC1C,IAAI,CAAC,YAAY,GAAG,WAAW,CAAC;QAChC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QAEzB,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,aAAa,CAAC,MAAM,CAAC;QACtC,IAAI,CAAC,YAAY,GAAG,IAAI,GAAG,EAAE,CAAC;QAC9B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;QACtB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QAEhB,MAAc,CAAC,QAAQ,GAAG,IAAI,CAAC;QAC/B,MAAc,CAAC,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;IACvC,CAAC;IAzCD,sBAAkB,oBAAU;aAA5B;YACI,OAAO,MAAM,CAAC,WAAW,CAAC;QAC9B,CAAC;;;OAAA;IAEa,0BAAmB,GAAjC,UAAkC,IAAY,EAAE,MAA0B;QACtE,IAAI,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE;YAC9B,MAAM,iCAA8B,IAAI,2BAAuB,CAAC;SACnE;QACD,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;IACzC,CAAC;IAEa,mBAAY,GAA1B,UAA2B,IAAY,EAAE,MAAc,EAAE,MAAyB;QAC9E,IAAM,WAAW,GAAG,MAAM,CAAC,WAAW,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAEjD,IAAI,WAAW,EAAE;YACb,IAAM,MAAM,GAAG,IAAI,WAAW,CAAC,KAAK,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;YAErD,MAAM,CAAC,MAAM,EAAE,CAAC;YAEhB,OAAO,MAAM,CAAC;SACjB;QAED,OAAO,IAAI,CAAC;IAChB,CAAC;IAoBD,sBAAW,8BAAU;aAArB;YACI,OAAO,IAAI,CAAC,WAAW,CAAC;QAC5B,CAAC;aAED,UAAsB,EAAW;YAAjC,iBAGC;YAFG,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;YACtB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK,IAAK,YAAI,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,CAAC,EAAhC,CAAgC,CAAC,CAAC;QACrE,CAAC;;;OALA;IAOD,sBAAW,+BAAW;aAAtB;YACI,OAAO,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAC9B,CAAC;;;OAAA;IAEM,+BAAc,GAArB;QACI,IAAI,IAAI,CAAC,YAAY,CAAC,IAAI,KAAK,CAAC,EAAE;YAC9B,OAAO;SACV;QAED,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;IAC7D,CAAC;IAEM,+BAAc,GAArB,UAAsB,SAAiB;QAAvC,iBA8CC;QA7CG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK;YACtB,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;YAE5B,MAAM,CAAC,KAAK,GAAG,KAAI,CAAC,YAAY,GAAG,CAAC,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,eAAe,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAEtF,IAAI,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBACxB,MAAM,CAAC,eAAe,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,KAAI,CAAC,YAAY,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;aACrE;YAED,IAAI,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;gBACxB,MAAM,CAAC,eAAe,GAAG,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,KAAI,CAAC,YAAY,GAAG,CAAC,EAAE,CAAC,CAAC,CAAC;aACtE;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YACxB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;YAC9B,IAAI,CAAC,cAAc,EAAE,CAAC;SACzB;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YACxB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;YAC9B,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK;gBACtB,IAAI,KAAK,CAAC,GAAG,EAAE;oBACX,KAAK,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;iBACzB;YACL,CAAC,CAAC,CAAC;SACN;QAED,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,IAAI,EAAE;YACvC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;YAChC,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;SACzB;QAED,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK,EAAE,UAAU;YAClC,IAAI,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAI,UAAU,GAAG,CAAC,CAAE,CAAC,IAAI,KAAK,CAAC,GAAG,EAAE;gBACtD,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAI,UAAU,GAAG,CAAC,CAAE,EAAE,KAAK,CAAC,CAAC;gBAC/C,KAAK,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;aACzB;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,EAAE;YACxB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;YAC9B,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,KAAK,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC,aAAa,CAAC,YAAY,CAAC,CAAC,CAAC,aAAa,CAAC,MAAM,CAAC;YAC7G,MAAM,CAAC,aAAa,CAAC,IAAI,WAAW,CAAC,eAAe,EAAE,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,gBAAgB,EAAE,EAAE,CAAC,CAAC,CAAC;SAClG;IACL,CAAC;IAEM,uBAAM,GAAb;QAAA,iBAkCC;QAjCG,IAAM,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,EACjC,CAAC,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,EAClC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;gCAE5B,CAAC;YACN,IAAM,KAAK,GAAG,OAAK,MAAM,CAAC,CAAC,CAAC,CAAC;YAE7B,KAAK,CAAC,KAAK,CAAC,SAAS,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YAEjC,QAAQ,OAAK,SAAS,EAAE;gBACpB,KAAK,aAAa,CAAC,YAAY;oBAC3B,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,kDAAQ,CAAC,CAAC,GAAG,OAAK,MAAM,CAAC,MAAM,EAAE,CAAC,EAAE,CAAC,GAAG,OAAK,MAAM,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;oBAC3F,MAAM;gBACV,KAAK,aAAa,CAAC,MAAM;oBACrB,KAAK,CAAC,MAAM,CAAC,QAAQ,GAAG,IAAI,kDAAQ,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;oBACjD,IAAI,OAAK,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE;wBACxB,KAAK,CAAC,KAAK,CAAC,2BAA2B,CAAC,OAAO,CAAC;4BAC5C,KAAI,CAAC,OAAO,CAAC,aAAa,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;wBACjE,CAAC,CAAC,CAAC;wBACH,KAAK,CAAC,KAAK,CAAC,0BAA0B,CAAC,OAAO,CAAC;4BAC3C,KAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;wBAClC,CAAC,CAAC,CAAC;qBACN;oBACD,MAAM;aACb;YAED,IAAI,KAAK,CAAC,SAAS,EAAE;gBACjB,OAAK,OAAO,CAAC,YAAY,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,KAAK,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,OAAK,WAAW,CAAC,CAAC;aACjF;iBAAM;gBACH,KAAK,CAAC,MAAM,EAAE,CAAC;aAClB;;;QA1BL,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC;oBAAlC,CAAC;SA2BT;IAEL,CAAC;IAEM,0BAAS,GAAhB;QACI,IAAI,CAAC,IAAI,GAAG,IAAI,gDAAO,CAAC,iBAAiB,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QAE/D,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC;IAC1B,CAAC;IAES,uBAAM,GAAhB;IACA,CAAC;IAES,8BAAa,GAAvB;QACI,IAAM,MAAM,GAAG,IAAI,GAAG,EAA2B,CAAC;QAElD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE;YACzC,IAAM,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,EACtB,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC;YAE7B,IAAM,MAAM,GAAG,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;YACvC,IAAI,CAAC,MAAM,EAAE;gBACT,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC;gBACjC,OAAO,CAAC,MAAM,EAAE,CAAC;gBACjB,SAAS;aACZ;YAED,OAAO,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC;YAC7B,OAAO,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;YAC3C,OAAO,CAAC,QAAQ,GAAG,MAAM,CAAC,QAAQ,CAAC,KAAK,EAAE,CAAC;YAC3C,OAAO,CAAC,eAAe,GAAG,MAAM,CAAC,eAAe,CAAC,KAAK,EAAE,CAAC;YACzD,OAAO,CAAC,cAAc,GAAG,MAAM,CAAC,cAAc,CAAC,KAAK,EAAE,CAAC;SAC1D;IACL,CAAC;IAES,8BAAa,GAAvB,UAAwB,cAAsB,EAAE,UAAwB;QACpE,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,cAAc,EAAE,UAAU,CAAC,CAAC;IACtD,CAAC;IAEM,yBAAQ,GAAf,UAAgB,cAAsB,EAAE,SAAiB,EAAE,cAA8B,EAAE,SAAyB;QAAzD,sDAA8B;QAAE,4CAAyB;QAChH,IAAM,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QAEzD,IAAI,CAAC,UAAU,EAAE;YACb,OAAO,IAAI,CAAC;SACf;QACG,6DAA2D,EAA1D,aAAK,EAAE,cAAmD,CAAC;QAEhE,IAAM,KAAK,GAAG,IAAI,UAAU,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,EAAE,SAAS,CAAC,CAAC;QAE7D,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAExB,IAAI,SAAS,EAAE;YACX,KAAK,CAAC,SAAS,EAAE,CAAC;SACrB;QAED,MAAM,CAAC,UAAU,CAAC,cAAM,aAAM,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,aAAa,CAAC,CAAC,EAA9C,CAA8C,EAAE,EAAE,CAAC,CAAC,CAAC,6DAA6D;QAE1I,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,+BAAc,GAArB,UAAsB,KAAqB;QACvC,IAAI,QAAQ,GAAW,CAAC,CAAC;QAEzB,IAAI,OAAM,CAAC,KAAK,CAAC,IAAI,QAAQ,EAAE;YAC3B,QAAQ,GAAG,KAAK,CAAC;SACpB;aAAM;YACH,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;SACzC;QAED,IAAI,QAAQ,GAAG,CAAC,EAAE;YACd,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC;SACrC;QAED,IAAI,WAAW,GAAG,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,EAC3C,YAAY,GAAG,IAAI,CAAC,OAAO,CAAC,eAAe,EAAE,EAC7C,CAAC,GAAG,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAEzC,OAAO;YACH,CAAC,EAAE,QAAQ,GAAG,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM;YAC9C,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,YAAY;SAClB,CAAC;IACN,CAAC;IAEM,4BAAW,GAAlB,UAAmB,KAAqB;QACpC,IAAI,KAAK,GAAiB,IAAI,CAAC;QAE/B,IAAI,OAAM,CAAC,KAAK,CAAC,IAAI,QAAQ,EAAE;YAC3B,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC3C;aAAM;YACH,IAAM,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YACvC,IAAI,GAAG,KAAK,CAAC,CAAC,EAAE;gBACZ,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;aACzC;SACJ;QAED,IAAI,KAAK,IAAI,KAAK,CAAC,GAAG,EAAE;YACpB,KAAK,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC;SACzB;QAED,MAAM,CAAC,aAAa,CAAC,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC,CAAC;QAEjD,OAAO,KAAK,CAAC;IACjB,CAAC;IAES,0CAAyB,GAAnC;QAAA,iBAMC;QALG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK;YACtB,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;YAE5B,MAAM,CAAC,aAAa,CAAC,KAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;QAC7C,CAAC,CAAC,CAAC;IACP,CAAC;IAES,4CAA2B,GAArC;QAAA,iBAMC;QALG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,UAAC,KAAK;YACtB,IAAM,MAAM,GAAG,KAAK,CAAC,MAAM,CAAC;YAE5B,MAAM,CAAC,aAAa,CAAC,KAAI,CAAC,OAAO,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;IACP,CAAC;IAES,8BAAa,GAAvB,UAAwB,MAAuB;QAC3C,MAAM,CAAC,MAAM,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC;QAC/E,MAAM,CAAC,QAAQ,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC;QACnF,MAAM,CAAC,QAAQ,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC;QACnF,MAAM,CAAC,SAAS,GAAG,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;IACzF,CAAC;IAES,qCAAoB,GAA9B,UAA+B,cAA8B;QAA7D,iBAmCC;QAnC8B,sDAA8B;QACzD,IAAM,KAAK,GAAG,IAAI,+CAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACtC,IAAM,MAAM,GAAG,IAAI,yDAAe,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC;QAEjG,MAAM,CAAC,GAAG,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QACzB,MAAM,CAAC,SAAS,CAAC,iDAAO,CAAC,IAAI,EAAE,CAAC,CAAC;QAEjC,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC;QACnB,MAAM,CAAC,kBAAkB,GAAG,GAAG,CAAC;QAEhC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;QAE3B,KAAK,CAAC,oBAAoB,CAAC,GAAG,CAAC,UAAC,MAAM;YAClC,QAAQ,MAAM,CAAC,IAAI,EAAE;gBACjB,KAAK,OAAO,CAAC,kBAAkB,CAAC,OAAO;oBACnC,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;oBAC1C,IAAI,MAAM,CAAC,KAAK,CAAC,GAAG,IAAI,IAAI,EAAE;wBAC1B,MAAM,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC;qBACjC;oBACD,MAAM;gBACV,KAAK,OAAO,CAAC,kBAAkB,CAAC,KAAK;oBACjC,KAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;oBAC3C,MAAM;aACb;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC;QAE9B,IAAI,cAAc,EAAE;YAChB,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;SAC5C;QAED,KAAK,CAAC,YAAY,GAAG,MAAM,CAAC;QAE5B,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IAC3B,CAAC;IAES,kCAAiB,GAA3B,UAA4B,KAAY;QAAxC,iBAyBC;QAxBG,IAAI,MAAM,GAAG,KAAK,CAAC;QAEnB,KAAK,CAAC,mBAAmB,CAAC,GAAG,CAAC,UAAC,WAAW;YACtC,QAAQ,WAAW,CAAC,IAAI,EAAE;gBACtB,KAAK,OAAO,CAAC,iBAAiB,CAAC,WAAW;oBACtC,IAAI,WAAW,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,EAAE;wBAC/B,IAAI,CAAC,MAAM,EAAE;4BACT,MAAM,GAAG,IAAI,CAAC;4BACd,KAAI,CAAC,OAAO,CAAC,kBAAkB,GAAG,KAAI,CAAC,OAAO,CAAC,kBAAkB,IAAI,KAAI,CAAC,OAAO,CAAC,oBAAoB,IAAI,KAAI,CAAC,OAAO,CAAC,qBAAqB,IAAI,KAAI,CAAC,OAAO,CAAC,wBAAwB,CAAC;4BACtL,IAAI,KAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE;gCACjC,KAAI,CAAC,2BAA2B,EAAE,CAAC;gCACnC,KAAI,CAAC,OAAO,CAAC,kBAAkB,EAAE,CAAC;gCAClC,MAAM,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,yBAAyB,EAAE,EAAhC,CAAgC,EAAE,GAAG,CAAC,CAAC;6BAClE;yBACJ;6BAAM;4BACH,KAAI,CAAC,2BAA2B,EAAE,CAAC;4BACnC,QAAQ,CAAC,eAAe,EAAE,CAAC;4BAC3B,MAAM,GAAG,KAAK,CAAC;4BACf,MAAM,CAAC,UAAU,CAAC,cAAM,YAAI,CAAC,yBAAyB,EAAE,EAAhC,CAAgC,EAAE,GAAG,CAAC,CAAC;yBAClE;qBACJ;oBACD,MAAM;aACb;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IA9WgB,kBAAW,GAAoC,IAAI,GAAG,EAAE,CAAC;IAEhD,iBAAU,GAAG;QACnC,QAAQ,EAAE;YACN,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,EAAE;YACV,MAAM,EAAE,EAAE;YACV,OAAO,EAAE,EAAE;SACd;QAED,QAAQ,EAAE;YACN,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,EAAE;YACV,MAAM,EAAE,EAAE;YACV,OAAO,EAAE,EAAE;SACd;KACJ,CAAC;IAgWN,aAAC;CAAA;AAlXoB,qEAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBG;AACF;AAE5B;IAAyB,8BAAK;IAE1B,oBAAY,KAAY,EAAE,MAAuB,EAAE,MAAc,EAAE,IAAwB;QAAxB,uCAAwB;eACvF,kBAAM,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,CAAC;IACtC,CAAC;IACL,iBAAC;AAAD,CAAC,CALwB,8CAAK,GAK7B;AAED;IAAyC,+BAAM;IAA/C;;IAeA,CAAC;IAba,mCAAa,GAAvB,UAAwB,KAAY,EAAE,MAAuB;IAC7D,CAAC;IAES,4BAAM,GAAhB;QACI,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,UAAU,CAAC,CAAC;QAExC,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,KAAK,CAAe,CAAC;QAEvE,IAAI,CAAC,aAAa,CAAC,KAAK,CAAC,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;QAE9C,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,sBAAsB,CAAC,CAAC;IACzD,CAAC;IAEL,kBAAC;AAAD,CAAC,CAfwC,+CAAM,GAe9C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBkB;AAGU;AAE7B;IAAiD,uCAAK;IAAtD;;IA+FA,CAAC;IA7FU,uCAAS,GAAhB;QACI,IAAI,CAAC,GAAI,CAAC,UAAU,CAAC,MAAM,GAAG,EAAE,CAAC;QACjC,IAAI,CAAC,GAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAElC,iBAAM,SAAS,WAAE,CAAC;IACtB,CAAC;IAEM,wCAAU,GAAjB;QAAA,iBAoFC;QAnFG,IAAI,KAAK,GAAG,IAAI,0DAAgB,CAAC,WAAW,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEhF,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,GAAG,CAAC;QAEvB,IAAI,QAAQ,GAAI,IAAI,CAAC,KAAa,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAkB,CAAC;QAE5F,QAAQ,CAAC,qBAAqB,GAAG,IAAI,CAAC;QACtC,QAAQ,CAAC,WAAW,EAAE,CAAC,oBAAoB,GAAG,KAAK,CAAC;QAEpD,OAAO;QACP,IAAI,WAAW,GAAG,IAAI,0DAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE1D,WAAW,CAAC,cAAc,GAAG,IAAI,iDAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEpF,IAAI,GAAG,GAAG,qDAAW,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEvD,GAAG,CAAC,QAAQ,GAAG,WAAW,CAAC;QAE3B,OAAO;QACP,IAAI,YAAY,GAAG,IAAI,0DAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE5D,YAAY,CAAC,cAAc,GAAG,IAAI,iDAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAErF,IAAI,IAAI,GAAG,qDAAW,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEzD,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAEpB,IAAI,UAAU,GAAG,QAAQ,CAAC,IAAI,CAAC;QAE/B,IAAI,OAAO,GAAG;YACV,EAAE,GAAG,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE;YAC3G,EAAE,GAAG,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,IAAI,EAAE,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE,EAAE,MAAM,EAAE,EAAE,EAAE;SAClH,CAAC;QAEF,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM;YACnB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,UAAU,CAAC;YACxC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;YAC9C,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC;YAChD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,GAAG,MAAM,CAAC,KAAK,CAAC;YACjD,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,KAAK,CAAC;YAC9B,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC;YAE/B,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;QACxC,CAAC,CAAC,CAAC;QAEH,IAAI,QAAQ,GAAG,QAAQ,CAAC,WAAW,EAAE,CAAC;QAEtC,IAAI,MAAM,GAAG,IAAI,YAAY,CAAC,CAAC,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC,KAAK,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC;QAExF,8BAA8B;QAE9B,IAAI,CAAC,KAAK,CAAC,uBAAuB,CAAC,GAAG,CAAC;YAEnC,QAAQ,CAAC,UAAU,CAAC,CAAC,EAAE,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,2CAA2C;YAE9E,OAAO,CAAC,OAAO,CAAC,UAAC,MAAM;gBACnB,IAAI,SAAS,GAAG,iDAAO,CAAC,oBAAoB,CAAC,MAAM,CAAC,GAAG,EAAE,KAAI,CAAC,KAAK,CAAC,aAAa,EAAE,CAAC,CAAC;gBACrF,IAAI,aAAa,GAAG,iDAAO,CAAC,oBAAoB,CAAC,MAAM,CAAC,GAAG,EAAE,KAAI,CAAC,KAAK,CAAC,kBAAkB,EAAE,CAAC,CAAC;gBAC9F,IAAI,YAAY,GAAG,aAAa,CAAC,gBAAgB,CAAC,GAAG,EAAE,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,iDAAO,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;oBACzE,gBAAgB,CAAC,KAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,cAAc,EAAE,EAAE,KAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,eAAe,EAAE,EAAE,CAAC,CAAC,CAAC;gBAE/H,IAAI,EAAE,GAAG,YAAY,CAAC,CAAC,GAAG,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC;gBAC3C,IAAI,EAAE,GAAG,YAAY,CAAC,CAAC,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC;gBAE5C,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,CAAC,EAAE,GAAG,UAAU,CAAC,UAAU,CAAC,GAAG,IAAI,CAAC;gBAC7D,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,GAAG,UAAU,CAAC,SAAS,CAAC,GAAG,IAAI,CAAC;gBAE3D,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,GAAG,MAAM,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC;gBACvC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,KAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC,eAAe,EAAE,GAAG,CAAC,EAAE,GAAG,MAAM,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC;gBAErF,IAAI,QAAQ,GAAG,MAAM,CAAC,CAAC,GAAG,CAAC,EAAE,GAAG,EAAE,GAAG,QAAQ,CAAC,OAAO,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;gBAEhE,IAAI,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC,GAAG,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,KAAI,CAAC,MAAM,CAAC,IAAI,GAAG,KAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gBAElF,IAAI,CAAC,GAAG,QAAQ,EAAE;oBACd,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;iBACrC;qBAAM;oBACH,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG,KAAK,CAAC;iBACrC;YACL,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAEL,0BAAC;AAAD,CAAC,CA/FgD,8CAAK,GA+FrD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChGkB;AAGU;AAE7B;IAA+C,qCAAK;IAApD;;IA+GA,CAAC;IA7GU,qCAAS,GAAhB;QACI,IAAI,CAAC,GAAI,CAAC,UAAU,CAAC,MAAM,GAAG,EAAE,CAAC;QACjC,IAAI,CAAC,GAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAElC,iBAAM,SAAS,WAAE,CAAC;IACtB,CAAC;IAEM,sCAAU,GAAjB;QAAA,iBAoGC;QAnGG,IAAI,KAAK,GAAG,IAAI,0DAAgB,CAAC,YAAY,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEjF,IAAI,QAAQ,GAAI,IAAI,CAAC,KAAa,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,EAAE,KAAK,CAAkB,CAAC;QAE5F,QAAQ,CAAC,qBAAqB,GAAG,IAAI,CAAC;QACtC,QAAQ,CAAC,WAAW,EAAE,CAAC,oBAAoB,GAAG,KAAK,CAAC;QAEpD,gDAAM,CAAC,YAAY,CAAC,qBAAqB,CAAC,GAAG,6UASvC,CAAC;QAEP,gDAAM,CAAC,YAAY,CAAC,uBAAuB,CAAC,GAAG,wyBAkBzC,CAAC;QAEP,OAAO;QACP,IAAI,WAAW,GAAG,IAAI,0DAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE3D,WAAW,CAAC,cAAc,GAAG,IAAI,iDAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEpF,IAAI,GAAG,GAAG,qDAAW,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAExD,GAAG,CAAC,QAAQ,GAAG,WAAW,CAAC;QAE3B,OAAO;QACP,IAAI,YAAY,GAAG,IAAI,0DAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE7D,YAAY,CAAC,cAAc,GAAG,IAAI,iDAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAErF,IAAI,IAAI,GAAG,qDAAW,CAAC,SAAS,CAAC,OAAO,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE1D,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAEpB,UAAU;QACV,IAAI,cAAc,GAAG,IAAI,wDAAc,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE;YACxD,MAAM,EAAE,SAAS;YACjB,QAAQ,EAAE,SAAS;SAClB,EACD;YACI,UAAU,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC;YAC9B,QAAQ,EAAE,CAAC,qBAAqB,EAAE,YAAY,CAAC;YAC/C,iBAAiB,EAAE,IAAI;SAC1B,CAAC,CAAC;QAEP,cAAc,CAAC,UAAU,CAAC,OAAO,EAAE,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC;QAC3D,cAAc,CAAC,UAAU,CAAC,gBAAgB,EAAE,IAAI,iDAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACpG,cAAc,CAAC,eAAe,GAAG,KAAK,CAAC;QACvC,cAAc,CAAC,iBAAiB,GAAG,IAAI,CAAC;QACxC,cAAc,CAAC,SAAS,GAAG,gDAAM,CAAC,aAAa,CAAC;QAChD,cAAc,CAAC,aAAa,GAAG,gDAAM,CAAC,MAAM,CAAC;QAE7C,IAAI,MAAM,GAAG,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE3E,MAAM,CAAC,QAAQ,GAAG,cAAc,CAAC;QACjC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QAExB,UAAU;QACV,IAAI,OAAO,GAAG,qDAAW,CAAC,WAAW,CAAC,SAAS,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE5E,OAAO,CAAC,QAAQ,GAAG,cAAc,CAAC;QAClC,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QACzB,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QAEzB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;QAEpC,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,GAAG,CAAC;YACpC,cAAc,CAAC,UAAU,CAAC,YAAY,EAAE,IAAI,iDAAO,CAAC,MAAM,CAAC,cAAc,EAAE,EAAE,MAAM,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;QAC5G,CAAC,CAAC,CAAC;QAEH,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG;YAC1B,GAAG,CAAC,wBAAwB,CAAC,GAAG,CAAC;gBAC7B,GAAG,CAAC,MAAM,CAAC,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACrC,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAEL,wBAAC;AAAD,CAAC,CA/G8C,8CAAK,GA+GnD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpHkB;AAGU;AAE7B;IAAkD,wCAAK;IAAvD;;IA2GA,CAAC;IAzGU,wCAAS,GAAhB;QACI,IAAI,CAAC,GAAI,CAAC,UAAU,CAAC,MAAM,GAAG,EAAE,CAAC;QACjC,IAAI,CAAC,GAAI,CAAC,eAAe,GAAG,KAAK,CAAC;QAElC,iBAAM,SAAS,WAAE,CAAC;IACtB,CAAC;IAEM,yCAAU,GAAjB;QAAA,iBAgGC;QA/FG,IAAI,KAAK,GAAG,IAAI,0DAAgB,CAAC,WAAW,EAAE,IAAI,iDAAO,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEhF,IAAI,QAAQ,GAAI,IAAI,CAAC,KAAa,CAAC,mBAAmB,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAkB,CAAC;QAE3F,QAAQ,CAAC,qBAAqB,GAAG,IAAI,CAAC;QACtC,QAAQ,CAAC,WAAW,EAAE,CAAC,oBAAoB,GAAG,KAAK,CAAC;QAEpD,gDAAM,CAAC,YAAY,CAAC,qBAAqB,CAAC,GAAG,6UASvC,CAAC;QAEP,gDAAM,CAAC,YAAY,CAAC,uBAAuB,CAAC,GAAG,ihBAYzC,CAAC;QAEP,OAAO;QACP,IAAI,WAAW,GAAG,IAAI,0DAAgB,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE1D,WAAW,CAAC,cAAc,GAAG,IAAI,iDAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEpF,IAAI,GAAG,GAAG,qDAAW,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEvD,GAAG,CAAC,QAAQ,GAAG,WAAW,CAAC;QAE3B,OAAO;QACP,IAAI,YAAY,GAAG,IAAI,0DAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE5D,YAAY,CAAC,cAAc,GAAG,IAAI,iDAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAErF,IAAI,IAAI,GAAG,qDAAW,CAAC,SAAS,CAAC,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAEzD,IAAI,CAAC,QAAQ,GAAG,YAAY,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QACtB,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;QAEpB,UAAU;QACV,IAAI,cAAc,GAAG,IAAI,wDAAc,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE;YACxD,MAAM,EAAE,SAAS;YACjB,QAAQ,EAAE,SAAS;SAClB,EACD;YACI,UAAU,EAAE,CAAC,UAAU,EAAE,IAAI,CAAC;YAC9B,QAAQ,EAAE,CAAC,qBAAqB,EAAE,YAAY,CAAC;YAC/C,iBAAiB,EAAE,IAAI;SAC1B,CAAC,CAAC;QAEP,cAAc,CAAC,UAAU,CAAC,OAAO,EAAE,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC;QAC3D,cAAc,CAAC,UAAU,CAAC,gBAAgB,EAAE,IAAI,iDAAO,CAAC,6BAA6B,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;QACpG,cAAc,CAAC,eAAe,GAAG,KAAK,CAAC;QACvC,cAAc,CAAC,iBAAiB,GAAG,IAAI,CAAC;QACxC,cAAc,CAAC,SAAS,GAAG,gDAAM,CAAC,aAAa,CAAC;QAChD,cAAc,CAAC,aAAa,GAAG,gDAAM,CAAC,MAAM,CAAC;QAE7C,IAAI,MAAM,GAAG,qDAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE1E,MAAM,CAAC,QAAQ,GAAG,cAAc,CAAC;QACjC,MAAM,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QAExB,UAAU;QACV,IAAI,OAAO,GAAG,qDAAW,CAAC,WAAW,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAE3E,OAAO,CAAC,QAAQ,GAAG,cAAc,CAAC;QAClC,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QACzB,OAAO,CAAC,QAAQ,CAAC,CAAC,GAAG,GAAG,CAAC;QAEzB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;QAEpC,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,IAAI,CAAC;QAE5B,IAAI,CAAC,KAAK,CAAC,wBAAwB,CAAC,GAAG,CAAC;YACpC,cAAc,CAAC,UAAU,CAAC,YAAY,EAAE,IAAI,iDAAO,CAAC,MAAM,CAAC,cAAc,EAAE,EAAE,MAAM,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;QAC5G,CAAC,CAAC,CAAC;QAEH,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG;YAC1B,GAAG,CAAC,wBAAwB,CAAC,GAAG,CAAC;gBAC7B,GAAG,CAAC,MAAM,CAAC,KAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;YACrC,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAEL,2BAAC;AAAD,CAAC,CA3GiD,8CAAK,GA2GtD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnHkB;AAE+B;AAEQ;AACN;AACI;AAExD;IAAuC,6BAAM;IAEzC,mBAAY,MAAc,EAAE,MAAyB;QAArD,YACI,kBAAM,MAAM,EAAE,MAAM,CAAC,SASxB;QAPG,KAAI,CAAC,WAAW,GAAG,IAAI,gDAAM,CAAC,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,EAAE,GAAG,GAAG,EAAE,CAAC,CAAC,CAAC;QAC/D,KAAI,CAAC,YAAY,GAAG,GAAG,CAAC;QACxB,KAAI,CAAC,SAAS,GAAG,qDAAa,CAAC,YAAY,CAAC;QAE5C,KAAI,CAAC,aAAa,CAAC,wBAAwB,EAAE,6DAAoB,CAAC,CAAC;QACnE,KAAI,CAAC,aAAa,CAAC,qBAAqB,EAAE,0DAAiB,CAAC,CAAC;QAC7D,KAAI,CAAC,aAAa,CAAC,uBAAuB,EAAE,4DAAmB,CAAC,CAAC;;IACrE,CAAC;IAES,0BAAM,GAAhB;QACI,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,wBAAwB,EAAE,kBAAkB,CAAyB,CAAC;QAEjG,MAAM,CAAC,UAAU,EAAE,CAAC;QAEpB,IAAI,MAAM,GAAG,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAE,cAAc,CAAsB,CAAC;QAEvF,MAAM,CAAC,UAAU,EAAE,CAAC;QAEpB;;8BAEsB;IAC1B,CAAC;IAEM,kCAAc,GAArB;IACA,CAAC;IAES,wCAAoB,GAA9B,UAA+B,cAAuB;QAC5C,oFAA4D,EAA3D,aAAK,EAAE,cAAoD,CAAC;QAEnE,KAAK,CAAC,UAAU,GAAG,IAAI,CAAC,WAAW,CAAC;QACpC,KAAK,CAAC,SAAS,GAAG,KAAK,CAAC;QAExB,MAAM,CAAC,kBAAkB,GAAG,IAAI,CAAC;QAEjC,OAAO,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC;IAC3B,CAAC;IAEL,gBAAC;AAAD,CAAC,CA1CsC,+CAAM,GA0C5C;;AAED,+CAAM,CAAC,mBAAmB,CAAC,kBAAkB,EAAE;IAC3C,aAAa,EAAE,2CAA2C;IAC1D,aAAa,EAAE,EAAE;IACjB,OAAO,EAAE,SAAS;CACrB,CAAC,CAAC;;;;;;;;;;;;;AC7DH;AAAA;AAAkC;AAGlC;IAaI,eAAY,KAAY,EAAE,MAAuB,EAAE,MAAc,EAAE,IAAwB;QAAxB,uCAAwB;QACvF,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACrB,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;QACjB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,CAAC,UAAU,GAAG,MAAM,CAAC;QACzB,IAAI,CAAC,GAAG,GAAG,IAAI,iDAAQ,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACtF,CAAC;IAEM,sBAAM,GAAb;QACI,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;IACxB,CAAC;IAEM,yBAAS,GAAhB;QACI,IAAI,CAAC,GAAI,CAAC,SAAS,EAAE,CAAC;IAC1B,CAAC;IA3Ba,eAAS,GAAW,OAAO,CAAC;IA6B9C,YAAC;CAAA;AA/BoB,oEAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJF;AAIxB;IAAsC,4BAAG;IAKrC,kBAAY,IAAY,EAAE,MAAc,EAAE,SAAiB,EAAE,MAAa;QAA1E,YACI,kBAAM,IAAI,EAAE,MAAM,CAAC,SAItB;QAFG,KAAI,CAAC,UAAU,GAAG,SAAS,CAAC;QAC5B,KAAI,CAAC,OAAO,GAAG,MAAM,CAAC;;IAC1B,CAAC;IAEM,4BAAS,GAAhB;QACI,OAAO,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IACxD,CAAC;IAEM,2BAAQ,GAAf;QACI,OAAO,IAAI,CAAC,UAAU,CAAC,WAAW,GAAG,CAAC,CAAC;IAC3C,CAAC;IAEM,yBAAM,GAAb;QACI,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;IAC9C,CAAC;IAEL,eAAC;AAAD,CAAC,CAxBqC,4CAAG,GAwBxC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxBkB;AAIQ;AAE3B;IAAA;IAoDA,CAAC;IAlDiB,sBAAgB,GAA9B,UAA+B,KAAa;QACxC,0CAA0C;QAC1C,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC;QAExB,+BAA+B;QAC/B,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAE5B,IAAM,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QAEzB,KAAK,GAAG,KAAK,GAAG,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC,CAAC;QAElD,6DAA6D;QAC7D,KAAK,GAAG,KAAK,GAAG,IAAI,CAAC,EAAE,CAAC;QAExB,uDAAuD;QACvD,IAAI,KAAK,GAAG,GAAG,EAAE;YACb,KAAK,GAAG,CAAC,KAAK,CAAC;SAClB;QAED,OAAO,KAAK,CAAC;IACjB,CAAC;IAEa,eAAS,GAAvB,UAAwB,UAA2D,EAAE,KAAY,EAAE,IAAmB;QAA9F,gFAA2D;QAAgB,kCAAmB;QAClH,IAAM,MAAM,GAAG,qDAAW,CAAC,SAAS,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,KAAK,CAAC,CAAC;QACtE,IAAM,cAAc,GAAG,IAAI,0DAAgB,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;QAE7D,cAAc,CAAC,eAAe,GAAG,KAAK,CAAC;QACvC,cAAc,CAAC,iBAAiB,GAAG,IAAI,qDAAW,CAAC,oBAAoB,GAAG,UAAU,EAAE,KAAK,CAAC,CAAC;QAC7F,cAAc,CAAC,iBAAkB,CAAC,eAAe,GAAG,OAAO,CAAC,OAAO,CAAC,WAAW,CAAC;QAChF,cAAc,CAAC,YAAY,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAClD,cAAc,CAAC,aAAa,GAAG,IAAI,gDAAM,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QACnD,cAAc,CAAC,eAAe,GAAG,IAAI,CAAC;QACtC,cAAc,CAAC,iBAAiB,GAAG,IAAI,CAAC;QAExC,MAAM,CAAC,QAAQ,GAAG,cAAc,CAAC;QACjC,MAAM,CAAC,wBAAwB,GAAG,IAAI,CAAC;QAEvC,OAAO,MAAM,CAAC;IAClB,CAAC;IAEmB,aAAO,GAA3B,UAA4B,KAAY,EAAE,IAAY,EAAE,IAAY;;;gBAChE,uCAAuC;gBACvC,kCAAkC;gBAClC,uDAAa,CAAC,gBAAgB,GAAG,IAAI,CAAC;gBACtC,uDAAa,CAAC,+BAA+B,GAAG,KAAK,CAAC;gBACtD,uDAAa,CAAC,gBAAgB,GAAI,KAAK,CAAC;gBAExC,sBAAO,qDAAW,CAAC,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,EAAC;;;KACrD;IAEL,YAAC;AAAD,CAAC;;;;;;;;;;;;;;AClED;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqB;AACC;AACO;AACF;AACE;AACM;AACD;;;;;;;;;;;;ACNlC,4B;;;;;;;;;;;ACAA,mC;;;;;;;;;;;ACAA,yB;;;;;;;;;;;ACAA,wB;;;;;;;;;;;ACAA,uB;;;;;;;;;;;ACAA,0B","file":"babylondev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/Main.ts\");\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"babylonjs\")):\"function\"==typeof define&&define.amd?define(\"babylonjs-gui\",[\"babylonjs\"],e):\"object\"==typeof exports?exports[\"babylonjs-gui\"]=e(require(\"babylonjs\")):(t.BABYLON=t.BABYLON||{},t.BABYLON.GUI=e(t.BABYLON))}(\"undefined\"!=typeof self?self:\"undefined\"!=typeof global?global:this,function(t){return function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=2)}([function(e,i){e.exports=t},function(t,e,i){\"use strict\";i.r(e);\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function n(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}function o(t,e,i,r){var n,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var h=t.length-1;h>=0;h--)(n=t[h])&&(s=(o<3?n(s):o>3?n(e,i,s):n(e,i))||s);return o>3&&s&&Object.defineProperty(e,i,s),s}var s,h=i(0),a=function(){function t(e,i,r){void 0===i&&(i=t.UNITMODE_PIXEL),void 0===r&&(r=!0),this.unit=i,this.negativeValueAllowed=r,this._value=1,this.ignoreAdaptiveScaling=!1,this._value=e,this._originalUnit=i}return Object.defineProperty(t.prototype,\"isPercentage\",{get:function(){return this.unit===t.UNITMODE_PERCENTAGE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"isPixel\",{get:function(){return this.unit===t.UNITMODE_PIXEL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"internalValue\",{get:function(){return this._value},enumerable:!0,configurable:!0}),t.prototype.getValueInPixel=function(t,e){return this.isPixel?this.getValue(t):this.getValue(t)*e},t.prototype.updateInPlace=function(e,i){return void 0===i&&(i=t.UNITMODE_PIXEL),this._value=e,this.unit=i,this},t.prototype.getValue=function(e){if(e&&!this.ignoreAdaptiveScaling&&this.unit!==t.UNITMODE_PERCENTAGE){var i=0,r=0;if(e.idealWidth&&(i=this._value*e.getSize().width/e.idealWidth),e.idealHeight&&(r=this._value*e.getSize().height/e.idealHeight),e.useSmallestIdeal&&e.idealWidth&&e.idealHeight)return window.innerWidth<window.innerHeight?i:r;if(e.idealWidth)return i;if(e.idealHeight)return r}return this._value},t.prototype.toString=function(e,i){switch(this.unit){case t.UNITMODE_PERCENTAGE:var r=100*this.getValue(e);return(i?r.toFixed(i):r)+\"%\";case t.UNITMODE_PIXEL:var n=this.getValue(e);return(i?n.toFixed(i):n)+\"px\"}return this.unit.toString()},t.prototype.fromString=function(e){var i=t._Regex.exec(e.toString());if(!i||0===i.length)return!1;var r=parseFloat(i[1]),n=this._originalUnit;if(this.negativeValueAllowed||r<0&&(r=0),4===i.length)switch(i[3]){case\"px\":n=t.UNITMODE_PIXEL;break;case\"%\":n=t.UNITMODE_PERCENTAGE,r/=100}return(r!==this._value||n!==this.unit)&&(this._value=r,this.unit=n,!0)},Object.defineProperty(t,\"UNITMODE_PERCENTAGE\",{get:function(){return t._UNITMODE_PERCENTAGE},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"UNITMODE_PIXEL\",{get:function(){return t._UNITMODE_PIXEL},enumerable:!0,configurable:!0}),t._Regex=/(^-?\\d*(\\.\\d+)?)(%|px)?/,t._UNITMODE_PERCENTAGE=0,t._UNITMODE_PIXEL=1,t}(),l=function(){function t(t,e,i,r){this.left=t,this.top=e,this.width=i,this.height=r}return t.prototype.copyFrom=function(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height},t.prototype.copyFromFloats=function(t,e,i,r){this.left=t,this.top=e,this.width=i,this.height=r},t.CombineToRef=function(t,e,i){var r=Math.min(t.left,e.left),n=Math.min(t.top,e.top),o=Math.max(t.left+t.width,e.left+e.width),s=Math.max(t.top+t.height,e.top+e.height);i.left=r,i.top=n,i.width=o-r,i.height=s-n},t.prototype.transformToRef=function(t,e){for(var i=h.Polygon.Rectangle(this.left,this.top,this.left+this.width,this.top+this.height),r=new h.Vector2(Number.MAX_VALUE,Number.MAX_VALUE),n=new h.Vector2(0,0),o=0;o<4;o++)t.transformCoordinates(i[o].x,i[o].y,i[o]),r.x=Math.floor(Math.min(r.x,i[o].x)),r.y=Math.floor(Math.min(r.y,i[o].y)),n.x=Math.ceil(Math.max(n.x,i[o].x)),n.y=Math.ceil(Math.max(n.y,i[o].y));e.left=r.x,e.top=r.y,e.width=n.x-r.x,e.height=n.y-r.y},t.prototype.isEqualsTo=function(t){return this.left===t.left&&(this.top===t.top&&(this.width===t.width&&this.height===t.height))},t.Empty=function(){return new t(0,0,0,0)},t}(),u=function(t){function e(e,i){void 0===i&&(i=0);var r=t.call(this,e.x,e.y)||this;return r.buttonIndex=i,r}return n(e,t),e}(h.Vector2),c=function(){function t(t,e,i,r,n,o){this.m=new Float32Array(6),this.fromValues(t,e,i,r,n,o)}return t.prototype.fromValues=function(t,e,i,r,n,o){return this.m[0]=t,this.m[1]=e,this.m[2]=i,this.m[3]=r,this.m[4]=n,this.m[5]=o,this},t.prototype.determinant=function(){return this.m[0]*this.m[3]-this.m[1]*this.m[2]},t.prototype.invertToRef=function(t){var e=this.m[0],i=this.m[1],r=this.m[2],n=this.m[3],o=this.m[4],s=this.m[5],a=this.determinant();if(a<h.Epsilon*h.Epsilon)return t.m[0]=0,t.m[1]=0,t.m[2]=0,t.m[3]=0,t.m[4]=0,t.m[5]=0,this;var l=1/a,u=r*s-n*o,c=i*o-e*s;return t.m[0]=n*l,t.m[1]=-i*l,t.m[2]=-r*l,t.m[3]=e*l,t.m[4]=u*l,t.m[5]=c*l,this},t.prototype.multiplyToRef=function(t,e){var i=this.m[0],r=this.m[1],n=this.m[2],o=this.m[3],s=this.m[4],h=this.m[5],a=t.m[0],l=t.m[1],u=t.m[2],c=t.m[3],_=t.m[4],d=t.m[5];return e.m[0]=i*a+r*u,e.m[1]=i*l+r*c,e.m[2]=n*a+o*u,e.m[3]=n*l+o*c,e.m[4]=s*a+h*u+_,e.m[5]=s*l+h*c+d,this},t.prototype.transformCoordinates=function(t,e,i){return i.x=t*this.m[0]+e*this.m[2]+this.m[4],i.y=t*this.m[1]+e*this.m[3]+this.m[5],this},t.Identity=function(){return new t(1,0,0,1,0,0)},t.TranslationToRef=function(t,e,i){i.fromValues(1,0,0,1,t,e)},t.ScalingToRef=function(t,e,i){i.fromValues(t,0,0,e,0,0)},t.RotationToRef=function(t,e){var i=Math.sin(t),r=Math.cos(t);e.fromValues(r,i,-i,r,0,0)},t.ComposeToRef=function(e,i,r,n,o,s,h){t.TranslationToRef(e,i,t._TempPreTranslationMatrix),t.ScalingToRef(n,o,t._TempScalingMatrix),t.RotationToRef(r,t._TempRotationMatrix),t.TranslationToRef(-e,-i,t._TempPostTranslationMatrix),t._TempPreTranslationMatrix.multiplyToRef(t._TempScalingMatrix,t._TempCompose0),t._TempCompose0.multiplyToRef(t._TempRotationMatrix,t._TempCompose1),s?(t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix,t._TempCompose2),t._TempCompose2.multiplyToRef(s,h)):t._TempCompose1.multiplyToRef(t._TempPostTranslationMatrix,h)},t._TempPreTranslationMatrix=t.Identity(),t._TempPostTranslationMatrix=t.Identity(),t._TempRotationMatrix=t.Identity(),t._TempScalingMatrix=t.Identity(),t._TempCompose0=t.Identity(),t._TempCompose1=t.Identity(),t._TempCompose2=t.Identity(),t}(),_=function(){function t(e){this.name=e,this._alpha=1,this._alphaSet=!1,this._zIndex=0,this._currentMeasure=l.Empty(),this._fontFamily=\"Arial\",this._fontStyle=\"\",this._fontWeight=\"\",this._fontSize=new a(18,a.UNITMODE_PIXEL,!1),this._width=new a(1,a.UNITMODE_PERCENTAGE,!1),this._height=new a(1,a.UNITMODE_PERCENTAGE,!1),this._color=\"\",this._style=null,this._horizontalAlignment=t.HORIZONTAL_ALIGNMENT_CENTER,this._verticalAlignment=t.VERTICAL_ALIGNMENT_CENTER,this._isDirty=!0,this._wasDirty=!1,this._tempParentMeasure=l.Empty(),this._prevCurrentMeasureTransformedIntoGlobalSpace=l.Empty(),this._cachedParentMeasure=l.Empty(),this._paddingLeft=new a(0),this._paddingRight=new a(0),this._paddingTop=new a(0),this._paddingBottom=new a(0),this._left=new a(0),this._top=new a(0),this._scaleX=1,this._scaleY=1,this._rotation=0,this._transformCenterX=.5,this._transformCenterY=.5,this._transformMatrix=c.Identity(),this._invertTransformMatrix=c.Identity(),this._transformedPosition=h.Vector2.Zero(),this._isMatrixDirty=!0,this._isVisible=!0,this._isHighlighted=!1,this._fontSet=!1,this._dummyVector2=h.Vector2.Zero(),this._downCount=0,this._enterCount=-1,this._doNotRender=!1,this._downPointerIds={},this._isEnabled=!0,this._disabledColor=\"#9a9a9a\",this._rebuildLayout=!1,this._isClipped=!1,this.metadata=null,this.isHitTestVisible=!0,this.isPointerBlocker=!1,this.isFocusInvisible=!1,this.clipChildren=!0,this.clipContent=!0,this.useBitmapCache=!1,this._shadowOffsetX=0,this._shadowOffsetY=0,this._shadowBlur=0,this._shadowColor=\"black\",this.hoverCursor=\"\",this._linkOffsetX=new a(0),this._linkOffsetY=new a(0),this.onPointerMoveObservable=new h.Observable,this.onPointerOutObservable=new h.Observable,this.onPointerDownObservable=new h.Observable,this.onPointerUpObservable=new h.Observable,this.onPointerClickObservable=new h.Observable,this.onPointerEnterObservable=new h.Observable,this.onDirtyObservable=new h.Observable,this.onBeforeDrawObservable=new h.Observable,this.onAfterDrawObservable=new h.Observable,this._tmpMeasureA=new l(0,0,0,0)}return Object.defineProperty(t.prototype,\"shadowOffsetX\",{get:function(){return this._shadowOffsetX},set:function(t){this._shadowOffsetX!==t&&(this._shadowOffsetX=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"shadowOffsetY\",{get:function(){return this._shadowOffsetY},set:function(t){this._shadowOffsetY!==t&&(this._shadowOffsetY=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"shadowBlur\",{get:function(){return this._shadowBlur},set:function(t){this._shadowBlur!==t&&(this._shadowBlur=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"shadowColor\",{get:function(){return this._shadowColor},set:function(t){this._shadowColor!==t&&(this._shadowColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"typeName\",{get:function(){return this._getTypeName()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return this._getTypeName()},Object.defineProperty(t.prototype,\"host\",{get:function(){return this._host},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontOffset\",{get:function(){return this._fontOffset},set:function(t){this._fontOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"alpha\",{get:function(){return this._alpha},set:function(t){this._alpha!==t&&(this._alphaSet=!0,this._alpha=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"isHighlighted\",{get:function(){return this._isHighlighted},set:function(t){this._isHighlighted!==t&&(this._isHighlighted=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"scaleX\",{get:function(){return this._scaleX},set:function(t){this._scaleX!==t&&(this._scaleX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"scaleY\",{get:function(){return this._scaleY},set:function(t){this._scaleY!==t&&(this._scaleY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"rotation\",{get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"transformCenterY\",{get:function(){return this._transformCenterY},set:function(t){this._transformCenterY!==t&&(this._transformCenterY=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"transformCenterX\",{get:function(){return this._transformCenterX},set:function(t){this._transformCenterX!==t&&(this._transformCenterX=t,this._markAsDirty(),this._markMatrixAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"horizontalAlignment\",{get:function(){return this._horizontalAlignment},set:function(t){this._horizontalAlignment!==t&&(this._horizontalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"verticalAlignment\",{get:function(){return this._verticalAlignment},set:function(t){this._verticalAlignment!==t&&(this._verticalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"width\",{get:function(){return this._width.toString(this._host)},set:function(t){this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"widthInPixels\",{get:function(){return this._width.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.width=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"height\",{get:function(){return this._height.toString(this._host)},set:function(t){this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"heightInPixels\",{get:function(){return this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.height=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontFamily\",{get:function(){return this._fontSet?this._fontFamily:\"\"},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontStyle\",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontWeight\",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"style\",{get:function(){return this._style},set:function(t){var e=this;this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this._style=t,this._style&&(this._styleObserver=this._style.onChangedObservable.add(function(){e._markAsDirty(),e._resetFontCache()})),this._markAsDirty(),this._resetFontCache()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"_isFontSizeInPercentage\",{get:function(){return this._fontSize.isPercentage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontSizeInPixels\",{get:function(){var t=this._style?this._style._fontSize:this._fontSize;return t.isPixel?t.getValue(this._host):t.getValueInPixel(this._host,this._tempParentMeasure.height||this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.fontSize=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontSize\",{get:function(){return this._fontSize.toString(this._host)},set:function(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&(this._markAsDirty(),this._resetFontCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"color\",{get:function(){return this._color},set:function(t){this._color!==t&&(this._color=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"zIndex\",{get:function(){return this._zIndex},set:function(t){this.zIndex!==t&&(this._zIndex=t,this.parent&&this.parent._reOrderControl(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"notRenderable\",{get:function(){return this._doNotRender},set:function(t){this._doNotRender!==t&&(this._doNotRender=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"isVisible\",{get:function(){return this._isVisible},set:function(t){this._isVisible!==t&&(this._isVisible=t,this._markAsDirty(!0))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"isDirty\",{get:function(){return this._isDirty},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"linkedMesh\",{get:function(){return this._linkedMesh},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paddingLeft\",{get:function(){return this._paddingLeft.toString(this._host)},set:function(t){this._paddingLeft.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paddingLeftInPixels\",{get:function(){return this._paddingLeft.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingLeft=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paddingRight\",{get:function(){return this._paddingRight.toString(this._host)},set:function(t){this._paddingRight.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paddingRightInPixels\",{get:function(){return this._paddingRight.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.paddingRight=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paddingTop\",{get:function(){return this._paddingTop.toString(this._host)},set:function(t){this._paddingTop.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paddingTopInPixels\",{get:function(){return this._paddingTop.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingTop=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paddingBottom\",{get:function(){return this._paddingBottom.toString(this._host)},set:function(t){this._paddingBottom.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"paddingBottomInPixels\",{get:function(){return this._paddingBottom.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.paddingBottom=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"left\",{get:function(){return this._left.toString(this._host)},set:function(t){this._left.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"leftInPixels\",{get:function(){return this._left.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.left=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"top\",{get:function(){return this._top.toString(this._host)},set:function(t){this._top.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"topInPixels\",{get:function(){return this._top.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.top=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"linkOffsetX\",{get:function(){return this._linkOffsetX.toString(this._host)},set:function(t){this._linkOffsetX.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"linkOffsetXInPixels\",{get:function(){return this._linkOffsetX.getValueInPixel(this._host,this._cachedParentMeasure.width)},set:function(t){isNaN(t)||(this.linkOffsetX=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"linkOffsetY\",{get:function(){return this._linkOffsetY.toString(this._host)},set:function(t){this._linkOffsetY.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"linkOffsetYInPixels\",{get:function(){return this._linkOffsetY.getValueInPixel(this._host,this._cachedParentMeasure.height)},set:function(t){isNaN(t)||(this.linkOffsetY=t+\"px\")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"centerX\",{get:function(){return this._currentMeasure.left+this._currentMeasure.width/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"centerY\",{get:function(){return this._currentMeasure.top+this._currentMeasure.height/2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"isEnabled\",{get:function(){return this._isEnabled},set:function(t){this._isEnabled!==t&&(this._isEnabled=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"disabledColor\",{get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),t.prototype._getTypeName=function(){return\"Control\"},t.prototype.getAscendantOfClass=function(t){return this.parent?this.parent.getClassName()===t?this.parent:this.parent.getAscendantOfClass(t):null},t.prototype._resetFontCache=function(){this._fontSet=!0,this._markAsDirty()},t.prototype.isAscendant=function(t){return!!this.parent&&(this.parent===t||this.parent.isAscendant(t))},t.prototype.getLocalCoordinates=function(t){var e=h.Vector2.Zero();return this.getLocalCoordinatesToRef(t,e),e},t.prototype.getLocalCoordinatesToRef=function(t,e){return e.x=t.x-this._currentMeasure.left,e.y=t.y-this._currentMeasure.top,this},t.prototype.getParentLocalCoordinates=function(t){var e=h.Vector2.Zero();return e.x=t.x-this._cachedParentMeasure.left,e.y=t.y-this._cachedParentMeasure.top,e},t.prototype.moveToVector3=function(e,i){if(this._host&&this.parent===this._host._rootContainer){this.horizontalAlignment=t.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=t.VERTICAL_ALIGNMENT_TOP;var r=this._host._getGlobalViewport(i),n=h.Vector3.Project(e,h.Matrix.Identity(),i.getTransformMatrix(),r);this._moveToProjectedPosition(n),n.z<0||n.z>1?this.notRenderable=!0:this.notRenderable=!1}else h.Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\")},t.prototype._getDescendants=function(t,e,i){void 0===e&&(e=!1)},t.prototype.getDescendants=function(t,e){var i=new Array;return this._getDescendants(i,t,e),i},t.prototype.linkWithMesh=function(e){if(!this._host||this.parent&&this.parent!==this._host._rootContainer)e&&h.Tools.Error(\"Cannot link a control to a mesh if the control is not at root level\");else{var i=this._host._linkedControls.indexOf(this);if(-1!==i)return this._linkedMesh=e,void(e||this._host._linkedControls.splice(i,1));e&&(this.horizontalAlignment=t.HORIZONTAL_ALIGNMENT_LEFT,this.verticalAlignment=t.VERTICAL_ALIGNMENT_TOP,this._linkedMesh=e,this._host._linkedControls.push(this))}},t.prototype._moveToProjectedPosition=function(t){var e=this._left.getValue(this._host),i=this._top.getValue(this._host),r=t.x+this._linkOffsetX.getValue(this._host)-this._currentMeasure.width/2,n=t.y+this._linkOffsetY.getValue(this._host)-this._currentMeasure.height/2;this._left.ignoreAdaptiveScaling&&this._top.ignoreAdaptiveScaling&&(Math.abs(r-e)<.5&&(r=e),Math.abs(n-i)<.5&&(n=i)),this.left=r+\"px\",this.top=n+\"px\",this._left.ignoreAdaptiveScaling=!0,this._top.ignoreAdaptiveScaling=!0,this._markAsDirty()},t.prototype._offsetLeft=function(t){this._isDirty=!0,this._currentMeasure.left+=t},t.prototype._offsetTop=function(t){this._isDirty=!0,this._currentMeasure.top+=t},t.prototype._markMatrixAsDirty=function(){this._isMatrixDirty=!0,this._flagDescendantsAsMatrixDirty()},t.prototype._flagDescendantsAsMatrixDirty=function(){},t.prototype._intersectsRect=function(t){return this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),!(this._tmpMeasureA.left>=t.left+t.width)&&(!(this._tmpMeasureA.top>=t.top+t.height)&&(!(this._tmpMeasureA.left+this._tmpMeasureA.width<=t.left)&&!(this._tmpMeasureA.top+this._tmpMeasureA.height<=t.top)))},t.prototype.invalidateRect=function(){if(this._transform(),this.host&&this.host.useInvalidateRectOptimization)if(this._currentMeasure.transformToRef(this._transformMatrix,this._tmpMeasureA),l.CombineToRef(this._tmpMeasureA,this._prevCurrentMeasureTransformedIntoGlobalSpace,this._tmpMeasureA),this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var t=this.shadowOffsetX,e=this.shadowOffsetY,i=this.shadowBlur,r=Math.min(Math.min(t,0)-2*i,0),n=Math.max(Math.max(t,0)+2*i,0),o=Math.min(Math.min(e,0)-2*i,0),s=Math.max(Math.max(e,0)+2*i,0);this.host.invalidateRect(Math.floor(this._tmpMeasureA.left+r),Math.floor(this._tmpMeasureA.top+o),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width+n),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height+s))}else this.host.invalidateRect(Math.floor(this._tmpMeasureA.left),Math.floor(this._tmpMeasureA.top),Math.ceil(this._tmpMeasureA.left+this._tmpMeasureA.width),Math.ceil(this._tmpMeasureA.top+this._tmpMeasureA.height))},t.prototype._markAsDirty=function(t){void 0===t&&(t=!1),(this._isVisible||t)&&(this._isDirty=!0,this._host&&this._host.markAsDirty())},t.prototype._markAllAsDirty=function(){this._markAsDirty(),this._font&&this._prepareFont()},t.prototype._link=function(t){this._host=t,this._host&&(this.uniqueId=this._host.getScene().getUniqueId())},t.prototype._transform=function(t){if(this._isMatrixDirty||1!==this._scaleX||1!==this._scaleY||0!==this._rotation){var e=this._currentMeasure.width*this._transformCenterX+this._currentMeasure.left,i=this._currentMeasure.height*this._transformCenterY+this._currentMeasure.top;t&&(t.translate(e,i),t.rotate(this._rotation),t.scale(this._scaleX,this._scaleY),t.translate(-e,-i)),(this._isMatrixDirty||this._cachedOffsetX!==e||this._cachedOffsetY!==i)&&(this._cachedOffsetX=e,this._cachedOffsetY=i,this._isMatrixDirty=!1,this._flagDescendantsAsMatrixDirty(),c.ComposeToRef(-e,-i,this._rotation,this._scaleX,this._scaleY,this.parent?this.parent._transformMatrix:null,this._transformMatrix),this._transformMatrix.invertToRef(this._invertTransformMatrix))}},t.prototype._renderHighlight=function(t){this.isHighlighted&&(t.save(),t.strokeStyle=\"#4affff\",t.lineWidth=2,this._renderHighlightSpecific(t),t.restore())},t.prototype._renderHighlightSpecific=function(t){t.strokeRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)},t.prototype._applyStates=function(e){this._isFontSizeInPercentage&&(this._fontSet=!0),this._fontSet&&(this._prepareFont(),this._fontSet=!1),this._font&&(e.font=this._font),this._color&&(e.fillStyle=this._color),t.AllowAlphaInheritance?e.globalAlpha*=this._alpha:this._alphaSet&&(e.globalAlpha=this.parent?this.parent.alpha*this._alpha:this._alpha)},t.prototype._layout=function(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;if(this._isDirty||!this._cachedParentMeasure.isEqualsTo(t)){this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace),e.save(),this._applyStates(e);var i=0;do{this._rebuildLayout=!1,this._processMeasures(t,e),i++}while(this._rebuildLayout&&i<3);i>=3&&h.Logger.Error(\"Layout cycle detected in GUI (Control name=\"+this.name+\", uniqueId=\"+this.uniqueId+\")\"),e.restore(),this.invalidateRect(),this._evaluateClippingState(t)}return this._wasDirty=this._isDirty,this._isDirty=!1,!0},t.prototype._processMeasures=function(t,e){this._currentMeasure.copyFrom(t),this._preMeasure(t,e),this._measure(),this._computeAlignment(t,e),this._currentMeasure.left=0|this._currentMeasure.left,this._currentMeasure.top=0|this._currentMeasure.top,this._currentMeasure.width=0|this._currentMeasure.width,this._currentMeasure.height=0|this._currentMeasure.height,this._additionalProcessing(t,e),this._cachedParentMeasure.copyFrom(t),this.onDirtyObservable.hasObservers()&&this.onDirtyObservable.notifyObservers(this)},t.prototype._evaluateClippingState=function(t){if(this.parent&&this.parent.clipChildren){if(this._currentMeasure.left>t.left+t.width)return void(this._isClipped=!0);if(this._currentMeasure.left+this._currentMeasure.width<t.left)return void(this._isClipped=!0);if(this._currentMeasure.top>t.top+t.height)return void(this._isClipped=!0);if(this._currentMeasure.top+this._currentMeasure.height<t.top)return void(this._isClipped=!0)}this._isClipped=!1},t.prototype._measure=function(){this._width.isPixel?this._currentMeasure.width=this._width.getValue(this._host):this._currentMeasure.width*=this._width.getValue(this._host),this._height.isPixel?this._currentMeasure.height=this._height.getValue(this._host):this._currentMeasure.height*=this._height.getValue(this._host)},t.prototype._computeAlignment=function(e,i){var r=this._currentMeasure.width,n=this._currentMeasure.height,o=e.width,s=e.height,h=0,a=0;switch(this.horizontalAlignment){case t.HORIZONTAL_ALIGNMENT_LEFT:h=0;break;case t.HORIZONTAL_ALIGNMENT_RIGHT:h=o-r;break;case t.HORIZONTAL_ALIGNMENT_CENTER:h=(o-r)/2}switch(this.verticalAlignment){case t.VERTICAL_ALIGNMENT_TOP:a=0;break;case t.VERTICAL_ALIGNMENT_BOTTOM:a=s-n;break;case t.VERTICAL_ALIGNMENT_CENTER:a=(s-n)/2}this._paddingLeft.isPixel?(this._currentMeasure.left+=this._paddingLeft.getValue(this._host),this._currentMeasure.width-=this._paddingLeft.getValue(this._host)):(this._currentMeasure.left+=o*this._paddingLeft.getValue(this._host),this._currentMeasure.width-=o*this._paddingLeft.getValue(this._host)),this._paddingRight.isPixel?this._currentMeasure.width-=this._paddingRight.getValue(this._host):this._currentMeasure.width-=o*this._paddingRight.getValue(this._host),this._paddingTop.isPixel?(this._currentMeasure.top+=this._paddingTop.getValue(this._host),this._currentMeasure.height-=this._paddingTop.getValue(this._host)):(this._currentMeasure.top+=s*this._paddingTop.getValue(this._host),this._currentMeasure.height-=s*this._paddingTop.getValue(this._host)),this._paddingBottom.isPixel?this._currentMeasure.height-=this._paddingBottom.getValue(this._host):this._currentMeasure.height-=s*this._paddingBottom.getValue(this._host),this._left.isPixel?this._currentMeasure.left+=this._left.getValue(this._host):this._currentMeasure.left+=o*this._left.getValue(this._host),this._top.isPixel?this._currentMeasure.top+=this._top.getValue(this._host):this._currentMeasure.top+=s*this._top.getValue(this._host),this._currentMeasure.left+=h,this._currentMeasure.top+=a},t.prototype._preMeasure=function(t,e){},t.prototype._additionalProcessing=function(t,e){},t.prototype._clipForChildren=function(t){},t.prototype._clip=function(e,i){if(e.beginPath(),t._ClipMeasure.copyFrom(this._currentMeasure),i){i.transformToRef(this._invertTransformMatrix,this._tmpMeasureA);var r=new l(0,0,0,0);r.left=Math.max(this._tmpMeasureA.left,this._currentMeasure.left),r.top=Math.max(this._tmpMeasureA.top,this._currentMeasure.top),r.width=Math.min(this._tmpMeasureA.left+this._tmpMeasureA.width,this._currentMeasure.left+this._currentMeasure.width)-r.left,r.height=Math.min(this._tmpMeasureA.top+this._tmpMeasureA.height,this._currentMeasure.top+this._currentMeasure.height)-r.top,t._ClipMeasure.copyFrom(r)}if(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY){var n=this.shadowOffsetX,o=this.shadowOffsetY,s=this.shadowBlur,h=Math.min(Math.min(n,0)-2*s,0),a=Math.max(Math.max(n,0)+2*s,0),u=Math.min(Math.min(o,0)-2*s,0),c=Math.max(Math.max(o,0)+2*s,0);e.rect(t._ClipMeasure.left+h,t._ClipMeasure.top+u,t._ClipMeasure.width+a-h,t._ClipMeasure.height+c-u)}else e.rect(t._ClipMeasure.left,t._ClipMeasure.top,t._ClipMeasure.width,t._ClipMeasure.height);e.clip()},t.prototype._render=function(t,e){return!this.isVisible||this.notRenderable||this._isClipped?(this._isDirty=!1,!1):(t.save(),this._applyStates(t),this._transform(t),this.clipContent&&this._clip(t,e),this.onBeforeDrawObservable.hasObservers()&&this.onBeforeDrawObservable.notifyObservers(this),this.useBitmapCache&&!this._wasDirty&&this._cacheData?t.putImageData(this._cacheData,this._currentMeasure.left,this._currentMeasure.top):this._draw(t,e),this.useBitmapCache&&this._wasDirty&&(this._cacheData=t.getImageData(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._renderHighlight(t),this.onAfterDrawObservable.hasObservers()&&this.onAfterDrawObservable.notifyObservers(this),t.restore(),!0)},t.prototype._draw=function(t,e){},t.prototype.contains=function(t,e){return this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y,!(t<this._currentMeasure.left)&&(!(t>this._currentMeasure.left+this._currentMeasure.width)&&(!(e<this._currentMeasure.top)&&(!(e>this._currentMeasure.top+this._currentMeasure.height)&&(this.isPointerBlocker&&(this._host._shouldBlockPointer=!0),!0))))},t.prototype._processPicking=function(t,e,i,r,n){return!!this._isEnabled&&(!(!this.isHitTestVisible||!this.isVisible||this._doNotRender)&&(!!this.contains(t,e)&&(this._processObservables(i,t,e,r,n),!0)))},t.prototype._onPointerMove=function(t,e,i){this.onPointerMoveObservable.notifyObservers(e,-1,t,this)&&null!=this.parent&&this.parent._onPointerMove(t,e,i)},t.prototype._onPointerEnter=function(t){return!!this._isEnabled&&(!(this._enterCount>0)&&(-1===this._enterCount&&(this._enterCount=0),this._enterCount++,this.onPointerEnterObservable.notifyObservers(this,-1,t,this)&&null!=this.parent&&this.parent._onPointerEnter(t),!0))},t.prototype._onPointerOut=function(t,e){if(void 0===e&&(e=!1),e||this._isEnabled&&t!==this){this._enterCount=0;var i=!0;t.isAscendant(this)||(i=this.onPointerOutObservable.notifyObservers(this,-1,t,this)),i&&null!=this.parent&&this.parent._onPointerOut(t,e)}},t.prototype._onPointerDown=function(t,e,i,r){return this._onPointerEnter(this),0===this._downCount&&(this._downCount++,this._downPointerIds[i]=!0,this.onPointerDownObservable.notifyObservers(new u(e,r),-1,t,this)&&null!=this.parent&&this.parent._onPointerDown(t,e,i,r),!0)},t.prototype._onPointerUp=function(t,e,i,r,n){if(this._isEnabled){this._downCount=0,delete this._downPointerIds[i];var o=n;n&&(this._enterCount>0||-1===this._enterCount)&&(o=this.onPointerClickObservable.notifyObservers(new u(e,r),-1,t,this)),this.onPointerUpObservable.notifyObservers(new u(e,r),-1,t,this)&&null!=this.parent&&this.parent._onPointerUp(t,e,i,r,o)}},t.prototype._forcePointerUp=function(t){if(void 0===t&&(t=null),null!==t)this._onPointerUp(this,h.Vector2.Zero(),t,0,!0);else for(var e in this._downPointerIds)this._onPointerUp(this,h.Vector2.Zero(),+e,0,!0)},t.prototype._processObservables=function(t,e,i,r,n){if(!this._isEnabled)return!1;if(this._dummyVector2.copyFromFloats(e,i),t===h.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,this._dummyVector2,r);var o=this._host._lastControlOver[r];return o&&o!==this&&o._onPointerOut(this),o!==this&&this._onPointerEnter(this),this._host._lastControlOver[r]=this,!0}return t===h.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,this._dummyVector2,r,n),this._host._registerLastControlDown(this,r),this._host._lastPickedControl=this,!0):t===h.PointerEventTypes.POINTERUP&&(this._host._lastControlDown[r]&&this._host._lastControlDown[r]._onPointerUp(this,this._dummyVector2,r,n,!0),delete this._host._lastControlDown[r],!0)},t.prototype._prepareFont=function(){(this._font||this._fontSet)&&(this._style?this._font=this._style.fontStyle+\" \"+this._style.fontWeight+\" \"+this.fontSizeInPixels+\"px \"+this._style.fontFamily:this._font=this._fontStyle+\" \"+this._fontWeight+\" \"+this.fontSizeInPixels+\"px \"+this._fontFamily,this._fontOffset=t._GetFontOffset(this._font))},t.prototype.dispose=function(){(this.onDirtyObservable.clear(),this.onBeforeDrawObservable.clear(),this.onAfterDrawObservable.clear(),this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this._styleObserver&&this._style&&(this._style.onChangedObservable.remove(this._styleObserver),this._styleObserver=null),this.parent&&(this.parent.removeControl(this),this.parent=null),this._host)&&(this._host._linkedControls.indexOf(this)>-1&&this.linkWithMesh(null))},Object.defineProperty(t,\"HORIZONTAL_ALIGNMENT_LEFT\",{get:function(){return t._HORIZONTAL_ALIGNMENT_LEFT},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"HORIZONTAL_ALIGNMENT_RIGHT\",{get:function(){return t._HORIZONTAL_ALIGNMENT_RIGHT},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"HORIZONTAL_ALIGNMENT_CENTER\",{get:function(){return t._HORIZONTAL_ALIGNMENT_CENTER},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"VERTICAL_ALIGNMENT_TOP\",{get:function(){return t._VERTICAL_ALIGNMENT_TOP},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"VERTICAL_ALIGNMENT_BOTTOM\",{get:function(){return t._VERTICAL_ALIGNMENT_BOTTOM},enumerable:!0,configurable:!0}),Object.defineProperty(t,\"VERTICAL_ALIGNMENT_CENTER\",{get:function(){return t._VERTICAL_ALIGNMENT_CENTER},enumerable:!0,configurable:!0}),t._GetFontOffset=function(e){if(t._FontHeightSizes[e])return t._FontHeightSizes[e];var i=document.createElement(\"span\");i.innerHTML=\"Hg\",i.style.font=e;var r=document.createElement(\"div\");r.style.display=\"inline-block\",r.style.width=\"1px\",r.style.height=\"0px\",r.style.verticalAlign=\"bottom\";var n=document.createElement(\"div\");n.appendChild(i),n.appendChild(r),document.body.appendChild(n);var o=0,s=0;try{s=r.getBoundingClientRect().top-i.getBoundingClientRect().top,r.style.verticalAlign=\"baseline\",o=r.getBoundingClientRect().top-i.getBoundingClientRect().top}finally{document.body.removeChild(n)}var h={ascent:o,height:s,descent:s-o};return t._FontHeightSizes[e]=h,h},t.drawEllipse=function(t,e,i,r,n){n.translate(t,e),n.scale(i,r),n.beginPath(),n.arc(0,0,1,0,2*Math.PI),n.closePath(),n.scale(1/i,1/r),n.translate(-t,-e)},t.AllowAlphaInheritance=!1,t._ClipMeasure=new l(0,0,0,0),t._HORIZONTAL_ALIGNMENT_LEFT=0,t._HORIZONTAL_ALIGNMENT_RIGHT=1,t._HORIZONTAL_ALIGNMENT_CENTER=2,t._VERTICAL_ALIGNMENT_TOP=0,t._VERTICAL_ALIGNMENT_BOTTOM=1,t._VERTICAL_ALIGNMENT_CENTER=2,t._FontHeightSizes={},t.AddHeader=function(){},t}(),d=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._children=new Array,i._measureForChildren=l.Empty(),i._background=\"\",i._adaptWidthToChildren=!1,i._adaptHeightToChildren=!1,i}return n(e,t),Object.defineProperty(e.prototype,\"adaptHeightToChildren\",{get:function(){return this._adaptHeightToChildren},set:function(t){this._adaptHeightToChildren!==t&&(this._adaptHeightToChildren=t,t&&(this.height=\"100%\"),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"adaptWidthToChildren\",{get:function(){return this._adaptWidthToChildren},set:function(t){this._adaptWidthToChildren!==t&&(this._adaptWidthToChildren=t,t&&(this.width=\"100%\"),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"background\",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"children\",{get:function(){return this._children},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"Container\"},e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t=0,e=this.children;t<e.length;t++){e[t]._markMatrixAsDirty()}},e.prototype.getChildByName=function(t){for(var e=0,i=this.children;e<i.length;e++){var r=i[e];if(r.name===t)return r}return null},e.prototype.getChildByType=function(t,e){for(var i=0,r=this.children;i<r.length;i++){var n=r[i];if(n.typeName===e)return n}return null},e.prototype.containsControl=function(t){return-1!==this.children.indexOf(t)},e.prototype.addControl=function(t){return t?-1!==this._children.indexOf(t)?this:(t._link(this._host),t._markAllAsDirty(),this._reOrderControl(t),this._markAsDirty(),this):this},e.prototype.clearControls=function(){for(var t=0,e=this.children.slice();t<e.length;t++){var i=e[t];this.removeControl(i)}return this},e.prototype.removeControl=function(t){var e=this._children.indexOf(t);return-1!==e&&(this._children.splice(e,1),t.parent=null),t.linkWithMesh(null),this._host&&this._host._cleanControlAfterRemoval(t),this._markAsDirty(),this},e.prototype._reOrderControl=function(t){this.removeControl(t);for(var e=!1,i=0;i<this._children.length;i++)if(this._children[i].zIndex>t.zIndex){this._children.splice(i,0,t),e=!0;break}e||this._children.push(t),t.parent=this,this._markAsDirty()},e.prototype._offsetLeft=function(e){t.prototype._offsetLeft.call(this,e);for(var i=0,r=this._children;i<r.length;i++){r[i]._offsetLeft(e)}},e.prototype._offsetTop=function(e){t.prototype._offsetTop.call(this,e);for(var i=0,r=this._children;i<r.length;i++){r[i]._offsetTop(e)}},e.prototype._markAllAsDirty=function(){t.prototype._markAllAsDirty.call(this);for(var e=0;e<this._children.length;e++)this._children[e]._markAllAsDirty()},e.prototype._localDraw=function(t){this._background&&(t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.restore())},e.prototype._link=function(e){t.prototype._link.call(this,e);for(var i=0,r=this._children;i<r.length;i++){r[i]._link(e)}},e.prototype._beforeLayout=function(){},e.prototype._processMeasures=function(e,i){!this._isDirty&&this._cachedParentMeasure.isEqualsTo(e)||(t.prototype._processMeasures.call(this,e,i),this._evaluateClippingState(e))},e.prototype._layout=function(t,e){if(!this.isDirty&&(!this.isVisible||this.notRenderable))return!1;this._isDirty&&this._currentMeasure.transformToRef(this._transformMatrix,this._prevCurrentMeasureTransformedIntoGlobalSpace);var i=0;e.save(),this._applyStates(e),this._beforeLayout();do{var r=-1,n=-1;if(this._rebuildLayout=!1,this._processMeasures(t,e),!this._isClipped){for(var o=0,s=this._children;o<s.length;o++){var a=s[o];a._tempParentMeasure.copyFrom(this._measureForChildren),a._layout(this._measureForChildren,e)&&(this.adaptWidthToChildren&&a._width.isPixel&&(r=Math.max(r,a._currentMeasure.width)),this.adaptHeightToChildren&&a._height.isPixel&&(n=Math.max(n,a._currentMeasure.height)))}this.adaptWidthToChildren&&r>=0&&this.width!==r+\"px\"&&(this.width=r+\"px\",this._rebuildLayout=!0),this.adaptHeightToChildren&&n>=0&&this.height!==n+\"px\"&&(this.height=n+\"px\",this._rebuildLayout=!0),this._postMeasure()}i++}while(this._rebuildLayout&&i<3);return i>=3&&h.Logger.Error(\"Layout cycle detected in GUI (Container name=\"+this.name+\", uniqueId=\"+this.uniqueId+\")\"),e.restore(),this._isDirty&&(this.invalidateRect(),this._isDirty=!1),!0},e.prototype._postMeasure=function(){},e.prototype._draw=function(t,e){this._localDraw(t),this.clipChildren&&this._clipForChildren(t);for(var i=0,r=this._children;i<r.length;i++){var n=r[i];e&&!n._intersectsRect(e)||n._render(t,e)}},e.prototype._getDescendants=function(t,e,i){if(void 0===e&&(e=!1),this.children)for(var r=0;r<this.children.length;r++){var n=this.children[r];i&&!i(n)||t.push(n),e||n._getDescendants(t,!1,i)}},e.prototype._processPicking=function(e,i,r,n,o){if(!this._isEnabled||!this.isVisible||this.notRenderable)return!1;if(!t.prototype.contains.call(this,e,i))return!1;for(var s=this._children.length-1;s>=0;s--){var h=this._children[s];if(h._processPicking(e,i,r,n,o))return h.hoverCursor&&this._host._changeCursor(h.hoverCursor),!0}return!!this.isHitTestVisible&&this._processObservables(r,e,i,n,o)},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.copyFrom(this._currentMeasure)},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=this.children.length-1;e>=0;e--)this.children[e].dispose()},e}(_),f=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thickness=1,i._cornerRadius=0,i}return n(e,t),Object.defineProperty(e.prototype,\"thickness\",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cornerRadius\",{get:function(){return this._cornerRadius},set:function(t){t<0&&(t=0),this._cornerRadius!==t&&(this._cornerRadius=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"Rectangle\"},e.prototype._localDraw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._background&&(t.fillStyle=this._background,this._cornerRadius?(this._drawRoundedRect(t,this._thickness/2),t.fill()):t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),this._thickness&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,this._cornerRadius?(this._drawRoundedRect(t,this._thickness/2),t.stroke()):t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),t.restore()},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness},e.prototype._drawRoundedRect=function(t,e){void 0===e&&(e=0);var i=this._currentMeasure.left+e,r=this._currentMeasure.top+e,n=this._currentMeasure.width-2*e,o=this._currentMeasure.height-2*e,s=Math.min(o/2-2,Math.min(n/2-2,this._cornerRadius));t.beginPath(),t.moveTo(i+s,r),t.lineTo(i+n-s,r),t.quadraticCurveTo(i+n,r,i+n,r+s),t.lineTo(i+n,r+o-s),t.quadraticCurveTo(i+n,r+o,i+n-s,r+o),t.lineTo(i+s,r+o),t.quadraticCurveTo(i,r+o,i,r+o-s),t.lineTo(i,r+s),t.quadraticCurveTo(i,r,i+s,r),t.closePath()},e.prototype._clipForChildren=function(t){this._cornerRadius&&(this._drawRoundedRect(t,this._thickness),t.clip())},e}(d);!function(t){t[t.Clip=0]=\"Clip\",t[t.WordWrap=1]=\"WordWrap\",t[t.Ellipsis=2]=\"Ellipsis\"}(s||(s={}));var p=function(t){function e(e,i){void 0===i&&(i=\"\");var r=t.call(this,e)||this;return r.name=e,r._text=\"\",r._textWrapping=s.Clip,r._textHorizontalAlignment=_.HORIZONTAL_ALIGNMENT_CENTER,r._textVerticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,r._resizeToFit=!1,r._lineSpacing=new a(0),r._outlineWidth=0,r._outlineColor=\"white\",r.onTextChangedObservable=new h.Observable,r.onLinesReadyObservable=new h.Observable,r.text=i,r}return n(e,t),Object.defineProperty(e.prototype,\"lines\",{get:function(){return this._lines},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"resizeToFit\",{get:function(){return this._resizeToFit},set:function(t){this._resizeToFit!==t&&(this._resizeToFit=t,this._resizeToFit&&(this._width.ignoreAdaptiveScaling=!0,this._height.ignoreAdaptiveScaling=!0),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"textWrapping\",{get:function(){return this._textWrapping},set:function(t){this._textWrapping!==t&&(this._textWrapping=+t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"text\",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"textHorizontalAlignment\",{get:function(){return this._textHorizontalAlignment},set:function(t){this._textHorizontalAlignment!==t&&(this._textHorizontalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"textVerticalAlignment\",{get:function(){return this._textVerticalAlignment},set:function(t){this._textVerticalAlignment!==t&&(this._textVerticalAlignment=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"lineSpacing\",{get:function(){return this._lineSpacing.toString(this._host)},set:function(t){this._lineSpacing.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"outlineWidth\",{get:function(){return this._outlineWidth},set:function(t){this._outlineWidth!==t&&(this._outlineWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"outlineColor\",{get:function(){return this._outlineColor},set:function(t){this._outlineColor!==t&&(this._outlineColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"TextBlock\"},e.prototype._processMeasures=function(e,i){this._fontOffset||(this._fontOffset=_._GetFontOffset(i.font)),t.prototype._processMeasures.call(this,e,i),this._lines=this._breakLines(this._currentMeasure.width,i),this.onLinesReadyObservable.notifyObservers(this);for(var r=0,n=0;n<this._lines.length;n++){var o=this._lines[n];o.width>r&&(r=o.width)}if(this._resizeToFit){if(this._textWrapping===s.Clip){var h=this.paddingLeftInPixels+this.paddingRightInPixels+r;h!==this._width.internalValue&&(this._width.updateInPlace(h,a.UNITMODE_PIXEL),this._rebuildLayout=!0)}var l=this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*this._lines.length;l!==this._height.internalValue&&(this._height.updateInPlace(l,a.UNITMODE_PIXEL),this._rebuildLayout=!0)}},e.prototype._drawText=function(t,e,i,r){var n=this._currentMeasure.width,o=0;switch(this._textHorizontalAlignment){case _.HORIZONTAL_ALIGNMENT_LEFT:o=0;break;case _.HORIZONTAL_ALIGNMENT_RIGHT:o=n-e;break;case _.HORIZONTAL_ALIGNMENT_CENTER:o=(n-e)/2}(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur,r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY),this.outlineWidth&&r.strokeText(t,this._currentMeasure.left+o,i),r.fillText(t,this._currentMeasure.left+o,i)},e.prototype._draw=function(t){t.save(),this._applyStates(t),this._renderLines(t),t.restore()},e.prototype._applyStates=function(e){t.prototype._applyStates.call(this,e),this.outlineWidth&&(e.lineWidth=this.outlineWidth,e.strokeStyle=this.outlineColor)},e.prototype._breakLines=function(t,e){var i=[],r=this.text.split(\"\\n\");if(this._textWrapping===s.Ellipsis)for(var n=0,o=r;n<o.length;n++){var h=o[n];i.push(this._parseLineEllipsis(h,t,e))}else if(this._textWrapping===s.WordWrap)for(var a=0,l=r;a<l.length;a++){h=l[a];i.push.apply(i,this._parseLineWordWrap(h,t,e))}else for(var u=0,c=r;u<c.length;u++){h=c[u];i.push(this._parseLine(h,e))}return i},e.prototype._parseLine=function(t,e){return void 0===t&&(t=\"\"),{text:t,width:e.measureText(t).width}},e.prototype._parseLineEllipsis=function(t,e,i){void 0===t&&(t=\"\");var r=i.measureText(t).width;for(r>e&&(t+=\"…\");t.length>2&&r>e;)t=t.slice(0,-2)+\"…\",r=i.measureText(t).width;return{text:t,width:r}},e.prototype._parseLineWordWrap=function(t,e,i){void 0===t&&(t=\"\");for(var r=[],n=t.split(\" \"),o=0,s=0;s<n.length;s++){var h=s>0?t+\" \"+n[s]:n[0],a=i.measureText(h).width;a>e&&s>0?(r.push({text:t,width:o}),t=n[s],o=i.measureText(t).width):(o=a,t=h)}return r.push({text:t,width:o}),r},e.prototype._renderLines=function(t){var e=this._currentMeasure.height,i=0;switch(this._textVerticalAlignment){case _.VERTICAL_ALIGNMENT_TOP:i=this._fontOffset.ascent;break;case _.VERTICAL_ALIGNMENT_BOTTOM:i=e-this._fontOffset.height*(this._lines.length-1)-this._fontOffset.descent;break;case _.VERTICAL_ALIGNMENT_CENTER:i=this._fontOffset.ascent+(e-this._fontOffset.height*this._lines.length)/2}i+=this._currentMeasure.top;for(var r=0;r<this._lines.length;r++){var n=this._lines[r];0!==r&&0!==this._lineSpacing.internalValue&&(this._lineSpacing.isPixel?i+=this._lineSpacing.getValue(this._host):i+=this._lineSpacing.getValue(this._host)*this._height.getValueInPixel(this._host,this._cachedParentMeasure.height)),this._drawText(n.text,n.width,i,t),i+=this._fontOffset.height}},e.prototype.computeExpectedHeight=function(){if(this.text&&this.widthInPixels){var t=document.createElement(\"canvas\").getContext(\"2d\");if(t){this._applyStates(t),this._fontOffset||(this._fontOffset=_._GetFontOffset(t.font));var e=this._lines?this._lines:this._breakLines(this.widthInPixels-this.paddingLeftInPixels-this.paddingRightInPixels,t);return this.paddingTopInPixels+this.paddingBottomInPixels+this._fontOffset.height*e.length}}return 0},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onTextChangedObservable.clear()},e}(_),g=function(t){function e(i,r){void 0===r&&(r=null);var n=t.call(this,i)||this;return n.name=i,n._loaded=!1,n._stretch=e.STRETCH_FILL,n._autoScale=!1,n._sourceLeft=0,n._sourceTop=0,n._sourceWidth=0,n._sourceHeight=0,n._cellWidth=0,n._cellHeight=0,n._cellId=-1,n._populateNinePatchSlicesFromImage=!1,n.onImageLoadedObservable=new h.Observable,n.source=r,n}return n(e,t),Object.defineProperty(e.prototype,\"isLoaded\",{get:function(){return this._loaded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"populateNinePatchSlicesFromImage\",{get:function(){return this._populateNinePatchSlicesFromImage},set:function(t){this._populateNinePatchSlicesFromImage!==t&&(this._populateNinePatchSlicesFromImage=t,this._populateNinePatchSlicesFromImage&&this._loaded&&this._extractNinePatchSliceDataFromImage())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"detectPointerOnOpaqueOnly\",{get:function(){return this._detectPointerOnOpaqueOnly},set:function(t){this._detectPointerOnOpaqueOnly!==t&&(this._detectPointerOnOpaqueOnly=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"sliceLeft\",{get:function(){return this._sliceLeft},set:function(t){this._sliceLeft!==t&&(this._sliceLeft=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"sliceRight\",{get:function(){return this._sliceRight},set:function(t){this._sliceRight!==t&&(this._sliceRight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"sliceTop\",{get:function(){return this._sliceTop},set:function(t){this._sliceTop!==t&&(this._sliceTop=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"sliceBottom\",{get:function(){return this._sliceBottom},set:function(t){this._sliceBottom!==t&&(this._sliceBottom=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"sourceLeft\",{get:function(){return this._sourceLeft},set:function(t){this._sourceLeft!==t&&(this._sourceLeft=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"sourceTop\",{get:function(){return this._sourceTop},set:function(t){this._sourceTop!==t&&(this._sourceTop=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"sourceWidth\",{get:function(){return this._sourceWidth},set:function(t){this._sourceWidth!==t&&(this._sourceWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"sourceHeight\",{get:function(){return this._sourceHeight},set:function(t){this._sourceHeight!==t&&(this._sourceHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"autoScale\",{get:function(){return this._autoScale},set:function(t){this._autoScale!==t&&(this._autoScale=t,t&&this._loaded&&this.synchronizeSizeWithContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"stretch\",{get:function(){return this._stretch},set:function(t){this._stretch!==t&&(this._stretch=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"domImage\",{get:function(){return this._domImage},set:function(t){var e=this;this._domImage=t,this._loaded=!1,this._domImage.width?this._onImageLoaded():this._domImage.onload=function(){e._onImageLoaded()}},enumerable:!0,configurable:!0}),e.prototype._onImageLoaded=function(){this._imageWidth=this._domImage.width,this._imageHeight=this._domImage.height,this._loaded=!0,this._populateNinePatchSlicesFromImage&&this._extractNinePatchSliceDataFromImage(),this._autoScale&&this.synchronizeSizeWithContent(),this.onImageLoadedObservable.notifyObservers(this),this._markAsDirty()},e.prototype._extractNinePatchSliceDataFromImage=function(){e._WorkingCanvas||(e._WorkingCanvas=document.createElement(\"canvas\"));var t=e._WorkingCanvas,i=t.getContext(\"2d\"),r=this._domImage.width,n=this._domImage.height;t.width=r,t.height=n,i.drawImage(this._domImage,0,0,r,n);var o=i.getImageData(0,0,r,n);this._sliceLeft=-1,this._sliceRight=-1;for(var s=0;s<r;s++){if((a=o.data[4*s+3])>127&&-1===this._sliceLeft)this._sliceLeft=s;else if(a<127&&this._sliceLeft>-1){this._sliceRight=s;break}}this._sliceTop=-1,this._sliceBottom=-1;for(var h=0;h<n;h++){var a;if((a=o.data[h*r*4+3])>127&&-1===this._sliceTop)this._sliceTop=h;else if(a<127&&this._sliceTop>-1){this._sliceBottom=h;break}}},Object.defineProperty(e.prototype,\"source\",{set:function(t){var e=this;this._source!==t&&(this._loaded=!1,this._source=t,this._domImage=document.createElement(\"img\"),this._domImage.onload=function(){e._onImageLoaded()},t&&(h.Tools.SetCorsBehavior(t,this._domImage),this._domImage.src=t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cellWidth\",{get:function(){return this._cellWidth},set:function(t){this._cellWidth!==t&&(this._cellWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cellHeight\",{get:function(){return this._cellHeight},set:function(t){this._cellHeight!==t&&(this._cellHeight=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cellId\",{get:function(){return this._cellId},set:function(t){this._cellId!==t&&(this._cellId=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype.contains=function(i,r){if(!t.prototype.contains.call(this,i,r))return!1;if(!this._detectPointerOnOpaqueOnly||!e._WorkingCanvas)return!0;var n=e._WorkingCanvas.getContext(\"2d\"),o=0|this._currentMeasure.width,s=0|this._currentMeasure.height;return n.getImageData(0,0,o,s).data[4*((i=i-this._currentMeasure.left|0)+(r=r-this._currentMeasure.top|0)*this._currentMeasure.width)+3]>0},e.prototype._getTypeName=function(){return\"Image\"},e.prototype.synchronizeSizeWithContent=function(){this._loaded&&(this.width=this._domImage.width+\"px\",this.height=this._domImage.height+\"px\")},e.prototype._processMeasures=function(i,r){if(this._loaded)switch(this._stretch){case e.STRETCH_NONE:case e.STRETCH_FILL:case e.STRETCH_UNIFORM:case e.STRETCH_NINE_PATCH:break;case e.STRETCH_EXTEND:this._autoScale&&this.synchronizeSizeWithContent(),this.parent&&this.parent.parent&&(this.parent.adaptWidthToChildren=!0,this.parent.adaptHeightToChildren=!0)}t.prototype._processMeasures.call(this,i,r)},e.prototype._prepareWorkingCanvasForOpaqueDetection=function(){if(this._detectPointerOnOpaqueOnly){e._WorkingCanvas||(e._WorkingCanvas=document.createElement(\"canvas\"));var t=e._WorkingCanvas,i=this._currentMeasure.width,r=this._currentMeasure.height,n=t.getContext(\"2d\");t.width=i,t.height=r,n.clearRect(0,0,i,r)}},e.prototype._drawImage=function(t,i,r,n,o,s,h,a,l){(t.drawImage(this._domImage,i,r,n,o,s,h,a,l),this._detectPointerOnOpaqueOnly)&&(t=e._WorkingCanvas.getContext(\"2d\")).drawImage(this._domImage,i,r,n,o,s-this._currentMeasure.left,h-this._currentMeasure.top,a,l)},e.prototype._draw=function(t){var i,r,n,o;if(t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),-1==this.cellId)i=this._sourceLeft,r=this._sourceTop,n=this._sourceWidth?this._sourceWidth:this._imageWidth,o=this._sourceHeight?this._sourceHeight:this._imageHeight;else{var s=this._domImage.naturalWidth/this.cellWidth,h=this.cellId/s>>0,a=this.cellId%s;i=this.cellWidth*a,r=this.cellHeight*h,n=this.cellWidth,o=this.cellHeight}if(this._prepareWorkingCanvasForOpaqueDetection(),this._applyStates(t),this._loaded)switch(this._stretch){case e.STRETCH_NONE:case e.STRETCH_FILL:this._drawImage(t,i,r,n,o,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case e.STRETCH_UNIFORM:var l=this._currentMeasure.width/n,u=this._currentMeasure.height/o,c=Math.min(l,u),_=(this._currentMeasure.width-n*c)/2,d=(this._currentMeasure.height-o*c)/2;this._drawImage(t,i,r,n,o,this._currentMeasure.left+_,this._currentMeasure.top+d,n*c,o*c);break;case e.STRETCH_EXTEND:this._drawImage(t,i,r,n,o,this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height);break;case e.STRETCH_NINE_PATCH:this._renderNinePatch(t)}t.restore()},e.prototype._renderCornerPatch=function(t,e,i,r,n,o,s){this._drawImage(t,e,i,r,n,this._currentMeasure.left+o,this._currentMeasure.top+s,r,n)},e.prototype._renderNinePatch=function(t){var e=this._imageHeight,i=this._sliceLeft,r=this._sliceTop,n=this._imageHeight-this._sliceBottom,o=this._imageWidth-this._sliceRight,s=0,h=0;this._populateNinePatchSlicesFromImage&&(s=1,h=1,e-=2,i-=1,r-=1,n-=1,o-=1);var a=this._sliceRight-this._sliceLeft+1,l=this._currentMeasure.width-o-this.sliceLeft+1,u=this._currentMeasure.height-e+this._sliceBottom;this._renderCornerPatch(t,s,h,i,r,0,0),this._renderCornerPatch(t,s,this._sliceBottom,i,e-this._sliceBottom,0,u),this._renderCornerPatch(t,this._sliceRight,h,o,r,this._currentMeasure.width-o,0),this._renderCornerPatch(t,this._sliceRight,this._sliceBottom,o,e-this._sliceBottom,this._currentMeasure.width-o,u),this._drawImage(t,this._sliceLeft,this._sliceTop,a,this._sliceBottom-this._sliceTop+1,this._currentMeasure.left+i,this._currentMeasure.top+r,l,u-r+1),this._drawImage(t,s,this._sliceTop,i,this._sliceBottom-this._sliceTop,this._currentMeasure.left,this._currentMeasure.top+r,i,u-r),this._drawImage(t,this._sliceRight,this._sliceTop,i,this._sliceBottom-this._sliceTop,this._currentMeasure.left+this._currentMeasure.width-o,this._currentMeasure.top+r,i,u-r),this._drawImage(t,this._sliceLeft,h,a,r,this._currentMeasure.left+i,this._currentMeasure.top,l,r),this._drawImage(t,this._sliceLeft,this._sliceBottom,a,n,this._currentMeasure.left+i,this._currentMeasure.top+u,l,n)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onImageLoadedObservable.clear()},e._WorkingCanvas=null,e.STRETCH_NONE=0,e.STRETCH_FILL=1,e.STRETCH_UNIFORM=2,e.STRETCH_EXTEND=3,e.STRETCH_NINE_PATCH=4,e}(_),b=function(t){function e(e){var i=t.call(this,e)||this;i.name=e,i.thickness=1,i.isPointerBlocker=!0;var r=null;return i.pointerEnterAnimation=function(){r=i.alpha,i.alpha-=.1},i.pointerOutAnimation=function(){null!==r&&(i.alpha=r)},i.pointerDownAnimation=function(){i.scaleX-=.05,i.scaleY-=.05},i.pointerUpAnimation=function(){i.scaleX+=.05,i.scaleY+=.05},i}return n(e,t),Object.defineProperty(e.prototype,\"image\",{get:function(){return this._image},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"textBlock\",{get:function(){return this._textBlock},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"Button\"},e.prototype._processPicking=function(e,i,r,n,o){return!(!(this._isEnabled&&this.isHitTestVisible&&this.isVisible)||this.notRenderable)&&(!!t.prototype.contains.call(this,e,i)&&(this._processObservables(r,e,i,n,o),!0))},e.prototype._onPointerEnter=function(e){return!!t.prototype._onPointerEnter.call(this,e)&&(this.pointerEnterAnimation&&this.pointerEnterAnimation(),!0)},e.prototype._onPointerOut=function(e,i){void 0===i&&(i=!1),this.pointerOutAnimation&&this.pointerOutAnimation(),t.prototype._onPointerOut.call(this,e,i)},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this.pointerDownAnimation&&this.pointerDownAnimation(),!0)},e.prototype._onPointerUp=function(e,i,r,n,o){this.pointerUpAnimation&&this.pointerUpAnimation(),t.prototype._onPointerUp.call(this,e,i,r,n,o)},e.CreateImageButton=function(t,i,r){var n=new e(t),o=new p(t+\"_button\",i);o.textWrapping=!0,o.textHorizontalAlignment=_.HORIZONTAL_ALIGNMENT_CENTER,o.paddingLeft=\"20%\",n.addControl(o);var s=new g(t+\"_icon\",r);return s.width=\"20%\",s.stretch=g.STRETCH_UNIFORM,s.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,n.addControl(s),n._image=s,n._textBlock=o,n},e.CreateImageOnlyButton=function(t,i){var r=new e(t),n=new g(t+\"_icon\",i);return n.stretch=g.STRETCH_FILL,n.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,r.addControl(n),r._image=n,r},e.CreateSimpleButton=function(t,i){var r=new e(t),n=new p(t+\"_button\",i);return n.textWrapping=!0,n.textHorizontalAlignment=_.HORIZONTAL_ALIGNMENT_CENTER,r.addControl(n),r._textBlock=n,r},e.CreateImageWithCenterTextButton=function(t,i,r){var n=new e(t),o=new g(t+\"_icon\",r);o.stretch=g.STRETCH_FILL,n.addControl(o);var s=new p(t+\"_button\",i);return s.textWrapping=!0,s.textHorizontalAlignment=_.HORIZONTAL_ALIGNMENT_CENTER,n.addControl(s),n._image=o,n._textBlock=s,n},e}(f),m=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._isVertical=!0,i._manualWidth=!1,i._manualHeight=!1,i._doNotTrackManualChanges=!1,i}return n(e,t),Object.defineProperty(e.prototype,\"isVertical\",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"width\",{get:function(){return this._width.toString(this._host)},set:function(t){this._doNotTrackManualChanges||(this._manualWidth=!0),this._width.toString(this._host)!==t&&this._width.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this._height.toString(this._host)},set:function(t){this._doNotTrackManualChanges||(this._manualHeight=!0),this._height.toString(this._host)!==t&&this._height.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"StackPanel\"},e.prototype._preMeasure=function(e,i){for(var r=0,n=this._children;r<n.length;r++){var o=n[r];this._isVertical?o.verticalAlignment=_.VERTICAL_ALIGNMENT_TOP:o.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT}t.prototype._preMeasure.call(this,e,i)},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.copyFrom(e),this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,this.isVertical&&!this._manualWidth||(this._measureForChildren.width=this._currentMeasure.width),(this.isVertical||this._manualHeight)&&(this._measureForChildren.height=this._currentMeasure.height)},e.prototype._postMeasure=function(){for(var e=0,i=0,r=0,n=this._children;r<n.length;r++){var o=n[r];o.isVisible&&!o.notRenderable&&(this._isVertical?(o.top!==i+\"px\"&&(o.top=i+\"px\",this._rebuildLayout=!0,o._top.ignoreAdaptiveScaling=!0),o._height.isPercentage?h.Tools.Warn(\"Control (Name:\"+o.name+\", UniqueId:\"+o.uniqueId+\") is using height in percentage mode inside a vertical StackPanel\"):i+=o._currentMeasure.height+o.paddingTopInPixels+o.paddingBottomInPixels):(o.left!==e+\"px\"&&(o.left=e+\"px\",this._rebuildLayout=!0,o._left.ignoreAdaptiveScaling=!0),o._width.isPercentage?h.Tools.Warn(\"Control (Name:\"+o.name+\", UniqueId:\"+o.uniqueId+\") is using width in percentage mode inside a horizontal StackPanel\"):e+=o._currentMeasure.width+o.paddingLeftInPixels+o.paddingRightInPixels))}this._doNotTrackManualChanges=!0;var s=!1,a=!1;if(!this._manualHeight&&this._isVertical){var l=this.height;this.height=i+\"px\",a=l!==this.height||!this._height.ignoreAdaptiveScaling}if(!this._manualWidth&&!this._isVertical){var u=this.width;this.width=e+\"px\",s=u!==this.width||!this._width.ignoreAdaptiveScaling}a&&(this._height.ignoreAdaptiveScaling=!0),s&&(this._width.ignoreAdaptiveScaling=!0),this._doNotTrackManualChanges=!1,(s||a)&&(this._rebuildLayout=!0),t.prototype._postMeasure.call(this)},e}(d),y=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._isChecked=!1,i._background=\"black\",i._checkSizeRatio=.8,i._thickness=1,i.onIsCheckedChangedObservable=new h.Observable,i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,\"thickness\",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"checkSizeRatio\",{get:function(){return this._checkSizeRatio},set:function(t){t=Math.max(Math.min(1,t),0),this._checkSizeRatio!==t&&(this._checkSizeRatio=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"background\",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isChecked\",{get:function(){return this._isChecked},set:function(t){this._isChecked!==t&&(this._isChecked=t,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(t))},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"Checkbox\"},e.prototype._draw=function(t){t.save(),this._applyStates(t);var e=this._currentMeasure.width-this._thickness,i=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fillRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,e,i),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._isChecked){t.fillStyle=this._isEnabled?this.color:this._disabledColor;var r=e*this._checkSizeRatio,n=i*this._checkSizeRatio;t.fillRect(this._currentMeasure.left+this._thickness/2+(e-r)/2,this._currentMeasure.top+this._thickness/2+(i-n)/2,r,n)}t.strokeStyle=this.color,t.lineWidth=this._thickness,t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,e,i),t.restore()},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this.isChecked=!this.isChecked,!0)},e.AddCheckBoxWithHeader=function(t,i){var r=new m;r.isVertical=!1,r.height=\"30px\";var n=new e;n.width=\"20px\",n.height=\"20px\",n.isChecked=!0,n.color=\"green\",n.onIsCheckedChangedObservable.add(i),r.addControl(n);var o=new p;return o.text=t,o.width=\"180px\",o.paddingLeft=\"5px\",o.textHorizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,o.color=\"white\",r.addControl(o),r},e}(_),v=function(t){function e(e,i){void 0===i&&(i=\"\");var r=t.call(this,e)||this;return r.name=e,r._text=\"\",r._placeholderText=\"\",r._background=\"#222222\",r._focusedBackground=\"#000000\",r._focusedColor=\"white\",r._placeholderColor=\"gray\",r._thickness=1,r._margin=new a(10,a.UNITMODE_PIXEL),r._autoStretchWidth=!0,r._maxWidth=new a(1,a.UNITMODE_PERCENTAGE,!1),r._isFocused=!1,r._blinkIsEven=!1,r._cursorOffset=0,r._deadKey=!1,r._addKey=!0,r._currentKey=\"\",r._isTextHighlightOn=!1,r._textHighlightColor=\"#d5e0ff\",r._highligherOpacity=.4,r._highlightedText=\"\",r._startHighlightIndex=0,r._endHighlightIndex=0,r._cursorIndex=-1,r._onFocusSelectAll=!1,r._isPointerDown=!1,r.promptMessage=\"Please enter text:\",r.onTextChangedObservable=new h.Observable,r.onBeforeKeyAddObservable=new h.Observable,r.onFocusObservable=new h.Observable,r.onBlurObservable=new h.Observable,r.onTextHighlightObservable=new h.Observable,r.onTextCopyObservable=new h.Observable,r.onTextCutObservable=new h.Observable,r.onTextPasteObservable=new h.Observable,r.onKeyboardEventProcessedObservable=new h.Observable,r.text=i,r.isPointerBlocker=!0,r}return n(e,t),Object.defineProperty(e.prototype,\"maxWidth\",{get:function(){return this._maxWidth.toString(this._host)},set:function(t){this._maxWidth.toString(this._host)!==t&&this._maxWidth.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"maxWidthInPixels\",{get:function(){return this._maxWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"highligherOpacity\",{get:function(){return this._highligherOpacity},set:function(t){this._highligherOpacity!==t&&(this._highligherOpacity=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"onFocusSelectAll\",{get:function(){return this._onFocusSelectAll},set:function(t){this._onFocusSelectAll!==t&&(this._onFocusSelectAll=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"textHighlightColor\",{get:function(){return this._textHighlightColor},set:function(t){this._textHighlightColor!==t&&(this._textHighlightColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"margin\",{get:function(){return this._margin.toString(this._host)},set:function(t){this._margin.toString(this._host)!==t&&this._margin.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"marginInPixels\",{get:function(){return this._margin.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"autoStretchWidth\",{get:function(){return this._autoStretchWidth},set:function(t){this._autoStretchWidth!==t&&(this._autoStretchWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"thickness\",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"focusedBackground\",{get:function(){return this._focusedBackground},set:function(t){this._focusedBackground!==t&&(this._focusedBackground=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"focusedColor\",{get:function(){return this._focusedColor},set:function(t){this._focusedColor!==t&&(this._focusedColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"background\",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"placeholderColor\",{get:function(){return this._placeholderColor},set:function(t){this._placeholderColor!==t&&(this._placeholderColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"placeholderText\",{get:function(){return this._placeholderText},set:function(t){this._placeholderText!==t&&(this._placeholderText=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"deadKey\",{get:function(){return this._deadKey},set:function(t){this._deadKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"highlightedText\",{get:function(){return this._highlightedText},set:function(t){this._highlightedText!==t&&(this._highlightedText=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"addKey\",{get:function(){return this._addKey},set:function(t){this._addKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"currentKey\",{get:function(){return this._currentKey},set:function(t){this._currentKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"text\",{get:function(){return this._text},set:function(t){var e=t.toString();this._text!==e&&(this._text=e,this._markAsDirty(),this.onTextChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"width\",{get:function(){return this._width.toString(this._host)},set:function(t){this._width.toString(this._host)!==t&&(this._width.fromString(t)&&this._markAsDirty(),this.autoStretchWidth=!1)},enumerable:!0,configurable:!0}),e.prototype.onBlur=function(){this._isFocused=!1,this._scrollLeft=null,this._cursorOffset=0,clearTimeout(this._blinkTimeout),this._markAsDirty(),this.onBlurObservable.notifyObservers(this),this._host.unRegisterClipboardEvents(),this._onClipboardObserver&&this._host.onClipboardObservable.remove(this._onClipboardObserver);var t=this._host.getScene();this._onPointerDblTapObserver&&t&&t.onPointerObservable.remove(this._onPointerDblTapObserver)},e.prototype.onFocus=function(){var t=this;if(this._isEnabled){if(this._scrollLeft=null,this._isFocused=!0,this._blinkIsEven=!1,this._cursorOffset=0,this._markAsDirty(),this.onFocusObservable.notifyObservers(this),-1!==navigator.userAgent.indexOf(\"Mobile\")){var e=prompt(this.promptMessage);return null!==e&&(this.text=e),void(this._host.focusedControl=null)}this._host.registerClipboardEvents(),this._onClipboardObserver=this._host.onClipboardObservable.add(function(e){switch(e.type){case h.ClipboardEventTypes.COPY:t._onCopyText(e.event),t.onTextCopyObservable.notifyObservers(t);break;case h.ClipboardEventTypes.CUT:t._onCutText(e.event),t.onTextCutObservable.notifyObservers(t);break;case h.ClipboardEventTypes.PASTE:t._onPasteText(e.event),t.onTextPasteObservable.notifyObservers(t);break;default:return}});var i=this._host.getScene();i&&(this._onPointerDblTapObserver=i.onPointerObservable.add(function(e){t._isFocused&&e.type===h.PointerEventTypes.POINTERDOUBLETAP&&t._processDblClick(e)})),this._onFocusSelectAll&&this._selectAllText()}},e.prototype._getTypeName=function(){return\"InputText\"},e.prototype.keepsFocusWith=function(){return this._connectedVirtualKeyboard?[this._connectedVirtualKeyboard]:null},e.prototype.processKey=function(t,e,i){if(!i||!i.ctrlKey&&!i.metaKey||67!==t&&86!==t&&88!==t){if(i&&(i.ctrlKey||i.metaKey)&&65===t)return this._selectAllText(),void i.preventDefault();switch(t){case 32:e=\" \";break;case 191:i&&i.preventDefault();break;case 8:if(this._text&&this._text.length>0){if(this._isTextHighlightOn)return this.text=this._text.slice(0,this._startHighlightIndex)+this._text.slice(this._endHighlightIndex),this._isTextHighlightOn=!1,this._cursorOffset=this.text.length-this._startHighlightIndex,this._blinkIsEven=!1,void(i&&i.preventDefault());if(0===this._cursorOffset)this.text=this._text.substr(0,this._text.length-1);else(n=this._text.length-this._cursorOffset)>0&&(this.text=this._text.slice(0,n-1)+this._text.slice(n))}return void(i&&i.preventDefault());case 46:if(this._isTextHighlightOn){this.text=this._text.slice(0,this._startHighlightIndex)+this._text.slice(this._endHighlightIndex);for(var r=this._endHighlightIndex-this._startHighlightIndex;r>0&&this._cursorOffset>0;)this._cursorOffset--;return this._isTextHighlightOn=!1,this._cursorOffset=this.text.length-this._startHighlightIndex,void(i&&i.preventDefault())}if(this._text&&this._text.length>0&&this._cursorOffset>0){var n=this._text.length-this._cursorOffset;this.text=this._text.slice(0,n)+this._text.slice(n+1),this._cursorOffset--}return void(i&&i.preventDefault());case 13:return this._host.focusedControl=null,void(this._isTextHighlightOn=!1);case 35:return this._cursorOffset=0,this._blinkIsEven=!1,this._isTextHighlightOn=!1,void this._markAsDirty();case 36:return this._cursorOffset=this._text.length,this._blinkIsEven=!1,this._isTextHighlightOn=!1,void this._markAsDirty();case 37:if(this._cursorOffset++,this._cursorOffset>this._text.length&&(this._cursorOffset=this._text.length),i&&i.shiftKey){if(this._blinkIsEven=!1,i.ctrlKey||i.metaKey){if(!this._isTextHighlightOn){if(this._text.length===this._cursorOffset)return;this._endHighlightIndex=this._text.length-this._cursorOffset+1}return this._startHighlightIndex=0,this._cursorIndex=this._text.length-this._endHighlightIndex,this._cursorOffset=this._text.length,this._isTextHighlightOn=!0,void this._markAsDirty()}return this._isTextHighlightOn?-1===this._cursorIndex&&(this._cursorIndex=this._text.length-this._endHighlightIndex,this._cursorOffset=0===this._startHighlightIndex?this._text.length:this._text.length-this._startHighlightIndex+1):(this._isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset>=this._text.length?this._text.length:this._cursorOffset-1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorIndex,this._startHighlightIndex=this._text.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorOffset,this._startHighlightIndex=this._text.length-this._cursorIndex):this._isTextHighlightOn=!1,void this._markAsDirty()}return this._isTextHighlightOn&&(this._cursorOffset=this._text.length-this._startHighlightIndex,this._isTextHighlightOn=!1),i&&(i.ctrlKey||i.metaKey)&&(this._cursorOffset=this.text.length,i.preventDefault()),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._cursorIndex=-1,void this._markAsDirty();case 39:if(this._cursorOffset--,this._cursorOffset<0&&(this._cursorOffset=0),i&&i.shiftKey){if(this._blinkIsEven=!1,i.ctrlKey||i.metaKey){if(!this._isTextHighlightOn){if(0===this._cursorOffset)return;this._startHighlightIndex=this._text.length-this._cursorOffset-1}return this._endHighlightIndex=this._text.length,this._isTextHighlightOn=!0,this._cursorIndex=this._text.length-this._startHighlightIndex,this._cursorOffset=0,void this._markAsDirty()}return this._isTextHighlightOn?-1===this._cursorIndex&&(this._cursorIndex=this._text.length-this._startHighlightIndex,this._cursorOffset=this._text.length===this._endHighlightIndex?0:this._text.length-this._endHighlightIndex-1):(this._isTextHighlightOn=!0,this._cursorIndex=this._cursorOffset<=0?0:this._cursorOffset+1),this._cursorIndex<this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorIndex,this._startHighlightIndex=this._text.length-this._cursorOffset):this._cursorIndex>this._cursorOffset?(this._endHighlightIndex=this._text.length-this._cursorOffset,this._startHighlightIndex=this._text.length-this._cursorIndex):this._isTextHighlightOn=!1,void this._markAsDirty()}return this._isTextHighlightOn&&(this._cursorOffset=this._text.length-this._endHighlightIndex,this._isTextHighlightOn=!1),i&&(i.ctrlKey||i.metaKey)&&(this._cursorOffset=0,i.preventDefault()),this._blinkIsEven=!1,this._isTextHighlightOn=!1,this._cursorIndex=-1,void this._markAsDirty();case 222:i&&i.preventDefault(),this._cursorIndex=-1,this.deadKey=!0}if(e&&(-1===t||32===t||t>47&&t<64||t>64&&t<91||t>159&&t<193||t>218&&t<223||t>95&&t<112)&&(this._currentKey=e,this.onBeforeKeyAddObservable.notifyObservers(this),e=this._currentKey,this._addKey))if(this._isTextHighlightOn)this.text=this._text.slice(0,this._startHighlightIndex)+e+this._text.slice(this._endHighlightIndex),this._cursorOffset=this.text.length-(this._startHighlightIndex+1),this._isTextHighlightOn=!1,this._blinkIsEven=!1,this._markAsDirty();else if(0===this._cursorOffset)this.text+=e;else{var o=this._text.length-this._cursorOffset;this.text=this._text.slice(0,o)+e+this._text.slice(o)}}},e.prototype._updateValueFromCursorIndex=function(t){if(this._blinkIsEven=!1,-1===this._cursorIndex)this._cursorIndex=t;else if(this._cursorIndex<this._cursorOffset)this._endHighlightIndex=this._text.length-this._cursorIndex,this._startHighlightIndex=this._text.length-this._cursorOffset;else{if(!(this._cursorIndex>this._cursorOffset))return this._isTextHighlightOn=!1,void this._markAsDirty();this._endHighlightIndex=this._text.length-this._cursorOffset,this._startHighlightIndex=this._text.length-this._cursorIndex}this._isTextHighlightOn=!0,this._markAsDirty()},e.prototype._processDblClick=function(t){this._startHighlightIndex=this._text.length-this._cursorOffset,this._endHighlightIndex=this._startHighlightIndex;var e,i,r=/\\w+/g;do{i=this._endHighlightIndex<this._text.length&&-1!==this._text[this._endHighlightIndex].search(r)?++this._endHighlightIndex:0,e=this._startHighlightIndex>0&&-1!==this._text[this._startHighlightIndex-1].search(r)?--this._startHighlightIndex:0}while(e||i);this._cursorOffset=this.text.length-this._startHighlightIndex,this.onTextHighlightObservable.notifyObservers(this),this._isTextHighlightOn=!0,this._clickedCoordinate=null,this._blinkIsEven=!0,this._cursorIndex=-1,this._markAsDirty()},e.prototype._selectAllText=function(){this._blinkIsEven=!0,this._isTextHighlightOn=!0,this._startHighlightIndex=0,this._endHighlightIndex=this._text.length,this._cursorOffset=this._text.length,this._cursorIndex=-1,this._markAsDirty()},e.prototype.processKeyboard=function(t){this.processKey(t.keyCode,t.key,t),this.onKeyboardEventProcessedObservable.notifyObservers(t)},e.prototype._onCopyText=function(t){this._isTextHighlightOn=!1;try{t.clipboardData&&t.clipboardData.setData(\"text/plain\",this._highlightedText)}catch(t){}this._host.clipboardData=this._highlightedText},e.prototype._onCutText=function(t){if(this._highlightedText){this.text=this._text.slice(0,this._startHighlightIndex)+this._text.slice(this._endHighlightIndex),this._isTextHighlightOn=!1,this._cursorOffset=this.text.length-this._startHighlightIndex;try{t.clipboardData&&t.clipboardData.setData(\"text/plain\",this._highlightedText)}catch(t){}this._host.clipboardData=this._highlightedText,this._highlightedText=\"\"}},e.prototype._onPasteText=function(t){var e=\"\";e=t.clipboardData&&-1!==t.clipboardData.types.indexOf(\"text/plain\")?t.clipboardData.getData(\"text/plain\"):this._host.clipboardData;var i=this._text.length-this._cursorOffset;this.text=this._text.slice(0,i)+e+this._text.slice(i)},e.prototype._draw=function(t){var e=this;t.save(),this._applyStates(t),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._isFocused?this._focusedBackground&&(t.fillStyle=this._isEnabled?this._focusedBackground:this._disabledColor,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)):this._background&&(t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height)),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._fontOffset||(this._fontOffset=_._GetFontOffset(t.font));var i=this._currentMeasure.left+this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this.color&&(t.fillStyle=this.color);var r=this._beforeRenderText(this._text);this._isFocused||this._text||!this._placeholderText||(r=this._placeholderText,this._placeholderColor&&(t.fillStyle=this._placeholderColor)),this._textWidth=t.measureText(r).width;var n=2*this._margin.getValueInPixel(this._host,this._tempParentMeasure.width);this._autoStretchWidth&&(this.width=Math.min(this._maxWidth.getValueInPixel(this._host,this._tempParentMeasure.width),this._textWidth+n)+\"px\");var o=this._fontOffset.ascent+(this._currentMeasure.height-this._fontOffset.height)/2,s=this._width.getValueInPixel(this._host,this._tempParentMeasure.width)-n;if(t.save(),t.beginPath(),t.rect(i,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,s+2,this._currentMeasure.height),t.clip(),this._isFocused&&this._textWidth>s){var h=i-this._textWidth+s;this._scrollLeft||(this._scrollLeft=h)}else this._scrollLeft=i;if(t.fillText(r,this._scrollLeft,this._currentMeasure.top+o),this._isFocused){if(this._clickedCoordinate){var a=this._scrollLeft+this._textWidth-this._clickedCoordinate,l=0;this._cursorOffset=0;var u=0;do{this._cursorOffset&&(u=Math.abs(a-l)),this._cursorOffset++,l=t.measureText(r.substr(r.length-this._cursorOffset,this._cursorOffset)).width}while(l<a&&r.length>=this._cursorOffset);Math.abs(a-l)>u&&this._cursorOffset--,this._blinkIsEven=!1,this._clickedCoordinate=null}if(!this._blinkIsEven){var c=this.text.substr(this._text.length-this._cursorOffset),d=t.measureText(c).width,f=this._scrollLeft+this._textWidth-d;f<i?(this._scrollLeft+=i-f,f=i,this._markAsDirty()):f>i+s&&(this._scrollLeft+=i+s-f,f=i+s,this._markAsDirty()),this._isTextHighlightOn||t.fillRect(f,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,2,this._fontOffset.height)}if(clearTimeout(this._blinkTimeout),this._blinkTimeout=setTimeout(function(){e._blinkIsEven=!e._blinkIsEven,e._markAsDirty()},500),this._isTextHighlightOn){clearTimeout(this._blinkTimeout);var p=t.measureText(this.text.substring(this._startHighlightIndex)).width,g=this._scrollLeft+this._textWidth-p;this._highlightedText=this.text.substring(this._startHighlightIndex,this._endHighlightIndex);var b=t.measureText(this.text.substring(this._startHighlightIndex,this._endHighlightIndex)).width;g<i&&((b-=i-g)||(b=t.measureText(this.text.charAt(this.text.length-this._cursorOffset)).width),g=i),t.globalAlpha=this._highligherOpacity,t.fillStyle=this._textHighlightColor,t.fillRect(g,this._currentMeasure.top+(this._currentMeasure.height-this._fontOffset.height)/2,b,this._fontOffset.height),t.globalAlpha=1}}t.restore(),this._thickness&&(this._isFocused?this.focusedColor&&(t.strokeStyle=this.focusedColor):this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,t.strokeRect(this._currentMeasure.left+this._thickness/2,this._currentMeasure.top+this._thickness/2,this._currentMeasure.width-this._thickness,this._currentMeasure.height-this._thickness)),t.restore()},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this._clickedCoordinate=i.x,this._isTextHighlightOn=!1,this._highlightedText=\"\",this._cursorIndex=-1,this._isPointerDown=!0,this._host._capturingControl[r]=this,this._host.focusedControl===this?(clearTimeout(this._blinkTimeout),this._markAsDirty(),!0):!!this._isEnabled&&(this._host.focusedControl=this,!0))},e.prototype._onPointerMove=function(e,i,r){this._host.focusedControl===this&&this._isPointerDown&&(this._clickedCoordinate=i.x,this._markAsDirty(),this._updateValueFromCursorIndex(this._cursorOffset)),t.prototype._onPointerMove.call(this,e,i,r)},e.prototype._onPointerUp=function(e,i,r,n,o){this._isPointerDown=!1,delete this._host._capturingControl[r],t.prototype._onPointerUp.call(this,e,i,r,n,o)},e.prototype._beforeRenderText=function(t){return t},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.onBlurObservable.clear(),this.onFocusObservable.clear(),this.onTextChangedObservable.clear(),this.onTextCopyObservable.clear(),this.onTextCutObservable.clear(),this.onTextPasteObservable.clear(),this.onTextHighlightObservable.clear(),this.onKeyboardEventProcessedObservable.clear()},e}(_),O=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._rowDefinitions=new Array,i._columnDefinitions=new Array,i._cells={},i._childControls=new Array,i}return n(e,t),Object.defineProperty(e.prototype,\"columnCount\",{get:function(){return this._columnDefinitions.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"rowCount\",{get:function(){return this._rowDefinitions.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"children\",{get:function(){return this._childControls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cells\",{get:function(){return this._cells},enumerable:!0,configurable:!0}),e.prototype.getRowDefinition=function(t){return t<0||t>=this._rowDefinitions.length?null:this._rowDefinitions[t]},e.prototype.getColumnDefinition=function(t){return t<0||t>=this._columnDefinitions.length?null:this._columnDefinitions[t]},e.prototype.addRowDefinition=function(t,e){return void 0===e&&(e=!1),this._rowDefinitions.push(new a(t,e?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE)),this._markAsDirty(),this},e.prototype.addColumnDefinition=function(t,e){return void 0===e&&(e=!1),this._columnDefinitions.push(new a(t,e?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE)),this._markAsDirty(),this},e.prototype.setRowDefinition=function(t,e,i){if(void 0===i&&(i=!1),t<0||t>=this._rowDefinitions.length)return this;var r=this._rowDefinitions[t];return r&&r.isPixel===i&&r.internalValue===e?this:(this._rowDefinitions[t]=new a(e,i?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE),this._markAsDirty(),this)},e.prototype.setColumnDefinition=function(t,e,i){if(void 0===i&&(i=!1),t<0||t>=this._columnDefinitions.length)return this;var r=this._columnDefinitions[t];return r&&r.isPixel===i&&r.internalValue===e?this:(this._columnDefinitions[t]=new a(e,i?a.UNITMODE_PIXEL:a.UNITMODE_PERCENTAGE),this._markAsDirty(),this)},e.prototype.getChildrenAt=function(t,e){var i=this._cells[t+\":\"+e];return i?i.children:null},e.prototype.getChildCellInfo=function(t){return t._tag},e.prototype._removeCell=function(e,i){if(e){t.prototype.removeControl.call(this,e);for(var r=0,n=e.children;r<n.length;r++){var o=n[r],s=this._childControls.indexOf(o);-1!==s&&this._childControls.splice(s,1)}delete this._cells[i]}},e.prototype._offsetCell=function(t,e){if(this._cells[e]){this._cells[t]=this._cells[e];for(var i=0,r=this._cells[t].children;i<r.length;i++){r[i]._tag=t}delete this._cells[e]}},e.prototype.removeColumnDefinition=function(t){if(t<0||t>=this._columnDefinitions.length)return this;for(var e=0;e<this._rowDefinitions.length;e++){var i=e+\":\"+t,r=this._cells[i];this._removeCell(r,i)}for(e=0;e<this._rowDefinitions.length;e++)for(var n=t+1;n<this._columnDefinitions.length;n++){var o=e+\":\"+(n-1);i=e+\":\"+n;this._offsetCell(o,i)}return this._columnDefinitions.splice(t,1),this._markAsDirty(),this},e.prototype.removeRowDefinition=function(t){if(t<0||t>=this._rowDefinitions.length)return this;for(var e=0;e<this._columnDefinitions.length;e++){var i=t+\":\"+e,r=this._cells[i];this._removeCell(r,i)}for(e=0;e<this._columnDefinitions.length;e++)for(var n=t+1;n<this._rowDefinitions.length;n++){var o=n-1+\":\"+e;i=n+\":\"+e;this._offsetCell(o,i)}return this._rowDefinitions.splice(t,1),this._markAsDirty(),this},e.prototype.addControl=function(e,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),0===this._rowDefinitions.length&&this.addRowDefinition(1,!1),0===this._columnDefinitions.length&&this.addColumnDefinition(1,!1),-1!==this._childControls.indexOf(e))return h.Tools.Warn(\"Control (Name:\"+e.name+\", UniqueId:\"+e.uniqueId+\") is already associated with this grid. You must remove it before reattaching it\"),this;var n=Math.min(i,this._rowDefinitions.length-1)+\":\"+Math.min(r,this._columnDefinitions.length-1),o=this._cells[n];return o||(o=new d(n),this._cells[n]=o,o.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,o.verticalAlignment=_.VERTICAL_ALIGNMENT_TOP,t.prototype.addControl.call(this,o)),o.addControl(e),this._childControls.push(e),e._tag=n,e.parent=this,this._markAsDirty(),this},e.prototype.removeControl=function(t){var e=this._childControls.indexOf(t);-1!==e&&this._childControls.splice(e,1);var i=this._cells[t._tag];return i&&(i.removeControl(t),t._tag=null),this._markAsDirty(),this},e.prototype._getTypeName=function(){return\"Grid\"},e.prototype._getGridDefinitions=function(t){for(var e=[],i=[],r=[],n=[],o=this._currentMeasure.width,s=0,h=this._currentMeasure.height,a=0,l=0,u=0,c=this._rowDefinitions;u<c.length;u++){if((g=c[u]).isPixel)h-=p=g.getValue(this._host),i[l]=p;else a+=g.internalValue;l++}var _=0;l=0;for(var d=0,f=this._rowDefinitions;d<f.length;d++){var p,g=f[d];if(n.push(_),g.isPixel)_+=g.getValue(this._host);else _+=p=g.internalValue/a*h,i[l]=p;l++}l=0;for(var b=0,m=this._columnDefinitions;b<m.length;b++){if((g=m[b]).isPixel)o-=C=g.getValue(this._host),e[l]=C;else s+=g.internalValue;l++}var y=0;l=0;for(var v=0,O=this._columnDefinitions;v<O.length;v++){var C;g=O[v];if(r.push(y),g.isPixel)y+=g.getValue(this._host);else y+=C=g.internalValue/s*o,e[l]=C;l++}t(r,n,e,i)},e.prototype._additionalProcessing=function(e,i){var r=this;this._getGridDefinitions(function(t,e,i,n){for(var o in r._cells)if(r._cells.hasOwnProperty(o)){var s=o.split(\":\"),h=parseInt(s[0]),a=parseInt(s[1]),l=r._cells[o];l.left=t[a]+\"px\",l.top=e[h]+\"px\",l.width=i[a]+\"px\",l.height=n[h]+\"px\",l._left.ignoreAdaptiveScaling=!0,l._top.ignoreAdaptiveScaling=!0,l._width.ignoreAdaptiveScaling=!0,l._height.ignoreAdaptiveScaling=!0}}),t.prototype._additionalProcessing.call(this,e,i)},e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t in this._cells){if(this._cells.hasOwnProperty(t))this._cells[t]._markMatrixAsDirty()}},e.prototype._renderHighlightSpecific=function(e){var i=this;t.prototype._renderHighlightSpecific.call(this,e),this._getGridDefinitions(function(t,r,n,o){for(var s=0;s<t.length;s++){var h=i._currentMeasure.left+t[s]+n[s];e.beginPath(),e.moveTo(h,i._currentMeasure.top),e.lineTo(h,i._currentMeasure.top+i._currentMeasure.height),e.stroke()}for(s=0;s<r.length;s++){var a=i._currentMeasure.top+r[s]+o[s];e.beginPath(),e.moveTo(i._currentMeasure.left,a),e.lineTo(i._currentMeasure.left+i._currentMeasure.width,a),e.stroke()}}),e.restore()},e.prototype.dispose=function(){t.prototype.dispose.call(this);for(var e=0,i=this._childControls;e<i.length;e++){i[e].dispose()}this._childControls=[]},e}(d),C=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._value=h.Color3.Red(),i._tmpColor=new h.Color3,i._pointerStartedOnSquare=!1,i._pointerStartedOnWheel=!1,i._squareLeft=0,i._squareTop=0,i._squareSize=0,i._h=360,i._s=1,i._v=1,i._lastPointerDownID=-1,i.onValueChangedObservable=new h.Observable,i._pointerIsDown=!1,i.value=new h.Color3(.88,.1,.1),i.size=\"200px\",i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,\"value\",{get:function(){return this._value},set:function(t){this._value.equals(t)||(this._value.copyFrom(t),this._RGBtoHSV(this._value,this._tmpColor),this._h=this._tmpColor.r,this._s=Math.max(this._tmpColor.g,1e-5),this._v=Math.max(this._tmpColor.b,1e-5),this._markAsDirty(),this._value.r<=e._Epsilon&&(this._value.r=0),this._value.g<=e._Epsilon&&(this._value.g=0),this._value.b<=e._Epsilon&&(this._value.b=0),this._value.r>=1-e._Epsilon&&(this._value.r=1),this._value.g>=1-e._Epsilon&&(this._value.g=1),this._value.b>=1-e._Epsilon&&(this._value.b=1),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"width\",{get:function(){return this._width.toString(this._host)},set:function(t){this._width.toString(this._host)!==t&&this._width.fromString(t)&&(this._height.fromString(t),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"height\",{get:function(){return this._height.toString(this._host)},set:function(t){this._height.toString(this._host)!==t&&this._height.fromString(t)&&(this._width.fromString(t),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"size\",{get:function(){return this.width},set:function(t){this.width=t},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"ColorPicker\"},e.prototype._preMeasure=function(t,e){t.width<t.height?this._currentMeasure.height=t.width:this._currentMeasure.width=t.height},e.prototype._updateSquareProps=function(){var t=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),e=2*(t-.2*t)/Math.sqrt(2),i=t-.5*e;this._squareLeft=this._currentMeasure.left+i,this._squareTop=this._currentMeasure.top+i,this._squareSize=e},e.prototype._drawGradientSquare=function(t,e,i,r,n,o){var s=o.createLinearGradient(e,i,r+e,i);s.addColorStop(0,\"#fff\"),s.addColorStop(1,\"hsl(\"+t+\", 100%, 50%)\"),o.fillStyle=s,o.fillRect(e,i,r,n);var h=o.createLinearGradient(e,i,e,n+i);h.addColorStop(0,\"rgba(0,0,0,0)\"),h.addColorStop(1,\"#000\"),o.fillStyle=h,o.fillRect(e,i,r,n)},e.prototype._drawCircle=function(t,e,i,r){r.beginPath(),r.arc(t,e,i+1,0,2*Math.PI,!1),r.lineWidth=3,r.strokeStyle=\"#333333\",r.stroke(),r.beginPath(),r.arc(t,e,i,0,2*Math.PI,!1),r.lineWidth=3,r.strokeStyle=\"#ffffff\",r.stroke()},e.prototype._createColorWheelCanvas=function(t,e){var i=document.createElement(\"canvas\");i.width=2*t,i.height=2*t;for(var r=i.getContext(\"2d\"),n=r.getImageData(0,0,2*t,2*t),o=n.data,s=this._tmpColor,h=t*t,a=t-e,l=a*a,u=-t;u<t;u++)for(var c=-t;c<t;c++){var _=u*u+c*c;if(!(_>h||_<l)){var d=Math.sqrt(_),f=Math.atan2(c,u);this._HSVtoRGB(180*f/Math.PI+180,d/t,1,s);var p=4*(u+t+2*(c+t)*t);o[p]=255*s.r,o[p+1]=255*s.g,o[p+2]=255*s.b;var g=.2;g=t<50?.2:t>150?.04:-.16*(t-50)/100+.2;var b=(d-a)/(t-a);o[p+3]=b<g?b/g*255:b>1-g?255*(1-(b-(1-g))/g):255}}return r.putImageData(n,0,0),i},e.prototype._RGBtoHSV=function(t,e){var i=t.r,r=t.g,n=t.b,o=Math.max(i,r,n),s=Math.min(i,r,n),h=0,a=0,l=o,u=o-s;0!==o&&(a=u/o),o!=s&&(o==i?(h=(r-n)/u,r<n&&(h+=6)):o==r?h=(n-i)/u+2:o==n&&(h=(i-r)/u+4),h*=60),e.r=h,e.g=a,e.b=l},e.prototype._HSVtoRGB=function(t,e,i,r){var n=i*e,o=t/60,s=n*(1-Math.abs(o%2-1)),h=0,a=0,l=0;o>=0&&o<=1?(h=n,a=s):o>=1&&o<=2?(h=s,a=n):o>=2&&o<=3?(a=n,l=s):o>=3&&o<=4?(a=s,l=n):o>=4&&o<=5?(h=s,l=n):o>=5&&o<=6&&(h=n,l=s);var u=i-n;r.set(h+u,a+u,l+u)},e.prototype._draw=function(t){t.save(),this._applyStates(t);var e=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),i=.2*e,r=this._currentMeasure.left,n=this._currentMeasure.top;this._colorWheelCanvas&&this._colorWheelCanvas.width==2*e||(this._colorWheelCanvas=this._createColorWheelCanvas(e,i)),this._updateSquareProps(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY,t.fillRect(this._squareLeft,this._squareTop,this._squareSize,this._squareSize)),t.drawImage(this._colorWheelCanvas,r,n),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._drawGradientSquare(this._h,this._squareLeft,this._squareTop,this._squareSize,this._squareSize,t);var o=this._squareLeft+this._squareSize*this._s,s=this._squareTop+this._squareSize*(1-this._v);this._drawCircle(o,s,.04*e,t);var h=e-.5*i;o=r+e+Math.cos((this._h-180)*Math.PI/180)*h,s=n+e+Math.sin((this._h-180)*Math.PI/180)*h,this._drawCircle(o,s,.35*i,t),t.restore()},e.prototype._updateValueFromPointer=function(t,i){if(this._pointerStartedOnWheel){var r=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),n=r+this._currentMeasure.left,o=r+this._currentMeasure.top;this._h=180*Math.atan2(i-o,t-n)/Math.PI+180}else this._pointerStartedOnSquare&&(this._updateSquareProps(),this._s=(t-this._squareLeft)/this._squareSize,this._v=1-(i-this._squareTop)/this._squareSize,this._s=Math.min(this._s,1),this._s=Math.max(this._s,e._Epsilon),this._v=Math.min(this._v,1),this._v=Math.max(this._v,e._Epsilon));this._HSVtoRGB(this._h,this._s,this._v,this._tmpColor),this.value=this._tmpColor},e.prototype._isPointOnSquare=function(t,e){this._updateSquareProps();var i=this._squareLeft,r=this._squareTop,n=this._squareSize;return t>=i&&t<=i+n&&e>=r&&e<=r+n},e.prototype._isPointOnWheel=function(t,e){var i=.5*Math.min(this._currentMeasure.width,this._currentMeasure.height),r=i-.2*i,n=t-(i+this._currentMeasure.left),o=e-(i+this._currentMeasure.top),s=n*n+o*o;return s<=i*i&&s>=r*r},e.prototype._onPointerDown=function(e,i,r,n){if(!t.prototype._onPointerDown.call(this,e,i,r,n))return!1;this._pointerIsDown=!0,this._pointerStartedOnSquare=!1,this._pointerStartedOnWheel=!1,this._invertTransformMatrix.transformCoordinates(i.x,i.y,this._transformedPosition);var o=this._transformedPosition.x,s=this._transformedPosition.y;return this._isPointOnSquare(o,s)?this._pointerStartedOnSquare=!0:this._isPointOnWheel(o,s)&&(this._pointerStartedOnWheel=!0),this._updateValueFromPointer(o,s),this._host._capturingControl[r]=this,this._lastPointerDownID=r,!0},e.prototype._onPointerMove=function(e,i,r){if(r==this._lastPointerDownID){this._invertTransformMatrix.transformCoordinates(i.x,i.y,this._transformedPosition);var n=this._transformedPosition.x,o=this._transformedPosition.y;this._pointerIsDown&&this._updateValueFromPointer(n,o),t.prototype._onPointerMove.call(this,e,i,r)}},e.prototype._onPointerUp=function(e,i,r,n,o){this._pointerIsDown=!1,delete this._host._capturingControl[r],t.prototype._onPointerUp.call(this,e,i,r,n,o)},e.ShowPickerDialogAsync=function(t,i){return new Promise(function(r,n){i.pickerWidth=i.pickerWidth||\"640px\",i.pickerHeight=i.pickerHeight||\"400px\",i.headerHeight=i.headerHeight||\"35px\",i.lastColor=i.lastColor||\"#000000\",i.swatchLimit=i.swatchLimit||20,i.numSwatchesPerLine=i.numSwatchesPerLine||10;var o,s,a,l,u,c,d,g,m,y,C,T,w,x,P,M,k,I,A,E=i.swatchLimit/i.numSwatchesPerLine,S=parseFloat(i.pickerWidth)/i.numSwatchesPerLine,D=Math.floor(.25*S),R=D*(i.numSwatchesPerLine+1),L=Math.floor((parseFloat(i.pickerWidth)-R)/i.numSwatchesPerLine),N=L*E+D*(E+1),B=(parseInt(i.pickerHeight)+N+Math.floor(.25*L)).toString()+\"px\",H=\"#c0c0c0\",V=\"#535353\",F=\"#414141\",j=\"515151\",W=\"#555555\",z=\"#454545\",G=h.Color3.FromHexString(\"#dddddd\"),X=G.r+G.g+G.b,Y=\"#aaaaaa\",U=\"#ffffff\",K=[\"R\",\"G\",\"B\"],q=!1;function Z(t,e){A=e;var i=t.toHexString();if(k.background=i,y.name!=A&&(y.text=Math.floor(255*t.r).toString()),C.name!=A&&(C.text=Math.floor(255*t.g).toString()),T.name!=A&&(T.text=Math.floor(255*t.b).toString()),w.name!=A&&(w.text=t.r.toString()),x.name!=A&&(x.text=t.g.toString()),P.name!=A&&(P.text=t.b.toString()),M.name!=A){var r=i.split(\"#\");M.text=r[1]}m.name!=A&&(m.value=t)}function J(t,e){var i=t.text;if(/[^0-9]/g.test(i))t.text=I;else if(\"\"!=i&&(Math.floor(parseInt(i))<0?i=\"0\":Math.floor(parseInt(i))>255?i=\"255\":isNaN(parseInt(i))&&(i=\"0\")),A==t.name&&(I=i),\"\"!=i){i=parseInt(i).toString(),t.text=i;var r=h.Color3.FromHexString(k.background);A==t.name&&Z(\"r\"==e?new h.Color3(parseInt(i)/255,r.g,r.b):\"g\"==e?new h.Color3(r.r,parseInt(i)/255,r.b):new h.Color3(r.r,r.g,parseInt(i)/255),t.name)}}function Q(t,e){var i=t.text;if(/[^0-9\\.]/g.test(i))t.text=I;else{\"\"!=i&&\".\"!=i&&0!=parseFloat(i)&&(parseFloat(i)<0?i=\"0.0\":parseFloat(i)>1?i=\"1.0\":isNaN(parseFloat(i))&&(i=\"0.0\")),A==t.name&&(I=i),\"\"!=i&&\".\"!=i&&0!=parseFloat(i)?(i=parseFloat(i).toString(),t.text=i):i=\"0.0\";var r=h.Color3.FromHexString(k.background);A==t.name&&Z(\"r\"==e?new h.Color3(parseFloat(i),r.g,r.b):\"g\"==e?new h.Color3(r.r,parseFloat(i),r.b):new h.Color3(r.r,r.g,parseFloat(i)),t.name)}}function $(){if(i.savedColors&&i.savedColors[d]){if(q)var t=\"b\";else t=\"\";var e=b.CreateSimpleButton(\"Swatch_\"+d,t);e.fontFamily=\"BabylonJSglyphs\";var r=h.Color3.FromHexString(i.savedColors[d]),n=r.r+r.g+r.b;e.color=n>X?Y:U,e.fontSize=Math.floor(.7*L),e.textBlock.verticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,e.height=e.width=L.toString()+\"px\",e.background=i.savedColors[d],e.thickness=2;var o=d;return e.pointerDownAnimation=function(){e.thickness=4},e.pointerUpAnimation=function(){e.thickness=3},e.pointerEnterAnimation=function(){e.thickness=3},e.pointerOutAnimation=function(){e.thickness=2},e.onPointerClickObservable.add(function(){var t;q?(t=o,i.savedColors&&i.savedColors.splice(t,1),i.savedColors&&0==i.savedColors.length&&(it(!1),q=!1),et(\"\",Nt)):i.savedColors&&Z(h.Color3.FromHexString(i.savedColors[o]),e.name)}),e}return null}function tt(t){if(void 0!==t&&(q=t),q){for(var e=0;e<g.children.length;e++){g.children[e].textBlock.text=\"b\"}void 0!==a&&(a.textBlock.text=\"Done\")}else{for(e=0;e<g.children.length;e++){g.children[e].textBlock.text=\"\"}void 0!==a&&(a.textBlock.text=\"Edit\")}}function et(t,e){if(i.savedColors){\"\"!=t&&i.savedColors.push(t),d=0,g.clearControls();var r=Math.ceil(i.savedColors.length/i.numSwatchesPerLine);if(0==r)var n=0;else n=r+1;if(g.rowCount!=r+n){for(var o=g.rowCount,s=0;s<o;s++)g.removeRowDefinition(0);for(s=0;s<r+n;s++)s%2?g.addRowDefinition(L,!0):g.addRowDefinition(D,!0)}g.height=(L*r+n*D).toString()+\"px\";for(var h=1,a=1;h<r+n;h+=2,a++){if(i.savedColors.length>a*i.numSwatchesPerLine)var l=i.numSwatchesPerLine;else l=i.savedColors.length-(a-1)*i.numSwatchesPerLine;for(var u=Math.min(Math.max(l,0),i.numSwatchesPerLine),c=0,_=1;c<u;c++)if(!(c>i.numSwatchesPerLine)){var f=$();null!=f&&(g.addControl(f,h,_),_+=2,d++)}}i.savedColors.length>=i.swatchLimit?rt(e,!0):rt(e,!1)}}function it(t){t?((a=b.CreateSimpleButton(\"butEdit\",\"Edit\")).width=l,a.height=u,a.left=Math.floor(.1*parseInt(l)).toString()+\"px\",a.top=(-1*parseFloat(a.left)).toString()+\"px\",a.verticalAlignment=_.VERTICAL_ALIGNMENT_BOTTOM,a.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,a.thickness=2,a.color=H,a.fontSize=s,a.background=V,a.onPointerEnterObservable.add(function(){a.background=F}),a.onPointerOutObservable.add(function(){a.background=V}),a.pointerDownAnimation=function(){a.background=j},a.pointerUpAnimation=function(){a.background=F},a.onPointerClickObservable.add(function(){q=!q,tt()}),mt.addControl(a,1,0)):mt.removeControl(a)}function rt(t,e){e?(t.color=W,t.background=z):(t.color=H,t.background=V)}function nt(e){i.savedColors&&i.savedColors.length>0?r({savedColors:i.savedColors,pickedColor:e}):r({pickedColor:e}),t.removeControl(ot)}var ot=new O;if(ot.name=\"Dialog Container\",ot.width=i.pickerWidth,i.savedColors){ot.height=B;var st=parseInt(i.pickerHeight)/parseInt(B);ot.addRowDefinition(st,!1),ot.addRowDefinition(1-st,!1)}else ot.height=i.pickerHeight,ot.addRowDefinition(1,!1);if(t.addControl(ot),i.savedColors){(g=new O).name=\"Swatch Drawer\",g.verticalAlignment=_.VERTICAL_ALIGNMENT_TOP,g.background=V,g.width=i.pickerWidth;var ht=i.savedColors.length/i.numSwatchesPerLine;if(0==ht)var at=0;else at=ht+1;g.height=(L*ht+at*D).toString()+\"px\",g.top=Math.floor(.25*L).toString()+\"px\";for(var lt=0;lt<2*Math.ceil(i.savedColors.length/i.numSwatchesPerLine)+1;lt++)lt%2!=0?g.addRowDefinition(L,!0):g.addRowDefinition(D,!0);for(lt=0;lt<2*i.numSwatchesPerLine+1;lt++)lt%2!=0?g.addColumnDefinition(L,!0):g.addColumnDefinition(D,!0);ot.addControl(g,1,0)}var ut=new O;ut.name=\"Picker Panel\",ut.height=i.pickerHeight;var ct=parseInt(i.headerHeight)/parseInt(i.pickerHeight),_t=[ct,1-ct];ut.addRowDefinition(_t[0],!1),ut.addRowDefinition(_t[1],!1),ot.addControl(ut,0,0);var dt=new f;dt.name=\"Dialogue Header Bar\",dt.background=\"#cccccc\",dt.thickness=0,ut.addControl(dt,0,0);var ft=b.CreateSimpleButton(\"closeButton\",\"a\");ft.fontFamily=\"BabylonJSglyphs\";var pt=h.Color3.FromHexString(dt.background);o=new h.Color3(1-pt.r,1-pt.g,1-pt.b),ft.color=o.toHexString(),ft.fontSize=Math.floor(.6*parseInt(i.headerHeight)),ft.textBlock.textVerticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,ft.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_RIGHT,ft.height=ft.width=i.headerHeight,ft.background=dt.background,ft.thickness=0,ft.pointerDownAnimation=function(){},ft.pointerUpAnimation=function(){ft.background=dt.background},ft.pointerEnterAnimation=function(){ft.color=dt.background,ft.background=\"red\"},ft.pointerOutAnimation=function(){ft.color=o.toHexString(),ft.background=dt.background},ft.onPointerClickObservable.add(function(){nt(At.background)}),ut.addControl(ft,0,0);var gt=new O;gt.name=\"Dialogue Body\",gt.background=V;var bt=[.4375,.5625];gt.addRowDefinition(1,!1),gt.addColumnDefinition(bt[0],!1),gt.addColumnDefinition(bt[1],!1),ut.addControl(gt,1,0);var mt=new O;mt.name=\"Picker Grid\",mt.addRowDefinition(.85,!1),mt.addRowDefinition(.15,!1),gt.addControl(mt,0,0),(m=new e).name=\"GUI Color Picker\",i.pickerHeight<i.pickerWidth?m.width=.89:m.height=.89,m.value=h.Color3.FromHexString(i.lastColor),m.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_CENTER,m.verticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,m.onPointerDownObservable.add(function(){A=m.name,I=\"\",tt(!1)}),m.onValueChangedObservable.add(function(t){A==m.name&&Z(t,m.name)}),mt.addControl(m,0,0);var yt=new O;yt.name=\"Dialogue Right Half\",yt.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT;var vt=[.514,.486];yt.addRowDefinition(vt[0],!1),yt.addRowDefinition(vt[1],!1),gt.addControl(yt,1,1);var Ot=new O;Ot.name=\"Swatches and Buttons\";var Ct=[.417,.583];Ot.addRowDefinition(1,!1),Ot.addColumnDefinition(Ct[0],!1),Ot.addColumnDefinition(Ct[1],!1),yt.addControl(Ot,0,0);var Tt=new O;Tt.name=\"New and Current Swatches\";var wt=[.04,.16,.64,.16];Tt.addRowDefinition(wt[0],!1),Tt.addRowDefinition(wt[1],!1),Tt.addRowDefinition(wt[2],!1),Tt.addRowDefinition(wt[3],!1),Ot.addControl(Tt,0,0);var xt=new O;xt.name=\"Active Swatches\",xt.width=.67,xt.addRowDefinition(.5,!1),xt.addRowDefinition(.5,!1),Tt.addControl(xt,2,0);var Pt=Math.floor(parseInt(i.pickerWidth)*bt[1]*Ct[0]*.11),Mt=Math.floor(parseInt(i.pickerHeight)*_t[1]*vt[0]*wt[1]*.5);if(i.pickerWidth>i.pickerHeight)var kt=Mt;else kt=Pt;var It=new p;It.text=\"new\",It.name=\"New Color Label\",It.color=H,It.fontSize=kt,Tt.addControl(It,1,0),(k=new f).name=\"New Color Swatch\",k.background=i.lastColor,k.thickness=0,xt.addControl(k,0,0);var At=b.CreateSimpleButton(\"currentSwatch\",\"\");At.background=i.lastColor,At.thickness=0,At.onPointerClickObservable.add(function(){Z(h.Color3.FromHexString(At.background),At.name),tt(!1)}),At.pointerDownAnimation=function(){},At.pointerUpAnimation=function(){},At.pointerEnterAnimation=function(){},At.pointerOutAnimation=function(){},xt.addControl(At,1,0);var Et=new f;Et.name=\"Swatch Outline\",Et.width=.67,Et.thickness=2,Et.color=\"#404040\",Et.isHitTestVisible=!1,Tt.addControl(Et,2,0);var St=new p;St.name=\"Current Color Label\",St.text=\"current\",St.color=H,St.fontSize=kt,Tt.addControl(St,3,0);var Dt=new O;Dt.name=\"Button Grid\",Dt.height=.8;Dt.addRowDefinition(1/3,!1),Dt.addRowDefinition(1/3,!1),Dt.addRowDefinition(1/3,!1),Ot.addControl(Dt,0,1),l=Math.floor(parseInt(i.pickerWidth)*bt[1]*Ct[1]*.67).toString()+\"px\",u=Math.floor(parseInt(i.pickerHeight)*_t[1]*vt[0]*(parseFloat(Dt.height.toString())/100)*(1/3)*.7).toString()+\"px\",s=parseFloat(l)>parseFloat(u)?Math.floor(.45*parseFloat(u)):Math.floor(.11*parseFloat(l));var Rt=b.CreateSimpleButton(\"butOK\",\"OK\");Rt.width=l,Rt.height=u,Rt.verticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,Rt.thickness=2,Rt.color=H,Rt.fontSize=s,Rt.background=V,Rt.onPointerEnterObservable.add(function(){Rt.background=F}),Rt.onPointerOutObservable.add(function(){Rt.background=V}),Rt.pointerDownAnimation=function(){Rt.background=j},Rt.pointerUpAnimation=function(){Rt.background=F},Rt.onPointerClickObservable.add(function(){tt(!1),nt(k.background)}),Dt.addControl(Rt,0,0);var Lt=b.CreateSimpleButton(\"butCancel\",\"Cancel\");if(Lt.width=l,Lt.height=u,Lt.verticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,Lt.thickness=2,Lt.color=H,Lt.fontSize=s,Lt.background=V,Lt.onPointerEnterObservable.add(function(){Lt.background=F}),Lt.onPointerOutObservable.add(function(){Lt.background=V}),Lt.pointerDownAnimation=function(){Lt.background=j},Lt.pointerUpAnimation=function(){Lt.background=F},Lt.onPointerClickObservable.add(function(){tt(!1),nt(At.background)}),Dt.addControl(Lt,1,0),i.savedColors){var Nt=b.CreateSimpleButton(\"butSave\",\"Save\");Nt.width=l,Nt.height=u,Nt.verticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,Nt.thickness=2,Nt.fontSize=s,i.savedColors.length<i.swatchLimit?(Nt.color=H,Nt.background=V):rt(Nt,!0),Nt.onPointerEnterObservable.add(function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Nt.background=F)}),Nt.onPointerOutObservable.add(function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Nt.background=V)}),Nt.pointerDownAnimation=function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Nt.background=j)},Nt.pointerUpAnimation=function(){i.savedColors&&i.savedColors.length<i.swatchLimit&&(Nt.background=F)},Nt.onPointerClickObservable.add(function(){i.savedColors&&(0==i.savedColors.length&&it(!0),i.savedColors.length<i.swatchLimit&&et(k.background,Nt),tt(!1))}),i.savedColors.length>0&&it(!0),Dt.addControl(Nt,2,0)}var Bt=new O;Bt.name=\"Dialog Lower Right\",Bt.addRowDefinition(.02,!1),Bt.addRowDefinition(.63,!1),Bt.addRowDefinition(.21,!1),Bt.addRowDefinition(.14,!1),yt.addControl(Bt,1,0),c=h.Color3.FromHexString(i.lastColor);var Ht=new O;Ht.name=\"RGB Values\",Ht.width=.82,Ht.verticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,Ht.addRowDefinition(1/3,!1),Ht.addRowDefinition(1/3,!1),Ht.addRowDefinition(1/3,!1),Ht.addColumnDefinition(.1,!1),Ht.addColumnDefinition(.2,!1),Ht.addColumnDefinition(.7,!1),Bt.addControl(Ht,1,0);for(lt=0;lt<K.length;lt++){(Vt=new p).text=K[lt],Vt.color=H,Vt.fontSize=s,Ht.addControl(Vt,lt,0)}(y=new v).width=.83,y.height=.72,y.name=\"rIntField\",y.fontSize=s,y.text=(255*c.r).toString(),y.color=\"#f0f0f0\",y.background=\"#454545\",y.onFocusObservable.add(function(){A=y.name,I=y.text,tt(!1)}),y.onBlurObservable.add(function(){\"\"==y.text&&(y.text=\"0\"),J(y,\"r\"),A==y.name&&(A=\"\")}),y.onTextChangedObservable.add(function(){A==y.name&&J(y,\"r\")}),Ht.addControl(y,0,1),(C=new v).width=.83,C.height=.72,C.name=\"gIntField\",C.fontSize=s,C.text=(255*c.g).toString(),C.color=\"#f0f0f0\",C.background=\"#454545\",C.onFocusObservable.add(function(){A=C.name,I=C.text,tt(!1)}),C.onBlurObservable.add(function(){\"\"==C.text&&(C.text=\"0\"),J(C,\"g\"),A==C.name&&(A=\"\")}),C.onTextChangedObservable.add(function(){A==C.name&&J(C,\"g\")}),Ht.addControl(C,1,1),(T=new v).width=.83,T.height=.72,T.name=\"bIntField\",T.fontSize=s,T.text=(255*c.b).toString(),T.color=\"#f0f0f0\",T.background=\"#454545\",T.onFocusObservable.add(function(){A=T.name,I=T.text,tt(!1)}),T.onBlurObservable.add(function(){\"\"==T.text&&(T.text=\"0\"),J(T,\"b\"),A==T.name&&(A=\"\")}),T.onTextChangedObservable.add(function(){A==T.name&&J(T,\"b\")}),Ht.addControl(T,2,1),(w=new v).width=.95,w.height=.72,w.name=\"rDecField\",w.fontSize=s,w.text=c.r.toString(),w.color=\"#f0f0f0\",w.background=\"#454545\",w.onFocusObservable.add(function(){A=w.name,I=w.text,tt(!1)}),w.onBlurObservable.add(function(){0!=parseFloat(w.text)&&\"\"!=w.text||(w.text=\"0\",Q(w,\"r\")),A==w.name&&(A=\"\")}),w.onTextChangedObservable.add(function(){A==w.name&&Q(w,\"r\")}),Ht.addControl(w,0,2),(x=new v).width=.95,x.height=.72,x.name=\"gDecField\",x.fontSize=s,x.text=c.g.toString(),x.color=\"#f0f0f0\",x.background=\"#454545\",x.onFocusObservable.add(function(){A=x.name,I=x.text,tt(!1)}),x.onBlurObservable.add(function(){0!=parseFloat(x.text)&&\"\"!=x.text||(x.text=\"0\",Q(x,\"g\")),A==x.name&&(A=\"\")}),x.onTextChangedObservable.add(function(){A==x.name&&Q(x,\"g\")}),Ht.addControl(x,1,2),(P=new v).width=.95,P.height=.72,P.name=\"bDecField\",P.fontSize=s,P.text=c.b.toString(),P.color=\"#f0f0f0\",P.background=\"#454545\",P.onFocusObservable.add(function(){A=P.name,I=P.text,tt(!1)}),P.onBlurObservable.add(function(){0!=parseFloat(P.text)&&\"\"!=P.text||(P.text=\"0\",Q(P,\"b\")),A==P.name&&(A=\"\")}),P.onTextChangedObservable.add(function(){A==P.name&&Q(P,\"b\")}),Ht.addControl(P,2,2);var Vt,Ft=new O;Ft.name=\"Hex Value\",Ft.width=.82,Ft.addRowDefinition(1,!1),Ft.addColumnDefinition(.1,!1),Ft.addColumnDefinition(.9,!1),Bt.addControl(Ft,2,0),(Vt=new p).text=\"#\",Vt.color=H,Vt.fontSize=s,Ft.addControl(Vt,0,0),(M=new v).width=.96,M.height=.72,M.name=\"hexField\",M.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_CENTER,M.fontSize=s;var jt=i.lastColor.split(\"#\");M.text=jt[1],M.color=\"#f0f0f0\",M.background=\"#454545\",M.onFocusObservable.add(function(){A=M.name,I=M.text,tt(!1)}),M.onBlurObservable.add(function(){if(3==M.text.length){var t=M.text.split(\"\");M.text=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]}\"\"==M.text&&(M.text=\"000000\",Z(h.Color3.FromHexString(M.text),\"b\")),A==M.name&&(A=\"\")}),M.onTextChangedObservable.add(function(){var t=M.text,e=/[^0-9A-F]/i.test(t);if((M.text.length>6||e)&&A==M.name)M.text=I;else{if(M.text.length<6)for(var i=6-M.text.length,r=0;r<i;r++)t=\"0\"+t;if(3==M.text.length){var n=M.text.split(\"\");t=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]}t=\"#\"+t,A==M.name&&(I=M.text,Z(h.Color3.FromHexString(t),M.name))}}),Ft.addControl(M,0,1),i.savedColors&&i.savedColors.length>0&&et(\"\",Nt)})},e._Epsilon=1e-6,e}(_),T=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thickness=1,i}return n(e,t),Object.defineProperty(e.prototype,\"thickness\",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"Ellipse\"},e.prototype._localDraw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),_.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,t),this._background&&(t.fillStyle=this._background,t.fill()),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),this._thickness&&(this.color&&(t.strokeStyle=this.color),t.lineWidth=this._thickness,t.stroke()),t.restore()},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.width-=2*this._thickness,this._measureForChildren.height-=2*this._thickness,this._measureForChildren.left+=this._thickness,this._measureForChildren.top+=this._thickness},e.prototype._clipForChildren=function(t){_.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2,this._currentMeasure.height/2,t),t.clip()},e}(d),w=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._beforeRenderText=function(t){for(var e=\"\",i=0;i<t.length;i++)e+=\"•\";return e},e}(v),x=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._lineWidth=1,i._x1=new a(0),i._y1=new a(0),i._x2=new a(0),i._y2=new a(0),i._dash=new Array,i.isHitTestVisible=!1,i._horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,i._verticalAlignment=_.VERTICAL_ALIGNMENT_TOP,i}return n(e,t),Object.defineProperty(e.prototype,\"dash\",{get:function(){return this._dash},set:function(t){this._dash!==t&&(this._dash=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"connectedControl\",{get:function(){return this._connectedControl},set:function(t){var e=this;this._connectedControl!==t&&(this._connectedControlDirtyObserver&&this._connectedControl&&(this._connectedControl.onDirtyObservable.remove(this._connectedControlDirtyObserver),this._connectedControlDirtyObserver=null),t&&(this._connectedControlDirtyObserver=t.onDirtyObservable.add(function(){return e._markAsDirty()})),this._connectedControl=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"x1\",{get:function(){return this._x1.toString(this._host)},set:function(t){this._x1.toString(this._host)!==t&&this._x1.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"y1\",{get:function(){return this._y1.toString(this._host)},set:function(t){this._y1.toString(this._host)!==t&&this._y1.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"x2\",{get:function(){return this._x2.toString(this._host)},set:function(t){this._x2.toString(this._host)!==t&&this._x2.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"y2\",{get:function(){return this._y2.toString(this._host)},set:function(t){this._y2.toString(this._host)!==t&&this._y2.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"lineWidth\",{get:function(){return this._lineWidth},set:function(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"horizontalAlignment\",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"verticalAlignment\",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_effectiveX2\",{get:function(){return(this._connectedControl?this._connectedControl.centerX:0)+this._x2.getValue(this._host)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"_effectiveY2\",{get:function(){return(this._connectedControl?this._connectedControl.centerY:0)+this._y2.getValue(this._host)},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"Line\"},e.prototype._draw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this.color,t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath(),t.moveTo(this._cachedParentMeasure.left+this._x1.getValue(this._host),this._cachedParentMeasure.left+this._y1.getValue(this._host)),t.lineTo(this._cachedParentMeasure.left+this._effectiveX2,this._cachedParentMeasure.left+this._effectiveY2),t.stroke(),t.restore()},e.prototype._measure=function(){this._currentMeasure.width=Math.abs(this._x1.getValue(this._host)-this._effectiveX2)+this._lineWidth,this._currentMeasure.height=Math.abs(this._y1.getValue(this._host)-this._effectiveY2)+this._lineWidth},e.prototype._computeAlignment=function(t,e){this._currentMeasure.left=t.left+Math.min(this._x1.getValue(this._host),this._effectiveX2)-this._lineWidth/2,this._currentMeasure.top=t.top+Math.min(this._y1.getValue(this._host),this._effectiveY2)-this._lineWidth/2},e.prototype.moveToVector3=function(t,e,i){if(void 0===i&&(i=!1),this._host&&this.parent===this._host._rootContainer){var r=this._host._getGlobalViewport(e),n=h.Vector3.Project(t,h.Matrix.Identity(),e.getTransformMatrix(),r);this._moveToProjectedPosition(n,i),n.z<0||n.z>1?this.notRenderable=!0:this.notRenderable=!1}else h.Tools.Error(\"Cannot move a control to a vector3 if the control is not at root level\")},e.prototype._moveToProjectedPosition=function(t,e){void 0===e&&(e=!1);var i=t.x+this._linkOffsetX.getValue(this._host)+\"px\",r=t.y+this._linkOffsetY.getValue(this._host)+\"px\";e?(this.x2=i,this.y2=r,this._x2.ignoreAdaptiveScaling=!0,this._y2.ignoreAdaptiveScaling=!0):(this.x1=i,this.y1=r,this._x1.ignoreAdaptiveScaling=!0,this._y1.ignoreAdaptiveScaling=!0)},e}(_),P=function(){function t(t){this._multiLine=t,this._x=new a(0),this._y=new a(0),this._point=new h.Vector2(0,0)}return Object.defineProperty(t.prototype,\"x\",{get:function(){return this._x.toString(this._multiLine._host)},set:function(t){this._x.toString(this._multiLine._host)!==t&&this._x.fromString(t)&&this._multiLine._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"y\",{get:function(){return this._y.toString(this._multiLine._host)},set:function(t){this._y.toString(this._multiLine._host)!==t&&this._y.fromString(t)&&this._multiLine._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"control\",{get:function(){return this._control},set:function(t){this._control!==t&&(this._control&&this._controlObserver&&(this._control.onDirtyObservable.remove(this._controlObserver),this._controlObserver=null),this._control=t,this._control&&(this._controlObserver=this._control.onDirtyObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"mesh\",{get:function(){return this._mesh},set:function(t){this._mesh!==t&&(this._mesh&&this._meshObserver&&this._mesh.getScene().onAfterCameraRenderObservable.remove(this._meshObserver),this._mesh=t,this._mesh&&(this._meshObserver=this._mesh.getScene().onAfterCameraRenderObservable.add(this._multiLine.onPointUpdate)),this._multiLine._markAsDirty())},enumerable:!0,configurable:!0}),t.prototype.resetLinks=function(){this.control=null,this.mesh=null},t.prototype.translate=function(){return this._point=this._translatePoint(),this._point},t.prototype._translatePoint=function(){if(null!=this._mesh)return this._multiLine._host.getProjectedPosition(this._mesh.getBoundingInfo().boundingSphere.center,this._mesh.getWorldMatrix());if(null!=this._control)return new h.Vector2(this._control.centerX,this._control.centerY);var t=this._multiLine._host,e=this._x.getValueInPixel(t,Number(t._canvas.width)),i=this._y.getValueInPixel(t,Number(t._canvas.height));return new h.Vector2(e,i)},t.prototype.dispose=function(){this.resetLinks()},t}(),M=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._lineWidth=1,i.onPointUpdate=function(){i._markAsDirty()},i.isHitTestVisible=!1,i._horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,i._verticalAlignment=_.VERTICAL_ALIGNMENT_TOP,i._dash=[],i._points=[],i}return n(e,t),Object.defineProperty(e.prototype,\"dash\",{get:function(){return this._dash},set:function(t){this._dash!==t&&(this._dash=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype.getAt=function(t){return this._points[t]||(this._points[t]=new P(this)),this._points[t]},e.prototype.add=function(){for(var t=this,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return e.map(function(e){return t.push(e)})},e.prototype.push=function(t){var e=this.getAt(this._points.length);return null==t?e:(t instanceof h.AbstractMesh?e.mesh=t:t instanceof _?e.control=t:null!=t.x&&null!=t.y&&(e.x=t.x,e.y=t.y),e)},e.prototype.remove=function(t){var e;if(t instanceof P){if(-1===(e=this._points.indexOf(t)))return}else e=t;var i=this._points[e];i&&(i.dispose(),this._points.splice(e,1))},e.prototype.reset=function(){for(;this._points.length>0;)this.remove(this._points.length-1)},e.prototype.resetLinks=function(){this._points.forEach(function(t){null!=t&&t.resetLinks()})},Object.defineProperty(e.prototype,\"lineWidth\",{get:function(){return this._lineWidth},set:function(t){this._lineWidth!==t&&(this._lineWidth=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"horizontalAlignment\",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"verticalAlignment\",{set:function(t){},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"MultiLine\"},e.prototype._draw=function(t){t.save(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._applyStates(t),t.strokeStyle=this.color,t.lineWidth=this._lineWidth,t.setLineDash(this._dash),t.beginPath();var e=!0;this._points.forEach(function(i){i&&(e?(t.moveTo(i._point.x,i._point.y),e=!1):t.lineTo(i._point.x,i._point.y))}),t.stroke(),t.restore()},e.prototype._additionalProcessing=function(t,e){var i=this;this._minX=null,this._minY=null,this._maxX=null,this._maxY=null,this._points.forEach(function(t,e){t&&(t.translate(),(null==i._minX||t._point.x<i._minX)&&(i._minX=t._point.x),(null==i._minY||t._point.y<i._minY)&&(i._minY=t._point.y),(null==i._maxX||t._point.x>i._maxX)&&(i._maxX=t._point.x),(null==i._maxY||t._point.y>i._maxY)&&(i._maxY=t._point.y))}),null==this._minX&&(this._minX=0),null==this._minY&&(this._minY=0),null==this._maxX&&(this._maxX=0),null==this._maxY&&(this._maxY=0)},e.prototype._measure=function(){null!=this._minX&&null!=this._maxX&&null!=this._minY&&null!=this._maxY&&(this._currentMeasure.width=Math.abs(this._maxX-this._minX)+this._lineWidth,this._currentMeasure.height=Math.abs(this._maxY-this._minY)+this._lineWidth)},e.prototype._computeAlignment=function(t,e){null!=this._minX&&null!=this._minY&&(this._currentMeasure.left=this._minX-this._lineWidth/2,this._currentMeasure.top=this._minY-this._lineWidth/2)},e.prototype.dispose=function(){this.reset(),t.prototype.dispose.call(this)},e}(_),k=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._isChecked=!1,i._background=\"black\",i._checkSizeRatio=.8,i._thickness=1,i.group=\"\",i.onIsCheckedChangedObservable=new h.Observable,i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,\"thickness\",{get:function(){return this._thickness},set:function(t){this._thickness!==t&&(this._thickness=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"checkSizeRatio\",{get:function(){return this._checkSizeRatio},set:function(t){t=Math.max(Math.min(1,t),0),this._checkSizeRatio!==t&&(this._checkSizeRatio=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"background\",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isChecked\",{get:function(){return this._isChecked},set:function(t){var e=this;this._isChecked!==t&&(this._isChecked=t,this._markAsDirty(),this.onIsCheckedChangedObservable.notifyObservers(t),this._isChecked&&this._host&&this._host.executeOnAllControls(function(t){if(t!==e&&void 0!==t.group){var i=t;i.group===e.group&&(i.isChecked=!1)}}))},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"RadioButton\"},e.prototype._draw=function(t){t.save(),this._applyStates(t);var e=this._currentMeasure.width-this._thickness,i=this._currentMeasure.height-this._thickness;if((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),_.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,this._currentMeasure.width/2-this._thickness/2,this._currentMeasure.height/2-this._thickness/2,t),t.fillStyle=this._isEnabled?this._background:this._disabledColor,t.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this.color,t.lineWidth=this._thickness,t.stroke(),this._isChecked){t.fillStyle=this._isEnabled?this.color:this._disabledColor;var r=e*this._checkSizeRatio,n=i*this._checkSizeRatio;_.drawEllipse(this._currentMeasure.left+this._currentMeasure.width/2,this._currentMeasure.top+this._currentMeasure.height/2,r/2-this._thickness/2,n/2-this._thickness/2,t),t.fill()}t.restore()},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this.isChecked||(this.isChecked=!0),!0)},e.AddRadioButtonWithHeader=function(t,i,r,n){var o=new m;o.isVertical=!1,o.height=\"30px\";var s=new e;s.width=\"20px\",s.height=\"20px\",s.isChecked=r,s.color=\"green\",s.group=i,s.onIsCheckedChangedObservable.add(function(t){return n(s,t)}),o.addControl(s);var h=new p;return h.text=t,h.width=\"180px\",h.paddingLeft=\"5px\",h.textHorizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,h.color=\"white\",o.addControl(h),o},e}(_),I=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._thumbWidth=new a(20,a.UNITMODE_PIXEL,!1),i._minimum=0,i._maximum=100,i._value=50,i._isVertical=!1,i._barOffset=new a(5,a.UNITMODE_PIXEL,!1),i._isThumbClamped=!1,i._displayThumb=!0,i._step=0,i._lastPointerDownID=-1,i._effectiveBarOffset=0,i.onValueChangedObservable=new h.Observable,i._pointerIsDown=!1,i.isPointerBlocker=!0,i}return n(e,t),Object.defineProperty(e.prototype,\"displayThumb\",{get:function(){return this._displayThumb},set:function(t){this._displayThumb!==t&&(this._displayThumb=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"step\",{get:function(){return this._step},set:function(t){this._step!==t&&(this._step=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"barOffset\",{get:function(){return this._barOffset.toString(this._host)},set:function(t){this._barOffset.toString(this._host)!==t&&this._barOffset.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"barOffsetInPixels\",{get:function(){return this._barOffset.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"thumbWidth\",{get:function(){return this._thumbWidth.toString(this._host)},set:function(t){this._thumbWidth.toString(this._host)!==t&&this._thumbWidth.fromString(t)&&this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"thumbWidthInPixels\",{get:function(){return this._thumbWidth.getValueInPixel(this._host,this._cachedParentMeasure.width)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"minimum\",{get:function(){return this._minimum},set:function(t){this._minimum!==t&&(this._minimum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"maximum\",{get:function(){return this._maximum},set:function(t){this._maximum!==t&&(this._maximum=t,this._markAsDirty(),this.value=Math.max(Math.min(this.value,this._maximum),this._minimum))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"value\",{get:function(){return this._value},set:function(t){t=Math.max(Math.min(t,this._maximum),this._minimum),this._value!==t&&(this._value=t,this._markAsDirty(),this.onValueChangedObservable.notifyObservers(this._value))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isVertical\",{get:function(){return this._isVertical},set:function(t){this._isVertical!==t&&(this._isVertical=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isThumbClamped\",{get:function(){return this._isThumbClamped},set:function(t){this._isThumbClamped!==t&&(this._isThumbClamped=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"BaseSlider\"},e.prototype._getThumbPosition=function(){return this.isVertical?(this.maximum-this.value)/(this.maximum-this.minimum)*this._backgroundBoxLength:(this.value-this.minimum)/(this.maximum-this.minimum)*this._backgroundBoxLength},e.prototype._getThumbThickness=function(t){var e=0;switch(t){case\"circle\":e=this._thumbWidth.isPixel?Math.max(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host);break;case\"rectangle\":e=this._thumbWidth.isPixel?Math.min(this._thumbWidth.getValue(this._host),this._backgroundBoxThickness):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)}return e},e.prototype._prepareRenderingData=function(t){this._effectiveBarOffset=0,this._renderLeft=this._currentMeasure.left,this._renderTop=this._currentMeasure.top,this._renderWidth=this._currentMeasure.width,this._renderHeight=this._currentMeasure.height,this._backgroundBoxLength=Math.max(this._currentMeasure.width,this._currentMeasure.height),this._backgroundBoxThickness=Math.min(this._currentMeasure.width,this._currentMeasure.height),this._effectiveThumbThickness=this._getThumbThickness(t),this.displayThumb&&(this._backgroundBoxLength-=this._effectiveThumbThickness),this.isVertical&&this._currentMeasure.height<this._currentMeasure.width?console.error(\"Height should be greater than width\"):(this._barOffset.isPixel?this._effectiveBarOffset=Math.min(this._barOffset.getValue(this._host),this._backgroundBoxThickness):this._effectiveBarOffset=this._backgroundBoxThickness*this._barOffset.getValue(this._host),this._backgroundBoxThickness-=2*this._effectiveBarOffset,this.isVertical?(this._renderLeft+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderTop+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxLength,this._renderWidth=this._backgroundBoxThickness):(this._renderTop+=this._effectiveBarOffset,!this.isThumbClamped&&this.displayThumb&&(this._renderLeft+=this._effectiveThumbThickness/2),this._renderHeight=this._backgroundBoxThickness,this._renderWidth=this._backgroundBoxLength))},e.prototype._updateValueFromPointer=function(t,e){var i;0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),i=this._isVertical?this._minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this._maximum-this._minimum):this._minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this._maximum-this._minimum);var r=1/this._step|0;this.value=this._step?(i*r|0)/r:i},e.prototype._onPointerDown=function(e,i,r,n){return!!t.prototype._onPointerDown.call(this,e,i,r,n)&&(this._pointerIsDown=!0,this._updateValueFromPointer(i.x,i.y),this._host._capturingControl[r]=this,this._lastPointerDownID=r,!0)},e.prototype._onPointerMove=function(e,i,r){r==this._lastPointerDownID&&(this._pointerIsDown&&this._updateValueFromPointer(i.x,i.y),t.prototype._onPointerMove.call(this,e,i,r))},e.prototype._onPointerUp=function(e,i,r,n,o){this._pointerIsDown=!1,delete this._host._capturingControl[r],t.prototype._onPointerUp.call(this,e,i,r,n,o)},e}(_),A=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._background=\"black\",i._borderColor=\"white\",i._isThumbCircle=!1,i._displayValueBar=!0,i}return n(e,t),Object.defineProperty(e.prototype,\"displayValueBar\",{get:function(){return this._displayValueBar},set:function(t){this._displayValueBar!==t&&(this._displayValueBar=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"borderColor\",{get:function(){return this._borderColor},set:function(t){this._borderColor!==t&&(this._borderColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"background\",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isThumbCircle\",{get:function(){return this._isThumbCircle},set:function(t){this._isThumbCircle!==t&&(this._isThumbCircle=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"Slider\"},e.prototype._draw=function(t){t.save(),this._applyStates(t),this._prepareRenderingData(this.isThumbCircle?\"circle\":\"rectangle\");var e=this._renderLeft,i=this._renderTop,r=this._renderWidth,n=this._renderHeight,o=0;this.isThumbClamped&&this.isThumbCircle?(this.isVertical?i+=this._effectiveThumbThickness/2:e+=this._effectiveThumbThickness/2,o=this._backgroundBoxThickness/2):o=(this._effectiveThumbThickness-this._effectiveBarOffset)/2,(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY);var s=this._getThumbPosition();t.fillStyle=this._background,this.isVertical?this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(e+this._backgroundBoxThickness/2,i,o,Math.PI,2*Math.PI),t.fill(),t.fillRect(e,i,r,n)):t.fillRect(e,i,r,n+this._effectiveThumbThickness):t.fillRect(e,i,r,n):this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(e+this._backgroundBoxLength,i+this._backgroundBoxThickness/2,o,0,2*Math.PI),t.fill(),t.fillRect(e,i,r,n)):t.fillRect(e,i,r+this._effectiveThumbThickness,n):t.fillRect(e,i,r,n),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.fillStyle=this.color,this._displayValueBar&&(this.isVertical?this.isThumbClamped?this.isThumbCircle?(t.beginPath(),t.arc(e+this._backgroundBoxThickness/2,i+this._backgroundBoxLength,o,0,2*Math.PI),t.fill(),t.fillRect(e,i+s,r,n-s)):t.fillRect(e,i+s,r,n-s+this._effectiveThumbThickness):t.fillRect(e,i+s,r,n-s):this.isThumbClamped&&this.isThumbCircle?(t.beginPath(),t.arc(e,i+this._backgroundBoxThickness/2,o,0,2*Math.PI),t.fill(),t.fillRect(e,i,s,n)):t.fillRect(e,i,s,n)),this.displayThumb&&((this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowColor=this.shadowColor,t.shadowBlur=this.shadowBlur,t.shadowOffsetX=this.shadowOffsetX,t.shadowOffsetY=this.shadowOffsetY),this._isThumbCircle?(t.beginPath(),this.isVertical?t.arc(e+this._backgroundBoxThickness/2,i+s,o,0,2*Math.PI):t.arc(e+s,i+this._backgroundBoxThickness/2,o,0,2*Math.PI),t.fill(),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this._borderColor,t.stroke()):(this.isVertical?t.fillRect(e-this._effectiveBarOffset,this._currentMeasure.top+s,this._currentMeasure.width,this._effectiveThumbThickness):t.fillRect(this._currentMeasure.left+s,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),(this.shadowBlur||this.shadowOffsetX||this.shadowOffsetY)&&(t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0),t.strokeStyle=this._borderColor,this.isVertical?t.strokeRect(e-this._effectiveBarOffset,this._currentMeasure.top+s,this._currentMeasure.width,this._effectiveThumbThickness):t.strokeRect(this._currentMeasure.left+s,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height))),t.restore()},e}(I),E=function(){function t(t){this.name=t,this._groupPanel=new m,this._selectors=new Array,this._groupPanel.verticalAlignment=_.VERTICAL_ALIGNMENT_TOP,this._groupPanel.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,this._groupHeader=this._addGroupHeader(t)}return Object.defineProperty(t.prototype,\"groupPanel\",{get:function(){return this._groupPanel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"selectors\",{get:function(){return this._selectors},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"header\",{get:function(){return this._groupHeader.text},set:function(t){\"label\"!==this._groupHeader.text&&(this._groupHeader.text=t)},enumerable:!0,configurable:!0}),t.prototype._addGroupHeader=function(t){var e=new p(\"groupHead\",t);return e.width=.9,e.height=\"30px\",e.textWrapping=!0,e.color=\"black\",e.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,e.textHorizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,e.left=\"2px\",this._groupPanel.addControl(e),e},t.prototype._getSelector=function(t){if(!(t<0||t>=this._selectors.length))return this._selectors[t]},t.prototype.removeSelector=function(t){t<0||t>=this._selectors.length||(this._groupPanel.removeControl(this._selectors[t]),this._selectors.splice(t,1))},t}(),S=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.addCheckbox=function(t,e,i){void 0===e&&(e=function(t){}),void 0===i&&(i=!1);i=i||!1;var r=new y;r.width=\"20px\",r.height=\"20px\",r.color=\"#364249\",r.background=\"#CCCCCC\",r.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,r.onIsCheckedChangedObservable.add(function(t){e(t)});var n=_.AddHeader(r,t,\"200px\",{isHorizontal:!0,controlFirst:!0});n.height=\"30px\",n.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,n.left=\"4px\",this.groupPanel.addControl(n),this.selectors.push(n),r.isChecked=i,this.groupPanel.parent&&this.groupPanel.parent.parent&&(r.color=this.groupPanel.parent.parent.buttonColor,r.background=this.groupPanel.parent.parent.buttonBackground)},e.prototype._setSelectorLabel=function(t,e){this.selectors[t].children[1].text=e},e.prototype._setSelectorLabelColor=function(t,e){this.selectors[t].children[1].color=e},e.prototype._setSelectorButtonColor=function(t,e){this.selectors[t].children[0].color=e},e.prototype._setSelectorButtonBackground=function(t,e){this.selectors[t].children[0].background=e},e}(E),D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectNb=0,e}return n(e,t),e.prototype.addRadio=function(t,e,i){void 0===e&&(e=function(t){}),void 0===i&&(i=!1);var r=this._selectNb++,n=new k;n.name=t,n.width=\"20px\",n.height=\"20px\",n.color=\"#364249\",n.background=\"#CCCCCC\",n.group=this.name,n.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,n.onIsCheckedChangedObservable.add(function(t){t&&e(r)});var o=_.AddHeader(n,t,\"200px\",{isHorizontal:!0,controlFirst:!0});o.height=\"30px\",o.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,o.left=\"4px\",this.groupPanel.addControl(o),this.selectors.push(o),n.isChecked=i,this.groupPanel.parent&&this.groupPanel.parent.parent&&(n.color=this.groupPanel.parent.parent.buttonColor,n.background=this.groupPanel.parent.parent.buttonBackground)},e.prototype._setSelectorLabel=function(t,e){this.selectors[t].children[1].text=e},e.prototype._setSelectorLabelColor=function(t,e){this.selectors[t].children[1].color=e},e.prototype._setSelectorButtonColor=function(t,e){this.selectors[t].children[0].color=e},e.prototype._setSelectorButtonBackground=function(t,e){this.selectors[t].children[0].background=e},e}(E),R=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.addSlider=function(t,e,i,r,n,o,s){void 0===e&&(e=function(t){}),void 0===i&&(i=\"Units\"),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=function(t){return 0|t});var h=new A;h.name=i,h.value=o,h.minimum=r,h.maximum=n,h.width=.9,h.height=\"20px\",h.color=\"#364249\",h.background=\"#CCCCCC\",h.borderColor=\"black\",h.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,h.left=\"4px\",h.paddingBottom=\"4px\",h.onValueChangedObservable.add(function(t){h.parent.children[0].text=h.parent.children[0].name+\": \"+s(t)+\" \"+h.name,e(t)});var a=_.AddHeader(h,t+\": \"+s(o)+\" \"+i,\"30px\",{isHorizontal:!1,controlFirst:!1});a.height=\"60px\",a.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,a.left=\"4px\",a.children[0].name=t,this.groupPanel.addControl(a),this.selectors.push(a),this.groupPanel.parent&&this.groupPanel.parent.parent&&(h.color=this.groupPanel.parent.parent.buttonColor,h.background=this.groupPanel.parent.parent.buttonBackground)},e.prototype._setSelectorLabel=function(t,e){this.selectors[t].children[0].name=e,this.selectors[t].children[0].text=e+\": \"+this.selectors[t].children[1].value+\" \"+this.selectors[t].children[1].name},e.prototype._setSelectorLabelColor=function(t,e){this.selectors[t].children[0].color=e},e.prototype._setSelectorButtonColor=function(t,e){this.selectors[t].children[1].color=e},e.prototype._setSelectorButtonBackground=function(t,e){this.selectors[t].children[1].background=e},e}(E),L=function(t){function e(e,i){void 0===i&&(i=[]);var r=t.call(this,e)||this;if(r.name=e,r.groups=i,r._buttonColor=\"#364249\",r._buttonBackground=\"#CCCCCC\",r._headerColor=\"black\",r._barColor=\"white\",r._barHeight=\"2px\",r._spacerHeight=\"20px\",r._bars=new Array,r._groups=i,r.thickness=2,r._panel=new m,r._panel.verticalAlignment=_.VERTICAL_ALIGNMENT_TOP,r._panel.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,r._panel.top=5,r._panel.left=5,r._panel.width=.95,i.length>0){for(var n=0;n<i.length-1;n++)r._panel.addControl(i[n].groupPanel),r._addSpacer();r._panel.addControl(i[i.length-1].groupPanel)}return r.addControl(r._panel),r}return n(e,t),e.prototype._getTypeName=function(){return\"SelectionPanel\"},Object.defineProperty(e.prototype,\"headerColor\",{get:function(){return this._headerColor},set:function(t){this._headerColor!==t&&(this._headerColor=t,this._setHeaderColor())},enumerable:!0,configurable:!0}),e.prototype._setHeaderColor=function(){for(var t=0;t<this._groups.length;t++)this._groups[t].groupPanel.children[0].color=this._headerColor},Object.defineProperty(e.prototype,\"buttonColor\",{get:function(){return this._buttonColor},set:function(t){this._buttonColor!==t&&(this._buttonColor=t,this._setbuttonColor())},enumerable:!0,configurable:!0}),e.prototype._setbuttonColor=function(){for(var t=0;t<this._groups.length;t++)for(var e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorButtonColor(e,this._buttonColor)},Object.defineProperty(e.prototype,\"labelColor\",{get:function(){return this._labelColor},set:function(t){this._labelColor!==t&&(this._labelColor=t,this._setLabelColor())},enumerable:!0,configurable:!0}),e.prototype._setLabelColor=function(){for(var t=0;t<this._groups.length;t++)for(var e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorLabelColor(e,this._labelColor)},Object.defineProperty(e.prototype,\"buttonBackground\",{get:function(){return this._buttonBackground},set:function(t){this._buttonBackground!==t&&(this._buttonBackground=t,this._setButtonBackground())},enumerable:!0,configurable:!0}),e.prototype._setButtonBackground=function(){for(var t=0;t<this._groups.length;t++)for(var e=0;e<this._groups[t].selectors.length;e++)this._groups[t]._setSelectorButtonBackground(e,this._buttonBackground)},Object.defineProperty(e.prototype,\"barColor\",{get:function(){return this._barColor},set:function(t){this._barColor!==t&&(this._barColor=t,this._setBarColor())},enumerable:!0,configurable:!0}),e.prototype._setBarColor=function(){for(var t=0;t<this._bars.length;t++)this._bars[t].children[0].background=this._barColor},Object.defineProperty(e.prototype,\"barHeight\",{get:function(){return this._barHeight},set:function(t){this._barHeight!==t&&(this._barHeight=t,this._setBarHeight())},enumerable:!0,configurable:!0}),e.prototype._setBarHeight=function(){for(var t=0;t<this._bars.length;t++)this._bars[t].children[0].height=this._barHeight},Object.defineProperty(e.prototype,\"spacerHeight\",{get:function(){return this._spacerHeight},set:function(t){this._spacerHeight!==t&&(this._spacerHeight=t,this._setSpacerHeight())},enumerable:!0,configurable:!0}),e.prototype._setSpacerHeight=function(){for(var t=0;t<this._bars.length;t++)this._bars[t].height=this._spacerHeight},e.prototype._addSpacer=function(){var t=new d;t.width=1,t.height=this._spacerHeight,t.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT;var e=new f;e.width=1,e.height=this._barHeight,e.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,e.verticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,e.background=this._barColor,e.color=\"transparent\",t.addControl(e),this._panel.addControl(t),this._bars.push(t)},e.prototype.addGroup=function(t){this._groups.length>0&&this._addSpacer(),this._panel.addControl(t.groupPanel),this._groups.push(t),t.groupPanel.children[0].color=this._headerColor;for(var e=0;e<t.selectors.length;e++)t._setSelectorButtonColor(e,this._buttonColor),t._setSelectorButtonBackground(e,this._buttonBackground)},e.prototype.removeGroup=function(t){if(!(t<0||t>=this._groups.length)){var e=this._groups[t];this._panel.removeControl(e.groupPanel),this._groups.splice(t,1),t<this._bars.length&&(this._panel.removeControl(this._bars[t]),this._bars.splice(t,1))}},e.prototype.setHeaderName=function(t,e){e<0||e>=this._groups.length||(this._groups[e].groupPanel.children[0].text=t)},e.prototype.relabel=function(t,e,i){if(!(e<0||e>=this._groups.length)){var r=this._groups[e];i<0||i>=r.selectors.length||r._setSelectorLabel(i,t)}},e.prototype.removeFromGroupSelector=function(t,e){if(!(t<0||t>=this._groups.length)){var i=this._groups[t];e<0||e>=i.selectors.length||i.removeSelector(e)}},e.prototype.addToGroupCheckbox=function(t,e,i,r){(void 0===i&&(i=function(){}),void 0===r&&(r=!1),t<0||t>=this._groups.length)||this._groups[t].addCheckbox(e,i,r)},e.prototype.addToGroupRadio=function(t,e,i,r){(void 0===i&&(i=function(){}),void 0===r&&(r=!1),t<0||t>=this._groups.length)||this._groups[t].addRadio(e,i,r)},e.prototype.addToGroupSlider=function(t,e,i,r,n,o,s,h){(void 0===i&&(i=function(){}),void 0===r&&(r=\"Units\"),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===h&&(h=function(t){return 0|t}),t<0||t>=this._groups.length)||this._groups[t].addSlider(e,i,r,n,o,s,h)},e}(f),N=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._getTypeName=function(){return\"ScrollViewerWindow\"},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._measureForChildren.left=this._currentMeasure.left,this._measureForChildren.top=this._currentMeasure.top,this._measureForChildren.width=e.width,this._measureForChildren.height=e.height},e.prototype._postMeasure=function(){for(var e=this.parentClientWidth,i=this.parentClientHeight,r=0,n=this.children;r<n.length;r++){var o=n[r];o.isVisible&&!o.notRenderable&&(o.horizontalAlignment===_.HORIZONTAL_ALIGNMENT_CENTER&&o._offsetLeft(this._currentMeasure.left-o._currentMeasure.left),o.verticalAlignment===_.VERTICAL_ALIGNMENT_CENTER&&o._offsetTop(this._currentMeasure.top-o._currentMeasure.top),e=Math.max(e,o._currentMeasure.left-this._currentMeasure.left+o._currentMeasure.width),i=Math.max(i,o._currentMeasure.top-this._currentMeasure.top+o._currentMeasure.height))}this._currentMeasure.width!==e&&(this._width.updateInPlace(e,a.UNITMODE_PIXEL),this._currentMeasure.width=e,this._rebuildLayout=!0,this._isDirty=!0),this._currentMeasure.height!==i&&(this._height.updateInPlace(i,a.UNITMODE_PIXEL),this._currentMeasure.height=i,this._rebuildLayout=!0,this._isDirty=!0),t.prototype._postMeasure.call(this)},e}(d),B=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._background=\"black\",i._borderColor=\"white\",i._thumbMeasure=new l(0,0,0,0),i}return n(e,t),Object.defineProperty(e.prototype,\"borderColor\",{get:function(){return this._borderColor},set:function(t){this._borderColor!==t&&(this._borderColor=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"background\",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"Scrollbar\"},e.prototype._getThumbThickness=function(){return this._thumbWidth.isPixel?this._thumbWidth.getValue(this._host):this._backgroundBoxThickness*this._thumbWidth.getValue(this._host)},e.prototype._draw=function(t){t.save(),this._applyStates(t),this._prepareRenderingData(\"rectangle\");var e=this._renderLeft,i=this._getThumbPosition();t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height),t.fillStyle=this.color,this.isVertical?(this._thumbMeasure.left=e-this._effectiveBarOffset,this._thumbMeasure.top=this._currentMeasure.top+i,this._thumbMeasure.width=this._currentMeasure.width,this._thumbMeasure.height=this._effectiveThumbThickness):(this._thumbMeasure.left=this._currentMeasure.left+i,this._thumbMeasure.top=this._currentMeasure.top,this._thumbMeasure.width=this._effectiveThumbThickness,this._thumbMeasure.height=this._currentMeasure.height),t.fillRect(this._thumbMeasure.left,this._thumbMeasure.top,this._thumbMeasure.width,this._thumbMeasure.height),t.restore()},e.prototype._updateValueFromPointer=function(t,e){0!=this.rotation&&(this._invertTransformMatrix.transformCoordinates(t,e,this._transformedPosition),t=this._transformedPosition.x,e=this._transformedPosition.y),this._first&&(this._first=!1,this._originX=t,this._originY=e,(t<this._thumbMeasure.left||t>this._thumbMeasure.left+this._thumbMeasure.width||e<this._thumbMeasure.top||e>this._thumbMeasure.top+this._thumbMeasure.height)&&(this.isVertical?this.value=this.minimum+(1-(e-this._currentMeasure.top)/this._currentMeasure.height)*(this.maximum-this.minimum):this.value=this.minimum+(t-this._currentMeasure.left)/this._currentMeasure.width*(this.maximum-this.minimum)));var i=0;i=this.isVertical?-(e-this._originY)/(this._currentMeasure.height-this._effectiveThumbThickness):(t-this._originX)/(this._currentMeasure.width-this._effectiveThumbThickness),this.value+=i*(this.maximum-this.minimum),this._originX=t,this._originY=e},e.prototype._onPointerDown=function(e,i,r,n){return this._first=!0,t.prototype._onPointerDown.call(this,e,i,r,n)},e}(I),H=function(t){function e(e){var i=t.call(this,e)||this;return i._barSize=20,i._pointerIsOver=!1,i._wheelPrecision=.05,i.onDirtyObservable.add(function(){i._horizontalBarSpace.color=i.color,i._verticalBarSpace.color=i.color,i._dragSpace.color=i.color}),i.onPointerEnterObservable.add(function(){i._pointerIsOver=!0}),i.onPointerOutObservable.add(function(){i._pointerIsOver=!1}),i._grid=new O,i._horizontalBar=new B,i._verticalBar=new B,i._window=new N,i._window.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,i._window.verticalAlignment=_.VERTICAL_ALIGNMENT_TOP,i._grid.addColumnDefinition(1),i._grid.addColumnDefinition(0,!0),i._grid.addRowDefinition(1),i._grid.addRowDefinition(0,!0),t.prototype.addControl.call(i,i._grid),i._grid.addControl(i._window,0,0),i._verticalBar.paddingLeft=0,i._verticalBar.width=\"100%\",i._verticalBar.height=\"100%\",i._verticalBar.barOffset=0,i._verticalBar.value=0,i._verticalBar.maximum=1,i._verticalBar.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_CENTER,i._verticalBar.verticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,i._verticalBar.isVertical=!0,i._verticalBar.rotation=Math.PI,i._verticalBar.isVisible=!1,i._verticalBarSpace=new f,i._verticalBarSpace.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,i._verticalBarSpace.verticalAlignment=_.VERTICAL_ALIGNMENT_TOP,i._verticalBarSpace.thickness=1,i._grid.addControl(i._verticalBarSpace,0,1),i._verticalBarSpace.addControl(i._verticalBar),i._verticalBar.onValueChangedObservable.add(function(t){i._window.top=t*i._endTop+\"px\"}),i._horizontalBar.paddingLeft=0,i._horizontalBar.width=\"100%\",i._horizontalBar.height=\"100%\",i._horizontalBar.barOffset=0,i._horizontalBar.value=0,i._horizontalBar.maximum=1,i._horizontalBar.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_CENTER,i._horizontalBar.verticalAlignment=_.VERTICAL_ALIGNMENT_CENTER,i._horizontalBar.isVisible=!1,i._horizontalBarSpace=new f,i._horizontalBarSpace.horizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,i._horizontalBarSpace.verticalAlignment=_.VERTICAL_ALIGNMENT_TOP,i._horizontalBarSpace.thickness=1,i._grid.addControl(i._horizontalBarSpace,1,0),i._horizontalBarSpace.addControl(i._horizontalBar),i._horizontalBar.onValueChangedObservable.add(function(t){i._window.left=t*i._endLeft+\"px\"}),i._dragSpace=new f,i._dragSpace.thickness=1,i._grid.addControl(i._dragSpace,1,1),i.barColor=\"grey\",i.barBackground=\"transparent\",i}return n(e,t),Object.defineProperty(e.prototype,\"horizontalBar\",{get:function(){return this._horizontalBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"verticalBar\",{get:function(){return this._verticalBar},enumerable:!0,configurable:!0}),e.prototype.addControl=function(t){return t?(this._window.addControl(t),this):this},e.prototype.removeControl=function(t){return this._window.removeControl(t),this},Object.defineProperty(e.prototype,\"children\",{get:function(){return this._window.children},enumerable:!0,configurable:!0}),e.prototype._flagDescendantsAsMatrixDirty=function(){for(var t=0,e=this._children;t<e.length;t++){e[t]._markMatrixAsDirty()}},e.prototype.resetWindow=function(){this._window.width=\"100%\",this._window.height=\"100%\"},e.prototype._getTypeName=function(){return\"ScrollViewer\"},e.prototype._buildClientSizes=function(){this._window.parentClientWidth=this._currentMeasure.width-(this._verticalBar.isVisible?this._barSize:0)-2*this.thickness,this._window.parentClientHeight=this._currentMeasure.height-(this._horizontalBar.isVisible?this._barSize:0)-2*this.thickness,this._clientWidth=this._window.parentClientWidth,this._clientHeight=this._window.parentClientHeight},e.prototype._additionalProcessing=function(e,i){t.prototype._additionalProcessing.call(this,e,i),this._buildClientSizes()},e.prototype._postMeasure=function(){t.prototype._postMeasure.call(this),this._updateScroller()},Object.defineProperty(e.prototype,\"wheelPrecision\",{get:function(){return this._wheelPrecision},set:function(t){this._wheelPrecision!==t&&(t<0&&(t=0),t>1&&(t=1),this._wheelPrecision=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"barColor\",{get:function(){return this._barColor},set:function(t){this._barColor!==t&&(this._barColor=t,this._horizontalBar.color=t,this._verticalBar.color=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"barSize\",{get:function(){return this._barSize},set:function(t){this._barSize!==t&&(this._barSize=t,this._markAsDirty(),this._horizontalBar.isVisible&&this._grid.setRowDefinition(1,this._barSize,!0),this._verticalBar.isVisible&&this._grid.setColumnDefinition(1,this._barSize,!0))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"barBackground\",{get:function(){return this._barBackground},set:function(t){this._barBackground!==t&&(this._barBackground=t,this._horizontalBar.background=t,this._verticalBar.background=t,this._dragSpace.background=t)},enumerable:!0,configurable:!0}),e.prototype._updateScroller=function(){var t=this._window._currentMeasure.width,e=this._window._currentMeasure.height;this._horizontalBar.isVisible&&t<=this._clientWidth?(this._grid.setRowDefinition(1,0,!0),this._horizontalBar.isVisible=!1,this._horizontalBar.value=0,this._rebuildLayout=!0):!this._horizontalBar.isVisible&&t>this._clientWidth&&(this._grid.setRowDefinition(1,this._barSize,!0),this._horizontalBar.isVisible=!0,this._rebuildLayout=!0),this._verticalBar.isVisible&&e<=this._clientHeight?(this._grid.setColumnDefinition(1,0,!0),this._verticalBar.isVisible=!1,this._verticalBar.value=0,this._rebuildLayout=!0):!this._verticalBar.isVisible&&e>this._clientHeight&&(this._grid.setColumnDefinition(1,this._barSize,!0),this._verticalBar.isVisible=!0,this._rebuildLayout=!0),this._buildClientSizes(),this._endLeft=this._clientWidth-t,this._endTop=this._clientHeight-e;var i=this._horizontalBar.value*this._endLeft+\"px\",r=this._verticalBar.value*this._endTop+\"px\";i!==this._window.left&&(this._window.left=i,this._rebuildLayout=!0),r!==this._window.top&&(this._window.top=r,this._rebuildLayout=!0);var n=this._clientWidth/t,o=this._clientHeight/e;this._horizontalBar.thumbWidth=this._clientWidth*n+\"px\",this._verticalBar.thumbWidth=this._clientHeight*o+\"px\"},e.prototype._link=function(e){t.prototype._link.call(this,e),this._attachWheel()},e.prototype._attachWheel=function(){var t=this;if(this._host&&!this._onPointerObserver){var e=this._host.getScene();this._onPointerObserver=e.onPointerObservable.add(function(e,i){t._pointerIsOver&&e.type===h.PointerEventTypes.POINTERWHEEL&&(1==t._verticalBar.isVisible&&(e.event.deltaY<0&&t._verticalBar.value>0?t._verticalBar.value-=t._wheelPrecision:e.event.deltaY>0&&t._verticalBar.value<t._verticalBar.maximum&&(t._verticalBar.value+=t._wheelPrecision)),1==t._horizontalBar.isVisible&&(e.event.deltaX<0&&t._horizontalBar.value<t._horizontalBar.maximum?t._horizontalBar.value+=t._wheelPrecision:e.event.deltaX>0&&t._horizontalBar.value>0&&(t._horizontalBar.value-=t._wheelPrecision)))})}},e.prototype._renderHighlightSpecific=function(e){this.isHighlighted&&(t.prototype._renderHighlightSpecific.call(this,e),this._grid._renderHighlightSpecific(e),e.restore())},e.prototype.dispose=function(){var e=this._host.getScene();e&&this._onPointerObserver&&(e.onPointerObservable.remove(this._onPointerObserver),this._onPointerObserver=null),t.prototype.dispose.call(this)},e}(f),V=function(){return function(){}}(),F=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onKeyPressObservable=new h.Observable,e.defaultButtonWidth=\"40px\",e.defaultButtonHeight=\"40px\",e.defaultButtonPaddingLeft=\"2px\",e.defaultButtonPaddingRight=\"2px\",e.defaultButtonPaddingTop=\"2px\",e.defaultButtonPaddingBottom=\"2px\",e.defaultButtonColor=\"#DDD\",e.defaultButtonBackground=\"#070707\",e.shiftButtonColor=\"#7799FF\",e.selectedShiftThickness=1,e.shiftState=0,e._currentlyConnectedInputText=null,e._connectedInputTexts=[],e._onKeyPressObserver=null,e}return n(e,t),e.prototype._getTypeName=function(){return\"VirtualKeyboard\"},e.prototype._createKey=function(t,e){var i=this,r=b.CreateSimpleButton(t,t);return r.width=e&&e.width?e.width:this.defaultButtonWidth,r.height=e&&e.height?e.height:this.defaultButtonHeight,r.color=e&&e.color?e.color:this.defaultButtonColor,r.background=e&&e.background?e.background:this.defaultButtonBackground,r.paddingLeft=e&&e.paddingLeft?e.paddingLeft:this.defaultButtonPaddingLeft,r.paddingRight=e&&e.paddingRight?e.paddingRight:this.defaultButtonPaddingRight,r.paddingTop=e&&e.paddingTop?e.paddingTop:this.defaultButtonPaddingTop,r.paddingBottom=e&&e.paddingBottom?e.paddingBottom:this.defaultButtonPaddingBottom,r.thickness=0,r.isFocusInvisible=!0,r.shadowColor=this.shadowColor,r.shadowBlur=this.shadowBlur,r.shadowOffsetX=this.shadowOffsetX,r.shadowOffsetY=this.shadowOffsetY,r.onPointerUpObservable.add(function(){i.onKeyPressObservable.notifyObservers(t)}),r},e.prototype.addKeysRow=function(t,e){var i=new m;i.isVertical=!1,i.isFocusInvisible=!0;for(var r=null,n=0;n<t.length;n++){var o=null;e&&e.length===t.length&&(o=e[n]);var s=this._createKey(t[n],o);(!r||s.heightInPixels>r.heightInPixels)&&(r=s),i.addControl(s)}i.height=r?r.height:this.defaultButtonHeight,this.addControl(i)},e.prototype.applyShiftState=function(t){if(this.children)for(var e=0;e<this.children.length;e++){var i=this.children[e];if(i&&i.children)for(var r=i,n=0;n<r.children.length;n++){var o=r.children[n];if(o&&o.children[0]){var s=o.children[0];\"⇧\"===s.text&&(o.color=t?this.shiftButtonColor:this.defaultButtonColor,o.thickness=t>1?this.selectedShiftThickness:0),s.text=t>0?s.text.toUpperCase():s.text.toLowerCase()}}}},Object.defineProperty(e.prototype,\"connectedInputText\",{get:function(){return this._currentlyConnectedInputText},enumerable:!0,configurable:!0}),e.prototype.connect=function(t){var e=this;if(!this._connectedInputTexts.some(function(e){return e.input===t})){null===this._onKeyPressObserver&&(this._onKeyPressObserver=this.onKeyPressObservable.add(function(t){if(e._currentlyConnectedInputText){switch(e._currentlyConnectedInputText._host.focusedControl=e._currentlyConnectedInputText,t){case\"⇧\":return e.shiftState++,e.shiftState>2&&(e.shiftState=0),void e.applyShiftState(e.shiftState);case\"←\":return void e._currentlyConnectedInputText.processKey(8);case\"↵\":return void e._currentlyConnectedInputText.processKey(13)}e._currentlyConnectedInputText.processKey(-1,e.shiftState?t.toUpperCase():t),1===e.shiftState&&(e.shiftState=0,e.applyShiftState(e.shiftState))}})),this.isVisible=!1,this._currentlyConnectedInputText=t,t._connectedVirtualKeyboard=this;var i=t.onFocusObservable.add(function(){e._currentlyConnectedInputText=t,t._connectedVirtualKeyboard=e,e.isVisible=!0}),r=t.onBlurObservable.add(function(){t._connectedVirtualKeyboard=null,e._currentlyConnectedInputText=null,e.isVisible=!1});this._connectedInputTexts.push({input:t,onBlurObserver:r,onFocusObserver:i})}},e.prototype.disconnect=function(t){var e=this;if(t){var i=this._connectedInputTexts.filter(function(e){return e.input===t});1===i.length&&(this._removeConnectedInputObservables(i[0]),this._connectedInputTexts=this._connectedInputTexts.filter(function(e){return e.input!==t}),this._currentlyConnectedInputText===t&&(this._currentlyConnectedInputText=null))}else this._connectedInputTexts.forEach(function(t){e._removeConnectedInputObservables(t)}),this._connectedInputTexts=[];0===this._connectedInputTexts.length&&(this._currentlyConnectedInputText=null,this.onKeyPressObservable.remove(this._onKeyPressObserver),this._onKeyPressObserver=null)},e.prototype._removeConnectedInputObservables=function(t){t.input._connectedVirtualKeyboard=null,t.input.onFocusObservable.remove(t.onFocusObserver),t.input.onBlurObservable.remove(t.onBlurObserver)},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disconnect()},e.CreateDefaultLayout=function(t){var i=new e(t);return i.addKeysRow([\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"0\",\"←\"]),i.addKeysRow([\"q\",\"w\",\"e\",\"r\",\"t\",\"y\",\"u\",\"i\",\"o\",\"p\"]),i.addKeysRow([\"a\",\"s\",\"d\",\"f\",\"g\",\"h\",\"j\",\"k\",\"l\",\";\",\"'\",\"↵\"]),i.addKeysRow([\"⇧\",\"z\",\"x\",\"c\",\"v\",\"b\",\"n\",\"m\",\",\",\".\",\"/\"]),i.addKeysRow([\" \"],[{width:\"200px\"}]),i},e}(m),j=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._cellWidth=20,i._cellHeight=20,i._minorLineTickness=1,i._minorLineColor=\"DarkGray\",i._majorLineTickness=2,i._majorLineColor=\"White\",i._majorLineFrequency=5,i._background=\"Black\",i._displayMajorLines=!0,i._displayMinorLines=!0,i}return n(e,t),Object.defineProperty(e.prototype,\"displayMinorLines\",{get:function(){return this._displayMinorLines},set:function(t){this._displayMinorLines!==t&&(this._displayMinorLines=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"displayMajorLines\",{get:function(){return this._displayMajorLines},set:function(t){this._displayMajorLines!==t&&(this._displayMajorLines=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"background\",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cellWidth\",{get:function(){return this._cellWidth},set:function(t){this._cellWidth=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"cellHeight\",{get:function(){return this._cellHeight},set:function(t){this._cellHeight=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"minorLineTickness\",{get:function(){return this._minorLineTickness},set:function(t){this._minorLineTickness=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"minorLineColor\",{get:function(){return this._minorLineColor},set:function(t){this._minorLineColor=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"majorLineTickness\",{get:function(){return this._majorLineTickness},set:function(t){this._majorLineTickness=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"majorLineColor\",{get:function(){return this._majorLineColor},set:function(t){this._majorLineColor=t,this._markAsDirty()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"majorLineFrequency\",{get:function(){return this._majorLineFrequency},set:function(t){this._majorLineFrequency=t,this._markAsDirty()},enumerable:!0,configurable:!0}),e.prototype._draw=function(t){if(t.save(),this._applyStates(t),this._isEnabled){this._background&&(t.fillStyle=this._background,t.fillRect(this._currentMeasure.left,this._currentMeasure.top,this._currentMeasure.width,this._currentMeasure.height));var e=this._currentMeasure.width/this._cellWidth,i=this._currentMeasure.height/this._cellHeight,r=this._currentMeasure.left+this._currentMeasure.width/2,n=this._currentMeasure.top+this._currentMeasure.height/2;if(this._displayMinorLines){t.strokeStyle=this._minorLineColor,t.lineWidth=this._minorLineTickness;for(var o=-e/2;o<e/2;o++){var s=r+o*this.cellWidth;t.beginPath(),t.moveTo(s,this._currentMeasure.top),t.lineTo(s,this._currentMeasure.top+this._currentMeasure.height),t.stroke()}for(var h=-i/2;h<i/2;h++){var a=n+h*this.cellHeight;t.beginPath(),t.moveTo(this._currentMeasure.left,a),t.lineTo(this._currentMeasure.left+this._currentMeasure.width,a),t.stroke()}}if(this._displayMajorLines){t.strokeStyle=this._majorLineColor,t.lineWidth=this._majorLineTickness;for(o=-e/2+this._majorLineFrequency;o<e/2;o+=this._majorLineFrequency){s=r+o*this.cellWidth;t.beginPath(),t.moveTo(s,this._currentMeasure.top),t.lineTo(s,this._currentMeasure.top+this._currentMeasure.height),t.stroke()}for(h=-i/2+this._majorLineFrequency;h<i/2;h+=this._majorLineFrequency){a=n+h*this.cellHeight;t.moveTo(this._currentMeasure.left,a),t.lineTo(this._currentMeasure.left+this._currentMeasure.width,a),t.closePath(),t.stroke()}}}t.restore()},e.prototype._getTypeName=function(){return\"DisplayGrid\"},e}(_),W=function(t){function e(e){var i=t.call(this,e)||this;return i.name=e,i._tempMeasure=new l(0,0,0,0),i}return n(e,t),Object.defineProperty(e.prototype,\"displayThumb\",{get:function(){return this._displayThumb&&null!=this.thumbImage},set:function(t){this._displayThumb!==t&&(this._displayThumb=t,this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"backgroundImage\",{get:function(){return this._backgroundImage},set:function(t){var e=this;this._backgroundImage!==t&&(this._backgroundImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){return e._markAsDirty()}),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"valueBarImage\",{get:function(){return this._valueBarImage},set:function(t){var e=this;this._valueBarImage!==t&&(this._valueBarImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){return e._markAsDirty()}),this._markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"thumbImage\",{get:function(){return this._thumbImage},set:function(t){var e=this;this._thumbImage!==t&&(this._thumbImage=t,t&&!t.isLoaded&&t.onImageLoadedObservable.addOnce(function(){return e._markAsDirty()}),this._markAsDirty())},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"ImageBasedSlider\"},e.prototype._draw=function(t){t.save(),this._applyStates(t),this._prepareRenderingData(\"rectangle\");var e=this._getThumbPosition(),i=this._renderLeft,r=this._renderTop,n=this._renderWidth,o=this._renderHeight;this._backgroundImage&&(this._tempMeasure.copyFromFloats(i,r,n,o),this.isThumbClamped&&this.displayThumb&&(this.isVertical?this._tempMeasure.height+=this._effectiveThumbThickness:this._tempMeasure.width+=this._effectiveThumbThickness),this._backgroundImage._currentMeasure.copyFrom(this._tempMeasure),this._backgroundImage._draw(t)),this._valueBarImage&&(this.isVertical?this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(i,r+e,n,o-e+this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(i,r+e,n,o-e):this.isThumbClamped&&this.displayThumb?this._tempMeasure.copyFromFloats(i,r,e+this._effectiveThumbThickness/2,o):this._tempMeasure.copyFromFloats(i,r,e,o),this._valueBarImage._currentMeasure.copyFrom(this._tempMeasure),this._valueBarImage._draw(t)),this.displayThumb&&(this.isVertical?this._tempMeasure.copyFromFloats(i-this._effectiveBarOffset,this._currentMeasure.top+e,this._currentMeasure.width,this._effectiveThumbThickness):this._tempMeasure.copyFromFloats(this._currentMeasure.left+e,this._currentMeasure.top,this._effectiveThumbThickness,this._currentMeasure.height),this._thumbImage._currentMeasure.copyFrom(this._tempMeasure),this._thumbImage._draw(t)),t.restore()},e}(I);_.AddHeader=function(t,e,i,r){var n=new m(\"panel\"),o=!r||r.isHorizontal,s=!r||r.controlFirst;n.isVertical=!o;var h=new p(\"header\");return h.text=e,h.textHorizontalAlignment=_.HORIZONTAL_ALIGNMENT_LEFT,o?h.width=i:h.height=i,s?(n.addControl(t),n.addControl(h),h.paddingLeft=\"5px\"):(n.addControl(h),n.addControl(t),h.paddingRight=\"5px\"),h.shadowBlur=t.shadowBlur,h.shadowColor=t.shadowColor,h.shadowOffsetX=t.shadowOffsetX,h.shadowOffsetY=t.shadowOffsetY,n};var z=function(){function t(t){this._fontFamily=\"Arial\",this._fontStyle=\"\",this._fontWeight=\"\",this._fontSize=new a(18,a.UNITMODE_PIXEL,!1),this.onChangedObservable=new h.Observable,this._host=t}return Object.defineProperty(t.prototype,\"fontSize\",{get:function(){return this._fontSize.toString(this._host)},set:function(t){this._fontSize.toString(this._host)!==t&&this._fontSize.fromString(t)&&this.onChangedObservable.notifyObservers(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontFamily\",{get:function(){return this._fontFamily},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this.onChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontStyle\",{get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.onChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"fontWeight\",{get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.onChangedObservable.notifyObservers(this))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.onChangedObservable.clear()},t}(),G=function(t){function e(e,i,r,n,o,s){void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===s&&(s=h.Texture.NEAREST_SAMPLINGMODE);var a=t.call(this,e,{width:i,height:r},n,o,s,h.Engine.TEXTUREFORMAT_RGBA)||this;return a._isDirty=!1,a._rootContainer=new d(\"root\"),a._lastControlOver={},a._lastControlDown={},a._capturingControl={},a._linkedControls=new Array,a._isFullscreen=!1,a._fullscreenViewport=new h.Viewport(0,0,1,1),a._idealWidth=0,a._idealHeight=0,a._useSmallestIdeal=!1,a._renderAtIdealSize=!1,a._blockNextFocusCheck=!1,a._renderScale=1,a._cursorChanged=!1,a._clipboardData=\"\",a.onClipboardObservable=new h.Observable,a.onControlPickedObservable=new h.Observable,a.onBeginLayoutObservable=new h.Observable,a.onEndLayoutObservable=new h.Observable,a.onBeginRenderObservable=new h.Observable,a.onEndRenderObservable=new h.Observable,a.premulAlpha=!1,a._useInvalidateRectOptimization=!0,a._invalidatedRectangle=null,a._clearMeasure=new l(0,0,0,0),a.onClipboardCopy=function(t){var e=t,i=new h.ClipboardInfo(h.ClipboardEventTypes.COPY,e);a.onClipboardObservable.notifyObservers(i),e.preventDefault()},a.onClipboardCut=function(t){var e=t,i=new h.ClipboardInfo(h.ClipboardEventTypes.CUT,e);a.onClipboardObservable.notifyObservers(i),e.preventDefault()},a.onClipboardPaste=function(t){var e=t,i=new h.ClipboardInfo(h.ClipboardEventTypes.PASTE,e);a.onClipboardObservable.notifyObservers(i),e.preventDefault()},(n=a.getScene())&&a._texture?(a._rootCanvas=n.getEngine().getRenderingCanvas(),a._renderObserver=n.onBeforeCameraRenderObservable.add(function(t){return a._checkUpdate(t)}),a._preKeyboardObserver=n.onPreKeyboardObservable.add(function(t){a._focusedControl&&(t.type===h.KeyboardEventTypes.KEYDOWN&&a._focusedControl.processKeyboard(t.event),t.skipOnPointerObservable=!0)}),a._rootContainer._link(a),a.hasAlpha=!0,i&&r||(a._resizeObserver=n.getEngine().onResizeObservable.add(function(){return a._onResize()}),a._onResize()),a._texture.isReady=!0,a):a}return n(e,t),Object.defineProperty(e.prototype,\"renderScale\",{get:function(){return this._renderScale},set:function(t){t!==this._renderScale&&(this._renderScale=t,this._onResize())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"background\",{get:function(){return this._background},set:function(t){this._background!==t&&(this._background=t,this.markAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"idealWidth\",{get:function(){return this._idealWidth},set:function(t){this._idealWidth!==t&&(this._idealWidth=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"idealHeight\",{get:function(){return this._idealHeight},set:function(t){this._idealHeight!==t&&(this._idealHeight=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"useSmallestIdeal\",{get:function(){return this._useSmallestIdeal},set:function(t){this._useSmallestIdeal!==t&&(this._useSmallestIdeal=t,this.markAsDirty(),this._rootContainer._markAllAsDirty())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"renderAtIdealSize\",{get:function(){return this._renderAtIdealSize},set:function(t){this._renderAtIdealSize!==t&&(this._renderAtIdealSize=t,this._onResize())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"layer\",{get:function(){return this._layerToDispose},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"rootContainer\",{get:function(){return this._rootContainer},enumerable:!0,configurable:!0}),e.prototype.getChildren=function(){return[this._rootContainer]},e.prototype.getDescendants=function(t,e){return this._rootContainer.getDescendants(t,e)},Object.defineProperty(e.prototype,\"focusedControl\",{get:function(){return this._focusedControl},set:function(t){this._focusedControl!=t&&(this._focusedControl&&this._focusedControl.onBlur(),t&&t.onFocus(),this._focusedControl=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"isForeground\",{get:function(){return!this.layer||!this.layer.isBackground},set:function(t){this.layer&&this.layer.isBackground!==!t&&(this.layer.isBackground=!t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"clipboardData\",{get:function(){return this._clipboardData},set:function(t){this._clipboardData=t},enumerable:!0,configurable:!0}),e.prototype.getClassName=function(){return\"AdvancedDynamicTexture\"},e.prototype.executeOnAllControls=function(t,e){e||(e=this._rootContainer),t(e);for(var i=0,r=e.children;i<r.length;i++){var n=r[i];n.children?this.executeOnAllControls(t,n):t(n)}},Object.defineProperty(e.prototype,\"useInvalidateRectOptimization\",{get:function(){return this._useInvalidateRectOptimization},set:function(t){this._useInvalidateRectOptimization=t},enumerable:!0,configurable:!0}),e.prototype.invalidateRect=function(t,e,i,r){if(this._useInvalidateRectOptimization)if(this._invalidatedRectangle){var n=Math.ceil(Math.max(this._invalidatedRectangle.left+this._invalidatedRectangle.width-1,i)),o=Math.ceil(Math.max(this._invalidatedRectangle.top+this._invalidatedRectangle.height-1,r));this._invalidatedRectangle.left=Math.floor(Math.min(this._invalidatedRectangle.left,t)),this._invalidatedRectangle.top=Math.floor(Math.min(this._invalidatedRectangle.top,e)),this._invalidatedRectangle.width=n-this._invalidatedRectangle.left+1,this._invalidatedRectangle.height=o-this._invalidatedRectangle.top+1}else this._invalidatedRectangle=new l(t,e,i-t+1,r-e+1)},e.prototype.markAsDirty=function(){this._isDirty=!0},e.prototype.createStyle=function(){return new z(this)},e.prototype.addControl=function(t){return this._rootContainer.addControl(t),this},e.prototype.removeControl=function(t){return this._rootContainer.removeControl(t),this},e.prototype.dispose=function(){var e=this.getScene();e&&(this._rootCanvas=null,e.onBeforeCameraRenderObservable.remove(this._renderObserver),this._resizeObserver&&e.getEngine().onResizeObservable.remove(this._resizeObserver),this._pointerMoveObserver&&e.onPrePointerObservable.remove(this._pointerMoveObserver),this._pointerObserver&&e.onPointerObservable.remove(this._pointerObserver),this._preKeyboardObserver&&e.onPreKeyboardObservable.remove(this._preKeyboardObserver),this._canvasPointerOutObserver&&e.getEngine().onCanvasPointerOutObservable.remove(this._canvasPointerOutObserver),this._layerToDispose&&(this._layerToDispose.texture=null,this._layerToDispose.dispose(),this._layerToDispose=null),this._rootContainer.dispose(),this.onClipboardObservable.clear(),this.onControlPickedObservable.clear(),this.onBeginRenderObservable.clear(),this.onEndRenderObservable.clear(),this.onBeginLayoutObservable.clear(),this.onEndLayoutObservable.clear(),t.prototype.dispose.call(this))},e.prototype._onResize=function(){var t=this.getScene();if(t){var e=t.getEngine(),i=this.getSize(),r=e.getRenderWidth()*this._renderScale,n=e.getRenderHeight()*this._renderScale;this._renderAtIdealSize&&(this._idealWidth?(n=n*this._idealWidth/r,r=this._idealWidth):this._idealHeight&&(r=r*this._idealHeight/n,n=this._idealHeight)),i.width===r&&i.height===n||(this.scaleTo(r,n),this.markAsDirty(),(this._idealWidth||this._idealHeight)&&this._rootContainer._markAllAsDirty()),this.invalidateRect(0,0,i.width-1,i.height-1)}},e.prototype._getGlobalViewport=function(t){var e=t.getEngine();return this._fullscreenViewport.toGlobal(e.getRenderWidth(),e.getRenderHeight())},e.prototype.getProjectedPosition=function(t,e){var i=this.getScene();if(!i)return h.Vector2.Zero();var r=this._getGlobalViewport(i),n=h.Vector3.Project(t,e,i.getTransformMatrix(),r);return n.scaleInPlace(this.renderScale),new h.Vector2(n.x,n.y)},e.prototype._checkUpdate=function(t){if(!this._layerToDispose||0!=(t.layerMask&this._layerToDispose.layerMask)){if(this._isFullscreen&&this._linkedControls.length){var e=this.getScene();if(!e)return;for(var i=this._getGlobalViewport(e),r=0,n=this._linkedControls;r<n.length;r++){var o=n[r];if(o.isVisible){var s=o._linkedMesh;if(s&&!s.isDisposed()){var a=s.getBoundingInfo?s.getBoundingInfo().boundingSphere.center:s.getAbsolutePosition(),l=h.Vector3.Project(a,s.getWorldMatrix(),e.getTransformMatrix(),i);l.z<0||l.z>1?o.notRenderable=!0:(o.notRenderable=!1,l.scaleInPlace(this.renderScale),o._moveToProjectedPosition(l))}else h.Tools.SetImmediate(function(){o.linkWithMesh(null)})}}}(this._isDirty||this._rootContainer.isDirty)&&(this._isDirty=!1,this._render(),this.update(!0,this.premulAlpha))}},e.prototype._render=function(){var t=this.getSize(),e=t.width,i=t.height,r=this.getContext();r.font=\"18px Arial\",r.strokeStyle=\"white\",this.onBeginLayoutObservable.notifyObservers(this);var n=new l(0,0,e,i);this._rootContainer._layout(n,r),this.onEndLayoutObservable.notifyObservers(this),this._isDirty=!1,this._invalidatedRectangle?this._clearMeasure.copyFrom(this._invalidatedRectangle):this._clearMeasure.copyFromFloats(0,0,e,i),r.clearRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),this._background&&(r.save(),r.fillStyle=this._background,r.fillRect(this._clearMeasure.left,this._clearMeasure.top,this._clearMeasure.width,this._clearMeasure.height),r.restore()),this.onBeginRenderObservable.notifyObservers(this),this._rootContainer._render(r,this._invalidatedRectangle),this.onEndRenderObservable.notifyObservers(this),this._invalidatedRectangle=null},e.prototype._changeCursor=function(t){this._rootCanvas&&(this._rootCanvas.style.cursor=t,this._cursorChanged=!0)},e.prototype._registerLastControlDown=function(t,e){this._lastControlDown[e]=t,this.onControlPickedObservable.notifyObservers(t)},e.prototype._doPicking=function(t,e,i,r,n){var o=this.getScene();if(o){var s=o.getEngine(),a=this.getSize();if(this._isFullscreen){var l=(o.cameraToUseForPointers||o.activeCamera).viewport;t*=a.width/(s.getRenderWidth()*l.width),e*=a.height/(s.getRenderHeight()*l.height)}this._capturingControl[r]?this._capturingControl[r]._processObservables(i,t,e,r,n):(this._cursorChanged=!1,this._rootContainer._processPicking(t,e,i,r,n)||(this._changeCursor(\"\"),i===h.PointerEventTypes.POINTERMOVE&&this._lastControlOver[r]&&(this._lastControlOver[r]._onPointerOut(this._lastControlOver[r]),delete this._lastControlOver[r])),this._cursorChanged||this._changeCursor(\"\"),this._manageFocus())}},e.prototype._cleanControlAfterRemovalFromList=function(t,e){for(var i in t){if(t.hasOwnProperty(i))t[i]===e&&delete t[i]}},e.prototype._cleanControlAfterRemoval=function(t){this._cleanControlAfterRemovalFromList(this._lastControlDown,t),this._cleanControlAfterRemovalFromList(this._lastControlOver,t)},e.prototype.attach=function(){var t=this,e=this.getScene();if(e){var i=new h.Viewport(0,0,0,0);this._pointerMoveObserver=e.onPrePointerObservable.add(function(r,n){if(!e.isPointerCaptured(r.event.pointerId)&&(r.type===h.PointerEventTypes.POINTERMOVE||r.type===h.PointerEventTypes.POINTERUP||r.type===h.PointerEventTypes.POINTERDOWN)&&e){var o=e.cameraToUseForPointers||e.activeCamera,s=e.getEngine();o?o.viewport.toGlobalToRef(s.getRenderWidth(),s.getRenderHeight(),i):(i.x=0,i.y=0,i.width=s.getRenderWidth(),i.height=s.getRenderHeight());var a=e.pointerX/s.getHardwareScalingLevel()-i.x,l=e.pointerY/s.getHardwareScalingLevel()-(s.getRenderHeight()-i.y-i.height);t._shouldBlockPointer=!1,t._doPicking(a,l,r.type,r.event.pointerId||0,r.event.button),t._shouldBlockPointer&&(r.skipOnPointerObservable=t._shouldBlockPointer)}}),this._attachToOnPointerOut(e)}},e.prototype.registerClipboardEvents=function(){self.addEventListener(\"copy\",this.onClipboardCopy,!1),self.addEventListener(\"cut\",this.onClipboardCut,!1),self.addEventListener(\"paste\",this.onClipboardPaste,!1)},e.prototype.unRegisterClipboardEvents=function(){self.removeEventListener(\"copy\",this.onClipboardCopy),self.removeEventListener(\"cut\",this.onClipboardCut),self.removeEventListener(\"paste\",this.onClipboardPaste)},e.prototype.attachToMesh=function(t,e){var i=this;void 0===e&&(e=!0);var r=this.getScene();r&&(this._pointerObserver=r.onPointerObservable.add(function(e,r){if(e.type===h.PointerEventTypes.POINTERMOVE||e.type===h.PointerEventTypes.POINTERUP||e.type===h.PointerEventTypes.POINTERDOWN){var n=e.event.pointerId||0;if(e.pickInfo&&e.pickInfo.hit&&e.pickInfo.pickedMesh===t){var o=e.pickInfo.getTextureCoordinates();if(o){var s=i.getSize();i._doPicking(o.x*s.width,(1-o.y)*s.height,e.type,n,e.event.button)}}else if(e.type===h.PointerEventTypes.POINTERUP){if(i._lastControlDown[n]&&i._lastControlDown[n]._forcePointerUp(n),delete i._lastControlDown[n],i.focusedControl){var a=i.focusedControl.keepsFocusWith(),l=!0;if(a)for(var u=0,c=a;u<c.length;u++){var _=c[u];if(i!==_._host){var d=_._host;if(d._lastControlOver[n]&&d._lastControlOver[n].isAscendant(_)){l=!1;break}}}l&&(i.focusedControl=null)}}else e.type===h.PointerEventTypes.POINTERMOVE&&(i._lastControlOver[n]&&i._lastControlOver[n]._onPointerOut(i._lastControlOver[n],!0),delete i._lastControlOver[n])}}),t.enablePointerMoveEvents=e,this._attachToOnPointerOut(r))},e.prototype.moveFocusToControl=function(t){this.focusedControl=t,this._lastPickedControl=t,this._blockNextFocusCheck=!0},e.prototype._manageFocus=function(){if(this._blockNextFocusCheck)return this._blockNextFocusCheck=!1,void(this._lastPickedControl=this._focusedControl);if(this._focusedControl&&this._focusedControl!==this._lastPickedControl){if(this._lastPickedControl.isFocusInvisible)return;this.focusedControl=null}},e.prototype._attachToOnPointerOut=function(t){var e=this;this._canvasPointerOutObserver=t.getEngine().onCanvasPointerOutObservable.add(function(t){e._lastControlOver[t.pointerId]&&e._lastControlOver[t.pointerId]._onPointerOut(e._lastControlOver[t.pointerId]),delete e._lastControlOver[t.pointerId],e._lastControlDown[t.pointerId]&&e._lastControlDown[t.pointerId]!==e._capturingControl[t.pointerId]&&(e._lastControlDown[t.pointerId]._forcePointerUp(),delete e._lastControlDown[t.pointerId])})},e.CreateForMesh=function(t,i,r,n,o){void 0===i&&(i=1024),void 0===r&&(r=1024),void 0===n&&(n=!0),void 0===o&&(o=!1);var s=new e(t.name+\" AdvancedDynamicTexture\",i,r,t.getScene(),!0,h.Texture.TRILINEAR_SAMPLINGMODE),a=new h.StandardMaterial(\"AdvancedDynamicTextureMaterial\",t.getScene());return a.backFaceCulling=!1,a.diffuseColor=h.Color3.Black(),a.specularColor=h.Color3.Black(),o?(a.diffuseTexture=s,a.emissiveTexture=s,s.hasAlpha=!0):(a.emissiveTexture=s,a.opacityTexture=s),t.material=a,s.attachToMesh(t,n),s},e.CreateFullscreenUI=function(t,i,r,n){void 0===i&&(i=!0),void 0===r&&(r=null),void 0===n&&(n=h.Texture.BILINEAR_SAMPLINGMODE);var o=new e(t,0,0,r,!1,n),s=new h.Layer(t+\"_layer\",null,r,!i);return s.texture=o,o._layerToDispose=s,o._isFullscreen=!0,o.attach(),o},e}(h.DynamicTexture),X=function(){function t(t){this.texture=t,this._captureRenderTime=!1,this._renderTime=new h.PerfCounter,this._captureLayoutTime=!1,this._layoutTime=new h.PerfCounter,this._onBeginRenderObserver=null,this._onEndRenderObserver=null,this._onBeginLayoutObserver=null,this._onEndLayoutObserver=null}return Object.defineProperty(t.prototype,\"renderTimeCounter\",{get:function(){return this._renderTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"layoutTimeCounter\",{get:function(){return this._layoutTime},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"captureRenderTime\",{get:function(){return this._captureRenderTime},set:function(t){var e=this;t!==this._captureRenderTime&&(this._captureRenderTime=t,t?(this._onBeginRenderObserver=this.texture.onBeginRenderObservable.add(function(){e._renderTime.beginMonitoring()}),this._onEndRenderObserver=this.texture.onEndRenderObservable.add(function(){e._renderTime.endMonitoring(!0)})):(this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"captureLayoutTime\",{get:function(){return this._captureLayoutTime},set:function(t){var e=this;t!==this._captureLayoutTime&&(this._captureLayoutTime=t,t?(this._onBeginLayoutObserver=this.texture.onBeginLayoutObservable.add(function(){e._layoutTime.beginMonitoring()}),this._onEndLayoutObserver=this.texture.onEndLayoutObservable.add(function(){e._layoutTime.endMonitoring(!0)})):(this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null))},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.texture.onBeginRenderObservable.remove(this._onBeginRenderObserver),this._onBeginRenderObserver=null,this.texture.onEndRenderObservable.remove(this._onEndRenderObserver),this._onEndRenderObserver=null,this.texture.onBeginLayoutObservable.remove(this._onBeginLayoutObserver),this._onBeginLayoutObserver=null,this.texture.onEndLayoutObservable.remove(this._onEndLayoutObserver),this._onEndLayoutObserver=null,this.texture=null},t}(),Y=function(t){function e(e,i){void 0===i&&(i=0);var r=t.call(this,e.x,e.y,e.z)||this;return r.buttonIndex=i,r}return n(e,t),e}(h.Vector3),U=function(){function t(t){this.name=t,this._downCount=0,this._enterCount=-1,this._downPointerIds={},this._isVisible=!0,this.onPointerMoveObservable=new h.Observable,this.onPointerOutObservable=new h.Observable,this.onPointerDownObservable=new h.Observable,this.onPointerUpObservable=new h.Observable,this.onPointerClickObservable=new h.Observable,this.onPointerEnterObservable=new h.Observable,this._behaviors=new Array}return Object.defineProperty(t.prototype,\"position\",{get:function(){return this._node?this._node.position:h.Vector3.Zero()},set:function(t){this._node&&(this._node.position=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"scaling\",{get:function(){return this._node?this._node.scaling:new h.Vector3(1,1,1)},set:function(t){this._node&&(this._node.scaling=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"behaviors\",{get:function(){return this._behaviors},enumerable:!0,configurable:!0}),t.prototype.addBehavior=function(t){var e=this;if(-1!==this._behaviors.indexOf(t))return this;t.init();var i=this._host.scene;return i.isLoading?i.onDataLoadedObservable.addOnce(function(){t.attach(e)}):t.attach(this),this._behaviors.push(t),this},t.prototype.removeBehavior=function(t){var e=this._behaviors.indexOf(t);return-1===e?this:(this._behaviors[e].detach(),this._behaviors.splice(e,1),this)},t.prototype.getBehaviorByName=function(t){for(var e=0,i=this._behaviors;e<i.length;e++){var r=i[e];if(r.name===t)return r}return null},Object.defineProperty(t.prototype,\"isVisible\",{get:function(){return this._isVisible},set:function(t){if(this._isVisible!==t){this._isVisible=t;var e=this.mesh;e&&e.setEnabled(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"typeName\",{get:function(){return this._getTypeName()},enumerable:!0,configurable:!0}),t.prototype.getClassName=function(){return this._getTypeName()},t.prototype._getTypeName=function(){return\"Control3D\"},Object.defineProperty(t.prototype,\"node\",{get:function(){return this._node},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"mesh\",{get:function(){return this._node instanceof h.AbstractMesh?this._node:null},enumerable:!0,configurable:!0}),t.prototype.linkToTransformNode=function(t){return this._node&&(this._node.parent=t),this},t.prototype._prepareNode=function(t){if(!this._node){if(this._node=this._createNode(t),!this.node)return;this._node.metadata=this,this._node.position=this.position,this._node.scaling=this.scaling;var e=this.mesh;e&&(e.isPickable=!0,this._affectMaterial(e))}},t.prototype._createNode=function(t){return null},t.prototype._affectMaterial=function(t){t.material=null},t.prototype._onPointerMove=function(t,e){this.onPointerMoveObservable.notifyObservers(e,-1,t,this)},t.prototype._onPointerEnter=function(t){return!(this._enterCount>0)&&(-1===this._enterCount&&(this._enterCount=0),this._enterCount++,this.onPointerEnterObservable.notifyObservers(this,-1,t,this),this.pointerEnterAnimation&&this.pointerEnterAnimation(),!0)},t.prototype._onPointerOut=function(t){this._enterCount=0,this.onPointerOutObservable.notifyObservers(this,-1,t,this),this.pointerOutAnimation&&this.pointerOutAnimation()},t.prototype._onPointerDown=function(t,e,i,r){return 0!==this._downCount?(this._downCount++,!1):(this._downCount++,this._downPointerIds[i]=!0,this.onPointerDownObservable.notifyObservers(new Y(e,r),-1,t,this),this.pointerDownAnimation&&this.pointerDownAnimation(),!0)},t.prototype._onPointerUp=function(t,e,i,r,n){this._downCount--,delete this._downPointerIds[i],this._downCount<0?this._downCount=0:0==this._downCount&&(n&&(this._enterCount>0||-1===this._enterCount)&&this.onPointerClickObservable.notifyObservers(new Y(e,r),-1,t,this),this.onPointerUpObservable.notifyObservers(new Y(e,r),-1,t,this),this.pointerUpAnimation&&this.pointerUpAnimation())},t.prototype.forcePointerUp=function(t){if(void 0===t&&(t=null),null!==t)this._onPointerUp(this,h.Vector3.Zero(),t,0,!0);else{for(var e in this._downPointerIds)this._onPointerUp(this,h.Vector3.Zero(),+e,0,!0);this._downCount>0&&(this._downCount=1,this._onPointerUp(this,h.Vector3.Zero(),0,0,!0))}},t.prototype._processObservables=function(t,e,i,r){if(t===h.PointerEventTypes.POINTERMOVE){this._onPointerMove(this,e);var n=this._host._lastControlOver[i];return n&&n!==this&&n._onPointerOut(this),n!==this&&this._onPointerEnter(this),this._host._lastControlOver[i]=this,!0}return t===h.PointerEventTypes.POINTERDOWN?(this._onPointerDown(this,e,i,r),this._host._lastControlDown[i]=this,this._host._lastPickedControl=this,!0):t===h.PointerEventTypes.POINTERUP&&(this._host._lastControlDown[i]&&this._host._lastControlDown[i]._onPointerUp(this,e,i,r,!0),delete this._host._lastControlDown[i],!0)},t.prototype._disposeNode=function(){this._node&&(this._node.dispose(),this._node=null)},t.prototype.dispose=function(){this.onPointerDownObservable.clear(),this.onPointerEnterObservable.clear(),this.onPointerMoveObservable.clear(),this.onPointerOutObservable.clear(),this.onPointerUpObservable.clear(),this.onPointerClickObservable.clear(),this._disposeNode();for(var t=0,e=this._behaviors;t<e.length;t++){e[t].detach()}},t}(),K=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype._getTypeName=function(){return\"AbstractButton3D\"},e.prototype._createNode=function(t){return new h.TransformNode(\"button\"+this.name)},e}(U),q=function(t){function e(e){var i=t.call(this,e)||this;return i._contentResolution=512,i._contentScaleRatio=2,i.pointerEnterAnimation=function(){i.mesh&&(i._currentMaterial.emissiveColor=h.Color3.Red())},i.pointerOutAnimation=function(){i._currentMaterial.emissiveColor=h.Color3.Black()},i.pointerDownAnimation=function(){i.mesh&&i.mesh.scaling.scaleInPlace(.95)},i.pointerUpAnimation=function(){i.mesh&&i.mesh.scaling.scaleInPlace(1/.95)},i}return n(e,t),Object.defineProperty(e.prototype,\"contentResolution\",{get:function(){return this._contentResolution},set:function(t){this._contentResolution!==t&&(this._contentResolution=t,this._resetContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"contentScaleRatio\",{get:function(){return this._contentScaleRatio},set:function(t){this._contentScaleRatio!==t&&(this._contentScaleRatio=t,this._resetContent())},enumerable:!0,configurable:!0}),e.prototype._disposeFacadeTexture=function(){this._facadeTexture&&(this._facadeTexture.dispose(),this._facadeTexture=null)},e.prototype._resetContent=function(){this._disposeFacadeTexture(),this.content=this._content},Object.defineProperty(e.prototype,\"content\",{get:function(){return this._content},set:function(t){this._content=t,this._host&&this._host.utilityLayer&&(this._facadeTexture||(this._facadeTexture=new G(\"Facade\",this._contentResolution,this._contentResolution,this._host.utilityLayer.utilityLayerScene,!0,h.Texture.TRILINEAR_SAMPLINGMODE),this._facadeTexture.rootContainer.scaleX=this._contentScaleRatio,this._facadeTexture.rootContainer.scaleY=this._contentScaleRatio,this._facadeTexture.premulAlpha=!0),this._facadeTexture.addControl(t),this._applyFacade(this._facadeTexture))},enumerable:!0,configurable:!0}),e.prototype._applyFacade=function(t){this._currentMaterial.emissiveTexture=t},e.prototype._getTypeName=function(){return\"Button3D\"},e.prototype._createNode=function(t){for(var e=new Array(6),i=0;i<6;i++)e[i]=new h.Vector4(0,0,0,0);return e[1]=new h.Vector4(0,0,1,1),h.BoxBuilder.CreateBox(this.name+\"_rootMesh\",{width:1,height:1,depth:.08,faceUV:e},t)},e.prototype._affectMaterial=function(t){var e=new h.StandardMaterial(this.name+\"Material\",t.getScene());e.specularColor=h.Color3.Black(),t.material=e,this._currentMaterial=e,this._resetContent()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeFacadeTexture(),this._currentMaterial&&this._currentMaterial.dispose()},e}(K),Z=function(t){function e(e){var i=t.call(this,e)||this;return i._blockLayout=!1,i._children=new Array,i}return n(e,t),Object.defineProperty(e.prototype,\"children\",{get:function(){return this._children},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"blockLayout\",{get:function(){return this._blockLayout},set:function(t){this._blockLayout!==t&&(this._blockLayout=t,this._blockLayout||this._arrangeChildren())},enumerable:!0,configurable:!0}),e.prototype.updateLayout=function(){return this._arrangeChildren(),this},e.prototype.containsControl=function(t){return-1!==this._children.indexOf(t)},e.prototype.addControl=function(t){return-1!==this._children.indexOf(t)?this:(t.parent=this,t._host=this._host,this._children.push(t),this._host.utilityLayer&&(t._prepareNode(this._host.utilityLayer.utilityLayerScene),t.node&&(t.node.parent=this.node),this.blockLayout||this._arrangeChildren()),this)},e.prototype._arrangeChildren=function(){},e.prototype._createNode=function(t){return new h.TransformNode(\"ContainerNode\",t)},e.prototype.removeControl=function(t){var e=this._children.indexOf(t);return-1!==e&&(this._children.splice(e,1),t.parent=null,t._disposeNode()),this},e.prototype._getTypeName=function(){return\"Container3D\"},e.prototype.dispose=function(){for(var e=0,i=this._children;e<i.length;e++){i[e].dispose()}this._children=[],t.prototype.dispose.call(this)},e.UNSET_ORIENTATION=0,e.FACEORIGIN_ORIENTATION=1,e.FACEORIGINREVERSED_ORIENTATION=2,e.FACEFORWARD_ORIENTATION=3,e.FACEFORWARDREVERSED_ORIENTATION=4,e}(U),J=function(t){function e(){var e=t.call(this)||this;return e._columns=10,e._rows=0,e._rowThenColum=!0,e._orientation=Z.FACEORIGIN_ORIENTATION,e.margin=0,e}return n(e,t),Object.defineProperty(e.prototype,\"orientation\",{get:function(){return this._orientation},set:function(t){var e=this;this._orientation!==t&&(this._orientation=t,h.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"columns\",{get:function(){return this._columns},set:function(t){var e=this;this._columns!==t&&(this._columns=t,this._rowThenColum=!0,h.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"rows\",{get:function(){return this._rows},set:function(t){var e=this;this._rows!==t&&(this._rows=t,this._rowThenColum=!1,h.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._arrangeChildren=function(){this._cellWidth=0,this._cellHeight=0;for(var t=0,e=0,i=0,r=h.Matrix.Invert(this.node.computeWorldMatrix(!0)),n=0,o=this._children;n<o.length;n++){if((m=o[n]).mesh){i++,m.mesh.computeWorldMatrix(!0);var s=m.mesh.getHierarchyBoundingVectors(),a=h.Tmp.Vector3[0],l=h.Tmp.Vector3[1];s.max.subtractToRef(s.min,l),l.scaleInPlace(.5),h.Vector3.TransformNormalToRef(l,r,a),this._cellWidth=Math.max(this._cellWidth,2*a.x),this._cellHeight=Math.max(this._cellHeight,2*a.y)}}this._cellWidth+=2*this.margin,this._cellHeight+=2*this.margin,this._rowThenColum?(e=this._columns,t=Math.ceil(i/this._columns)):(t=this._rows,e=Math.ceil(i/this._rows));var u=.5*e*this._cellWidth,c=.5*t*this._cellHeight,_=[],d=0;if(this._rowThenColum)for(var f=0;f<t;f++)for(var p=0;p<e&&(_.push(new h.Vector3(p*this._cellWidth-u+this._cellWidth/2,f*this._cellHeight-c+this._cellHeight/2,0)),!(++d>i));p++);else for(p=0;p<e;p++)for(f=0;f<t&&(_.push(new h.Vector3(p*this._cellWidth-u+this._cellWidth/2,f*this._cellHeight-c+this._cellHeight/2,0)),!(++d>i));f++);d=0;for(var g=0,b=this._children;g<b.length;g++){var m;(m=b[g]).mesh&&(this._mapGridNode(m,_[d]),d++)}this._finalProcessing()},e.prototype._finalProcessing=function(){},e}(Z),Q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radius=5,e}return n(e,t),Object.defineProperty(e.prototype,\"radius\",{get:function(){return this._radius},set:function(t){var e=this;this._radius!==t&&(this._radius=t,h.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){var r=this._cylindricalMapping(e);switch(t.position=r,this.orientation){case Z.FACEORIGIN_ORIENTATION:i.lookAt(new h.Vector3(2*r.x,r.y,2*r.z));break;case Z.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new h.Vector3(-r.x,r.y,-r.z));break;case Z.FACEFORWARD_ORIENTATION:break;case Z.FACEFORWARDREVERSED_ORIENTATION:i.rotate(h.Axis.Y,Math.PI,h.Space.LOCAL)}}},e.prototype._cylindricalMapping=function(t){var e=new h.Vector3(0,t.y,this._radius),i=t.x/this._radius;return h.Matrix.RotationYawPitchRollToRef(i,0,0,h.Tmp.Matrix[0]),h.Vector3.TransformNormal(e,h.Tmp.Matrix[0])},e}(J),$=\"precision highp float;\\n\\nattribute vec3 position;\\nattribute vec3 normal;\\nattribute vec2 uv;\\n\\nuniform mat4 world;\\nuniform mat4 viewProjection;\\nvarying vec2 vUV;\\n#ifdef BORDER\\nvarying vec2 scaleInfo;\\nuniform float borderWidth;\\nuniform vec3 scaleFactor;\\n#endif\\n#ifdef HOVERLIGHT\\nvarying vec3 worldPosition;\\n#endif\\nvoid main(void) {\\nvUV=uv;\\n#ifdef BORDER\\nvec3 scale=scaleFactor;\\nfloat minScale=min(min(scale.x,scale.y),scale.z);\\nfloat maxScale=max(max(scale.x,scale.y),scale.z);\\nfloat minOverMiddleScale=minScale/(scale.x+scale.y+scale.z-minScale-maxScale);\\nfloat areaYZ=scale.y*scale.z;\\nfloat areaXZ=scale.x*scale.z;\\nfloat areaXY=scale.x*scale.y;\\nfloat scaledBorderWidth=borderWidth;\\nif (abs(normal.x) == 1.0)\\n{\\nscale.x=scale.y;\\nscale.y=scale.z;\\nif (areaYZ>areaXZ && areaYZ>areaXY)\\n{\\nscaledBorderWidth*=minOverMiddleScale;\\n}\\n}\\nelse if (abs(normal.y) == 1.0)\\n{\\nscale.x=scale.z;\\nif (areaXZ>areaXY && areaXZ>areaYZ)\\n{\\nscaledBorderWidth*=minOverMiddleScale;\\n}\\n}\\nelse\\n{\\nif (areaXY>areaYZ && areaXY>areaXZ)\\n{\\nscaledBorderWidth*=minOverMiddleScale;\\n}\\n}\\nfloat scaleRatio=min(scale.x,scale.y)/max(scale.x,scale.y);\\nif (scale.x>scale.y)\\n{\\nscaleInfo.x=1.0-(scaledBorderWidth*scaleRatio);\\nscaleInfo.y=1.0-scaledBorderWidth;\\n}\\nelse\\n{\\nscaleInfo.x=1.0-scaledBorderWidth;\\nscaleInfo.y=1.0-(scaledBorderWidth*scaleRatio);\\n}\\n#endif\\nvec4 worldPos=world*vec4(position,1.0);\\n#ifdef HOVERLIGHT\\nworldPosition=worldPos.xyz;\\n#endif\\ngl_Position=viewProjection*worldPos;\\n}\\n\";h.Effect.ShadersStore.fluentVertexShader=$;var tt=\"precision highp float;\\nvarying vec2 vUV;\\nuniform vec4 albedoColor;\\n#ifdef INNERGLOW\\nuniform vec4 innerGlowColor;\\n#endif\\n#ifdef BORDER\\nvarying vec2 scaleInfo;\\nuniform float edgeSmoothingValue;\\nuniform float borderMinValue;\\n#endif\\n#ifdef HOVERLIGHT\\nvarying vec3 worldPosition;\\nuniform vec3 hoverPosition;\\nuniform vec4 hoverColor;\\nuniform float hoverRadius;\\n#endif\\n#ifdef TEXTURE\\nuniform sampler2D albedoSampler;\\n#endif\\nvoid main(void) {\\nvec3 albedo=albedoColor.rgb;\\nfloat alpha=albedoColor.a;\\n#ifdef TEXTURE\\nalbedo=texture2D(albedoSampler,vUV).rgb;\\n#endif\\n#ifdef HOVERLIGHT\\nfloat pointToHover=(1.0-clamp(length(hoverPosition-worldPosition)/hoverRadius,0.,1.))*hoverColor.a;\\nalbedo=clamp(albedo+hoverColor.rgb*pointToHover,0.,1.);\\n#else\\nfloat pointToHover=1.0;\\n#endif\\n#ifdef BORDER\\nfloat borderPower=10.0;\\nfloat inverseBorderPower=1.0/borderPower;\\nvec3 borderColor=albedo*borderPower;\\nvec2 distanceToEdge;\\ndistanceToEdge.x=abs(vUV.x-0.5)*2.0;\\ndistanceToEdge.y=abs(vUV.y-0.5)*2.0;\\nfloat borderValue=max(smoothstep(scaleInfo.x-edgeSmoothingValue,scaleInfo.x+edgeSmoothingValue,distanceToEdge.x),\\nsmoothstep(scaleInfo.y-edgeSmoothingValue,scaleInfo.y+edgeSmoothingValue,distanceToEdge.y));\\nborderColor=borderColor*borderValue*max(borderMinValue*inverseBorderPower,pointToHover);\\nalbedo+=borderColor;\\nalpha=max(alpha,borderValue);\\n#endif\\n#ifdef INNERGLOW\\n\\nvec2 uvGlow=(vUV-vec2(0.5,0.5))*(innerGlowColor.a*2.0);\\nuvGlow=uvGlow*uvGlow;\\nuvGlow=uvGlow*uvGlow;\\nalbedo+=mix(vec3(0.0,0.0,0.0),innerGlowColor.rgb,uvGlow.x+uvGlow.y);\\n#endif\\ngl_FragColor=vec4(albedo,alpha);\\n}\";h.Effect.ShadersStore.fluentPixelShader=tt;var et=function(t){function e(){var e=t.call(this)||this;return e.INNERGLOW=!1,e.BORDER=!1,e.HOVERLIGHT=!1,e.TEXTURE=!1,e.rebuild(),e}return n(e,t),e}(h.MaterialDefines),it=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.innerGlowColorIntensity=.5,r.innerGlowColor=new h.Color3(1,1,1),r.alpha=1,r.albedoColor=new h.Color3(.3,.35,.4),r.renderBorders=!1,r.borderWidth=.5,r.edgeSmoothingValue=.02,r.borderMinValue=.1,r.renderHoverLight=!1,r.hoverRadius=1,r.hoverColor=new h.Color4(.3,.3,.3,1),r.hoverPosition=h.Vector3.Zero(),r}return n(e,t),e.prototype.needAlphaBlending=function(){return 1!==this.alpha},e.prototype.needAlphaTesting=function(){return!1},e.prototype.getAlphaTestTexture=function(){return null},e.prototype.isReadyForSubMesh=function(t,e,i){if(this.isFrozen&&this._wasPreviouslyReady&&e.effect)return!0;e._materialDefines||(e._materialDefines=new et);var r=this.getScene(),n=e._materialDefines;if(!this.checkReadyOnEveryCall&&e.effect&&n._renderId===r.getRenderId())return!0;if(n._areTexturesDirty)if(n.INNERGLOW=this.innerGlowColorIntensity>0,n.BORDER=this.renderBorders,n.HOVERLIGHT=this.renderHoverLight,this._albedoTexture){if(!this._albedoTexture.isReadyOrNotBlocking())return!1;n.TEXTURE=!0}else n.TEXTURE=!1;var o=r.getEngine();if(n.isDirty){n.markAsProcessed(),r.resetCachedMaterial();var s=[h.VertexBuffer.PositionKind];s.push(h.VertexBuffer.NormalKind),s.push(h.VertexBuffer.UVKind);var a=[\"world\",\"viewProjection\",\"innerGlowColor\",\"albedoColor\",\"borderWidth\",\"edgeSmoothingValue\",\"scaleFactor\",\"borderMinValue\",\"hoverColor\",\"hoverPosition\",\"hoverRadius\"],l=[\"albedoSampler\"],u=new Array;h.MaterialHelper.PrepareUniformsAndSamplersList({uniformsNames:a,uniformBuffersNames:u,samplers:l,defines:n,maxSimultaneousLights:4});var c=n.toString();e.setEffect(r.getEngine().createEffect(\"fluent\",{attributes:s,uniformsNames:a,uniformBuffersNames:u,samplers:l,defines:c,fallbacks:null,onCompiled:this.onCompiled,onError:this.onError,indexParameters:{maxSimultaneousLights:4}},o))}return!(!e.effect||!e.effect.isReady())&&(n._renderId=r.getRenderId(),this._wasPreviouslyReady=!0,!0)},e.prototype.bindForSubMesh=function(t,e,i){var r=this.getScene(),n=i._materialDefines;if(n){var o=i.effect;o&&(this._activeEffect=o,this.bindOnlyWorldMatrix(t),this._activeEffect.setMatrix(\"viewProjection\",r.getTransformMatrix()),this._mustRebind(r,o)&&(this._activeEffect.setColor4(\"albedoColor\",this.albedoColor,this.alpha),n.INNERGLOW&&this._activeEffect.setColor4(\"innerGlowColor\",this.innerGlowColor,this.innerGlowColorIntensity),n.BORDER&&(this._activeEffect.setFloat(\"borderWidth\",this.borderWidth),this._activeEffect.setFloat(\"edgeSmoothingValue\",this.edgeSmoothingValue),this._activeEffect.setFloat(\"borderMinValue\",this.borderMinValue),e.getBoundingInfo().boundingBox.extendSize.multiplyToRef(e.scaling,h.Tmp.Vector3[0]),this._activeEffect.setVector3(\"scaleFactor\",h.Tmp.Vector3[0])),n.HOVERLIGHT&&(this._activeEffect.setDirectColor4(\"hoverColor\",this.hoverColor),this._activeEffect.setFloat(\"hoverRadius\",this.hoverRadius),this._activeEffect.setVector3(\"hoverPosition\",this.hoverPosition)),n.TEXTURE&&this._activeEffect.setTexture(\"albedoSampler\",this._albedoTexture)),this._afterBind(e,this._activeEffect))}},e.prototype.getActiveTextures=function(){return t.prototype.getActiveTextures.call(this)},e.prototype.hasTexture=function(e){return!!t.prototype.hasTexture.call(this,e)},e.prototype.dispose=function(e){t.prototype.dispose.call(this,e)},e.prototype.clone=function(t){var i=this;return h.SerializationHelper.Clone(function(){return new e(t,i.getScene())},this)},e.prototype.serialize=function(){var t=h.SerializationHelper.Serialize(this);return t.customType=\"BABYLON.GUI.FluentMaterial\",t},e.prototype.getClassName=function(){return\"FluentMaterial\"},e.Parse=function(t,i,r){return h.SerializationHelper.Parse(function(){return new e(t.name,i)},t,i,r)},o([Object(h.serialize)(),Object(h.expandToProperty)(\"_markAllSubMeshesAsTexturesDirty\")],e.prototype,\"innerGlowColorIntensity\",void 0),o([Object(h.serializeAsColor3)()],e.prototype,\"innerGlowColor\",void 0),o([Object(h.serialize)()],e.prototype,\"alpha\",void 0),o([Object(h.serializeAsColor3)()],e.prototype,\"albedoColor\",void 0),o([Object(h.serialize)(),Object(h.expandToProperty)(\"_markAllSubMeshesAsTexturesDirty\")],e.prototype,\"renderBorders\",void 0),o([Object(h.serialize)()],e.prototype,\"borderWidth\",void 0),o([Object(h.serialize)()],e.prototype,\"edgeSmoothingValue\",void 0),o([Object(h.serialize)()],e.prototype,\"borderMinValue\",void 0),o([Object(h.serialize)(),Object(h.expandToProperty)(\"_markAllSubMeshesAsTexturesDirty\")],e.prototype,\"renderHoverLight\",void 0),o([Object(h.serialize)()],e.prototype,\"hoverRadius\",void 0),o([Object(h.serializeAsColor4)()],e.prototype,\"hoverColor\",void 0),o([Object(h.serializeAsVector3)()],e.prototype,\"hoverPosition\",void 0),o([Object(h.serializeAsTexture)(\"albedoTexture\")],e.prototype,\"_albedoTexture\",void 0),o([Object(h.expandToProperty)(\"_markAllSubMeshesAsTexturesAndMiscDirty\")],e.prototype,\"albedoTexture\",void 0),e}(h.PushMaterial);h._TypeStore.RegisteredTypes[\"BABYLON.GUI.FluentMaterial\"]=it;var rt=function(t){function e(e,i){void 0===i&&(i=!0);var r=t.call(this,e)||this;return r._shareMaterials=!0,r._shareMaterials=i,r.pointerEnterAnimation=function(){r.mesh&&r._frontPlate.setEnabled(!0)},r.pointerOutAnimation=function(){r.mesh&&r._frontPlate.setEnabled(!1)},r}return n(e,t),e.prototype._disposeTooltip=function(){this._tooltipFade=null,this._tooltipTextBlock&&this._tooltipTextBlock.dispose(),this._tooltipTexture&&this._tooltipTexture.dispose(),this._tooltipMesh&&this._tooltipMesh.dispose(),this.onPointerEnterObservable.remove(this._tooltipHoverObserver),this.onPointerOutObservable.remove(this._tooltipOutObserver)},Object.defineProperty(e.prototype,\"tooltipText\",{get:function(){return this._tooltipTextBlock?this._tooltipTextBlock.text:null},set:function(t){var e=this;if(t){if(!this._tooltipFade){this._tooltipMesh=h.PlaneBuilder.CreatePlane(\"\",{size:1},this._backPlate._scene);var i=h.PlaneBuilder.CreatePlane(\"\",{size:1,sideOrientation:h.Mesh.DOUBLESIDE},this._backPlate._scene),r=new h.StandardMaterial(\"\",this._backPlate._scene);r.diffuseColor=h.Color3.FromHexString(\"#212121\"),i.material=r,i.isPickable=!1,this._tooltipMesh.addChild(i),i.position.z=.05,this._tooltipMesh.scaling.y=1/3,this._tooltipMesh.position.y=.7,this._tooltipMesh.position.z=-.15,this._tooltipMesh.isPickable=!1,this._tooltipMesh.parent=this._backPlate,this._tooltipTexture=G.CreateForMesh(this._tooltipMesh),this._tooltipTextBlock=new p,this._tooltipTextBlock.scaleY=3,this._tooltipTextBlock.color=\"white\",this._tooltipTextBlock.fontSize=130,this._tooltipTexture.addControl(this._tooltipTextBlock),this._tooltipFade=new h.FadeInOutBehavior,this._tooltipFade.delay=500,this._tooltipMesh.addBehavior(this._tooltipFade),this._tooltipHoverObserver=this.onPointerEnterObservable.add(function(){e._tooltipFade&&e._tooltipFade.fadeIn(!0)}),this._tooltipOutObserver=this.onPointerOutObservable.add(function(){e._tooltipFade&&e._tooltipFade.fadeIn(!1)})}this._tooltipTextBlock&&(this._tooltipTextBlock.text=t)}else this._disposeTooltip()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"text\",{get:function(){return this._text},set:function(t){this._text!==t&&(this._text=t,this._rebuildContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"imageUrl\",{get:function(){return this._imageUrl},set:function(t){this._imageUrl!==t&&(this._imageUrl=t,this._rebuildContent())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"backMaterial\",{get:function(){return this._backMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"frontMaterial\",{get:function(){return this._frontMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"plateMaterial\",{get:function(){return this._plateMaterial},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,\"shareMaterials\",{get:function(){return this._shareMaterials},enumerable:!0,configurable:!0}),e.prototype._getTypeName=function(){return\"HolographicButton\"},e.prototype._rebuildContent=function(){this._disposeFacadeTexture();var t=new m;if(t.isVertical=!0,this._imageUrl){var e=new g;e.source=this._imageUrl,e.paddingTop=\"40px\",e.height=\"180px\",e.width=\"100px\",e.paddingBottom=\"40px\",t.addControl(e)}if(this._text){var i=new p;i.text=this._text,i.color=\"white\",i.height=\"30px\",i.fontSize=24,t.addControl(i)}this._frontPlate&&(this.content=t)},e.prototype._createNode=function(e){return this._backPlate=h.BoxBuilder.CreateBox(this.name+\"BackMesh\",{width:1,height:1,depth:.08},e),this._frontPlate=h.BoxBuilder.CreateBox(this.name+\"FrontMesh\",{width:1,height:1,depth:.08},e),this._frontPlate.parent=this._backPlate,this._frontPlate.position.z=-.08,this._frontPlate.isPickable=!1,this._frontPlate.setEnabled(!1),this._textPlate=t.prototype._createNode.call(this,e),this._textPlate.parent=this._backPlate,this._textPlate.position.z=-.08,this._textPlate.isPickable=!1,this._backPlate},e.prototype._applyFacade=function(t){this._plateMaterial.emissiveTexture=t,this._plateMaterial.opacityTexture=t},e.prototype._createBackMaterial=function(t){var e=this;this._backMaterial=new it(this.name+\"Back Material\",t.getScene()),this._backMaterial.renderHoverLight=!0,this._pickedPointObserver=this._host.onPickedPointChangedObservable.add(function(t){t?(e._backMaterial.hoverPosition=t,e._backMaterial.hoverColor.a=1):e._backMaterial.hoverColor.a=0})},e.prototype._createFrontMaterial=function(t){this._frontMaterial=new it(this.name+\"Front Material\",t.getScene()),this._frontMaterial.innerGlowColorIntensity=0,this._frontMaterial.alpha=.5,this._frontMaterial.renderBorders=!0},e.prototype._createPlateMaterial=function(t){this._plateMaterial=new h.StandardMaterial(this.name+\"Plate Material\",t.getScene()),this._plateMaterial.specularColor=h.Color3.Black()},e.prototype._affectMaterial=function(t){this._shareMaterials?(this._host._sharedMaterials.backFluentMaterial?this._backMaterial=this._host._sharedMaterials.backFluentMaterial:(this._createBackMaterial(t),this._host._sharedMaterials.backFluentMaterial=this._backMaterial),this._host._sharedMaterials.frontFluentMaterial?this._frontMaterial=this._host._sharedMaterials.frontFluentMaterial:(this._createFrontMaterial(t),this._host._sharedMaterials.frontFluentMaterial=this._frontMaterial)):(this._createBackMaterial(t),this._createFrontMaterial(t)),this._createPlateMaterial(t),this._backPlate.material=this._backMaterial,this._frontPlate.material=this._frontMaterial,this._textPlate.material=this._plateMaterial,this._rebuildContent()},e.prototype.dispose=function(){t.prototype.dispose.call(this),this._disposeTooltip(),this.shareMaterials||(this._backMaterial.dispose(),this._frontMaterial.dispose(),this._plateMaterial.dispose(),this._pickedPointObserver&&(this._host.onPickedPointChangedObservable.remove(this._pickedPointObserver),this._pickedPointObserver=null))},e}(q),nt=function(t){function e(e,i){var r=t.call(this,i)||this;return r._currentMesh=e,r.pointerEnterAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(1.1)},r.pointerOutAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(1/1.1)},r.pointerDownAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(.95)},r.pointerUpAnimation=function(){r.mesh&&r.mesh.scaling.scaleInPlace(1/.95)},r}return n(e,t),e.prototype._getTypeName=function(){return\"MeshButton3D\"},e.prototype._createNode=function(t){var e=this;return this._currentMesh.getChildMeshes().forEach(function(t){t.metadata=e}),this._currentMesh},e.prototype._affectMaterial=function(t){},e}(q),ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){t.position=e.clone();var r=h.Tmp.Vector3[0];switch(r.copyFrom(e),this.orientation){case Z.FACEORIGIN_ORIENTATION:case Z.FACEFORWARD_ORIENTATION:r.addInPlace(new h.Vector3(0,0,1)),i.lookAt(r);break;case Z.FACEFORWARDREVERSED_ORIENTATION:case Z.FACEORIGINREVERSED_ORIENTATION:r.addInPlace(new h.Vector3(0,0,-1)),i.lookAt(r)}}},e}(J),st=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._iteration=100,e}return n(e,t),Object.defineProperty(e.prototype,\"iteration\",{get:function(){return this._iteration},set:function(t){var e=this;this._iteration!==t&&(this._iteration=t,h.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._mapGridNode=function(t,e){var i=t.mesh,r=this._scatterMapping(e);if(i){switch(this.orientation){case Z.FACEORIGIN_ORIENTATION:case Z.FACEFORWARD_ORIENTATION:i.lookAt(new h.Vector3(0,0,1));break;case Z.FACEFORWARDREVERSED_ORIENTATION:case Z.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new h.Vector3(0,0,-1))}t.position=r}},e.prototype._scatterMapping=function(t){return t.x=(1-2*Math.random())*this._cellWidth,t.y=(1-2*Math.random())*this._cellHeight,t},e.prototype._finalProcessing=function(){for(var t=[],e=0,i=this._children;e<i.length;e++){var r=i[e];r.mesh&&t.push(r.mesh)}for(var n=0;n<this._iteration;n++){t.sort(function(t,e){var i=t.position.lengthSquared(),r=e.position.lengthSquared();return i<r?1:i>r?-1:0});for(var o=Math.pow(this.margin,2),s=Math.max(this._cellWidth,this._cellHeight),a=h.Tmp.Vector2[0],l=h.Tmp.Vector3[0],u=0;u<t.length-1;u++)for(var c=u+1;c<t.length;c++)if(u!=c){t[c].position.subtractToRef(t[u].position,l),a.x=l.x,a.y=l.y;var _=s,d=a.lengthSquared()-o;(d-=Math.min(d,o))<Math.pow(_,2)&&(a.normalize(),l.scaleInPlace(.5*(_-Math.sqrt(d))),t[c].position.addInPlace(l),t[u].position.subtractInPlace(l))}}},e}(J),ht=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._radius=5,e}return n(e,t),Object.defineProperty(e.prototype,\"radius\",{get:function(){return this._radius},set:function(t){var e=this;this._radius!==t&&(this._radius=t,h.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._mapGridNode=function(t,e){var i=t.mesh;if(i){var r=this._sphericalMapping(e);switch(t.position=r,this.orientation){case Z.FACEORIGIN_ORIENTATION:i.lookAt(new h.Vector3(2*r.x,2*r.y,2*r.z));break;case Z.FACEORIGINREVERSED_ORIENTATION:i.lookAt(new h.Vector3(-r.x,-r.y,-r.z));break;case Z.FACEFORWARD_ORIENTATION:break;case Z.FACEFORWARDREVERSED_ORIENTATION:i.rotate(h.Axis.Y,Math.PI,h.Space.LOCAL)}}},e.prototype._sphericalMapping=function(t){var e=new h.Vector3(0,0,this._radius),i=t.y/this._radius,r=-t.x/this._radius;return h.Matrix.RotationYawPitchRollToRef(r,i,0,h.Tmp.Matrix[0]),h.Vector3.TransformNormal(e,h.Tmp.Matrix[0])},e}(J),at=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this)||this;return i._isVertical=!1,i.margin=.1,i._isVertical=e,i}return n(e,t),Object.defineProperty(e.prototype,\"isVertical\",{get:function(){return this._isVertical},set:function(t){var e=this;this._isVertical!==t&&(this._isVertical=t,h.Tools.SetImmediate(function(){e._arrangeChildren()}))},enumerable:!0,configurable:!0}),e.prototype._arrangeChildren=function(){for(var t,e=0,i=0,r=0,n=[],o=h.Matrix.Invert(this.node.computeWorldMatrix(!0)),s=0,a=this._children;s<a.length;s++){if((f=a[s]).mesh){r++,f.mesh.computeWorldMatrix(!0),f.mesh.getWorldMatrix().multiplyToRef(o,h.Tmp.Matrix[0]);var l=f.mesh.getBoundingInfo().boundingBox,u=h.Vector3.TransformNormal(l.extendSize,h.Tmp.Matrix[0]);n.push(u),this._isVertical?i+=u.y:e+=u.x}}this._isVertical?i+=(r-1)*this.margin/2:e+=(r-1)*this.margin/2,t=this._isVertical?-i:-e;for(var c=0,_=0,d=this._children;_<d.length;_++){var f;if((f=d[_]).mesh){r--;u=n[c++];this._isVertical?(f.position.y=t+u.y,f.position.x=0,t+=2*u.y):(f.position.x=t+u.x,f.position.y=0,t+=2*u.x),t+=r>0?this.margin:0}}},e}(Z),lt=function(){function t(t){var e=this;this._lastControlOver={},this._lastControlDown={},this.onPickedPointChangedObservable=new h.Observable,this._sharedMaterials={},this._scene=t||h.EngineStore.LastCreatedScene,this._sceneDisposeObserver=this._scene.onDisposeObservable.add(function(){e._sceneDisposeObserver=null,e._utilityLayer=null,e.dispose()}),this._utilityLayer=new h.UtilityLayerRenderer(this._scene),this._utilityLayer.onlyCheckPointerDownEvents=!1,this._utilityLayer.pickUtilitySceneFirst=!1,this._utilityLayer.mainSceneTrackerPredicate=function(t){return t&&t.metadata&&t.metadata._node},this._rootContainer=new Z(\"RootContainer\"),this._rootContainer._host=this;var i=this._utilityLayer.utilityLayerScene;this._pointerOutObserver=this._utilityLayer.onPointerOutObservable.add(function(t){e._handlePointerOut(t,!0)}),this._pointerObserver=i.onPointerObservable.add(function(t,i){e._doPicking(t)}),this._utilityLayer.utilityLayerScene.autoClear=!1,this._utilityLayer.utilityLayerScene.autoClearDepthAndStencil=!1,new h.HemisphericLight(\"hemi\",h.Vector3.Up(),this._utilityLayer.utilityLayerScene)}return Object.defineProperty(t.prototype,\"scene\",{get:function(){return this._scene},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,\"utilityLayer\",{get:function(){return this._utilityLayer},enumerable:!0,configurable:!0}),t.prototype._handlePointerOut=function(t,e){var i=this._lastControlOver[t];i&&(i._onPointerOut(i),delete this._lastControlOver[t]),e&&this._lastControlDown[t]&&(this._lastControlDown[t].forcePointerUp(),delete this._lastControlDown[t]),this.onPickedPointChangedObservable.notifyObservers(null)},t.prototype._doPicking=function(t){if(!this._utilityLayer||!this._utilityLayer.utilityLayerScene.activeCamera)return!1;var e=t.event,i=e.pointerId||0,r=e.button,n=t.pickInfo;if(!n||!n.hit)return this._handlePointerOut(i,t.type===h.PointerEventTypes.POINTERUP),!1;var o=n.pickedMesh.metadata;return n.pickedPoint&&this.onPickedPointChangedObservable.notifyObservers(n.pickedPoint),o._processObservables(t.type,n.pickedPoint,i,r)||t.type===h.PointerEventTypes.POINTERMOVE&&(this._lastControlOver[i]&&this._lastControlOver[i]._onPointerOut(this._lastControlOver[i]),delete this._lastControlOver[i]),t.type===h.PointerEventTypes.POINTERUP&&(this._lastControlDown[e.pointerId]&&(this._lastControlDown[e.pointerId].forcePointerUp(),delete this._lastControlDown[e.pointerId]),\"touch\"===e.pointerType&&this._handlePointerOut(i,!1)),!0},Object.defineProperty(t.prototype,\"rootContainer\",{get:function(){return this._rootContainer},enumerable:!0,configurable:!0}),t.prototype.containsControl=function(t){return this._rootContainer.containsControl(t)},t.prototype.addControl=function(t){return this._rootContainer.addControl(t),this},t.prototype.removeControl=function(t){return this._rootContainer.removeControl(t),this},t.prototype.dispose=function(){for(var t in this._rootContainer.dispose(),this._sharedMaterials)this._sharedMaterials.hasOwnProperty(t)&&this._sharedMaterials[t].dispose();this._sharedMaterials={},this._pointerOutObserver&&this._utilityLayer&&(this._utilityLayer.onPointerOutObservable.remove(this._pointerOutObserver),this._pointerOutObserver=null),this.onPickedPointChangedObservable.clear();var e=this._utilityLayer?this._utilityLayer.utilityLayerScene:null;e&&this._pointerObserver&&(e.onPointerObservable.remove(this._pointerObserver),this._pointerObserver=null),this._scene&&this._sceneDisposeObserver&&(this._scene.onDisposeObservable.remove(this._sceneDisposeObserver),this._sceneDisposeObserver=null),this._utilityLayer&&this._utilityLayer.dispose()},t}();i.d(e,\"AdvancedDynamicTexture\",function(){return G}),i.d(e,\"AdvancedDynamicTextureInstrumentation\",function(){return X}),i.d(e,\"Vector2WithInfo\",function(){return u}),i.d(e,\"Matrix2D\",function(){return c}),i.d(e,\"Measure\",function(){return l}),i.d(e,\"MultiLinePoint\",function(){return P}),i.d(e,\"Style\",function(){return z}),i.d(e,\"ValueAndUnit\",function(){return a}),i.d(e,\"Button\",function(){return b}),i.d(e,\"Checkbox\",function(){return y}),i.d(e,\"ColorPicker\",function(){return C}),i.d(e,\"Container\",function(){return d}),i.d(e,\"Control\",function(){return _}),i.d(e,\"Ellipse\",function(){return T}),i.d(e,\"Grid\",function(){return O}),i.d(e,\"Image\",function(){return g}),i.d(e,\"InputText\",function(){return v}),i.d(e,\"InputPassword\",function(){return w}),i.d(e,\"Line\",function(){return x}),i.d(e,\"MultiLine\",function(){return M}),i.d(e,\"RadioButton\",function(){return k}),i.d(e,\"StackPanel\",function(){return m}),i.d(e,\"SelectorGroup\",function(){return E}),i.d(e,\"CheckboxGroup\",function(){return S}),i.d(e,\"RadioGroup\",function(){return D}),i.d(e,\"SliderGroup\",function(){return R}),i.d(e,\"SelectionPanel\",function(){return L}),i.d(e,\"ScrollViewer\",function(){return H}),i.d(e,\"TextWrapping\",function(){return s}),i.d(e,\"TextBlock\",function(){return p}),i.d(e,\"KeyPropertySet\",function(){return V}),i.d(e,\"VirtualKeyboard\",function(){return F}),i.d(e,\"Rectangle\",function(){return f}),i.d(e,\"DisplayGrid\",function(){return j}),i.d(e,\"BaseSlider\",function(){return I}),i.d(e,\"Slider\",function(){return A}),i.d(e,\"ImageBasedSlider\",function(){return W}),i.d(e,\"ScrollBar\",function(){return B}),i.d(e,\"name\",function(){return\"Statics\"}),i.d(e,\"GUI3DManager\",function(){return lt}),i.d(e,\"Vector3WithInfo\",function(){return Y}),i.d(e,\"AbstractButton3D\",function(){return K}),i.d(e,\"Button3D\",function(){return q}),i.d(e,\"Container3D\",function(){return Z}),i.d(e,\"Control3D\",function(){return U}),i.d(e,\"CylinderPanel\",function(){return Q}),i.d(e,\"HolographicButton\",function(){return rt}),i.d(e,\"MeshButton3D\",function(){return nt}),i.d(e,\"PlanePanel\",function(){return ot}),i.d(e,\"ScatterPanel\",function(){return st}),i.d(e,\"SpherePanel\",function(){return ht}),i.d(e,\"StackPanel3D\",function(){return at}),i.d(e,\"VolumeBasedPanel\",function(){return J}),i.d(e,\"FluentMaterialDefines\",function(){return et}),i.d(e,\"FluentMaterial\",function(){return it})},function(t,e,i){\"use strict\";i.r(e),function(t){var r=i(1);i.d(e,\"AdvancedDynamicTexture\",function(){return r.AdvancedDynamicTexture}),i.d(e,\"AdvancedDynamicTextureInstrumentation\",function(){return r.AdvancedDynamicTextureInstrumentation}),i.d(e,\"Vector2WithInfo\",function(){return r.Vector2WithInfo}),i.d(e,\"Matrix2D\",function(){return r.Matrix2D}),i.d(e,\"Measure\",function(){return r.Measure}),i.d(e,\"MultiLinePoint\",function(){return r.MultiLinePoint}),i.d(e,\"Style\",function(){return r.Style}),i.d(e,\"ValueAndUnit\",function(){return r.ValueAndUnit}),i.d(e,\"GUI3DManager\",function(){return r.GUI3DManager}),i.d(e,\"Vector3WithInfo\",function(){return r.Vector3WithInfo}),i.d(e,\"Button\",function(){return r.Button}),i.d(e,\"Checkbox\",function(){return r.Checkbox}),i.d(e,\"ColorPicker\",function(){return r.ColorPicker}),i.d(e,\"Container\",function(){return r.Container}),i.d(e,\"Control\",function(){return r.Control}),i.d(e,\"Ellipse\",function(){return r.Ellipse}),i.d(e,\"Grid\",function(){return r.Grid}),i.d(e,\"Image\",function(){return r.Image}),i.d(e,\"InputText\",function(){return r.InputText}),i.d(e,\"InputPassword\",function(){return r.InputPassword}),i.d(e,\"Line\",function(){return r.Line}),i.d(e,\"MultiLine\",function(){return r.MultiLine}),i.d(e,\"RadioButton\",function(){return r.RadioButton}),i.d(e,\"StackPanel\",function(){return r.StackPanel}),i.d(e,\"SelectorGroup\",function(){return r.SelectorGroup}),i.d(e,\"CheckboxGroup\",function(){return r.CheckboxGroup}),i.d(e,\"RadioGroup\",function(){return r.RadioGroup}),i.d(e,\"SliderGroup\",function(){return r.SliderGroup}),i.d(e,\"SelectionPanel\",function(){return r.SelectionPanel}),i.d(e,\"ScrollViewer\",function(){return r.ScrollViewer}),i.d(e,\"TextWrapping\",function(){return r.TextWrapping}),i.d(e,\"TextBlock\",function(){return r.TextBlock}),i.d(e,\"KeyPropertySet\",function(){return r.KeyPropertySet}),i.d(e,\"VirtualKeyboard\",function(){return r.VirtualKeyboard}),i.d(e,\"Rectangle\",function(){return r.Rectangle}),i.d(e,\"DisplayGrid\",function(){return r.DisplayGrid}),i.d(e,\"BaseSlider\",function(){return r.BaseSlider}),i.d(e,\"Slider\",function(){return r.Slider}),i.d(e,\"ImageBasedSlider\",function(){return r.ImageBasedSlider}),i.d(e,\"ScrollBar\",function(){return r.ScrollBar}),i.d(e,\"name\",function(){return r.name}),i.d(e,\"AbstractButton3D\",function(){return r.AbstractButton3D}),i.d(e,\"Button3D\",function(){return r.Button3D}),i.d(e,\"Container3D\",function(){return r.Container3D}),i.d(e,\"Control3D\",function(){return r.Control3D}),i.d(e,\"CylinderPanel\",function(){return r.CylinderPanel}),i.d(e,\"HolographicButton\",function(){return r.HolographicButton}),i.d(e,\"MeshButton3D\",function(){return r.MeshButton3D}),i.d(e,\"PlanePanel\",function(){return r.PlanePanel}),i.d(e,\"ScatterPanel\",function(){return r.ScatterPanel}),i.d(e,\"SpherePanel\",function(){return r.SpherePanel}),i.d(e,\"StackPanel3D\",function(){return r.StackPanel3D}),i.d(e,\"VolumeBasedPanel\",function(){return r.VolumeBasedPanel}),i.d(e,\"FluentMaterialDefines\",function(){return r.FluentMaterialDefines}),i.d(e,\"FluentMaterial\",function(){return r.FluentMaterial});var n=void 0!==t?t:\"undefined\"!=typeof window?window:void 0;void 0!==n&&(n.BABYLON=n.BABYLON||{},n.BABYLON.GUI=r)}.call(this,i(3))},function(t,e){var i;i=function(){return this}();try{i=i||new Function(\"return this\")()}catch(t){\"object\"==typeof window&&(i=window)}t.exports=i}])});","//\n// Main\n//\n\nfunction memoize (fn, options) {\n  var cache = options && options.cache\n    ? options.cache\n    : cacheDefault\n\n  var serializer = options && options.serializer\n    ? options.serializer\n    : serializerDefault\n\n  var strategy = options && options.strategy\n    ? options.strategy\n    : strategyDefault\n\n  return strategy(fn, {\n    cache: cache,\n    serializer: serializer\n  })\n}\n\n//\n// Strategy\n//\n\nfunction isPrimitive (value) {\n  return value == null || typeof value === 'number' || typeof value === 'boolean' // || typeof value === \"string\" 'unsafe' primitive for our needs\n}\n\nfunction monadic (fn, cache, serializer, arg) {\n  var cacheKey = isPrimitive(arg) ? arg : serializer(arg)\n\n  var computedValue = cache.get(cacheKey)\n  if (typeof computedValue === 'undefined') {\n    computedValue = fn.call(this, arg)\n    cache.set(cacheKey, computedValue)\n  }\n\n  return computedValue\n}\n\nfunction variadic (fn, cache, serializer) {\n  var args = Array.prototype.slice.call(arguments, 3)\n  var cacheKey = serializer(args)\n\n  var computedValue = cache.get(cacheKey)\n  if (typeof computedValue === 'undefined') {\n    computedValue = fn.apply(this, args)\n    cache.set(cacheKey, computedValue)\n  }\n\n  return computedValue\n}\n\nfunction assemble (fn, context, strategy, cache, serialize) {\n  return strategy.bind(\n    context,\n    fn,\n    cache,\n    serialize\n  )\n}\n\nfunction strategyDefault (fn, options) {\n  var strategy = fn.length === 1 ? monadic : variadic\n\n  return assemble(\n    fn,\n    this,\n    strategy,\n    options.cache.create(),\n    options.serializer\n  )\n}\n\nfunction strategyVariadic (fn, options) {\n  var strategy = variadic\n\n  return assemble(\n    fn,\n    this,\n    strategy,\n    options.cache.create(),\n    options.serializer\n  )\n}\n\nfunction strategyMonadic (fn, options) {\n  var strategy = monadic\n\n  return assemble(\n    fn,\n    this,\n    strategy,\n    options.cache.create(),\n    options.serializer\n  )\n}\n\n//\n// Serializer\n//\n\nfunction serializerDefault () {\n  return JSON.stringify(arguments)\n}\n\n//\n// Cache\n//\n\nfunction ObjectWithoutPrototypeCache () {\n  this.cache = Object.create(null)\n}\n\nObjectWithoutPrototypeCache.prototype.has = function (key) {\n  return (key in this.cache)\n}\n\nObjectWithoutPrototypeCache.prototype.get = function (key) {\n  return this.cache[key]\n}\n\nObjectWithoutPrototypeCache.prototype.set = function (key, value) {\n  this.cache[key] = value\n}\n\nvar cacheDefault = {\n  create: function create () {\n    return new ObjectWithoutPrototypeCache()\n  }\n}\n\n//\n// API\n//\n\nmodule.exports = memoize\nmodule.exports.strategies = {\n  variadic: strategyVariadic,\n  monadic: strategyMonadic\n}\n","'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = require('react');\nvar memoize = _interopDefault(require('fast-memoize'));\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\n\nvar styles = {\r\n    top: {\r\n        width: '100%',\r\n        height: '10px',\r\n        top: '-5px',\r\n        left: '0px',\r\n        cursor: 'row-resize',\r\n    },\r\n    right: {\r\n        width: '10px',\r\n        height: '100%',\r\n        top: '0px',\r\n        right: '-5px',\r\n        cursor: 'col-resize',\r\n    },\r\n    bottom: {\r\n        width: '100%',\r\n        height: '10px',\r\n        bottom: '-5px',\r\n        left: '0px',\r\n        cursor: 'row-resize',\r\n    },\r\n    left: {\r\n        width: '10px',\r\n        height: '100%',\r\n        top: '0px',\r\n        left: '-5px',\r\n        cursor: 'col-resize',\r\n    },\r\n    topRight: {\r\n        width: '20px',\r\n        height: '20px',\r\n        position: 'absolute',\r\n        right: '-10px',\r\n        top: '-10px',\r\n        cursor: 'ne-resize',\r\n    },\r\n    bottomRight: {\r\n        width: '20px',\r\n        height: '20px',\r\n        position: 'absolute',\r\n        right: '-10px',\r\n        bottom: '-10px',\r\n        cursor: 'se-resize',\r\n    },\r\n    bottomLeft: {\r\n        width: '20px',\r\n        height: '20px',\r\n        position: 'absolute',\r\n        left: '-10px',\r\n        bottom: '-10px',\r\n        cursor: 'sw-resize',\r\n    },\r\n    topLeft: {\r\n        width: '20px',\r\n        height: '20px',\r\n        position: 'absolute',\r\n        left: '-10px',\r\n        top: '-10px',\r\n        cursor: 'nw-resize',\r\n    },\r\n};\r\nfunction Resizer(props) {\r\n    return (React.createElement(\"div\", { className: props.className || '', style: __assign({ position: 'absolute', userSelect: 'none' }, styles[props.direction], (props.replaceStyles || {})), onMouseDown: function (e) {\r\n            props.onResizeStart(e, props.direction);\r\n        }, onTouchStart: function (e) {\r\n            props.onResizeStart(e, props.direction);\r\n        } }, props.children));\r\n}\n\nvar DEFAULT_SIZE = {\r\n    width: 'auto',\r\n    height: 'auto',\r\n};\r\nvar clamp = memoize(function (n, min, max) { return Math.max(Math.min(n, max), min); });\r\nvar snap = memoize(function (n, size) { return Math.round(n / size) * size; });\r\nvar hasDirection = memoize(function (dir, target) { return new RegExp(dir, 'i').test(target); });\r\nvar findClosestSnap = memoize(function (n, snapArray, snapGap) {\r\n    if (snapGap === void 0) { snapGap = 0; }\r\n    var closestGapIndex = snapArray.reduce(function (prev, curr, index) { return (Math.abs(curr - n) < Math.abs(snapArray[prev] - n) ? index : prev); }, 0);\r\n    var gap = Math.abs(snapArray[closestGapIndex] - n);\r\n    return snapGap === 0 || gap < snapGap ? snapArray[closestGapIndex] : n;\r\n});\r\nvar endsWith = memoize(function (str, searchStr) {\r\n    return str.substr(str.length - searchStr.length, searchStr.length) === searchStr;\r\n});\r\nvar getStringSize = memoize(function (n) {\r\n    n = n.toString();\r\n    if (n === 'auto') {\r\n        return n;\r\n    }\r\n    if (endsWith(n, 'px')) {\r\n        return n;\r\n    }\r\n    if (endsWith(n, '%')) {\r\n        return n;\r\n    }\r\n    if (endsWith(n, 'vh')) {\r\n        return n;\r\n    }\r\n    if (endsWith(n, 'vw')) {\r\n        return n;\r\n    }\r\n    if (endsWith(n, 'vmax')) {\r\n        return n;\r\n    }\r\n    if (endsWith(n, 'vmin')) {\r\n        return n;\r\n    }\r\n    return n + \"px\";\r\n});\r\nvar getPixelSize = function (size, parentSize) {\r\n    if (size && typeof size === 'string') {\r\n        if (endsWith(size, '%')) {\r\n            var ratio = Number(size.replace('%', '')) / 100;\r\n            return parentSize * ratio;\r\n        }\r\n        else if (endsWith(size, 'vw')) {\r\n            var ratio = Number(size.replace('vw', '')) / 100;\r\n            return window.innerWidth * ratio;\r\n        }\r\n        else if (endsWith(size, 'vh')) {\r\n            var ratio = Number(size.replace('vh', '')) / 100;\r\n            return window.innerHeight * ratio;\r\n        }\r\n    }\r\n    return size;\r\n};\r\nvar calculateNewMax = memoize(function (parentSize, maxWidth, maxHeight, minWidth, minHeight) {\r\n    maxWidth = getPixelSize(maxWidth, parentSize.width);\r\n    maxHeight = getPixelSize(maxHeight, parentSize.height);\r\n    minWidth = getPixelSize(minWidth, parentSize.width);\r\n    minHeight = getPixelSize(minHeight, parentSize.height);\r\n    return {\r\n        maxWidth: typeof maxWidth === 'undefined' ? undefined : Number(maxWidth),\r\n        maxHeight: typeof maxHeight === 'undefined' ? undefined : Number(maxHeight),\r\n        minWidth: typeof minWidth === 'undefined' ? undefined : Number(minWidth),\r\n        minHeight: typeof minHeight === 'undefined' ? undefined : Number(minHeight),\r\n    };\r\n});\r\nvar definedProps = [\r\n    'style',\r\n    'className',\r\n    'grid',\r\n    'snap',\r\n    'bounds',\r\n    'size',\r\n    'defaultSize',\r\n    'minWidth',\r\n    'minHeight',\r\n    'maxWidth',\r\n    'maxHeight',\r\n    'lockAspectRatio',\r\n    'lockAspectRatioExtraWidth',\r\n    'lockAspectRatioExtraHeight',\r\n    'enable',\r\n    'handleStyles',\r\n    'handleClasses',\r\n    'handleWrapperStyle',\r\n    'handleWrapperClass',\r\n    'children',\r\n    'onResizeStart',\r\n    'onResize',\r\n    'onResizeStop',\r\n    'handleComponent',\r\n    'scale',\r\n    'resizeRatio',\r\n    'snapGap',\r\n];\r\n// HACK: This class is used to calculate % size.\r\nvar baseClassName = '__resizable_base__';\r\nvar Resizable = /** @class */ (function (_super) {\r\n    __extends(Resizable, _super);\r\n    function Resizable(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.ratio = 1;\r\n        _this.resizable = null;\r\n        // For parent boundary\r\n        _this.parentLeft = 0;\r\n        _this.parentTop = 0;\r\n        // For boundary\r\n        _this.resizableLeft = 0;\r\n        _this.resizableTop = 0;\r\n        // For target boundary\r\n        _this.targetLeft = 0;\r\n        _this.targetTop = 0;\r\n        _this.state = {\r\n            isResizing: false,\r\n            resizeCursor: 'auto',\r\n            width: typeof (_this.propsSize && _this.propsSize.width) === 'undefined'\r\n                ? 'auto'\r\n                : _this.propsSize && _this.propsSize.width,\r\n            height: typeof (_this.propsSize && _this.propsSize.height) === 'undefined'\r\n                ? 'auto'\r\n                : _this.propsSize && _this.propsSize.height,\r\n            direction: 'right',\r\n            original: {\r\n                x: 0,\r\n                y: 0,\r\n                width: 0,\r\n                height: 0,\r\n            },\r\n        };\r\n        _this.onResizeStart = _this.onResizeStart.bind(_this);\r\n        _this.onMouseMove = _this.onMouseMove.bind(_this);\r\n        _this.onMouseUp = _this.onMouseUp.bind(_this);\r\n        return _this;\r\n    }\r\n    Object.defineProperty(Resizable.prototype, \"parentNode\", {\r\n        get: function () {\r\n            if (!this.resizable) {\r\n                return null;\r\n            }\r\n            return this.resizable.parentNode;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Resizable.prototype, \"propsSize\", {\r\n        get: function () {\r\n            return this.props.size || this.props.defaultSize || DEFAULT_SIZE;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Resizable.prototype, \"base\", {\r\n        get: function () {\r\n            var parent = this.parentNode;\r\n            if (!parent) {\r\n                return undefined;\r\n            }\r\n            var children = [].slice.call(parent.children);\r\n            for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\r\n                var n = children_1[_i];\r\n                if (n instanceof HTMLElement) {\r\n                    if (n.classList.contains(baseClassName)) {\r\n                        return n;\r\n                    }\r\n                }\r\n            }\r\n            return undefined;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Resizable.prototype, \"size\", {\r\n        get: function () {\r\n            var width = 0;\r\n            var height = 0;\r\n            if (typeof window !== 'undefined' && this.resizable) {\r\n                var orgWidth = this.resizable.offsetWidth;\r\n                var orgHeight = this.resizable.offsetHeight;\r\n                // HACK: Set position `relative` to get parent size.\r\n                //       This is because when re-resizable set `absolute`, I can not get base width correctly.\r\n                var orgPosition = this.resizable.style.position;\r\n                if (orgPosition !== 'relative') {\r\n                    this.resizable.style.position = 'relative';\r\n                }\r\n                // INFO: Use original width or height if set auto.\r\n                width = this.resizable.style.width !== 'auto' ? this.resizable.offsetWidth : orgWidth;\r\n                height = this.resizable.style.height !== 'auto' ? this.resizable.offsetHeight : orgHeight;\r\n                // Restore original position\r\n                this.resizable.style.position = orgPosition;\r\n            }\r\n            return { width: width, height: height };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Resizable.prototype, \"sizeStyle\", {\r\n        get: function () {\r\n            var _this = this;\r\n            var size = this.props.size;\r\n            var getSize = function (key) {\r\n                if (typeof _this.state[key] === 'undefined' || _this.state[key] === 'auto') {\r\n                    return 'auto';\r\n                }\r\n                if (_this.propsSize && _this.propsSize[key] && endsWith(_this.propsSize[key].toString(), '%')) {\r\n                    if (endsWith(_this.state[key].toString(), '%')) {\r\n                        return _this.state[key].toString();\r\n                    }\r\n                    var parentSize = _this.getParentSize();\r\n                    var value = Number(_this.state[key].toString().replace('px', ''));\r\n                    var percent = (value / parentSize[key]) * 100;\r\n                    return percent + \"%\";\r\n                }\r\n                return getStringSize(_this.state[key]);\r\n            };\r\n            var width = size && typeof size.width !== 'undefined' && !this.state.isResizing\r\n                ? getStringSize(size.width)\r\n                : getSize('width');\r\n            var height = size && typeof size.height !== 'undefined' && !this.state.isResizing\r\n                ? getStringSize(size.height)\r\n                : getSize('height');\r\n            return { width: width, height: height };\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Resizable.prototype.getParentSize = function () {\r\n        if (!this.base || !this.parentNode) {\r\n            return { width: window.innerWidth, height: window.innerHeight };\r\n        }\r\n        // INFO: To calculate parent width with flex layout\r\n        var wrapChanged = false;\r\n        var wrap = this.parentNode.style.flexWrap;\r\n        var minWidth = this.base.style.minWidth;\r\n        if (wrap !== 'wrap') {\r\n            wrapChanged = true;\r\n            this.parentNode.style.flexWrap = 'wrap';\r\n            // HACK: Use relative to get parent padding size\r\n        }\r\n        this.base.style.position = 'relative';\r\n        this.base.style.minWidth = '100%';\r\n        var size = {\r\n            width: this.base.offsetWidth,\r\n            height: this.base.offsetHeight,\r\n        };\r\n        this.base.style.position = 'absolute';\r\n        if (wrapChanged) {\r\n            this.parentNode.style.flexWrap = wrap;\r\n        }\r\n        this.base.style.minWidth = minWidth;\r\n        return size;\r\n    };\r\n    Resizable.prototype.bindEvents = function () {\r\n        if (typeof window !== 'undefined') {\r\n            window.addEventListener('mouseup', this.onMouseUp);\r\n            window.addEventListener('mousemove', this.onMouseMove);\r\n            window.addEventListener('mouseleave', this.onMouseUp);\r\n            window.addEventListener('touchmove', this.onMouseMove);\r\n            window.addEventListener('touchend', this.onMouseUp);\r\n        }\r\n    };\r\n    Resizable.prototype.unbindEvents = function () {\r\n        if (typeof window !== 'undefined') {\r\n            window.removeEventListener('mouseup', this.onMouseUp);\r\n            window.removeEventListener('mousemove', this.onMouseMove);\r\n            window.removeEventListener('mouseleave', this.onMouseUp);\r\n            window.removeEventListener('touchmove', this.onMouseMove);\r\n            window.removeEventListener('touchend', this.onMouseUp);\r\n        }\r\n    };\r\n    Resizable.prototype.componentDidMount = function () {\r\n        this.setState({\r\n            width: this.state.width || this.size.width,\r\n            height: this.state.height || this.size.height,\r\n        });\r\n        var parent = this.parentNode;\r\n        if (!(parent instanceof HTMLElement)) {\r\n            return;\r\n        }\r\n        if (this.base) {\r\n            return;\r\n        }\r\n        var element = document.createElement('div');\r\n        element.style.width = '100%';\r\n        element.style.height = '100%';\r\n        element.style.position = 'absolute';\r\n        element.style.transform = 'scale(0, 0)';\r\n        element.style.left = '0';\r\n        element.style.flex = '0';\r\n        if (element.classList) {\r\n            element.classList.add(baseClassName);\r\n        }\r\n        else {\r\n            element.className += baseClassName;\r\n        }\r\n        parent.appendChild(element);\r\n    };\r\n    Resizable.prototype.componentWillUnmount = function () {\r\n        if (typeof window !== 'undefined') {\r\n            this.unbindEvents();\r\n            var parent_1 = this.parentNode;\r\n            if (!this.base || !parent_1) {\r\n                return;\r\n            }\r\n            if (!(parent_1 instanceof HTMLElement) || !(this.base instanceof Node)) {\r\n                return;\r\n            }\r\n            parent_1.removeChild(this.base);\r\n        }\r\n    };\r\n    Resizable.prototype.createSizeForCssProperty = function (newSize, kind) {\r\n        var propsSize = this.propsSize && this.propsSize[kind];\r\n        return this.state[kind] === 'auto' &&\r\n            this.state.original[kind] === newSize &&\r\n            (typeof propsSize === 'undefined' || propsSize === 'auto')\r\n            ? 'auto'\r\n            : newSize;\r\n    };\r\n    Resizable.prototype.calculateNewMaxFromBoundary = function (maxWidth, maxHeight) {\r\n        if (this.props.bounds === 'parent') {\r\n            var parent_2 = this.parentNode;\r\n            if (parent_2 instanceof HTMLElement) {\r\n                var boundWidth = parent_2.offsetWidth + (this.parentLeft - this.resizableLeft);\r\n                var boundHeight = parent_2.offsetHeight + (this.parentTop - this.resizableTop);\r\n                maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\r\n                maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\r\n            }\r\n        }\r\n        else if (this.props.bounds === 'window') {\r\n            if (typeof window !== 'undefined') {\r\n                var boundWidth = window.innerWidth - this.resizableLeft;\r\n                var boundHeight = window.innerHeight - this.resizableTop;\r\n                maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\r\n                maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\r\n            }\r\n        }\r\n        else if (this.props.bounds instanceof HTMLElement) {\r\n            var boundWidth = this.props.bounds.offsetWidth + (this.targetLeft - this.resizableLeft);\r\n            var boundHeight = this.props.bounds.offsetHeight + (this.targetTop - this.resizableTop);\r\n            maxWidth = maxWidth && maxWidth < boundWidth ? maxWidth : boundWidth;\r\n            maxHeight = maxHeight && maxHeight < boundHeight ? maxHeight : boundHeight;\r\n        }\r\n        return { maxWidth: maxWidth, maxHeight: maxHeight };\r\n    };\r\n    Resizable.prototype.calculateNewSizeFromDirection = function (clientX, clientY) {\r\n        var scale = this.props.scale || 1;\r\n        var resizeRatio = this.props.resizeRatio || 1;\r\n        var _a = this.state, direction = _a.direction, original = _a.original;\r\n        var _b = this.props, lockAspectRatio = _b.lockAspectRatio, lockAspectRatioExtraHeight = _b.lockAspectRatioExtraHeight, lockAspectRatioExtraWidth = _b.lockAspectRatioExtraWidth;\r\n        var newWidth = original.width;\r\n        var newHeight = original.height;\r\n        var extraHeight = lockAspectRatioExtraHeight || 0;\r\n        var extraWidth = lockAspectRatioExtraWidth || 0;\r\n        if (hasDirection('right', direction)) {\r\n            newWidth = original.width + ((clientX - original.x) * resizeRatio) / scale;\r\n            if (lockAspectRatio) {\r\n                newHeight = (newWidth - extraWidth) / this.ratio + extraHeight;\r\n            }\r\n        }\r\n        if (hasDirection('left', direction)) {\r\n            newWidth = original.width - ((clientX - original.x) * resizeRatio) / scale;\r\n            if (lockAspectRatio) {\r\n                newHeight = (newWidth - extraWidth) / this.ratio + extraHeight;\r\n            }\r\n        }\r\n        if (hasDirection('bottom', direction)) {\r\n            newHeight = original.height + ((clientY - original.y) * resizeRatio) / scale;\r\n            if (lockAspectRatio) {\r\n                newWidth = (newHeight - extraHeight) * this.ratio + extraWidth;\r\n            }\r\n        }\r\n        if (hasDirection('top', direction)) {\r\n            newHeight = original.height - ((clientY - original.y) * resizeRatio) / scale;\r\n            if (lockAspectRatio) {\r\n                newWidth = (newHeight - extraHeight) * this.ratio + extraWidth;\r\n            }\r\n        }\r\n        return { newWidth: newWidth, newHeight: newHeight };\r\n    };\r\n    Resizable.prototype.calculateNewSizeFromAspectRatio = function (newWidth, newHeight, max, min) {\r\n        var _a = this.props, lockAspectRatio = _a.lockAspectRatio, lockAspectRatioExtraHeight = _a.lockAspectRatioExtraHeight, lockAspectRatioExtraWidth = _a.lockAspectRatioExtraWidth;\r\n        var computedMinWidth = typeof min.width === 'undefined' ? 10 : min.width;\r\n        var computedMaxWidth = typeof max.width === 'undefined' || max.width < 0 ? newWidth : max.width;\r\n        var computedMinHeight = typeof min.height === 'undefined' ? 10 : min.height;\r\n        var computedMaxHeight = typeof max.height === 'undefined' || max.height < 0 ? newHeight : max.height;\r\n        var extraHeight = lockAspectRatioExtraHeight || 0;\r\n        var extraWidth = lockAspectRatioExtraWidth || 0;\r\n        if (lockAspectRatio) {\r\n            var extraMinWidth = (computedMinHeight - extraHeight) * this.ratio + extraWidth;\r\n            var extraMaxWidth = (computedMaxHeight - extraHeight) * this.ratio + extraWidth;\r\n            var extraMinHeight = (computedMinWidth - extraWidth) / this.ratio + extraHeight;\r\n            var extraMaxHeight = (computedMaxWidth - extraWidth) / this.ratio + extraHeight;\r\n            var lockedMinWidth = Math.max(computedMinWidth, extraMinWidth);\r\n            var lockedMaxWidth = Math.min(computedMaxWidth, extraMaxWidth);\r\n            var lockedMinHeight = Math.max(computedMinHeight, extraMinHeight);\r\n            var lockedMaxHeight = Math.min(computedMaxHeight, extraMaxHeight);\r\n            newWidth = clamp(newWidth, lockedMinWidth, lockedMaxWidth);\r\n            newHeight = clamp(newHeight, lockedMinHeight, lockedMaxHeight);\r\n        }\r\n        else {\r\n            newWidth = clamp(newWidth, computedMinWidth, computedMaxWidth);\r\n            newHeight = clamp(newHeight, computedMinHeight, computedMaxHeight);\r\n        }\r\n        return { newWidth: newWidth, newHeight: newHeight };\r\n    };\r\n    Resizable.prototype.setBoundingClientRect = function () {\r\n        // For parent boundary\r\n        if (this.props.bounds === 'parent') {\r\n            var parent_3 = this.parentNode;\r\n            if (parent_3 instanceof HTMLElement) {\r\n                var parentRect = parent_3.getBoundingClientRect();\r\n                this.parentLeft = parentRect.left;\r\n                this.parentTop = parentRect.top;\r\n            }\r\n        }\r\n        // For target(html element) boundary\r\n        if (this.props.bounds instanceof HTMLElement) {\r\n            var targetRect = this.props.bounds.getBoundingClientRect();\r\n            this.targetLeft = targetRect.left;\r\n            this.targetTop = targetRect.top;\r\n        }\r\n        // For boundary\r\n        if (this.resizable) {\r\n            var _a = this.resizable.getBoundingClientRect(), left = _a.left, top_1 = _a.top;\r\n            this.resizableLeft = left;\r\n            this.resizableTop = top_1;\r\n        }\r\n    };\r\n    Resizable.prototype.onResizeStart = function (event, direction) {\r\n        var clientX = 0;\r\n        var clientY = 0;\r\n        if (event.nativeEvent instanceof MouseEvent) {\r\n            clientX = event.nativeEvent.clientX;\r\n            clientY = event.nativeEvent.clientY;\r\n            // When user click with right button the resize is stuck in resizing mode\r\n            // until users clicks again, dont continue if right click is used.\r\n            // HACK: MouseEvent does not have `which` from flow-bin v0.68.\r\n            if (event.nativeEvent.which === 3) {\r\n                return;\r\n            }\r\n        }\r\n        else if (event.nativeEvent instanceof TouchEvent) {\r\n            clientX = event.nativeEvent.touches[0].clientX;\r\n            clientY = event.nativeEvent.touches[0].clientY;\r\n        }\r\n        if (this.props.onResizeStart) {\r\n            if (this.resizable) {\r\n                var startResize = this.props.onResizeStart(event, direction, this.resizable);\r\n                if (startResize === false) {\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        // Fix #168\r\n        if (this.props.size) {\r\n            if (typeof this.props.size.height !== 'undefined' && this.props.size.height !== this.state.height) {\r\n                this.setState({ height: this.props.size.height });\r\n            }\r\n            if (typeof this.props.size.width !== 'undefined' && this.props.size.width !== this.state.width) {\r\n                this.setState({ width: this.props.size.width });\r\n            }\r\n        }\r\n        // For lockAspectRatio case\r\n        this.ratio =\r\n            typeof this.props.lockAspectRatio === 'number' ? this.props.lockAspectRatio : this.size.width / this.size.height;\r\n        // For boundary\r\n        this.setBoundingClientRect();\r\n        this.bindEvents();\r\n        this.setState({\r\n            original: {\r\n                x: clientX,\r\n                y: clientY,\r\n                width: this.size.width,\r\n                height: this.size.height,\r\n            },\r\n            isResizing: true,\r\n            resizeCursor: window.getComputedStyle(event.target).cursor || 'auto',\r\n            direction: direction,\r\n        });\r\n    };\r\n    Resizable.prototype.onMouseMove = function (event) {\r\n        if (!this.state.isResizing || !this.resizable) {\r\n            return;\r\n        }\r\n        var _a = this.props, maxWidth = _a.maxWidth, maxHeight = _a.maxHeight, minWidth = _a.minWidth, minHeight = _a.minHeight;\r\n        var clientX = event instanceof MouseEvent ? event.clientX : event.touches[0].clientX;\r\n        var clientY = event instanceof MouseEvent ? event.clientY : event.touches[0].clientY;\r\n        var _b = this.state, direction = _b.direction, original = _b.original, width = _b.width, height = _b.height;\r\n        var parentSize = this.getParentSize();\r\n        var max = calculateNewMax(parentSize, maxWidth, maxHeight, minWidth, minHeight);\r\n        maxWidth = max.maxWidth;\r\n        maxHeight = max.maxHeight;\r\n        minWidth = max.minWidth;\r\n        minHeight = max.minHeight;\r\n        // Calculate new size\r\n        var _c = this.calculateNewSizeFromDirection(clientX, clientY), newHeight = _c.newHeight, newWidth = _c.newWidth;\r\n        // Calculate max size from boundary settings\r\n        var boundaryMax = this.calculateNewMaxFromBoundary(maxWidth, maxHeight);\r\n        // Calculate new size from aspect ratio\r\n        var newSize = this.calculateNewSizeFromAspectRatio(newWidth, newHeight, { width: boundaryMax.maxWidth, height: boundaryMax.maxHeight }, { width: minWidth, height: minHeight });\r\n        newWidth = newSize.newWidth;\r\n        newHeight = newSize.newHeight;\r\n        if (this.props.grid) {\r\n            var newGridWidth = snap(newWidth, this.props.grid[0]);\r\n            var newGridHeight = snap(newHeight, this.props.grid[1]);\r\n            var gap = this.props.snapGap || 0;\r\n            newWidth = gap === 0 || Math.abs(newGridWidth - newWidth) <= gap ? newGridWidth : newWidth;\r\n            newHeight = gap === 0 || Math.abs(newGridHeight - newHeight) <= gap ? newGridHeight : newHeight;\r\n        }\r\n        if (this.props.snap && this.props.snap.x) {\r\n            newWidth = findClosestSnap(newWidth, this.props.snap.x, this.props.snapGap);\r\n        }\r\n        if (this.props.snap && this.props.snap.y) {\r\n            newHeight = findClosestSnap(newHeight, this.props.snap.y, this.props.snapGap);\r\n        }\r\n        var delta = {\r\n            width: newWidth - original.width,\r\n            height: newHeight - original.height,\r\n        };\r\n        if (width && typeof width === 'string') {\r\n            if (endsWith(width, '%')) {\r\n                var percent = (newWidth / parentSize.width) * 100;\r\n                newWidth = percent + \"%\";\r\n            }\r\n            else if (endsWith(width, 'vw')) {\r\n                var vw = (newWidth / window.innerWidth) * 100;\r\n                newWidth = vw + \"vw\";\r\n            }\r\n            else if (endsWith(width, 'vh')) {\r\n                var vh = (newWidth / window.innerHeight) * 100;\r\n                newWidth = vh + \"vh\";\r\n            }\r\n        }\r\n        if (height && typeof height === 'string') {\r\n            if (endsWith(height, '%')) {\r\n                var percent = (newHeight / parentSize.height) * 100;\r\n                newHeight = percent + \"%\";\r\n            }\r\n            else if (endsWith(height, 'vw')) {\r\n                var vw = (newHeight / window.innerWidth) * 100;\r\n                newHeight = vw + \"vw\";\r\n            }\r\n            else if (endsWith(height, 'vh')) {\r\n                var vh = (newHeight / window.innerHeight) * 100;\r\n                newHeight = vh + \"vh\";\r\n            }\r\n        }\r\n        this.setState({\r\n            width: this.createSizeForCssProperty(newWidth, 'width'),\r\n            height: this.createSizeForCssProperty(newHeight, 'height'),\r\n        });\r\n        if (this.props.onResize) {\r\n            this.props.onResize(event, direction, this.resizable, delta);\r\n        }\r\n    };\r\n    Resizable.prototype.onMouseUp = function (event) {\r\n        var _a = this.state, isResizing = _a.isResizing, direction = _a.direction, original = _a.original;\r\n        if (!isResizing || !this.resizable) {\r\n            return;\r\n        }\r\n        var delta = {\r\n            width: this.size.width - original.width,\r\n            height: this.size.height - original.height,\r\n        };\r\n        if (this.props.onResizeStop) {\r\n            this.props.onResizeStop(event, direction, this.resizable, delta);\r\n        }\r\n        if (this.props.size) {\r\n            this.setState(this.props.size);\r\n        }\r\n        this.unbindEvents();\r\n        this.setState({ isResizing: false, resizeCursor: 'auto' });\r\n    };\r\n    Resizable.prototype.updateSize = function (size) {\r\n        this.setState({ width: size.width, height: size.height });\r\n    };\r\n    Resizable.prototype.renderResizer = function () {\r\n        var _this = this;\r\n        var _a = this.props, enable = _a.enable, handleStyles = _a.handleStyles, handleClasses = _a.handleClasses, handleWrapperStyle = _a.handleWrapperStyle, handleWrapperClass = _a.handleWrapperClass, handleComponent = _a.handleComponent;\r\n        if (!enable) {\r\n            return null;\r\n        }\r\n        var resizers = Object.keys(enable).map(function (dir) {\r\n            if (enable[dir] !== false) {\r\n                return (React.createElement(Resizer, { key: dir, direction: dir, onResizeStart: _this.onResizeStart, replaceStyles: handleStyles && handleStyles[dir], className: handleClasses && handleClasses[dir] }, handleComponent && handleComponent[dir] ? handleComponent[dir] : null));\r\n            }\r\n            return null;\r\n        });\r\n        // #93 Wrap the resize box in span (will not break 100% width/height)\r\n        return (React.createElement(\"span\", { className: handleWrapperClass, style: handleWrapperStyle }, resizers));\r\n    };\r\n    Resizable.prototype.render = function () {\r\n        var _this = this;\r\n        var extendsProps = Object.keys(this.props).reduce(function (acc, key) {\r\n            if (definedProps.indexOf(key) !== -1) {\r\n                return acc;\r\n            }\r\n            acc[key] = _this.props[key];\r\n            return acc;\r\n        }, {});\r\n        return (React.createElement(\"div\", __assign({ ref: function (c) {\r\n                if (c) {\r\n                    _this.resizable = c;\r\n                }\r\n            }, style: __assign({ position: 'relative', userSelect: this.state.isResizing ? 'none' : 'auto' }, this.props.style, this.sizeStyle, { maxWidth: this.props.maxWidth, maxHeight: this.props.maxHeight, minWidth: this.props.minWidth, minHeight: this.props.minHeight, boxSizing: 'border-box', flexShrink: 0 }), className: this.props.className }, extendsProps),\r\n            this.state.isResizing && (React.createElement(\"div\", { style: {\r\n                    height: '100%',\r\n                    width: '100%',\r\n                    backgroundColor: 'rgba(0,0,0,0)',\r\n                    cursor: \"\" + (this.state.resizeCursor || 'auto'),\r\n                    opacity: 0,\r\n                    position: 'fixed',\r\n                    zIndex: 9999,\r\n                    top: '0',\r\n                    left: '0',\r\n                    bottom: '0',\r\n                    right: '0',\r\n                } })),\r\n            this.props.children,\r\n            this.renderResizer()));\r\n    };\r\n    Resizable.defaultProps = {\r\n        onResizeStart: function () { },\r\n        onResize: function () { },\r\n        onResizeStop: function () { },\r\n        enable: {\r\n            top: true,\r\n            right: true,\r\n            bottom: true,\r\n            left: true,\r\n            topRight: true,\r\n            bottomRight: true,\r\n            bottomLeft: true,\r\n            topLeft: true,\r\n        },\r\n        style: {},\r\n        grid: [1, 1],\r\n        lockAspectRatio: false,\r\n        lockAspectRatioExtraWidth: 0,\r\n        lockAspectRatioExtraHeight: 0,\r\n        scale: 1,\r\n        resizeRatio: 1,\r\n        snapGap: 0,\r\n    };\r\n    return Resizable;\r\n}(React.PureComponent));\n\nexports.Resizable = Resizable;\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e(require(\"react\"),require(\"react-dom\")):\"function\"==typeof define&&define.amd?define([\"react\",\"react-dom\"],e):\"object\"==typeof exports?exports.ReactDraggable=e(require(\"react\"),require(\"react-dom\")):t.ReactDraggable=e(t.React,t.ReactDOM)}(window,function(t,e){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=4)}([function(t,e,n){t.exports=n(5)()},function(e,n){e.exports=t},function(t,n){t.exports=e},function(t,e,n){var r;\n/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/!function(){\"use strict\";var n={}.hasOwnProperty;function o(){for(var t=[],e=0;e<arguments.length;e++){var r=arguments[e];if(r){var a=typeof r;if(\"string\"===a||\"number\"===a)t.push(r);else if(Array.isArray(r)&&r.length){var i=o.apply(null,r);i&&t.push(i)}else if(\"object\"===a)for(var s in r)n.call(r,s)&&r[s]&&t.push(s)}}return t.join(\" \")}t.exports?(o.default=o,t.exports=o):void 0===(r=function(){return o}.apply(e,[]))||(t.exports=r)}()},function(t,e,n){var r=n(7),o=r.default,a=r.DraggableCore;t.exports=o,t.exports.default=o,t.exports.DraggableCore=a},function(t,e,n){\"use strict\";var r=n(6);function o(){}function a(){}a.resetWarningCache=o,t.exports=function(){function t(t,e,n,o,a,i){if(i!==r){var s=new Error(\"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types\");throw s.name=\"Invariant Violation\",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:a,resetWarningCache:o};return n.PropTypes=n,n}},function(t,e,n){\"use strict\";t.exports=\"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED\"},function(t,e,n){\"use strict\";n.r(e);var r=n(1),o=n.n(r),a=n(0),i=n.n(a),s=n(2),u=n.n(s),c=n(3),l=n.n(c);function f(t,e){for(var n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function p(t){return\"function\"==typeof t||\"[object Function]\"===Object.prototype.toString.call(t)}function d(t){return\"number\"==typeof t&&!isNaN(t)}function g(t){return parseInt(t,10)}function y(t,e,n){if(t[e])return new Error(\"Invalid prop \".concat(e,\" passed to \").concat(n,\" - do not set this, set it on the child.\"))}var h=[\"Moz\",\"Webkit\",\"O\",\"ms\"];function b(t,e){return e?\"\".concat(e).concat(function(t){for(var e=\"\",n=!0,r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):\"-\"===t[r]?n=!0:e+=t[r];return e}(t)):t}var m=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:\"transform\";if(\"undefined\"==typeof window||void 0===window.document)return\"\";var e=window.document.documentElement.style;if(t in e)return\"\";for(var n=0;n<h.length;n++)if(b(t,h[n])in e)return h[n];return\"\"}();function v(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var O=\"\";function S(t,e){return O||(O=f([\"matches\",\"webkitMatchesSelector\",\"mozMatchesSelector\",\"msMatchesSelector\",\"oMatchesSelector\"],function(e){return p(t[e])})),!!p(t[O])&&t[O](e)}function D(t,e,n){var r=t;do{if(S(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function x(t,e,n){t&&(t.attachEvent?t.attachEvent(\"on\"+e,n):t.addEventListener?t.addEventListener(e,n,!0):t[\"on\"+e]=n)}function P(t,e,n){t&&(t.detachEvent?t.detachEvent(\"on\"+e,n):t.removeEventListener?t.removeEventListener(e,n,!0):t[\"on\"+e]=null)}function j(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=g(n.borderTopWidth),e+=g(n.borderBottomWidth)}function E(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=g(n.borderLeftWidth),e+=g(n.borderRightWidth)}function T(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=g(n.paddingTop),e-=g(n.paddingBottom)}function N(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=g(n.paddingLeft),e-=g(n.paddingRight)}function C(t,e,n){var r=t.x,o=t.y,a=\"translate(\".concat(r).concat(n,\",\").concat(o).concat(n,\")\");if(e){var i=\"\".concat(\"string\"==typeof e.x?e.x:e.x+n),s=\"\".concat(\"string\"==typeof e.y?e.y:e.y+n);a=\"translate(\".concat(i,\", \").concat(s,\")\")+a}return a}function M(t){if(t){var e,n,r=t.getElementById(\"react-draggable-style-el\");r||((r=t.createElement(\"style\")).type=\"text/css\",r.id=\"react-draggable-style-el\",r.innerHTML=\".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\\n\",r.innerHTML+=\".react-draggable-transparent-selection *::selection {all: inherit;}\\n\",t.getElementsByTagName(\"head\")[0].appendChild(r)),t.body&&(e=t.body,n=\"react-draggable-transparent-selection\",e.classList?e.classList.add(n):e.className.match(new RegExp(\"(?:^|\\\\s)\".concat(n,\"(?!\\\\S)\")))||(e.className+=\" \".concat(n)))}}function k(t){try{t&&t.body&&(e=t.body,n=\"react-draggable-transparent-selection\",e.classList?e.classList.remove(n):e.className=e.className.replace(new RegExp(\"(?:^|\\\\s)\".concat(n,\"(?!\\\\S)\"),\"g\"),\"\")),t.selection?t.selection.empty():window.getSelection().removeAllRanges()}catch(t){}var e,n}function _(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?v(n,!0).forEach(function(e){w(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):v(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({touchAction:\"none\"},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function X(t){return\"both\"===t.props.axis||\"x\"===t.props.axis}function Y(t){return\"both\"===t.props.axis||\"y\"===t.props.axis}function L(t,e,n){var r=\"number\"==typeof e?function(t,e){return t.targetTouches&&f(t.targetTouches,function(t){return e===t.identifier})||t.changedTouches&&f(t.changedTouches,function(t){return e===t.identifier})}(t,e):null;if(\"number\"==typeof e&&!r)return null;var o=I(n);return function(t,e,n){var r=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect();return{x:(t.clientX+e.scrollLeft-r.left)/n,y:(t.clientY+e.scrollTop-r.top)/n}}(r||t,n.props.offsetParent||o.offsetParent||o.ownerDocument.body,n.props.scale)}function R(t,e,n){var r=t.state,o=!d(r.lastX),a=I(t);return o?{node:a,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:a,deltaX:e-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:e,y:n}}function A(t,e){var n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function I(t){var e=u.a.findDOMNode(t);if(!e)throw new Error(\"<DraggableCore>: Unmounted during event!\");return e}function U(t){return(U=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function V(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function W(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function B(t){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function H(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function G(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var z={touch:{start:\"touchstart\",move:\"touchmove\",stop:\"touchend\"},mouse:{start:\"mousedown\",move:\"mousemove\",stop:\"mouseup\"}},F=z.mouse,J=function(t){function e(){var t,n,r,o;!function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e);for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];return r=this,o=(t=B(e)).call.apply(t,[this].concat(i)),n=!o||\"object\"!==U(o)&&\"function\"!=typeof o?H(r):o,G(H(n),\"state\",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),G(H(n),\"handleDragStart\",function(t){if(n.props.onMouseDown(t),!n.props.allowAnyClick&&\"number\"==typeof t.button&&0!==t.button)return!1;var e=u.a.findDOMNode(H(n));if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error(\"<DraggableCore> not mounted on DragStart!\");var r=e.ownerDocument;if(!(n.props.disabled||!(t.target instanceof r.defaultView.Node)||n.props.handle&&!D(t.target,n.props.handle,e)||n.props.cancel&&D(t.target,n.props.cancel,e))){var o=function(t){return t.targetTouches&&t.targetTouches[0]?t.targetTouches[0].identifier:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].identifier:void 0}(t);n.setState({touchIdentifier:o});var a=L(t,o,H(n));if(null!=a){var i=a.x,s=a.y,c=R(H(n),i,s);n.props.onStart,!1!==n.props.onStart(t,c)&&(n.props.enableUserSelectHack&&M(r),n.setState({dragging:!0,lastX:i,lastY:s}),x(r,F.move,n.handleDrag),x(r,F.stop,n.handleDragStop))}}}),G(H(n),\"handleDrag\",function(t){\"touchmove\"===t.type&&t.preventDefault();var e=L(t,n.state.touchIdentifier,H(n));if(null!=e){var r,o,a,i=e.x,s=e.y;if(Array.isArray(n.props.grid)){var u=i-n.state.lastX,c=s-n.state.lastY,l=V((r=n.props.grid,o=u,a=c,[Math.round(o/r[0])*r[0],Math.round(a/r[1])*r[1]]),2);if(u=l[0],c=l[1],!u&&!c)return;i=n.state.lastX+u,s=n.state.lastY+c}var f=R(H(n),i,s);if(!1!==n.props.onDrag(t,f))n.setState({lastX:i,lastY:s});else try{n.handleDragStop(new MouseEvent(\"mouseup\"))}catch(t){var p=document.createEvent(\"MouseEvents\");p.initMouseEvent(\"mouseup\",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),n.handleDragStop(p)}}}),G(H(n),\"handleDragStop\",function(t){if(n.state.dragging){var e=L(t,n.state.touchIdentifier,H(n));if(null!=e){var r=e.x,o=e.y,a=R(H(n),r,o),i=u.a.findDOMNode(H(n));i&&n.props.enableUserSelectHack&&k(i.ownerDocument),n.setState({dragging:!1,lastX:NaN,lastY:NaN}),n.props.onStop(t,a),i&&(P(i.ownerDocument,F.move,n.handleDrag),P(i.ownerDocument,F.stop,n.handleDragStop))}}}),G(H(n),\"onMouseDown\",function(t){return F=z.mouse,n.handleDragStart(t)}),G(H(n),\"onMouseUp\",function(t){return F=z.mouse,n.handleDragStop(t)}),G(H(n),\"onTouchStart\",function(t){return F=z.touch,n.handleDragStart(t)}),G(H(n),\"onTouchEnd\",function(t){return F=z.touch,n.handleDragStop(t)}),n}var n,r,a;return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}(e,o.a.Component),n=e,(r=[{key:\"componentWillUnmount\",value:function(){var t=u.a.findDOMNode(this);if(t){var e=t.ownerDocument;P(e,z.mouse.move,this.handleDrag),P(e,z.touch.move,this.handleDrag),P(e,z.mouse.stop,this.handleDragStop),P(e,z.touch.stop,this.handleDragStop),this.props.enableUserSelectHack&&k(e)}}},{key:\"render\",value:function(){return o.a.cloneElement(o.a.Children.only(this.props.children),{style:_(this.props.children.props.style),onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&W(n.prototype,r),a&&W(n,a),e}();function K(t){return(K=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function Q(){return(Q=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function Z(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function $(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){o=!0,a=t}finally{try{r||null==s.return||s.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(n,!0).forEach(function(e){st(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function nt(t){return(nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rt(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}function ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function at(t,e,n){return e&&ot(t.prototype,e),n&&ot(t,n),t}function it(t,e){return(it=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function st(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}G(J,\"displayName\",\"DraggableCore\"),G(J,\"propTypes\",{allowAnyClick:i.a.bool,disabled:i.a.bool,enableUserSelectHack:i.a.bool,offsetParent:function(t,e){if(t[e]&&1!==t[e].nodeType)throw new Error(\"Draggable's offsetParent must be a DOM Node.\")},grid:i.a.arrayOf(i.a.number),handle:i.a.string,cancel:i.a.string,onStart:i.a.func,onDrag:i.a.func,onStop:i.a.func,onMouseDown:i.a.func,scale:i.a.number,className:y,style:y,transform:y}),G(J,\"defaultProps\",{allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),n.d(e,\"default\",function(){return ut}),n.d(e,\"DraggableCore\",function(){return J});var ut=function(t){function e(t){var n,r,o;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,e),r=this,o=nt(e).call(this,t),n=!o||\"object\"!==K(o)&&\"function\"!=typeof o?rt(r):o,st(rt(n),\"onDragStart\",function(t,e){if(!1===n.props.onStart(t,A(rt(n),e)))return!1;n.setState({dragging:!0,dragged:!0})}),st(rt(n),\"onDrag\",function(t,e){if(!n.state.dragging)return!1;var r=A(rt(n),e),o={x:r.x,y:r.y};if(n.props.bounds){var a=o.x,i=o.y;o.x+=n.state.slackX,o.y+=n.state.slackY;var s=$(function(t,e,n){if(!t.props.bounds)return[e,n];var r=t.props.bounds;r=\"string\"==typeof r?r:function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}(r);var o=I(t);if(\"string\"==typeof r){var a,i=o.ownerDocument,s=i.defaultView;if(!((a=\"parent\"===r?o.parentNode:i.querySelector(r))instanceof s.HTMLElement))throw new Error('Bounds selector \"'+r+'\" could not find an element.');var u=s.getComputedStyle(o),c=s.getComputedStyle(a);r={left:-o.offsetLeft+g(c.paddingLeft)+g(u.marginLeft),top:-o.offsetTop+g(c.paddingTop)+g(u.marginTop),right:N(a)-E(o)-o.offsetLeft+g(c.paddingRight)-g(u.marginRight),bottom:T(a)-j(o)-o.offsetTop+g(c.paddingBottom)-g(u.marginBottom)}}return d(r.right)&&(e=Math.min(e,r.right)),d(r.bottom)&&(n=Math.min(n,r.bottom)),d(r.left)&&(e=Math.max(e,r.left)),d(r.top)&&(n=Math.max(n,r.top)),[e,n]}(rt(n),o.x,o.y),2),u=s[0],c=s[1];o.x=u,o.y=c,o.slackX=n.state.slackX+(a-o.x),o.slackY=n.state.slackY+(i-o.y),r.x=o.x,r.y=o.y,r.deltaX=o.x-n.state.x,r.deltaY=o.y-n.state.y}if(!1===n.props.onDrag(t,r))return!1;n.setState(o)}),st(rt(n),\"onDragStop\",function(t,e){if(!n.state.dragging)return!1;if(!1===n.props.onStop(t,A(rt(n),e)))return!1;var r={dragging:!1,slackX:0,slackY:0};if(Boolean(n.props.position)){var o=n.props.position,a=o.x,i=o.y;r.x=a,r.y=i}n.setState(r)}),n.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,prevPropsPosition:et({},t.position),slackX:0,slackY:0,isElementSVG:!1},!t.position||t.onDrag||t.onStop||console.warn(\"A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.\"),n}return function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&it(t,e)}(e,o.a.Component),at(e,null,[{key:\"getDerivedStateFromProps\",value:function(t,e){var n=t.position,r=e.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:{x:n.x,y:n.y,prevPropsPosition:et({},n)}}}]),at(e,[{key:\"componentDidMount\",value:function(){void 0!==window.SVGElement&&u.a.findDOMNode(this)instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:\"componentWillUnmount\",value:function(){this.setState({dragging:!1})}},{key:\"render\",value:function(){var t,e=this.props,n=(e.axis,e.bounds,e.children),r=e.defaultPosition,a=e.defaultClassName,i=e.defaultClassNameDragging,s=e.defaultClassNameDragged,u=e.position,c=e.positionOffset,f=(e.scale,Z(e,[\"axis\",\"bounds\",\"children\",\"defaultPosition\",\"defaultClassName\",\"defaultClassNameDragging\",\"defaultClassNameDragged\",\"position\",\"positionOffset\",\"scale\"])),p={},d=null,g=!Boolean(u)||this.state.dragging,y=u||r,h={x:X(this)&&g?this.state.x:y.x,y:Y(this)&&g?this.state.y:y.y};this.state.isElementSVG?d=function(t,e){return C(t,e,\"\")}(h,c):p=function(t,e){var n=C(t,e,\"px\");return w({},b(\"transform\",m),n)}(h,c);var v=l()(n.props.className||\"\",a,(st(t={},i,this.state.dragging),st(t,s,this.state.dragged),t));return o.a.createElement(J,Q({},f,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),o.a.cloneElement(o.a.Children.only(n),{className:v,style:et({},n.props.style,{},p),transform:d}))}}]),e}();st(ut,\"displayName\",\"Draggable\"),st(ut,\"propTypes\",et({},J.propTypes,{axis:i.a.oneOf([\"both\",\"x\",\"y\",\"none\"]),bounds:i.a.oneOfType([i.a.shape({left:i.a.number,right:i.a.number,top:i.a.number,bottom:i.a.number}),i.a.string,i.a.oneOf([!1])]),defaultClassName:i.a.string,defaultClassNameDragging:i.a.string,defaultClassNameDragged:i.a.string,defaultPosition:i.a.shape({x:i.a.number,y:i.a.number}),positionOffset:i.a.shape({x:i.a.oneOfType([i.a.number,i.a.string]),y:i.a.oneOfType([i.a.number,i.a.string])}),position:i.a.shape({x:i.a.number,y:i.a.number}),className:y,style:y,transform:y})),st(ut,\"defaultProps\",et({},J.defaultProps,{axis:\"both\",bounds:!1,defaultClassName:\"react-draggable\",defaultClassNameDragging:\"react-draggable-dragging\",defaultClassNameDragged:\"react-draggable-dragged\",defaultPosition:{x:0,y:0},position:null,scale:1}))}])});\n//# sourceMappingURL=react-draggable.min.js.map","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export default class Browser {\n\n    public static _qs: any = null;\n\n    protected static _AudioContext: any = null;\n\n    public static get AudioContext(): any {\n        if (Browser._AudioContext === null) {\n            Browser._AudioContext =\n                typeof(AudioContext) != 'undefined' ? new AudioContext() :\n                typeof((window as any).webkitAudioContext) != 'undefined' ? new (window as any).webkitAudioContext() :\n                typeof((window as any).mozAudioContext) != 'undefined' ? new (window as any).mozAudioContext() : null;\n        }\n        return Browser._AudioContext;\n    }\n\n    public static bindRequestPointerLock(domElement: Element): void {\n        domElement.requestPointerLock =\n            domElement.requestPointerLock    ||\n            (domElement as any).mozRequestPointerLock ||\n            (domElement as any).webkitRequestPointerLock;\n    }\n\n    public static bindRequestFullscreen(domElement: Element): void {\n        domElement.requestFullscreen =\n            domElement.requestFullscreen    ||\n            (domElement as any).mozRequestFullScreen ||\n            (domElement as any).webkitRequestFullscreen ||\n            (domElement as any).webkitRequestFullScreen;\n    }\n\n    public static get QueryString(): any {\n        const query_string: any = {},\n              query = window.location.search.substring(1),\n              vars = query.split(\"&\");\n\n        for (let i = 0; i < vars.length; i++) {\n            const pair = vars[i].split(\"=\");\n\n            // If first entry with this name\n            if (typeof query_string[decodeURIComponent(pair[0])] === \"undefined\") {\n                query_string[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\n            // If second entry with this name\n            } else if (typeof query_string[decodeURIComponent(pair[0])] === \"string\") {\n                var arr = [ query_string[decodeURIComponent(pair[0])], decodeURIComponent(pair[1]) ];\n                query_string[decodeURIComponent(pair[0])] = arr;\n            // If third or later entry with this name\n            } else {\n                query_string[decodeURIComponent(pair[0])].push(decodeURIComponent(pair[1]));\n            }\n        }\n\n        Browser._qs = query_string;\n\n        return Browser._qs;\n    }\n}\n","import {\r\n    //CSMShadowGenerator,\r\n    Scene,\r\n    ShadowGenerator,\r\n    StandardMaterial,\r\n    UniversalCamera,\r\n    Vector3,\r\n} from \"babylonjs\";\r\n\r\nimport Sample from \"../Sample\";\r\nimport StandardShadow from \"./StandardShadow\";\r\nimport CSMGUI from \"./CSMGUI\";\r\nimport { CSMShadowGenerator } from \"./csmShadowGenerator\";\r\n\r\nexport default class CSM extends StandardShadow {\r\n\r\n    public static className: string = \"CSM\";\r\n\r\n    constructor(scene: Scene, camera: UniversalCamera, parent: Sample, name: string) {\r\n        super(scene, camera, parent, name);\r\n\r\n        (window as any).csm = this;\r\n        //this._shadowMapPlane.rotate(new Vector3(0, 0, 1), -Math.PI / 2);\r\n        //this._shadowMapPlane.bakeCurrentTransformIntoVertices();\r\n    }\r\n\r\n    protected getCSMGenerator(): CSMShadowGenerator {\r\n        return (this._shadowGenerator as unknown as CSMShadowGenerator);\r\n    }\r\n\r\n    public get cameraNearPlane(): number {\r\n        return this._cameraNearPlane;\r\n    }\r\n\r\n    public set cameraNearPlane(cnp: number) {\r\n        this._cameraNearPlane = cnp;\r\n        this.camera.minZ = cnp;\r\n        this.getCSMGenerator().setDistanceSplit();\r\n    }\r\n\r\n    public get cameraFarPlane(): number {\r\n        return this._cameraFarPlane;\r\n    }\r\n\r\n    public set cameraFarPlane(cfp: number) {\r\n        this._cameraFarPlane = cfp;\r\n        this.camera.maxZ = cfp;\r\n        this.getCSMGenerator().setDistanceSplit();\r\n    }\r\n\r\n    public get csmNumCascades(): number {\r\n        return this._csmNumCascades;\r\n    }\r\n\r\n    public set csmNumCascades(num: number) {\r\n        this._csmNumCascades = num;\r\n        this.getCSMGenerator().dispose();\r\n        this._csmActiveCascade = 0;\r\n        this.createShadowGenerator();\r\n    }\r\n\r\n    public get csmActiveCascade(): number {\r\n        return this._csmActiveCascade;\r\n    }\r\n\r\n    public set csmActiveCascade(cac: number) {\r\n        this._csmActiveCascade = cac;\r\n        this.getCSMGenerator().activeCascade = cac;\r\n\r\n        this._shadowMapFilter = this.getCSMGenerator().filter;\r\n        this._shadowMapBias = this.getCSMGenerator().bias;\r\n        this._shadowMapNormalBias = this.getCSMGenerator().normalBias;\r\n        this._shadowMapDarkness = this.getCSMGenerator().darkness;\r\n        this._shadowMapQuality = this.getCSMGenerator().filteringQuality;\r\n        this._shadowMapDepthScale = this.getCSMGenerator().depthScale;\r\n        this._shadowMapBlurScale = this.getCSMGenerator().blurScale;\r\n        this._shadowMapUseKernelBlur = this.getCSMGenerator().useKernelBlur;\r\n        this._shadowMapBlurKernel = this.getCSMGenerator().blurKernel;\r\n        this._shadowMapBlurBoxOffset = this.getCSMGenerator().blurBoxOffset;\r\n        this._shadowMapLightSizeUVRatio = this.getCSMGenerator().contactHardeningLightSizeUVRatio;\r\n\r\n        this.setShadowMapViewerTexture();\r\n    }\r\n\r\n    public get csmVisualizeCascades(): boolean {\r\n        return this._csmVisualizeCascades;\r\n    }\r\n\r\n    public set csmVisualizeCascades(cvc: boolean) {\r\n        this._csmVisualizeCascades = cvc;\r\n        this.getCSMGenerator().debug = cvc;\r\n    }\r\n\r\n    public get csmStabilizeCascades(): boolean {\r\n        return this._csmStabilizeCascades;\r\n    }\r\n\r\n    public set csmStabilizeCascades(ssc: boolean) {\r\n        this._csmStabilizeCascades = ssc;\r\n        this.getCSMGenerator().stabilizeCascades = ssc;\r\n    }\r\n\r\n    public get csmDepthClamp(): boolean {\r\n        return this._csmDepthClamp;\r\n    }\r\n\r\n    public set csmDepthClamp(cdc: boolean) {\r\n        this._csmDepthClamp = cdc;\r\n        this.getCSMGenerator().depthClamp = cdc;\r\n    }\r\n\r\n    public get csmLambda(): number {\r\n        return this._csmLambda;\r\n    }\r\n\r\n    public set csmLambda(cl: number) {\r\n        this._csmLambda = cl;\r\n        this.getCSMGenerator().lambda = cl;\r\n    }\r\n\r\n    public get csmUseRightDirectionAsUpForOrthoProj(): boolean {\r\n        return this._csmUseRightDirectionAsUpForOrthoProj;\r\n    }\r\n\r\n    public set csmUseRightDirectionAsUpForOrthoProj(curdfop: boolean) {\r\n        this._csmUseRightDirectionAsUpForOrthoProj = curdfop;\r\n        this.getCSMGenerator().useRightDirectionAsUpForOrthoProj = curdfop;\r\n    }\r\n\r\n    protected getLightExtents(): { min: Vector3, max: Vector3 } | null {\r\n        const cascade = this.getCSMGenerator().cascade;\r\n\r\n        if (!cascade) {\r\n            return null;\r\n        }\r\n\r\n        const csmSM = cascade.generator;\r\n\r\n        return {\r\n            \"min\": csmSM.lightMinExtents,\r\n            \"max\": csmSM.lightMaxExtents,\r\n        }\r\n    }\r\n\r\n    public createGUI(): void {\r\n        this.gui = new CSMGUI(this.name, this.scene.getEngine(), this._container, this);\r\n\r\n        this.gui.createGUI();\r\n    }\r\n\r\n    protected createGenerator(): ShadowGenerator {\r\n        const generator = new CSMShadowGenerator(this.shadowMapSize, this.sun, this._csmNumCascades);;\r\n\r\n        generator.activeCascade = CSMShadowGenerator.CASCADE_ALL;\r\n\r\n        return generator as unknown as ShadowGenerator;\r\n    }\r\n\r\n    protected setShadowMapViewerTexture(): void {\r\n        (this._shadowMapPlane.material as StandardMaterial).diffuseTexture = \r\n            this._csmActiveCascade !== CSMShadowGenerator.CASCADE_ALL && this._shadowMapFilter !== ShadowGenerator.FILTER_PCF ? this.getCSMGenerator().getShadowMaps()[this._csmActiveCascade] : null;\r\n    }\r\n\r\n    protected createShadowGenerator(): void {\r\n        super.createShadowGenerator();\r\n\r\n        const shadowGenerator = this.getCSMGenerator();\r\n\r\n        shadowGenerator.stabilizeCascades = this._csmStabilizeCascades;\r\n        shadowGenerator.depthClamp = this._csmDepthClamp;\r\n        shadowGenerator.lambda = this._csmLambda;\r\n        shadowGenerator.freezeShadowCastersBoundingInfo = true;\r\n\r\n        shadowGenerator.activeCascade = this._csmActiveCascade;\r\n\r\n        this.setShadowMapViewerTexture();\r\n    }\r\n\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n    Button,\r\n    Checkbox,\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Grid,\r\n    Icon,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    Switch,\r\n    Typography,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n    Engine,\r\n} from 'babylonjs';\r\n\r\nimport SplitBaseGUI from \"./SplitBaseGUI\";\r\nimport Sample from \"../Sample\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\n\r\nexport default class CSMGUI extends SplitBaseGUI {\r\n\r\n    constructor(name: string, engine: Engine, container: Sample, parent: ISampleSplit) {\r\n        super(name, engine, container, parent);\r\n\r\n        this._showAutoCalcPlanes = false;\r\n        this._showCSM = true;\r\n        this.dimensions.height = 860;\r\n    }\r\n\r\n    protected createCustomGUIProperties(): React.ReactElement {\r\n        const Properties = () => {\r\n\r\n            return (\r\n                <>\r\n                </>\r\n            );\r\n        };\r\n\r\n        return Properties();\r\n    }\r\n\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n    Grid,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n    Vector3,\r\n    Color3,\r\n    Engine,\r\n} from \"babylonjs\";\r\n\r\nimport MainGUI from \"../MainGUI\";\r\nimport Sample from \"../Sample\";\r\n\r\nexport interface ISceneDescription {\r\n    dname: string;\r\n    path: string;\r\n    name: string;\r\n    backfaceCulling: boolean;\r\n    camera: {\r\n        position: Vector3,\r\n        target: Vector3,\r\n    };\r\n    scaling: number;\r\n    sunColor: Color3;\r\n    light: {\r\n        nearPlane: number,\r\n        farPlane: number,\r\n    };\r\n}\r\n\r\nexport default class GlobalGUI extends MainGUI {\r\n\r\n    public scenes:  Array<ISceneDescription>;\r\n\r\n    protected _selectedScene:   number;\r\n\r\n    public get selectedScene(): number {\r\n        return this._selectedScene;\r\n    }\r\n\r\n    constructor(name: string, engine: Engine, parent: Sample) {\r\n        super(name, engine, parent);\r\n\r\n        this._selectedScene = 0;\r\n        this.scenes = [\r\n            {\r\n                \"dname\": \"Power Plant\",\r\n                \"path\": \"./resources/3d/powerplant/\",\r\n                \"name\": \"powerplant.obj\",\r\n                \"backfaceCulling\": false,  // Some meshes have incorrect winding orders... use no backface culling for now\r\n                \"camera\": {\r\n                    \"position\": new Vector3(40, 5, 5),\r\n                    \"target\": new Vector3(0, 0, 5),\r\n                },\r\n                \"scaling\": 0.5,\r\n                \"sunColor\": new Color3(1, 1, 1),\r\n                \"light\": {\r\n                    \"nearPlane\": -90,\r\n                    \"farPlane\": 130,\r\n                },\r\n            },\r\n            {\r\n                \"dname\": \"Tower\",\r\n                \"path\": \"./resources/3d/Tower/\",\r\n                \"name\": \"Tower.obj\",\r\n                \"backfaceCulling\": true,\r\n                \"camera\": {\r\n                    \"position\": new Vector3(40, 5, 5),\r\n                    \"target\": new Vector3(0, 5, 5),\r\n                },\r\n                \"scaling\": 0.025,\r\n                \"sunColor\": new Color3(1, 0.8, 0.5),\r\n                \"light\": {\r\n                    \"nearPlane\": -50,\r\n                    \"farPlane\": 150,\r\n                },\r\n            }/*,\r\n            {\r\n                \"dname\": \"Dude\",\r\n                \"path\": \"./resources/3d/Dude/\",\r\n                \"name\": \"dude.babylon\",\r\n                \"backfaceCulling\": true,\r\n                \"camera\": {\r\n                    \"position\": new Vector3(0, 76, 154),\r\n                    \"target\": new Vector3(0, 0, 0),\r\n                },\r\n                \"scaling\": 0.25,\r\n            }*/,\r\n            {\r\n                \"dname\": \"Columns\",\r\n                \"path\": \"./resources/3d/Columns/\",\r\n                \"name\": \"Columns.obj\",\r\n                \"backfaceCulling\": true,\r\n                \"camera\": {\r\n                    \"position\": new Vector3(40, 5, 5),\r\n                    \"target\": new Vector3(0, 5, 5),\r\n                },\r\n                \"scaling\": 0.25,\r\n                \"sunColor\": new Color3(1, 0.8, 0.5),\r\n                \"light\": {\r\n                    \"nearPlane\": -92,\r\n                    \"farPlane\": 150,\r\n                },\r\n            }\r\n        ];\r\n    }\r\n\r\n    protected createCustomGUIProperties(): React.ReactElement {\r\n        const classes = this._useStyles();\r\n        const [scene, setScene] = React.useState(this._selectedScene);\r\n\r\n        const changeScene = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n            this._selectedScene = event.target.value as number;\r\n            setScene(this._selectedScene);\r\n        };\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Grid item xs={6}>\r\n                    <Paper className={classes.propertyTitle}>Scene</Paper>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <Select\r\n                        className={classes.propertyValue}\r\n                        id=\"scene\"\r\n                        value={scene}\r\n                        onChange={changeScene}\r\n                        >\r\n                        { this.scenes.map((scene: any, idx: number) => {\r\n                            return (\r\n                                <MenuItem key={idx} value={idx}>{scene.dname}</MenuItem>\r\n                            );\r\n                        }) }\r\n                    </Select>\r\n                </Grid>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n}\r\n","import {\r\n    Color3,\r\n    Engine,\r\n    Matrix,\r\n    Mesh,\r\n    MeshBuilder,\r\n    Nullable,\r\n    Observer,\r\n    Quaternion,\r\n    Scene,\r\n    ShadowGenerator,\r\n    StandardMaterial,\r\n    UniversalCamera,\r\n    Vector3,\r\n} from \"babylonjs\";\r\n\r\nimport Sample, { enumSplitMode } from \"../Sample\";\r\nimport Split from \"../Split\";\r\nimport Utils from \"../Utils\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\nimport { ISceneDescription } from \"./GlobalGUI\";\r\n\r\nexport default class SplitBase extends Split implements ISampleSplit {\r\n\r\n    protected _sunDir: Vector3;\r\n    protected _sceneName: string;\r\n    protected _cameraNearPlane: number;\r\n    protected _cameraFarPlane: number;\r\n    protected _sunColor: Color3;\r\n    protected _animateLight: boolean;\r\n    protected _autoCalcShadowZBounds: boolean;\r\n    protected _lightNearPlane: number;\r\n    protected _lightFarPlane: number;\r\n    protected _showLightHelper: boolean;\r\n    protected _rotateLightObservable: Nullable<Observer<Scene>>;\r\n    protected _shadowMapPlane: Mesh;\r\n    protected _shadowMapShowDepthMap: boolean;\r\n    protected _showDepthMapObservable: Nullable<Observer<Scene>>;\r\n    protected _shadowMapSize: number;\r\n    protected _shadowMapFilter: number;\r\n    protected _shadowMapBias: number;\r\n    protected _shadowMapNormalBias: number;\r\n    protected _shadowMapDarkness: number;\r\n    protected _shadowMapQuality: number;\r\n    protected _shadowMapDepthScale: number;\r\n    protected _shadowMapBlurScale: number;\r\n    protected _shadowMapUseKernelBlur: boolean;\r\n    protected _shadowMapBlurKernel: number;\r\n    protected _shadowMapBlurBoxOffset: number;\r\n    protected _shadowMapLightSizeUVRatio: number;\r\n\r\n    protected _csmNumCascades: number;\r\n    protected _csmActiveCascade: number;\r\n    protected _csmVisualizeCascades: boolean;\r\n    protected _csmStabilizeCascades: boolean;\r\n    protected _csmDepthClamp: boolean;\r\n    protected _csmLambda: number;\r\n    protected _csmUseRightDirectionAsUpForOrthoProj: boolean;\r\n\r\n    constructor(scene: Scene, camera: UniversalCamera, parent: Sample, name: string) {\r\n        super(scene, camera, parent, name);\r\n\r\n        this._sunDir = new Vector3();\r\n        this._sunColor = new Color3();\r\n        this._sceneName = \"\";\r\n        this._cameraNearPlane = 0.25;\r\n        this._cameraFarPlane = 250;\r\n        this._animateLight = false;\r\n        this._autoCalcShadowZBounds = false;\r\n        this._lightNearPlane = -90;\r\n        this._lightFarPlane = 130;\r\n        this._showLightHelper = false;\r\n        this._rotateLightObservable = null;\r\n        this._shadowMapShowDepthMap = false;\r\n        this._showDepthMapObservable = null;\r\n        this._shadowMapSize = 1024;\r\n        this._shadowMapFilter = ShadowGenerator.FILTER_PCF;\r\n        this._shadowMapBias = 0.007;\r\n        this._shadowMapNormalBias = 0;\r\n        this._shadowMapDarkness = 0;\r\n        this._shadowMapQuality = ShadowGenerator.QUALITY_MEDIUM;\r\n        this._shadowMapDepthScale = 25;\r\n        this._shadowMapBlurScale = 2;\r\n        this._shadowMapUseKernelBlur = true;\r\n        this._shadowMapBlurKernel = 1;\r\n        this._shadowMapBlurBoxOffset = 1;\r\n        this._shadowMapLightSizeUVRatio = 0.005;\r\n\r\n        this._csmNumCascades = 4;\r\n        this._csmActiveCascade = 0;\r\n        this._csmVisualizeCascades = false;\r\n        this._csmStabilizeCascades = true;\r\n        this._csmDepthClamp = false;\r\n        this._csmLambda = 0.7;\r\n        this._csmUseRightDirectionAsUpForOrthoProj = false;\r\n\r\n        this._shadowMapPlane = null as any;\r\n\r\n        const size = 1;\r\n\r\n        this._shadowMapPlane = MeshBuilder.CreatePlane(this.name + \"_shadowmap\", {\r\n            \"width\": size,\r\n            \"height\": size,\r\n        }, this.scene);\r\n\r\n        this._shadowMapPlane.position.x += size / 2;\r\n        this._shadowMapPlane.position.y -= size / 2;\r\n        this._shadowMapPlane.bakeCurrentTransformIntoVertices();\r\n        this._shadowMapPlane.alwaysSelectAsActiveMesh = true;\r\n\r\n        const material = new StandardMaterial(this.name + \"_shadowmap_material\", scene);\r\n\r\n        material.emissiveColor = new Color3(1, 1, 1);\r\n        material.disableLighting = true;\r\n        material.depthFunction = Engine.ALWAYS;\r\n\r\n        this._shadowMapPlane.material = material;\r\n\r\n        this._shadowMapPlane.setEnabled(false);\r\n    }\r\n\r\n    public render(): void {\r\n        const sky = this.scene.getMeshByName(\"skyBox\");\r\n        if (sky) {\r\n            sky.position.set(this.camera.position.x, this.camera.position.y, this.camera.position.z);\r\n        }\r\n\r\n        super.render();\r\n    }\r\n\r\n    public get shadowMapPlane(): Mesh {\r\n        return this._shadowMapPlane;\r\n    }\r\n\r\n    public initialize(scene: ISceneDescription, ambientColor: Color3, sunDir: Vector3): Promise<ISampleSplit> {\r\n        return Promise.resolve(this);\r\n    }\r\n\r\n    public get sceneName(): string {\r\n        return this._sceneName;\r\n    }\r\n\r\n    public get cameraNearPlane(): number {\r\n        return this._cameraNearPlane;\r\n    }\r\n\r\n    public set cameraNearPlane(cnp: number) {\r\n        this._cameraNearPlane = cnp;\r\n        this.camera.minZ = cnp;\r\n    }\r\n\r\n    public get cameraFarPlane(): number {\r\n        return this._cameraFarPlane;\r\n    }\r\n\r\n    public set cameraFarPlane(cfp: number) {\r\n        this._cameraFarPlane = cfp;\r\n        this.camera.maxZ = cfp;\r\n    }\r\n\r\n    public get animateLight(): boolean {\r\n        return this._animateLight;\r\n    }\r\n\r\n    public set animateLight(al: boolean) {\r\n        if (this._rotateLightObservable && !al) {\r\n            this.scene.onBeforeRenderObservable.remove(this._rotateLightObservable);\r\n            this._rotateLightObservable = null;\r\n        }\r\n\r\n        this._animateLight = al;\r\n\r\n        if (!this._rotateLightObservable && al) {\r\n            this._rotateLightObservable = this.scene.onBeforeRenderObservable.add(this.rotateLight.bind(this));\r\n        }\r\n\r\n        this.setDirectionFromSibling(this._animateLight);\r\n    }\r\n\r\n    public get lightColor(): string {\r\n        return this._sunColor.toHexString();\r\n    }\r\n\r\n    public set lightColor(lc: string) {\r\n        this._sunColor = Color3.FromHexString(lc);\r\n    }\r\n\r\n    public get lightDirection(): Vector3 {\r\n        return this._sunDir;\r\n    }\r\n\r\n    public set lightDirection(ld: Vector3) {\r\n        this._sunDir = ld;\r\n    }\r\n\r\n    public get showLightHelper(): boolean {\r\n        return this._showLightHelper;\r\n    }\r\n\r\n    public set showLightHelper(slh: boolean) {\r\n        this._showLightHelper = slh;\r\n    }\r\n\r\n    public get shadowMapShowDepthMap(): boolean {\r\n        return this._shadowMapShowDepthMap;\r\n    }\r\n\r\n    public set shadowMapShowDepthMap(smsdm: boolean) {\r\n        if (this._shadowMapShowDepthMap && !smsdm) {\r\n            this.scene.onBeforeRenderObservable.remove(this._showDepthMapObservable);\r\n            this._showDepthMapObservable = null;\r\n        }\r\n\r\n        this._shadowMapShowDepthMap = smsdm;\r\n        this._shadowMapPlane.setEnabled(smsdm);\r\n\r\n        if (!this._showDepthMapObservable && smsdm) {\r\n            this._showDepthMapObservable = this.scene.onBeforeRenderObservable.add(this.showDepthMap.bind(this));\r\n        }\r\n    }\r\n\r\n    public get shadowMapSize(): number {\r\n        return this._shadowMapSize;\r\n    }\r\n\r\n    public set shadowMapSize(sms: number) {\r\n        this._shadowMapSize = sms;\r\n    }\r\n\r\n    public get shadowMapFilter(): number {\r\n        return this._shadowMapFilter;\r\n    }\r\n\r\n    public set shadowMapFilter(smf: number) {\r\n        this._shadowMapFilter = smf;\r\n    }\r\n\r\n    public get shadowMapBias(): number {\r\n        return this._shadowMapBias;\r\n    }\r\n\r\n    public set shadowMapBias(smb: number) {\r\n        this._shadowMapBias = smb;\r\n    }\r\n\r\n    public get shadowMapNormalBias(): number {\r\n        return this._shadowMapNormalBias;\r\n    }\r\n\r\n    public set shadowMapNormalBias(smnb: number) {\r\n        this._shadowMapNormalBias = smnb;\r\n    }\r\n\r\n    public get shadowMapDarkness(): number {\r\n        return this._shadowMapDarkness;\r\n    }\r\n\r\n    public set shadowMapDarkness(smd: number) {\r\n        this._shadowMapDarkness = smd;\r\n    }\r\n\r\n    public get shadowMapQuality(): number {\r\n        return this._shadowMapQuality;\r\n    }\r\n\r\n    public set shadowMapQuality(smq: number) {\r\n        this._shadowMapQuality = smq;\r\n    }\r\n\r\n    public get shadowMapDepthScale(): number {\r\n        return this._shadowMapDepthScale;\r\n    }\r\n\r\n    public set shadowMapDepthScale(smds: number) {\r\n        this._shadowMapDepthScale = smds;\r\n    }\r\n\r\n    public get shadowMapBlurScale(): number {\r\n        return this._shadowMapBlurScale;\r\n    }\r\n\r\n    public set shadowMapBlurScale(smbs: number) {\r\n        this._shadowMapBlurScale = smbs;\r\n    }\r\n\r\n    public get shadowMapUseKernelBlur(): boolean {\r\n        return this._shadowMapUseKernelBlur;\r\n    }\r\n\r\n    public set shadowMapUseKernelBlur(smukb: boolean) {\r\n        this._shadowMapUseKernelBlur = smukb;\r\n    }\r\n\r\n    public get shadowMapBlurKernel(): number {\r\n        return this._shadowMapBlurKernel;\r\n    }\r\n\r\n    public set shadowMapBlurKernel(smbk: number) {\r\n        this._shadowMapBlurKernel = smbk;\r\n    }\r\n\r\n    public get shadowMapBlurBoxOffset(): number {\r\n        return this._shadowMapBlurBoxOffset;\r\n    }\r\n\r\n    public set shadowMapBlurBoxOffset(smbbo: number) {\r\n        this._shadowMapBlurBoxOffset = smbbo;\r\n    }\r\n\r\n    public get shadowMapLightSizeUVRatio(): number {\r\n        return this._shadowMapLightSizeUVRatio;\r\n    }\r\n\r\n    public set shadowMapLightSizeUVRatio(smlsuvr: number) {\r\n        this._shadowMapLightSizeUVRatio = smlsuvr;\r\n    }\r\n\r\n    public get lightNearPlane(): number {\r\n        return this._lightNearPlane;\r\n    }\r\n\r\n    public set lightNearPlane(lnp: number) {\r\n        this._lightNearPlane = lnp;\r\n    }\r\n\r\n    public get lightFarPlane(): number {\r\n        return this._lightFarPlane;\r\n    }\r\n\r\n    public set lightFarPlane(lfp: number) {\r\n        this._lightFarPlane = lfp;\r\n    }\r\n\r\n    public get autoCalcShadowZBounds(): boolean {\r\n        return this._autoCalcShadowZBounds;\r\n    }\r\n\r\n    public set autoCalcShadowZBounds(acszb: boolean) {\r\n        this._autoCalcShadowZBounds = acszb;\r\n    }\r\n\r\n    public get csmNumCascades(): number {\r\n        return this._csmNumCascades;\r\n    }\r\n\r\n    public set csmNumCascades(num: number) {\r\n        this._csmNumCascades = num;\r\n    }\r\n\r\n    public get csmActiveCascade(): number {\r\n        return this._csmActiveCascade;\r\n    }\r\n\r\n    public set csmActiveCascade(cac: number) {\r\n        this._csmActiveCascade = cac;\r\n    }\r\n\r\n    public get csmVisualizeCascades(): boolean {\r\n        return this._csmVisualizeCascades;\r\n    }\r\n\r\n    public set csmVisualizeCascades(cvc: boolean) {\r\n        this._csmVisualizeCascades = cvc;\r\n    }\r\n\r\n    public get csmStabilizeCascades(): boolean {\r\n        return this._csmStabilizeCascades;\r\n    }\r\n\r\n    public set csmStabilizeCascades(csc: boolean) {\r\n        this._csmStabilizeCascades = csc;\r\n    }\r\n\r\n    public get csmDepthClamp(): boolean {\r\n        return this._csmDepthClamp;\r\n    }\r\n\r\n    public set csmDepthClamp(cdc: boolean) {\r\n        this._csmDepthClamp = cdc;\r\n    }\r\n\r\n    public get csmLambda(): number {\r\n        return this._csmLambda;\r\n    }\r\n\r\n    public set csmLambda(cl: number) {\r\n        this._csmLambda = cl;\r\n    }\r\n\r\n    public get csmUseRightDirectionAsUpForOrthoProj(): boolean {\r\n        return this._csmUseRightDirectionAsUpForOrthoProj;\r\n    }\r\n\r\n    public set csmUseRightDirectionAsUpForOrthoProj(curdfop: boolean) {\r\n        this._csmUseRightDirectionAsUpForOrthoProj = curdfop;\r\n    }\r\n\r\n    protected setDirectionFromSibling(checkAnimate: boolean = true): void {\r\n        for (let i = 0; i < this._container.splits.length; ++i) {\r\n            const ssplit = this._container.splits[i] as SplitBase;\r\n\r\n            if (ssplit !== this && (ssplit.animateLight === checkAnimate) && ssplit.group === this.group) {\r\n                this.lightDirection = ssplit.lightDirection.clone();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected rotateLight(): void {\r\n        const deltaTime = this.scene.getEngine().getDeltaTime() / 1000;\r\n\r\n        let matrix = new Matrix();\r\n\r\n        let rotY = Utils.XMScalarModAngle(deltaTime * 0.25);\r\n\r\n        let rotation = Quaternion.RotationAxis(new Vector3(0.0, 1.0, 0.0), rotY);\r\n\r\n        Matrix.FromQuaternionToRef(rotation, matrix);\r\n        Vector3.TransformCoordinatesToRef(this._sunDir, matrix, this._sunDir);\r\n\r\n        this.lightDirection = this._sunDir;\r\n    }\r\n\r\n    protected showDepthMap(): void {\r\n        this.camera.getViewMatrix(); // make sure the transformation matrix we get when calling 'getTransformationMatrix()' is calculated with an up to date view matrix\r\n\r\n        let invertCameraViewProj = Matrix.Invert(this.camera.getTransformationMatrix());\r\n\r\n        let h = 256 / this.scene.getEngine().getRenderWidth(true);\r\n\r\n        let pOfst = 0;\r\n\r\n        if (this._container.splitMode === enumSplitMode.LINEAR) {\r\n            let sidx = this._container.splits.indexOf(this),\r\n                sw = 2 / this._container.splits.length;\r\n            pOfst = sw * sidx + sw / 2 - h;\r\n        } else {\r\n            pOfst = 1 - h;\r\n        }\r\n\r\n        let p = new Vector3(-1, 1, -1 + 0.001);\r\n        let q = new Vector3(-1 + h * 2, 1, -1 + 0.001);\r\n\r\n        let pt = Vector3.TransformCoordinates(p, invertCameraViewProj);\r\n        let qt = Vector3.TransformCoordinates(q, invertCameraViewProj);\r\n        let d = qt.subtract(pt).length();\r\n\r\n        this.shadowMapPlane.scaling = new Vector3(d, d, 1);\r\n\r\n        p.x += pOfst;\r\n\r\n        this.shadowMapPlane.rotation = this.camera.rotation;\r\n        this.shadowMapPlane.position = Vector3.TransformCoordinates(p, invertCameraViewProj);\r\n    }\r\n\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Grid,\r\n    Icon,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    Switch,\r\n    TextField,\r\n    Typography,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n    Engine,\r\n    ShadowGenerator,\r\n} from 'babylonjs';\r\n\r\nimport { PrettoSlider } from \"../GUI\";\r\nimport Sample from \"../Sample\";\r\nimport SplitGUI from \"../SplitGUI\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\n\r\nexport default class SplitBaseGUI extends SplitGUI {\r\n\r\n    protected _sparent: ISampleSplit;\r\n    protected _showAutoCalcPlanes: boolean;\r\n    protected _showCSM: boolean;\r\n\r\n    constructor(name: string, engine: Engine, container: Sample, parent: ISampleSplit) {\r\n        super(name, engine, container, parent);\r\n\r\n        this._sparent = parent;\r\n        this._showAutoCalcPlanes = true;\r\n        this._showCSM = false;\r\n        this.dimensions.width = 320;\r\n        this.dimensions.height = 750;\r\n    }\r\n\r\n    protected createCustomGUI(): React.ReactElement {\r\n        const classes = this._useStyles();\r\n\r\n        const Properties = () => {\r\n            //const [ignored, forceUpdate] = React.useReducer((x) => x + 1, 0);\r\n\r\n            const [cameraNearPlane, setCameraNearPlane] = React.useState(this._sparent.cameraNearPlane);\r\n            const [cameraFarPlane, setCameraFarPlane] = React.useState(this._sparent.cameraFarPlane);\r\n\r\n            const [animateLight, setAnimateLight] = React.useState(this._sparent.animateLight);\r\n            const [lightColor, setLightColor] = React.useState(this._sparent.lightColor);\r\n            const [lightNearPlane, setLightNearPlane] = React.useState(Math.floor(this._sparent.lightNearPlane));\r\n            const [lightFarPlane, setLightFarPlane] = React.useState(Math.floor(this._sparent.lightFarPlane));\r\n            const [autoCalcShadowZBounds, setAutoCalcShadowZBounds] = React.useState(this._sparent.autoCalcShadowZBounds);\r\n            const [showLightHelper, setShowLightHelper] = React.useState(this._sparent.showLightHelper);\r\n\r\n            const [shadowMapShowDepthMap, setShadowMapShowDepthMap] = React.useState(this._sparent.shadowMapShowDepthMap);\r\n            const [shadowMapSize, setShadowMapSize] = React.useState(this._sparent.shadowMapSize);\r\n            const [shadowMapBias, setShadowMapBias] = React.useState(this._sparent.shadowMapBias);\r\n            const [shadowMapNormalBias, setShadowMapNormalBias] = React.useState(this._sparent.shadowMapNormalBias);\r\n            const [shadowMapDarkness, setShadowMapDarkness] = React.useState(this._sparent.shadowMapDarkness);\r\n            const [shadowMapFilter, setShadowMapFilter] = React.useState(this._sparent.shadowMapFilter);\r\n            const [shadowMapQuality, setShadowMapQuality] = React.useState(this._sparent.shadowMapQuality);\r\n            const [shadowMapDepthScale, setShadowMapDepthScale] = React.useState(this._sparent.shadowMapDepthScale);\r\n            const [shadowMapBlurScale, setShadowMapBlurScale] = React.useState(this._sparent.shadowMapBlurScale);\r\n            const [shadowMapUseKernelBlur, setShadowMapUseKernelBlur] = React.useState(this._sparent.shadowMapUseKernelBlur);\r\n            const [shadowMapBlurKernel, setShadowMapBlurKernel] = React.useState(this._sparent.shadowMapBlurKernel);\r\n            const [shadowMapBlurBoxOffset, setShadowMapBlurBoxOffset] = React.useState(this._sparent.shadowMapBlurBoxOffset);\r\n            const [shadowMapLightSizeUVRatio, setShadowMapLightSizeUVRatio] = React.useState(this._sparent.shadowMapLightSizeUVRatio);\r\n\r\n            const [csmNumCascades, setCSMNumCascades] = React.useState(this._sparent.csmNumCascades);\r\n            const [csmActiveCascade, setCSMActiveCascade] = React.useState(this._sparent.csmActiveCascade);\r\n            const [csmVisualizeCascades, setCSMVisualizeCascades] = React.useState(this._sparent.csmVisualizeCascades);\r\n            const [csmStabilizeCascades, setCSMStabilizeCascades] = React.useState(this._sparent.csmStabilizeCascades);\r\n            const [csmDepthClamp, setCSMDepthClamp] = React.useState(this._sparent.csmDepthClamp);\r\n            const [csmLambda, setCSMLambda] = React.useState(this._sparent.csmLambda);\r\n            const [csmUseRightDirectionAsUpForOrthoProj, setCSMUseRightDirectionAsUpForOrthoProj] = React.useState(this._sparent.csmUseRightDirectionAsUpForOrthoProj);\r\n\r\n\r\n            const changeCameraNearPlane = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.cameraNearPlane = value as number;\r\n                setCameraNearPlane(this._sparent.cameraNearPlane);\r\n            };\r\n\r\n            const changeCameraFarPlane = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.cameraFarPlane = value as number;\r\n                setCameraFarPlane(this._sparent.cameraFarPlane);\r\n            };\r\n\r\n            const changeAnimateLight = (event: React.ChangeEvent, checked: boolean) => {\r\n                setAnimateLight(checked);\r\n                this._sparent.animateLight = checked;\r\n            };\r\n\r\n            const changeLightColor = (event: React.ChangeEvent<Element>) => {\r\n                this._sparent.lightColor = (event.target as any).value;\r\n                setLightColor(this._sparent.lightColor);\r\n            };\r\n\r\n            const changeLightNearPlane = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.lightNearPlane = value as number;\r\n                setLightNearPlane(this._sparent.lightNearPlane);\r\n            };\r\n\r\n            const changeLightFarPlane = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.lightFarPlane = value as number;\r\n                setLightFarPlane(this._sparent.lightFarPlane);\r\n            };\r\n\r\n            const changeAutoCalcShadowZBounds = (event: React.ChangeEvent, checked: boolean) => {\r\n                setAutoCalcShadowZBounds(checked);\r\n                this._sparent.autoCalcShadowZBounds = checked;\r\n            };\r\n\r\n            const changeShowLightHelper = (event: React.ChangeEvent, checked: boolean) => {\r\n                setShowLightHelper(checked);\r\n                this._sparent.showLightHelper = checked;\r\n            };\r\n\r\n\r\n            const changeShadowMapShowDepthMap = (event: React.ChangeEvent, checked: boolean) => {\r\n                setShadowMapShowDepthMap(checked);\r\n                this._sparent.shadowMapShowDepthMap = checked;\r\n            };\r\n\r\n            const changeShadowMapSize = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.shadowMapSize = event.target.value as number;\r\n                setShadowMapSize(this._sparent.shadowMapSize);\r\n            };\r\n\r\n            const changeShadowMapBias = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\r\n                this._sparent.shadowMapBias = event.target.value as number;\r\n                setShadowMapBias(this._sparent.shadowMapBias);\r\n            };\r\n\r\n            const changeShadowMapNormalBias = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\r\n                this._sparent.shadowMapNormalBias = event.target.value as number;\r\n                setShadowMapNormalBias(this._sparent.shadowMapNormalBias);\r\n            };\r\n\r\n            const changeShadowMapDarkness = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.shadowMapDarkness = value as number;\r\n                setShadowMapDarkness(this._sparent.shadowMapDarkness);\r\n            };\r\n\r\n            const changeShadowMapFilter = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.shadowMapFilter = event.target.value as number;\r\n                setShadowMapFilter(this._sparent.shadowMapFilter);\r\n            };\r\n\r\n            const changeShadowMapQuality = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.shadowMapQuality = event.target.value as number;\r\n                setShadowMapQuality(this._sparent.shadowMapQuality);\r\n            };\r\n\r\n            const changeShadowMapDepthScale = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\r\n                this._sparent.shadowMapDepthScale = event.target.value as number;\r\n                setShadowMapDepthScale(this._sparent.shadowMapDepthScale);\r\n            };\r\n\r\n            const changeShadowMapBlurScale = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.shadowMapBlurScale = value as number;\r\n                setShadowMapBlurScale(this._sparent.shadowMapBlurScale);\r\n            };\r\n\r\n            const changeShadowMapUseKernelBlur = (event: React.ChangeEvent, checked: boolean) => {\r\n                setShadowMapUseKernelBlur(checked);\r\n                this._sparent.shadowMapUseKernelBlur = checked;\r\n            };\r\n\r\n            const changeShadowMapBlurKernel = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.shadowMapBlurKernel = value as number;\r\n                setShadowMapBlurKernel(this._sparent.shadowMapBlurKernel);\r\n            };\r\n\r\n            const changeShadowMapBlurBoxOffset = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.shadowMapBlurBoxOffset = value as number;\r\n                setShadowMapBlurBoxOffset(this._sparent.shadowMapBlurBoxOffset);\r\n            };\r\n\r\n            const changeShadowMapLightSizeUVRatio = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\r\n                this._sparent.shadowMapLightSizeUVRatio = event.target.value as number;\r\n                setShadowMapLightSizeUVRatio(this._sparent.shadowMapLightSizeUVRatio);\r\n            };\r\n\r\n\r\n            const changeNumCascades = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.csmNumCascades = event.target.value as number;\r\n                setCSMNumCascades(this._sparent.csmNumCascades);\r\n                setCSMActiveCascade(this._sparent.csmActiveCascade);\r\n            };\r\n\r\n            const changeActiveCascade = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.csmActiveCascade = event.target.value as number;\r\n                setCSMActiveCascade(this._sparent.csmActiveCascade);\r\n                setShadowMapBias(this._sparent.shadowMapBias);\r\n                setShadowMapNormalBias(this._sparent.shadowMapNormalBias);\r\n                setShadowMapDarkness(this._sparent.shadowMapDarkness);\r\n                setShadowMapFilter(this._sparent.shadowMapFilter);\r\n                setShadowMapQuality(this._sparent.shadowMapQuality);\r\n                setShadowMapDepthScale(this._sparent.shadowMapDepthScale);\r\n                setShadowMapBlurScale(this._sparent.shadowMapBlurScale);\r\n                setShadowMapUseKernelBlur(this._sparent.shadowMapUseKernelBlur);\r\n                setShadowMapBlurKernel(this._sparent.shadowMapBlurKernel);\r\n                setShadowMapBlurBoxOffset(this._sparent.shadowMapBlurBoxOffset);\r\n                setShadowMapLightSizeUVRatio(this._sparent.shadowMapLightSizeUVRatio);\r\n            };\r\n\r\n            const changeCSMVisualizeCascades = (event: React.ChangeEvent, checked: boolean) => {\r\n                setCSMVisualizeCascades(checked);\r\n                this._sparent.csmVisualizeCascades = checked;\r\n            };\r\n\r\n            const changeCSMStabilizeCascades = (event: React.ChangeEvent, checked: boolean) => {\r\n                setCSMStabilizeCascades(checked);\r\n                this._sparent.csmStabilizeCascades = checked;\r\n            };\r\n\r\n            const changeCSMDepthClamp = (event: React.ChangeEvent, checked: boolean) => {\r\n                setCSMDepthClamp(checked);\r\n                this._sparent.csmDepthClamp = checked;\r\n            };\r\n\r\n            const changeCSMLambda = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.csmLambda = value as number;\r\n                setCSMLambda(this._sparent.csmLambda);\r\n            };\r\n\r\n            const changeCSMUseRightDirectionAsUpForOrthoProj = (event: React.ChangeEvent, checked: boolean) => {\r\n                setCSMUseRightDirectionAsUpForOrthoProj(checked);\r\n                this._sparent.csmUseRightDirectionAsUpForOrthoProj = checked;\r\n            };\r\n\r\n            React.useEffect(() => {\r\n                const handler = (event: Event) => {\r\n                    switch ((event as CustomEvent).detail.type) {\r\n                        case 'setShadowZBounds': {\r\n                            setLightNearPlane(Math.floor(this._sparent.lightNearPlane));\r\n                            setLightFarPlane(Math.floor(this._sparent.lightFarPlane));\r\n                            break;\r\n                        }\r\n                    }\r\n                };\r\n\r\n                window.addEventListener('gui_set_value', handler);\r\n\r\n                return () => {\r\n                    window.removeEventListener('gui_set_value', handler);\r\n                };\r\n            }, []);\r\n\r\n            return (\r\n                <>\r\n                    <ExpansionPanel defaultExpanded={true}>\r\n                        <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\r\n                            <Typography>Scene</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <Grid container spacing={1}>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Current Scene</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>{this._sparent.sceneName}</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Camera Near Plane</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <PrettoSlider valueLabelDisplay=\"auto\" value={cameraNearPlane} min={0} max={10} step={0.01} onChange={changeCameraNearPlane} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Camera Far Plane</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <PrettoSlider valueLabelDisplay=\"auto\" value={cameraFarPlane} min={0} max={2000} step={10} onChange={changeCameraFarPlane} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    <ExpansionPanel defaultExpanded={true}>\r\n                        <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\r\n                            <Typography>Light</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <Grid container spacing={1}>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Show Helper</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <Switch checked={showLightHelper} onChange={changeShowLightHelper} />                                \r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Animate</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <Switch checked={animateLight} onChange={changeAnimateLight} />                                \r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Color</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <TextField type=\"color\" value={lightColor} variant=\"filled\" onChange={changeLightColor} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                { this._showAutoCalcPlanes && <>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Auto Calc Planes</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <Switch checked={autoCalcShadowZBounds} onChange={changeAutoCalcShadowZBounds} />                                \r\n                                    </Paper>\r\n                                </Grid>\r\n                                { true && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Near Plane</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider disabled={autoCalcShadowZBounds} valueLabelDisplay=\"auto\" value={lightNearPlane} min={-250} max={250} step={1} onChange={changeLightNearPlane} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Far Plane</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider disabled={autoCalcShadowZBounds} valueLabelDisplay=\"auto\" value={lightFarPlane} min={0} max={500} step={1} onChange={changeLightFarPlane} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </> }\r\n                                </> }\r\n                            </Grid>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    { this._showCSM && <>\r\n                        <ExpansionPanel defaultExpanded={true}>\r\n                            <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\r\n                                <Typography>Cascaded Shadow Maps</Typography>\r\n                            </ExpansionPanelSummary>\r\n                            <ExpansionPanelDetails>\r\n                                <Grid container spacing={1}>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Num of Cascades</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={csmNumCascades}\r\n                                            onChange={changeNumCascades}\r\n                                        >\r\n                                            { [...Array(8).keys()].map((_, i) => <MenuItem key={i + 1} value={i + 1}>{i + 1}</MenuItem>) }\r\n                                        </Select>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Active Cascade</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={csmActiveCascade}\r\n                                            onChange={changeActiveCascade}\r\n                                        >\r\n                                            { [...Array(csmNumCascades).keys()].map((_, i) => <MenuItem key={i} value={i}>{i + 1}</MenuItem>) }\r\n                                        </Select>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Visualize Cascades</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={csmVisualizeCascades} onChange={changeCSMVisualizeCascades} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Stabilize Cascades</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={csmStabilizeCascades} onChange={changeCSMStabilizeCascades} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Depth Clamp</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={csmDepthClamp} onChange={changeCSMDepthClamp} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Lambda</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider valueLabelDisplay=\"auto\" value={csmLambda} min={0} max={1} step={0.01} onChange={changeCSMLambda} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Use Right as Up</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                        <Switch checked={csmUseRightDirectionAsUpForOrthoProj} onChange={changeCSMUseRightDirectionAsUpForOrthoProj} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </ExpansionPanelDetails>\r\n                        </ExpansionPanel>\r\n                    </> }\r\n                    <ExpansionPanel defaultExpanded={true}>\r\n                        <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\r\n                            <Typography>{ this._showCSM ? \"Cascade\" : \"Shadow Map\" }</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <Grid container spacing={1}>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Show Depth Map</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <Switch checked={shadowMapShowDepthMap} onChange={changeShadowMapShowDepthMap} />                                \r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Size</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Select\r\n                                        className={classes.propertyValue}\r\n                                        value={shadowMapSize}\r\n                                        onChange={changeShadowMapSize}\r\n                                        >\r\n                                        <MenuItem value={2048}>2048x2048</MenuItem>\r\n                                        <MenuItem value={1024}>1024x1024</MenuItem>\r\n                                        <MenuItem value={512}>512x512</MenuItem>\r\n                                        <MenuItem value={256}>256x256</MenuItem>\r\n                                    </Select>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Bias</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <TextField type=\"number\" value={shadowMapBias} variant=\"standard\" inputProps={{ step: \"0.001\" }} onChange={changeShadowMapBias} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Normal Bias</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <TextField type=\"number\" value={shadowMapNormalBias} variant=\"standard\" inputProps={{ step: \"0.001\" }} onChange={changeShadowMapNormalBias} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Darkness</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <PrettoSlider valueLabelDisplay=\"auto\" value={shadowMapDarkness} min={0} max={1} step={0.01} onChange={changeShadowMapDarkness} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Filter Type</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    { !this._showCSM && <>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={shadowMapFilter}\r\n                                            onChange={changeShadowMapFilter}\r\n                                            >\r\n                                            <MenuItem value={ShadowGenerator.FILTER_PCSS}>PCSS</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_PCF}>PCF</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP}>CESM (Blur)</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_CLOSEEXPONENTIALSHADOWMAP}>CESM</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP}>ESM (Blur)</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_EXPONENTIALSHADOWMAP}>ESM</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_POISSONSAMPLING}>Poisson</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_NONE}>None</MenuItem>\r\n                                        </Select>\r\n                                    </> }\r\n                                    { this._showCSM && <>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={shadowMapFilter}\r\n                                            onChange={changeShadowMapFilter}\r\n                                            >\r\n                                            <MenuItem value={ShadowGenerator.FILTER_PCF}>PCF</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_NONE}>None</MenuItem>\r\n                                        </Select>\r\n                                    </> }\r\n                                </Grid>\r\n                                {(shadowMapFilter === ShadowGenerator.FILTER_PCSS || shadowMapFilter === ShadowGenerator.FILTER_PCF) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Filtering Quality</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={shadowMapQuality}\r\n                                            onChange={changeShadowMapQuality}\r\n                                            >\r\n                                            <MenuItem value={ShadowGenerator.QUALITY_LOW}>Low</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.QUALITY_MEDIUM}>Medium</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.QUALITY_HIGH}>High</MenuItem>\r\n                                        </Select>\r\n                                    </Grid>\r\n                                </> }\r\n                                {(shadowMapFilter === ShadowGenerator.FILTER_PCSS) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Light Size UV Ratio</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <TextField type=\"number\" value={shadowMapLightSizeUVRatio} variant=\"standard\" inputProps={{ step: \"0.001\" }} onChange={changeShadowMapLightSizeUVRatio} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </> }\r\n                                {(shadowMapFilter === ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP || shadowMapFilter === ShadowGenerator.FILTER_EXPONENTIALSHADOWMAP) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Depth Scale</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <TextField type=\"number\" value={shadowMapDepthScale} variant=\"standard\" inputProps={{ step: \"1\" }} onChange={changeShadowMapDepthScale} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </> }\r\n                                {(shadowMapFilter === ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Blur Scale</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider valueLabelDisplay=\"auto\" defaultValue={shadowMapBlurScale} min={1} max={4} step={1} onChange={changeShadowMapBlurScale} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </> }\r\n                                {(shadowMapFilter === ShadowGenerator.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP || shadowMapFilter === ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Use Kernel Blur</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={shadowMapUseKernelBlur} onChange={changeShadowMapUseKernelBlur} />                                \r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    {shadowMapUseKernelBlur && <>\r\n                                        <Grid item xs={6}>\r\n                                            <Paper className={classes.subPropertyTitle}>Blur Kernel</Paper>\r\n                                        </Grid>\r\n                                        <Grid item xs={6} className={classes.propertyValue}>\r\n                                            <Paper className={classes.propertyValue}>\r\n                                                <PrettoSlider valueLabelDisplay=\"auto\" defaultValue={shadowMapBlurKernel} min={1} max={64} step={1} onChange={changeShadowMapBlurKernel} />\r\n                                            </Paper>\r\n                                        </Grid>\r\n                                    </> }\r\n                                    {!shadowMapUseKernelBlur && <>\r\n                                        <Grid item xs={6}>\r\n                                            <Paper className={classes.subPropertyTitle}>Blur Box Offset</Paper>\r\n                                        </Grid>\r\n                                        <Grid item xs={6} className={classes.propertyValue}>\r\n                                            <Paper className={classes.propertyValue}>\r\n                                                <PrettoSlider valueLabelDisplay=\"auto\" defaultValue={shadowMapBlurBoxOffset} min={1} max={64} step={1} onChange={changeShadowMapBlurBoxOffset} />\r\n                                            </Paper>\r\n                                        </Grid>\r\n                                    </> }\r\n                                </> }\r\n                            </Grid>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    {this.createCustomGUIProperties()}\r\n                </>\r\n            );\r\n        };\r\n\r\n        return Properties();\r\n    }\r\n\r\n    protected createCustomGUIProperties(): React.ReactElement {\r\n        return (\r\n            <>\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\n","import {\r\n    AbstractMesh,\r\n    Color3,\r\n    DirectionalLight,\r\n    IShadowGenerator,\r\n    Effect,\r\n    LightGizmo,\r\n    Matrix,\r\n    Mesh,\r\n    MeshBuilder,\r\n    Scene,\r\n    ShadowGenerator,\r\n    StandardMaterial,\r\n    UniversalCamera,\r\n    Vector3,\r\n    VertexData,\r\n    VectorSplitterBlock,\r\n    SubtractBlock,\r\n    DistanceBlock,\r\n    MinBlock,\r\n    DotBlock,\r\n    CrossBlock,\r\n    NormalizeBlock,\r\n    LengthBlock,\r\n    DivideBlock,\r\n    MultiplyBlock,\r\n    TrigonometryBlock,\r\n    MaxBlock,\r\n    LerpBlock,\r\n    TextureBlock,\r\n    VectorMergerBlock,\r\n    ClampBlock,\r\n    SmoothStepBlock,\r\n    NegateBlock,\r\n    AddBlock,\r\n    AnimatedInputBlockTypes,\r\n    FragmentOutputBlock,\r\n    InputBlock,\r\n    Material,\r\n    NodeMaterial,\r\n    NodeMaterialSystemValues,\r\n    Texture,\r\n    TransformBlock,\r\n    TrigonometryBlockOperations,\r\n    VertexOutputBlock,\r\n    ShaderMaterial,\r\n} from \"babylonjs\";\r\n\r\nimport Sample from \"../Sample\";\r\nimport Utils from \"../Utils\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\nimport { ISceneDescription } from \"./GlobalGUI\";\r\nimport SplitBase from \"./SplitBase\";\r\nimport StandardShadowGUI from \"./StandardShadowGUI\";\r\n\r\nconst testFog = false;\r\n\r\nexport default class StandardShadow extends SplitBase {\r\n\r\n    public static className: string = \"Standard\";\r\n\r\n    protected sun: DirectionalLight;\r\n    protected _shadowGenerator: IShadowGenerator;\r\n    protected _lightHelperFrustumLines: Array<Mesh>;\r\n    protected _lightGizmo: LightGizmo;\r\n    protected _skyBox: Mesh;\r\n\r\n    constructor(scene: Scene, camera: UniversalCamera, parent: Sample, name: string) {\r\n        super(scene, camera, parent, name);\r\n\r\n        this.sun = null as any;\r\n        this._shadowGenerator = null as any;\r\n        this._lightHelperFrustumLines = [];\r\n        this._lightGizmo = null as any;\r\n    }\r\n\r\n    protected getStandardGenerator(): ShadowGenerator {\r\n        return this._shadowGenerator as unknown as ShadowGenerator;\r\n    }\r\n\r\n    public get lightColor(): string {\r\n        return this._sunColor.toHexString();\r\n    }\r\n\r\n    public set lightColor(lc: string) {\r\n        this._sunColor = Color3.FromHexString(lc);\r\n        this.sun.diffuse = this._sunColor;\r\n    }\r\n\r\n    public get lightDirection(): Vector3 {\r\n        return this._sunDir;\r\n    }\r\n\r\n    public set lightDirection(ld: Vector3) {\r\n        this._sunDir = ld;\r\n        this.sun.direction = ld;\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    public get shadowMapSize(): number {\r\n        return this._shadowMapSize;\r\n    }\r\n\r\n    public set shadowMapSize(sms: number) {\r\n        this._shadowMapSize = sms;\r\n        this.createShadowGenerator();\r\n    }\r\n\r\n    public get shadowMapFilter(): number {\r\n        return this._shadowMapFilter;\r\n    }\r\n\r\n    public set shadowMapFilter(smf: number) {\r\n        this.getStandardGenerator().filter = smf;\r\n        this._shadowMapFilter = this.getStandardGenerator().filter;\r\n        this.setShadowMapViewerTexture();\r\n    }\r\n\r\n    public get shadowMapBias(): number {\r\n        return this._shadowMapBias;\r\n    }\r\n\r\n    public set shadowMapBias(smb: number) {\r\n        this._shadowMapBias = smb;\r\n        this.getStandardGenerator().bias = smb;\r\n    }\r\n\r\n    public get shadowMapNormalBias(): number {\r\n        return this._shadowMapNormalBias;\r\n    }\r\n\r\n    public set shadowMapNormalBias(smnb: number) {\r\n        this._shadowMapNormalBias = smnb;\r\n        this.getStandardGenerator().normalBias = smnb;\r\n    }\r\n\r\n    public get shadowMapDarkness(): number {\r\n        return this._shadowMapDarkness;\r\n    }\r\n\r\n    public set shadowMapDarkness(smd: number) {\r\n        this._shadowMapDarkness = smd;\r\n        this.getStandardGenerator().darkness = smd;\r\n    }\r\n\r\n    public get shadowMapQuality(): number {\r\n        return this._shadowMapQuality;\r\n    }\r\n\r\n    public set shadowMapQuality(smq: number) {\r\n        this._shadowMapQuality = smq;\r\n        this.getStandardGenerator().filteringQuality = smq;\r\n    }\r\n\r\n    public get shadowMapDepthScale(): number {\r\n        return this._shadowMapDepthScale;\r\n    }\r\n\r\n    public set shadowMapDepthScale(smds: number) {\r\n        this._shadowMapDepthScale = smds;\r\n        this.getStandardGenerator().depthScale = smds;\r\n    }\r\n\r\n    public get shadowMapBlurScale(): number {\r\n        return this._shadowMapBlurScale;\r\n    }\r\n\r\n    public set shadowMapBlurScale(smbs: number) {\r\n        this._shadowMapBlurScale = smbs;\r\n        this.getStandardGenerator().blurScale = smbs;\r\n    }\r\n\r\n    public get shadowMapUseKernelBlur(): boolean {\r\n        return this._shadowMapUseKernelBlur;\r\n    }\r\n\r\n    public set shadowMapUseKernelBlur(smukb: boolean) {\r\n        this._shadowMapUseKernelBlur = smukb;\r\n        this.getStandardGenerator().useKernelBlur = smukb;\r\n    }\r\n\r\n    public get shadowMapBlurKernel(): number {\r\n        return this._shadowMapBlurKernel;\r\n    }\r\n\r\n    public set shadowMapBlurKernel(smbk: number) {\r\n        this._shadowMapBlurKernel = smbk;\r\n        this.getStandardGenerator().blurKernel = smbk;\r\n    }\r\n\r\n    public get shadowMapBlurBoxOffset(): number {\r\n        return this._shadowMapBlurBoxOffset;\r\n    }\r\n\r\n    public set shadowMapBlurBoxOffset(smbbo: number) {\r\n        this._shadowMapBlurBoxOffset = smbbo;\r\n        this.getStandardGenerator().blurBoxOffset = smbbo;\r\n    }\r\n\r\n    public get shadowMapLightSizeUVRatio(): number {\r\n        return this._shadowMapLightSizeUVRatio;\r\n    }\r\n\r\n    public set shadowMapLightSizeUVRatio(smlsuvr: number) {\r\n        this._shadowMapLightSizeUVRatio = smlsuvr;\r\n        this.getStandardGenerator().contactHardeningLightSizeUVRatio = smlsuvr;\r\n    }\r\n\r\n    public get lightNearPlane(): number {\r\n        return this._lightNearPlane;\r\n    }\r\n\r\n    public set lightNearPlane(lnp: number) {\r\n        this._lightNearPlane = lnp;\r\n        this.sun.shadowMinZ = lnp;\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    public get lightFarPlane(): number {\r\n        return this._lightFarPlane;\r\n    }\r\n\r\n    public set lightFarPlane(lfp: number) {\r\n        this._lightFarPlane = lfp;\r\n        this.sun.shadowMaxZ = lfp;\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    public get showLightHelper(): boolean {\r\n        return this._showLightHelper;\r\n    }\r\n\r\n    public set showLightHelper(slh: boolean) {\r\n        this._showLightHelper = slh;\r\n\r\n        if (this._lightGizmo && !slh) {\r\n            this._lightGizmo.dispose();\r\n            this._lightGizmo = null as any;\r\n        }\r\n\r\n        if (slh) {\r\n            this._lightGizmo = new LightGizmo();\r\n            this._lightGizmo.light = this.sun;\r\n        }\r\n\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    public get autoCalcShadowZBounds(): boolean {\r\n        return this._autoCalcShadowZBounds;\r\n    }\r\n\r\n    public set autoCalcShadowZBounds(acszb: boolean) {\r\n        this._autoCalcShadowZBounds = acszb;\r\n        this.sun.autoCalcShadowZBounds = acszb;\r\n        if (this._autoCalcShadowZBounds) {\r\n            // @ts-ignore\r\n            this.sun.setShadowProjectionMatrix(Matrix.Identity(), this.getStandardGenerator().viewMatrix, this.getStandardGenerator().getShadowMaps()[0].renderList!);\r\n        } else {\r\n            this._lightNearPlane = this.sun.shadowMinZ;\r\n            this._lightFarPlane = this.sun.shadowMaxZ;\r\n\r\n            const event = new CustomEvent('gui_set_value', { detail: { type: 'setShadowZBounds' } });\r\n\r\n            window.dispatchEvent(event);\r\n        }\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    protected getLightExtents(): { min: Vector3, max: Vector3 } | null {\r\n        const light = this.sun as any;\r\n\r\n        return {\r\n            \"min\": new Vector3(light._orthoLeft, light._orthoBottom, this.sun.shadowMinZ),\r\n            \"max\": new Vector3(light._orthoRight, light._orthoTop, this.sun.shadowMaxZ),\r\n        }\r\n    }\r\n\r\n    protected getViewMatrix(): Matrix | null {\r\n        // @ts-ignore\r\n        return this.getStandardGenerator().viewMatrix;\r\n    }\r\n\r\n    protected buildLightHelper(): void {\r\n        this._lightHelperFrustumLines.forEach((mesh) => {\r\n            mesh.dispose();\r\n        });\r\n\r\n        this._lightHelperFrustumLines = [];\r\n\r\n        if (!this._showLightHelper) {\r\n            return;\r\n        }\r\n\r\n        const lightExtents = this.getLightExtents();\r\n        const lightView = this.getViewMatrix();\r\n\r\n        if (!lightExtents || !lightView) {\r\n            return;\r\n        }\r\n\r\n        const invLightView = Matrix.Invert(lightView);\r\n\r\n        const n1 = new Vector3(lightExtents.max.x, lightExtents.max.y, lightExtents.min.z);\r\n        const n2 = new Vector3(lightExtents.max.x, lightExtents.min.y, lightExtents.min.z);\r\n        const n3 = new Vector3(lightExtents.min.x, lightExtents.min.y, lightExtents.min.z);\r\n        const n4 = new Vector3(lightExtents.min.x, lightExtents.max.y, lightExtents.min.z);\r\n\r\n        const near1 = Vector3.TransformCoordinates(n1, invLightView);\r\n        const near2 = Vector3.TransformCoordinates(n2, invLightView);\r\n        const near3 = Vector3.TransformCoordinates(n3, invLightView);\r\n        const near4 = Vector3.TransformCoordinates(n4, invLightView);\r\n        \r\n        const f1 = new Vector3(lightExtents.max.x, lightExtents.max.y, lightExtents.max.z);\r\n        const f2 = new Vector3(lightExtents.max.x, lightExtents.min.y, lightExtents.max.z);\r\n        const f3 = new Vector3(lightExtents.min.x, lightExtents.min.y, lightExtents.max.z);\r\n        const f4 = new Vector3(lightExtents.min.x, lightExtents.max.y, lightExtents.max.z);\r\n\r\n        const far1 = Vector3.TransformCoordinates(f1, invLightView);\r\n        const far2 = Vector3.TransformCoordinates(f2, invLightView);\r\n        const far3 = Vector3.TransformCoordinates(f3, invLightView);\r\n        const far4 = Vector3.TransformCoordinates(f4, invLightView);\r\n        \r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"nearlines\", { points: [near1, near2, near3, near4, near1] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"farlines\",  { points: [far1, far2, far3, far4, far1] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"trlines\", { points: [ near1, far1 ] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"brlines\", { points: [ near2, far2 ] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"tllines\", { points: [ near3, far3 ] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"bllines\", { points: [ near4, far4 ] }, this.scene));\r\n\r\n        const makePlane = (name: string, color: Color3, positions: Array<number>) => {\r\n            let plane = new Mesh(name + \"plane\", this.scene), \r\n                mat = new StandardMaterial(name + \"PlaneMat\", this.scene);\r\n\r\n            plane.material = mat;\r\n\r\n            mat.emissiveColor = color;\r\n            mat.alpha = 0.3;\r\n            mat.backFaceCulling = false;\r\n            mat.disableLighting = true;\r\n\r\n            const indices = [0, 1, 2, 0, 2, 3];\r\n            \r\n            const vertexData = new VertexData();\r\n            \r\n            vertexData.positions = positions;\r\n            vertexData.indices = indices;    \r\n            \r\n            vertexData.applyToMesh(plane);\r\n\r\n            this._lightHelperFrustumLines.push(plane);\r\n        };\r\n\r\n        makePlane(\"near\",   new Color3(1, 0, 0),    [near1.x, near1.y, near1.z, near2.x, near2.y, near2.z, near3.x, near3.y, near3.z, near4.x, near4.y, near4.z ]);\r\n        makePlane(\"far\",    new Color3(0.3, 0, 0),  [far1.x, far1.y, far1.z, far2.x, far2.y, far2.z, far3.x, far3.y, far3.z, far4.x, far4.y, far4.z ]);\r\n        makePlane(\"right\",  new Color3(0, 1, 0),    [near1.x, near1.y, near1.z, far1.x, far1.y, far1.z, far2.x, far2.y, far2.z, near2.x, near2.y, near2.z ]);\r\n        makePlane(\"left\",   new Color3(0, 0.3, 0),  [near4.x, near4.y, near4.z, far4.x, far4.y, far4.z, far3.x, far3.y, far3.z, near3.x, near3.y, near3.z ]);\r\n        makePlane(\"top\",    new Color3(0, 0, 1),    [near1.x, near1.y, near1.z, far1.x, far1.y, far1.z, far4.x, far4.y, far4.z, near4.x, near4.y, near4.z ]);\r\n        makePlane(\"bottom\", new Color3(0, 0, 0.3),  [near2.x, near2.y, near2.z, far2.x, far2.y, far2.z, far3.x, far3.y, far3.z, near3.x, near3.y, near3.z ]);\r\n    }\r\n\r\n    public createGUI(): void {\r\n        this.gui = new StandardShadowGUI(this.name, this.scene.getEngine(), this._container, this);\r\n\r\n        this.gui.createGUI();\r\n    }\r\n\r\n    public async initialize(scene: ISceneDescription, ambientColor: Color3, sunDir: Vector3): Promise<ISampleSplit> {\r\n        this.scene.metadata = { \"name\": this.name };\r\n        this._sceneName = scene.dname;\r\n\r\n        this._sunDir = sunDir;\r\n        this._sunColor = scene.sunColor.clone();\r\n\r\n        this.sun = new DirectionalLight(\"sun\", sunDir, this.scene);\r\n        this.sun.intensity = 1;\r\n        this.sun.shadowMinZ = scene.light.nearPlane;\r\n        this.sun.shadowMaxZ = scene.light.farPlane;\r\n        this.sun.diffuse = this._sunColor;\r\n\r\n        (window as any).sun = this.sun;\r\n\r\n        this._skyBox = Utils.addSkybox(\"Clouds.dds\", this.scene, 100);\r\n\r\n        await Utils.loadObj(this.scene, scene.path, scene.name);\r\n\r\n        this.scene.activeCamera = this.camera;\r\n\r\n        this.scene.meshes.forEach((m) => {\r\n            if (m.name == 'skyBox' || m.name.indexOf(\"_shadowmap\") >= 0) { return; }\r\n\r\n            if (!m.material) { return; }\r\n\r\n            const mat = m.material as StandardMaterial;\r\n\r\n            mat.diffuseColor = new Color3(1., 1., 1.);\r\n            mat.specularColor = new Color3(0., 0., 0.);\r\n            mat.ambientColor = ambientColor;\r\n            mat.ambientTexture = null;\r\n            mat.backFaceCulling = scene.backfaceCulling;\r\n\r\n            if (!mat.diffuseTexture) {\r\n                mat.ambientColor = new Color3(0, 0, 0);\r\n            }\r\n            //!mat.freeze();\r\n\r\n            m.receiveShadows = true;\r\n\r\n            if (scene.scaling != 1) {\r\n                let matrix = Matrix.Identity();\r\n                matrix.scaleToRef(scene.scaling, matrix);\r\n                matrix.setRowFromFloats(3, 0, 0, 0, 1);\r\n                (m as Mesh).bakeTransformIntoVertices(matrix);\r\n                m.refreshBoundingInfo();\r\n            }\r\n        });\r\n\r\n        this.createShadowGenerator();\r\n\r\n        return this;\r\n    }\r\n\r\n    protected createGenerator(): ShadowGenerator {\r\n        return new ShadowGenerator(this.shadowMapSize, this.sun);\r\n    }\r\n\r\n    protected setShadowMapViewerTexture(): void {\r\n        // @ts-ignore\r\n        (this._shadowMapPlane.material as StandardMaterial).diffuseTexture = this._shadowMapFilter !== ShadowGenerator.FILTER_PCF ? this._shadowGenerator.getShadowMaps()[0] : null;\r\n    }\r\n\r\n    protected createShadowGenerator(): void {\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.dispose();\r\n            this._shadowGenerator = null as any;\r\n        }\r\n\r\n        const shadowGenerator = this.createGenerator();\r\n\r\n        this._shadowGenerator = shadowGenerator;\r\n\r\n        shadowGenerator.bias = this._shadowMapBias;\r\n        shadowGenerator.normalBias = this._shadowMapNormalBias;\r\n        shadowGenerator.darkness = this._shadowMapDarkness;\r\n        shadowGenerator.filter = this._shadowMapFilter;\r\n        shadowGenerator.filteringQuality = this._shadowMapQuality;\r\n        shadowGenerator.depthScale = this._shadowMapDepthScale;\r\n        shadowGenerator.blurScale = this._shadowMapBlurScale;\r\n        shadowGenerator.useKernelBlur = this._shadowMapUseKernelBlur;\r\n        shadowGenerator.blurKernel = this._shadowMapBlurKernel;\r\n        shadowGenerator.blurBoxOffset = this._shadowMapBlurBoxOffset;\r\n        shadowGenerator.contactHardeningLightSizeUVRatio = this._shadowMapLightSizeUVRatio;\r\n\r\n        this.setShadowMapViewerTexture();\r\n\r\n        (window as any).sg = shadowGenerator;\r\n\r\n        // @ts-ignore\r\n        const renderList = shadowGenerator.renderList!;\r\n\r\n        let num = 0, lstm: Array<AbstractMesh> = [];\r\n        this.scene.meshes.forEach((m) => {\r\n            if (m.name == 'skyBox') { return; }\r\n            renderList.push(m);\r\n            if (testFog) {\r\n                const diffText = (m.material as StandardMaterial).diffuseTexture;\r\n                if (diffText) {\r\n                    //m.material = this.buildNodeMaterial(diffText as Texture);\r\n                    m.material = this.buildShaderMaterial();\r\n                    (m.material as ShaderMaterial).setTexture(\"TextureSampler\", diffText as Texture);\r\n                }\r\n            }\r\n            /*if (m.name == \"mesh_108_Mesh_main_floor_subset_6\" || m.name == \"mesh_121_Mesh_g_bace_main05_subset_0\") {\r\n                if (m.name==\"mesh_121_Mesh_g_bace_main05_subset_0\")\r\n                    renderList.push(m);\r\n            } else {\r\n                lstm.push(m);\r\n            }*/\r\n        });\r\n        lstm.forEach((m) => {\r\n            m.dispose();\r\n        });\r\n\r\n        if (testFog) {\r\n            this.scene.onBeforeRenderObservable.add(() => {\r\n                let time = new Date().getTime();\r\n                this.scene.meshes.forEach((m) => {\r\n                    if (m.name == 'skyBox') { return; }\r\n                    if (m.material instanceof ShaderMaterial) {\r\n                        (m.material as ShaderMaterial).setVector3(\"u_Cameraposition\", this.camera.position);\r\n                        (m.material as ShaderMaterial).setFloat(\"u_FogRadius\", 23+18*Math.cos(time/500));\r\n                        (m.material as ShaderMaterial).setFloat(\"u_FogDensity\", 7+5*Math.cos(time/500));\r\n                    }\r\n                });\r\n            });\r\n        }\r\n    }\r\n\r\n    protected buildShaderMaterial(): Material {\r\n        Effect.ShadersStore[\"customVertexShader\"]= `   \r\n        precision highp float;\r\n\r\n        attribute vec3 position;\r\n        attribute vec2 uv;\r\n        \r\n        \r\n        uniform mat4 world;\r\n        uniform mat4 worldViewProjection;\r\n        #ifdef UVTRANSFORM0\r\n        uniform mat4 textureTransform;\r\n        #endif\r\n        \r\n        \r\n        #ifdef UVTRANSFORM0\r\n        varying vec2 transformedUV;\r\n        #endif\r\n        #ifdef VMAINUV\r\n        varying vec2 vMainuv;\r\n        #endif\r\n        varying vec4 v_output2;\r\n        \r\n        \r\n        \r\n        \r\n        float u_ = 1.0;\r\n        float u_PIOver = 1.57;\r\n        float u_1 = 0.0;\r\n        float u_2 = 1.0;\r\n        float u_3 = 0.0;\r\n        float u_4 = 0.0;\r\n        float u_5 = 0.0;\r\n        float u_6 = 0.0;\r\n        \r\n        \r\n        void main(void) {\r\n        vec4 output2 = world * vec4(position, 1.0);\r\n        vec4 output1 = world * vec4(position, 1.0);\r\n        vec4 output0 = worldViewProjection * vec4(position, 1.0);\r\n        gl_Position = output0;\r\n        #ifdef UVTRANSFORM0\r\n        transformedUV = vec2(textureTransform * vec4(uv.xy, 1.0, 0.0));\r\n        #endif\r\n        #ifdef VMAINUV\r\n        vMainuv = uv.xy;\r\n        #endif\r\n        v_output2 = output2;\r\n        \r\n        }\r\n        `;        \r\n\r\n        Effect.ShadersStore[\"customFragmentShader\"]=`\r\n        precision highp float;\r\n\r\n        #ifdef UVTRANSFORM0\r\n        uniform mat4 textureTransform;\r\n        #endif\r\n        uniform vec3 u_FogColor;\r\n        uniform vec3 u_FogCenter;\r\n        uniform vec3 u_Cameraposition;\r\n        uniform float u_FogRadius;\r\n        uniform float u_FogDensity;\r\n        \r\n        \r\n        uniform sampler2D TextureSampler;\r\n        \r\n        \r\n        #ifdef UVTRANSFORM0\r\n        varying vec2 transformedUV;\r\n        #endif\r\n        #ifdef VMAINUV\r\n        varying vec2 vMainuv;\r\n        #endif\r\n        varying vec4 v_output2;\r\n\r\n        #include<helperFunctions>\r\n\r\n        float u_ = 1.0;\r\n        float u_PIOver = 1.57;\r\n        float u_1 = 0.0;\r\n        float u_2 = 1.0;\r\n        float u_3 = 0.0;\r\n        float u_4 = 0.0;\r\n        float u_5 = 0.0;\r\n        float u_6 = 0.0;\r\n        \r\n        void main(void) {\r\n            #ifdef UVTRANSFORM0\r\n            vec4 tempTextureRead = texture(TextureSampler, transformedUV);\r\n            #endif\r\n            #ifdef VMAINUV\r\n            vec4 tempTextureRead = texture(TextureSampler, vMainuv);\r\n            #endif\r\n            vec4 rgba = tempTextureRead.rgba;\r\n            #ifdef ISLINEAR0\r\n            rgba = toGammaSpace(rgba);\r\n            #endif\r\n\r\n            vec3 volFogCenter = u_FogCenter;\r\n            vec3 volFogColor = u_FogColor;\r\n            float volFogRadius = u_FogRadius;\r\n            vec4 vwPos = v_output2;\r\n            vec3 vwCamPos = u_Cameraposition;\r\n\r\n            float volFogRadius2 = volFogRadius * volFogRadius;\r\n            float distCamToPos = distance(vwPos.xyz, vwCamPos);\r\n            vec3 dir = normalize(vwPos.xyz - vwCamPos);\r\n            vec3 L = volFogCenter - vwCamPos;\r\n            float tca = dot(L, dir);\r\n            float d2 = dot(L, L) - tca * tca;\r\n        \r\n            float thc = sqrt(max(volFogRadius2 - d2, 0.0));\r\n            float t0 = tca - thc;\r\n            float t1 = tca + thc;\r\n            float dist =  mix(0.0, min(distCamToPos, t1), max(sign(-t0), 0.0)*max(sign(t1), 0.0))\r\n                        + mix(0.0, min(distCamToPos, t1) - t0, max(sign(t0), 0.0)*max(sign(t1), 0.0)*max(sign(distCamToPos - t0), 0.0));\r\n            float distToCenter = length(cross(volFogCenter - vwCamPos, dir));\r\n            float fr = smoothstep(0.0, 1.0, cos(distToCenter/volFogRadius*3.141592/2.0));\r\n            float e = dist/(volFogRadius*2.0);\r\n            e = 1.0 - exp(-e * u_FogDensity);\r\n            vec4 glFragColorWithFog = mix(rgba, vec4(volFogColor, rgba.a), clamp(e*fr, 0.0, 1.0));\r\n        \r\n            rgba = mix(rgba, glFragColorWithFog, max(sign(volFogRadius2 - d2), 0.0));\r\n        \r\n        \r\n            gl_FragColor = rgba;//output3;\r\n        }\r\n        `;\r\n\r\n        var mat = new ShaderMaterial(\"shader\", this.scene, {\r\n            vertex: \"custom\",\r\n            fragment: \"custom\",\r\n            },\r\n            {\r\n                attributes: [\"position\", \"uv\"],\r\n                uniforms: [\"world\", \"worldViewProjection\", \"u_FogColor\", \"u_FogCenter\", \"u_FogRadius\", \"u_Cameraposition\"],\r\n                defines: [\"#define VMAINUV\"]\r\n            }\r\n        );\r\n\r\n        mat.setColor3(\"u_FogColor\", new Color3(0.95, 0.95, 0.95));\r\n        mat.setVector3(\"u_FogCenter\", new Vector3(0, 5, 0));\r\n        mat.setFloat(\"u_FogRadius\", 25);\r\n        mat.setFloat(\"u_FogDensity\", 4);\r\n\r\n        return mat;\r\n    }\r\n\r\n    protected buildNodeMaterial(diffText: Texture): Material {\r\n        var nodeMaterial = new NodeMaterial(\"node\");\r\n\r\n        // InputBlock\r\n        var position = new InputBlock(\"position\");\r\n        position.setAsAttribute(\"position\");\r\n        \r\n        // TransformBlock\r\n        var worldPos = new TransformBlock(\"worldPos\");\r\n        worldPos.complementZ = 0;\r\n        worldPos.complementW = 1;\r\n        \r\n        // InputBlock\r\n        var world = new InputBlock(\"world\");\r\n        world.setAsSystemValue(NodeMaterialSystemValues.World);\r\n        \r\n        // TransformBlock\r\n        var Worldposition = new TransformBlock(\"World position\");\r\n        Worldposition.complementZ = 0;\r\n        Worldposition.complementW = 1;\r\n        \r\n        // VectorSplitterBlock\r\n        var VectorSplitter = new VectorSplitterBlock(\"VectorSplitter\");\r\n        \r\n        // SubtractBlock\r\n        var wPoscamPos = new SubtractBlock(\"wPos-camPos\");\r\n        \r\n        // InputBlock\r\n        var Cameraposition = new InputBlock(\"Camera position\");\r\n        Cameraposition.setAsSystemValue(NodeMaterialSystemValues.CameraPosition);\r\n        \r\n        // DistanceBlock\r\n        var distCamToPos = new DistanceBlock(\"distCamToPos\");\r\n        \r\n        // MinBlock\r\n        var Min = new MinBlock(\"Min\");\r\n        \r\n        // AddBlock\r\n        var t = new AddBlock(\"t1\");\r\n        \r\n        // DotBlock\r\n        var tca = new DotBlock(\"tca\");\r\n        \r\n        // SubtractBlock\r\n        var L = new SubtractBlock(\"L\");\r\n        \r\n        // InputBlock\r\n        var FogCenter = new InputBlock(\"Fog Center\");\r\n        FogCenter.value = new Vector3(30, 15, 0);\r\n        FogCenter.isConstant = false;\r\n        FogCenter.visibleInInspector = false;\r\n        \r\n        // SubtractBlock\r\n        var Subtract = new SubtractBlock(\"Subtract\");\r\n        \r\n        // InputBlock\r\n        var Cameraposition1 = new InputBlock(\"Camera position\");\r\n        Cameraposition1.setAsSystemValue(NodeMaterialSystemValues.CameraPosition);\r\n        \r\n        // CrossBlock\r\n        var Cross = new CrossBlock(\"Cross\");\r\n        \r\n        // NormalizeBlock\r\n        var dir = new NormalizeBlock(\"dir\");\r\n        \r\n        // LengthBlock\r\n        var distToCenter = new LengthBlock(\"distToCenter\");\r\n        \r\n        // DivideBlock\r\n        var Divide = new DivideBlock(\"Divide\");\r\n        \r\n        // InputBlock\r\n        var FogRadius = new InputBlock(\"Fog Radius\");\r\n        FogRadius.value = 15;\r\n        FogRadius.min = 0;\r\n        FogRadius.max = 10;\r\n        FogRadius.matrixMode = 0;\r\n        FogRadius.animationType  = AnimatedInputBlockTypes.None;\r\n        \r\n        // MultiplyBlock\r\n        var volFogRadius = new MultiplyBlock(\"volFogRadius2\");\r\n        \r\n        // SubtractBlock\r\n        var Subtract1 = new SubtractBlock(\"Subtract\");\r\n        \r\n        // SubtractBlock\r\n        var d = new SubtractBlock(\"d2\");\r\n        \r\n        // DotBlock\r\n        var LdotL = new DotBlock(\"LdotL\");\r\n        \r\n        // MultiplyBlock\r\n        var tcaSquare = new MultiplyBlock(\"tcaSquare\");\r\n        \r\n        // SubtractBlock\r\n        var Subtract2 = new SubtractBlock(\"Subtract\");\r\n        \r\n        // TrigonometryBlock\r\n        var Sign = new TrigonometryBlock(\"Sign\");\r\n        Sign.operation = TrigonometryBlockOperations.Sign;\r\n        \r\n        // MaxBlock\r\n        var Max = new MaxBlock(\"Max\");\r\n        \r\n        // InputBlock\r\n        var ce = new InputBlock(\"c0e\");\r\n        ce.value = 0;\r\n        ce.min = 0;\r\n        ce.max = 0;\r\n        ce.matrixMode = 0;\r\n        ce.animationType  = AnimatedInputBlockTypes.None;\r\n        \r\n        // LerpBlock\r\n        var Lerp = new LerpBlock(\"Lerp\");\r\n        \r\n        // TextureBlock\r\n        var Texture_ = new TextureBlock(\"Texture\");\r\n        Texture_.texture = diffText;\r\n        Texture_.texture.wrapU = 1;\r\n        Texture_.texture.wrapV = 1;\r\n        Texture_.texture.uAng = 0;\r\n        Texture_.texture.vAng = 0;\r\n        Texture_.texture.wAng = 0;\r\n        Texture_.texture.uOffset = 0;\r\n        Texture_.texture.vOffset = 0;\r\n        Texture_.texture.uScale = 1;\r\n        Texture_.texture.vScale = 1;\r\n        Texture_.texture.gammaSpace = true;\r\n        \r\n        // InputBlock\r\n        var uv = new InputBlock(\"uv\");\r\n        uv.setAsAttribute(\"uv\");\r\n        \r\n        // LerpBlock\r\n        var glFragColorWithFog = new LerpBlock(\"glFragColorWithFog\");\r\n        \r\n        // VectorMergerBlock\r\n        var VectorMerger = new VectorMergerBlock(\"VectorMerger\");\r\n        \r\n        // InputBlock\r\n        var FogColor = new InputBlock(\"Fog Color\");\r\n        FogColor.value = new Color3(0.9490196078431372, 0.9490196078431372, 0.9490196078431372);\r\n        FogColor.isConstant = false;\r\n        FogColor.visibleInInspector = false;\r\n        \r\n        // InputBlock\r\n        var cb = new InputBlock(\"c1b\");\r\n        cb.value = 1;\r\n        cb.min = 0;\r\n        cb.max = 0;\r\n        cb.matrixMode = 0;\r\n        cb.animationType  = AnimatedInputBlockTypes.None;\r\n        \r\n        // ClampBlock\r\n        var Clamp = new ClampBlock(\"Clamp\");\r\n        Clamp.minimum = 0;\r\n        Clamp.maximum = 1;\r\n        \r\n        // MultiplyBlock\r\n        var Multiply = new MultiplyBlock(\"Multiply\");\r\n        \r\n        // SmoothStepBlock\r\n        var fr = new SmoothStepBlock(\"fr\");\r\n        \r\n        // TrigonometryBlock\r\n        var Cos = new TrigonometryBlock(\"Cos\");\r\n        Cos.operation = TrigonometryBlockOperations.Cos;\r\n        \r\n        // MultiplyBlock\r\n        var Multiply1 = new MultiplyBlock(\"Multiply\");\r\n        \r\n        // InputBlock\r\n        var PIOverTwo = new InputBlock(\"PIOverTwo\");\r\n        PIOverTwo.value = 1.57;\r\n        PIOverTwo.min = 0;\r\n        PIOverTwo.max = 0;\r\n        PIOverTwo.matrixMode = 0;\r\n        PIOverTwo.animationType  = AnimatedInputBlockTypes.None;\r\n        \r\n        // InputBlock\r\n        var cd = new InputBlock(\"c0d\");\r\n        cd.value = 0;\r\n        cd.min = 0;\r\n        cd.max = 0;\r\n        cd.matrixMode = 0;\r\n        cd.animationType  = AnimatedInputBlockTypes.None;\r\n        \r\n        // InputBlock\r\n        var ca = new InputBlock(\"c1a\");\r\n        ca.value = 1;\r\n        ca.min = 0;\r\n        ca.max = 0;\r\n        ca.matrixMode = 0;\r\n        ca.animationType  = AnimatedInputBlockTypes.None;\r\n        \r\n        // DivideBlock\r\n        var Divide1 = new DivideBlock(\"Divide\");\r\n        \r\n        // AddBlock\r\n        var dist = new AddBlock(\"dist\");\r\n        \r\n        // LerpBlock\r\n        var dist1 = new LerpBlock(\"dist1\");\r\n        \r\n        // InputBlock\r\n        var cb1 = new InputBlock(\"c0b\");\r\n        cb1.value = 0;\r\n        cb1.min = 0;\r\n        cb1.max = 0;\r\n        cb1.matrixMode = 0;\r\n        cb1.animationType  = AnimatedInputBlockTypes.None;\r\n        \r\n        // MaxBlock\r\n        var Max1 = new MaxBlock(\"Max\");\r\n        \r\n        // TrigonometryBlock\r\n        var Sign1 = new TrigonometryBlock(\"Sign\");\r\n        Sign1.operation = TrigonometryBlockOperations.Sign;\r\n        \r\n        // NegateBlock\r\n        var Negate = new NegateBlock(\"Negate\");\r\n        \r\n        // SubtractBlock\r\n        var t1 = new SubtractBlock(\"t0\");\r\n        \r\n        // TrigonometryBlock\r\n        var thc = new TrigonometryBlock(\"thc\");\r\n        thc.operation = TrigonometryBlockOperations.Sqrt;\r\n        \r\n        // MaxBlock\r\n        var Max2 = new MaxBlock(\"Max\");\r\n        \r\n        // InputBlock\r\n        var ca1 = new InputBlock(\"c0a\");\r\n        ca1.value = 0;\r\n        ca1.min = 0;\r\n        ca1.max = 0;\r\n        ca1.matrixMode = 0;\r\n        ca1.animationType  = AnimatedInputBlockTypes.None;\r\n        \r\n        // SubtractBlock\r\n        var Subtract3 = new SubtractBlock(\"Subtract\");\r\n        \r\n        // MinBlock\r\n        var Min1 = new MinBlock(\"Min\");\r\n        \r\n        // LerpBlock\r\n        var dist2 = new LerpBlock(\"dist2\");\r\n        \r\n        // InputBlock\r\n        var cc = new InputBlock(\"c0c\");\r\n        cc.value = 0;\r\n        cc.min = 0;\r\n        cc.max = 0;\r\n        cc.matrixMode = 0;\r\n        cc.animationType  = AnimatedInputBlockTypes.None;\r\n        \r\n        // MaxBlock\r\n        var Max3 = new MaxBlock(\"Max\");\r\n        \r\n        // TrigonometryBlock\r\n        var Sign2 = new TrigonometryBlock(\"Sign\");\r\n        Sign2.operation = TrigonometryBlockOperations.Sign;\r\n        \r\n        // SubtractBlock\r\n        var Subtract4 = new SubtractBlock(\"Subtract\");\r\n        \r\n        // MultiplyBlock\r\n        var Multiply2 = new MultiplyBlock(\"Multiply\");\r\n        \r\n        // MultiplyBlock\r\n        var Multiply3 = new MultiplyBlock(\"Multiply\");\r\n        \r\n        // MaxBlock\r\n        var Max4 = new MaxBlock(\"Max\");\r\n        \r\n        // TrigonometryBlock\r\n        var Sign3 = new TrigonometryBlock(\"Sign\");\r\n        Sign3.operation = TrigonometryBlockOperations.Sign;\r\n        \r\n        // MaxBlock\r\n        var Max5 = new MaxBlock(\"Max\");\r\n        \r\n        // TrigonometryBlock\r\n        var Sign4 = new TrigonometryBlock(\"Sign\");\r\n        Sign4.operation = TrigonometryBlockOperations.Sign;\r\n        \r\n        // MultiplyBlock\r\n        var Multiply4 = new MultiplyBlock(\"Multiply\");\r\n        \r\n        // MaxBlock\r\n        var Max6 = new MaxBlock(\"Max\");\r\n        \r\n        // TrigonometryBlock\r\n        var Sign5 = new TrigonometryBlock(\"Sign\");\r\n        Sign5.operation = TrigonometryBlockOperations.Sign;\r\n        \r\n        // AddBlock\r\n        var Add = new AddBlock(\"Add\");\r\n        \r\n        // FragmentOutputBlock\r\n        var fragmentOutput = new FragmentOutputBlock(\"fragmentOutput\");\r\n        \r\n        // TransformBlock\r\n        var worldPosviewProjectionTransform = new TransformBlock(\"worldPos * viewProjectionTransform\");\r\n        worldPosviewProjectionTransform.complementZ = 0;\r\n        worldPosviewProjectionTransform.complementW = 1;\r\n        \r\n        // InputBlock\r\n        var viewProjection = new InputBlock(\"viewProjection\");\r\n        viewProjection.setAsSystemValue(NodeMaterialSystemValues.ViewProjection);\r\n        \r\n        // VertexOutputBlock\r\n        var vertexOutput = new VertexOutputBlock(\"vertexOutput\");\r\n        \r\n        // Connections\r\n        position.output.connectTo(worldPos.vector);\r\n        world.output.connectTo(worldPos.transform);\r\n        worldPos.output.connectTo(worldPosviewProjectionTransform.vector);\r\n        viewProjection.output.connectTo(worldPosviewProjectionTransform.transform);\r\n        worldPosviewProjectionTransform.output.connectTo(vertexOutput.vector);\r\n        uv.output.connectTo(Texture_.uv);\r\n        Texture_.rgba.connectTo(Lerp.left);\r\n        Texture_.rgba.connectTo(glFragColorWithFog.left);\r\n        FogColor.output.connectTo(VectorMerger.xyz );\r\n        cb.output.connectTo(VectorMerger.w);\r\n        VectorMerger.xyzw.connectTo(glFragColorWithFog.right);\r\n        FogCenter.output.connectTo(Subtract.left);\r\n        Cameraposition1.output.connectTo(Subtract.right);\r\n        Subtract.output.connectTo(Cross.left);\r\n        position.output.connectTo(Worldposition.vector);\r\n        world.output.connectTo(Worldposition.transform);\r\n        Worldposition.output.connectTo(VectorSplitter.xyzw);\r\n        VectorSplitter.xyzOut.connectTo(wPoscamPos.left);\r\n        Cameraposition.output.connectTo(wPoscamPos.right);\r\n        wPoscamPos.output.connectTo(dir.input);\r\n        dir.output.connectTo(Cross.right);\r\n        Cross.output.connectTo(distToCenter.value);\r\n        distToCenter.output.connectTo(Divide.left);\r\n        FogRadius.output.connectTo(Divide.right);\r\n        Divide.output.connectTo(Multiply1.left);\r\n        PIOverTwo.output.connectTo(Multiply1.right);\r\n        Multiply1.output.connectTo(Cos.input);\r\n        Cos.output.connectTo(fr.value);\r\n        cd.output.connectTo(fr.edge0);\r\n        ca.output.connectTo(fr.edge1);\r\n        fr.output.connectTo(Multiply.left);\r\n        cb1.output.connectTo(dist1.left);\r\n        VectorSplitter.xyzOut.connectTo(distCamToPos.left);\r\n        Cameraposition.output.connectTo(distCamToPos.right);\r\n        distCamToPos.output.connectTo(Min.left);\r\n        FogCenter.output.connectTo(L.left);\r\n        Cameraposition.output.connectTo(L.right);\r\n        L.output.connectTo(tca.left);\r\n        dir.output.connectTo(tca.right);\r\n        tca.output.connectTo(t.left);\r\n        FogRadius.output.connectTo(volFogRadius.left);\r\n        FogRadius.output.connectTo(volFogRadius.right);\r\n        volFogRadius.output.connectTo(Subtract1.left);\r\n        L.output.connectTo(LdotL.left);\r\n        L.output.connectTo(LdotL.right);\r\n        LdotL.output.connectTo(d.left);\r\n        tca.output.connectTo(tcaSquare.left);\r\n        tca.output.connectTo(tcaSquare.right);\r\n        tcaSquare.output.connectTo(d.right);\r\n        d.output.connectTo(Subtract1.right);\r\n        Subtract1.output.connectTo(Max2.left);\r\n        ca1.output.connectTo(Max2.right);\r\n        Max2.output.connectTo(thc.input);\r\n        thc.output.connectTo(t.right);\r\n        t.output.connectTo(Min.right);\r\n        Min.output.connectTo(dist1.right);\r\n        tca.output.connectTo(t1.left);\r\n        thc.output.connectTo(t1.right);\r\n        t1.output.connectTo(Negate.value);\r\n        Negate.output.connectTo(Sign1.input);\r\n        Sign1.output.connectTo(Max1.left);\r\n        cb1.output.connectTo(Max1.right);\r\n        Max1.output.connectTo(Multiply4.left);\r\n        t.output.connectTo(Sign5.input);\r\n        Sign5.output.connectTo(Max6.left);\r\n        cb1.output.connectTo(Max6.right);\r\n        Max6.output.connectTo(Multiply4.right);\r\n        Multiply4.output.connectTo(dist1.gradient);\r\n        dist1.output.connectTo(dist.left);\r\n        cc.output.connectTo(dist2.left);\r\n        distCamToPos.output.connectTo(Min1.left);\r\n        t.output.connectTo(Min1.right);\r\n        Min1.output.connectTo(Subtract3.left);\r\n        t1.output.connectTo(Subtract3.right);\r\n        Subtract3.output.connectTo(dist2.right);\r\n        distCamToPos.output.connectTo(Subtract4.left);\r\n        t1.output.connectTo(Subtract4.right);\r\n        Subtract4.output.connectTo(Sign2.input);\r\n        Sign2.output.connectTo(Max3.left);\r\n        cc.output.connectTo(Max3.right);\r\n        Max3.output.connectTo(Multiply2.left);\r\n        t1.output.connectTo(Sign3.input);\r\n        Sign3.output.connectTo(Max4.left);\r\n        cc.output.connectTo(Max4.right);\r\n        Max4.output.connectTo(Multiply3.left);\r\n        t.output.connectTo(Sign4.input);\r\n        Sign4.output.connectTo(Max5.left);\r\n        cc.output.connectTo(Max5.right);\r\n        Max5.output.connectTo(Multiply3.right);\r\n        Multiply3.output.connectTo(Multiply2.right);\r\n        Multiply2.output.connectTo(dist2.gradient);\r\n        dist2.output.connectTo(dist.right);\r\n        dist.output.connectTo(Divide1.left);\r\n        FogRadius.output.connectTo(Add.left);\r\n        FogRadius.output.connectTo(Add.right);\r\n        Add.output.connectTo(Divide1.right);\r\n        Divide1.output.connectTo(Multiply.right);\r\n        Multiply.output.connectTo(Clamp.value);\r\n        Clamp.output.connectTo(glFragColorWithFog.gradient);\r\n        glFragColorWithFog.output.connectTo(Lerp.right);\r\n        volFogRadius.output.connectTo(Subtract2.left);\r\n        d.output.connectTo(Subtract2.right);\r\n        Subtract2.output.connectTo(Sign.input);\r\n        Sign.output.connectTo(Max.left);\r\n        ce.output.connectTo(Max.right);\r\n        Max.output.connectTo(Lerp.gradient);\r\n        Lerp.output.connectTo(fragmentOutput.rgba);\r\n        \r\n        // Output nodes\r\n        nodeMaterial.addOutputNode(vertexOutput);\r\n        nodeMaterial.addOutputNode(fragmentOutput);\r\n        nodeMaterial.build();\r\n\r\n        //nodeMaterial.depthFunction = Engine.LEQUAL;\r\n        nodeMaterial.forceDepthWrite = true;\r\n        \r\n        return nodeMaterial;\r\n    }\r\n\r\n    public render(): void {\r\n        this._skyBox.position.copyFrom(this.camera.position);\r\n        this.scene.render();\r\n\r\n        /*if (this._animateLight && this._autoCalcShadowZBounds) {\r\n            this._lightNearPlane = this.sun.shadowMinZ;\r\n            this._lightFarPlane = this.sun.shadowMaxZ;\r\n\r\n            const event = new CustomEvent('gui_set_value', { detail: { type: 'setShadowZBounds' } });\r\n\r\n            window.dispatchEvent(event);\r\n        }*/\r\n    }\r\n\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n    Button,\r\n    Checkbox,\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Icon,\r\n    Typography,\r\n} from '@material-ui/core';\r\n\r\nimport SplitBaseGUI from \"./SplitBaseGUI\";\r\n\r\nexport default class StandardShadowGUI extends SplitBaseGUI {\r\n\r\n    protected createCustomGUIProperties(): React.ReactElement {\r\n        const Properties = () => {\r\n            return (\r\n                <>\r\n                </>\r\n            );\r\n        };\r\n\r\n        return Properties();\r\n    }\r\n\r\n}\r\n","import {\r\n    AbstractMesh,\r\n    BoundingInfo,\r\n    Effect,\r\n    IShadowGenerator,\r\n    IShadowLight,\r\n    Light,\r\n    MaterialDefines,\r\n    Matrix,\r\n    Nullable,\r\n    Observer,\r\n    RenderTargetTexture,\r\n    Scene,\r\n    ShadowGenerator,\r\n    SubMesh,\r\n    Vector3,\r\n} from 'babylonjs';\r\n\r\nimport { CSMShadowMap } from './csmShadowMap';\r\n\r\nexport interface ICascade {\r\n\r\n    generator: CSMShadowMap;\r\n\r\n    prevSplitDistance: number;\r\n\r\n    splitDistance: number;\r\n\r\n}\r\n\r\n// @ts-ignore\r\nexport class CSMShadowGenerator implements IShadowGenerator {\r\n\r\n    public static readonly CASCADE_ALL = -1;\r\n    public static readonly CASCADE_1 = 0;\r\n    public static readonly CASCADE_2 = 1;\r\n    public static readonly CASCADE_3 = 2;\r\n    public static readonly CASCADE_4 = 3;\r\n    public static readonly CASCADE_5 = 4;\r\n    public static readonly CASCADE_6 = 5;\r\n    public static readonly CASCADE_7 = 6;\r\n    public static readonly CASCADE_8 = 7;\r\n\r\n    protected _activeCascade: number;\r\n\r\n    public get activeCascade(): number {\r\n        return this._activeCascade;\r\n    }\r\n\r\n    public set activeCascade(index: number) {\r\n        if (index !== CSMShadowGenerator.CASCADE_ALL && (index < 0 || index >= this._numCascades)) {\r\n            index = 0;\r\n        }\r\n        this._activeCascade = index;\r\n    }\r\n\r\n    protected _numCascades: number;\r\n\r\n    public get numCascades(): number {\r\n        return this._numCascades;\r\n    }\r\n\r\n    protected _lambda: number;\r\n\r\n    public get lambda(): number {\r\n        return this._lambda;\r\n    }\r\n\r\n    public set lambda(value: number) {\r\n        this._lambda = value;\r\n        this.setDistanceSplit();\r\n    }\r\n\r\n    protected _minDistance: number;\r\n\r\n    public get minDistance(): number {\r\n        return this._minDistance;\r\n    }\r\n\r\n    public set minDistance(min: number) {\r\n        this._minDistance = min;\r\n    }\r\n\r\n    protected _maxDistance: number;\r\n\r\n    public get maxDistance(): number {\r\n        return this._maxDistance;\r\n    }\r\n\r\n    public set maxDistance(min: number) {\r\n        this._maxDistance = min;\r\n    }\r\n\r\n    protected _stabilizeCascades: boolean;\r\n\r\n    public get stabilizeCascades(): boolean {\r\n        return this._stabilizeCascades;\r\n    }\r\n\r\n    public set stabilizeCascades(value: boolean) {\r\n        this._stabilizeCascades = value;\r\n    }\r\n\r\n    protected _useRightDirectionAsUpForOrthoProj: boolean;\r\n\r\n    public get useRightDirectionAsUpForOrthoProj(): boolean {\r\n        return this._useRightDirectionAsUpForOrthoProj;\r\n    }\r\n\r\n    public set useRightDirectionAsUpForOrthoProj(value: boolean) {\r\n        this._useRightDirectionAsUpForOrthoProj = value;\r\n    }\r\n\r\n    protected _freezeShadowCastersBoundingInfo: boolean = false;\r\n    private _freezeShadowCastersBoundingInfoObservable: Nullable<Observer<Scene>> = null;\r\n\r\n    public get freezeShadowCastersBoundingInfo(): boolean {\r\n        return this._freezeShadowCastersBoundingInfo;\r\n    }\r\n\r\n    public set freezeShadowCastersBoundingInfo(freeze: boolean) {\r\n        if (this._freezeShadowCastersBoundingInfoObservable && freeze) {\r\n            this._scene.onBeforeRenderObservable.remove(this._freezeShadowCastersBoundingInfoObservable);\r\n            this._freezeShadowCastersBoundingInfoObservable = null;\r\n        }\r\n\r\n        if (!this._freezeShadowCastersBoundingInfoObservable && !freeze) {\r\n            this._freezeShadowCastersBoundingInfoObservable = this._scene.onBeforeRenderObservable.add(this._computeShadowCastersBoundingInfo.bind(this));\r\n        }\r\n\r\n        this._freezeShadowCastersBoundingInfo = freeze;\r\n\r\n        if (freeze) {\r\n            this._computeShadowCastersBoundingInfo();\r\n        }\r\n    }\r\n\r\n    protected _shadowCastersBoundingInfo: BoundingInfo;\r\n\r\n    public get shadowCastersBoundingInfo(): BoundingInfo {\r\n        return this._shadowCastersBoundingInfo;\r\n    }\r\n\r\n    public set shadowCastersBoundingInfo(boundingInfo: BoundingInfo) {\r\n        this._shadowCastersBoundingInfo = boundingInfo;\r\n    }\r\n\r\n    protected _debug: boolean;\r\n\r\n    public get debug(): boolean {\r\n        return this._debug;\r\n    }\r\n\r\n    public set debug(dbg: boolean) {\r\n        this._debug = dbg;\r\n        this._light._markMeshesAsLightDirty();\r\n    }\r\n\r\n    protected _cascades: Array<ICascade>;\r\n\r\n    public get cascade(): Nullable<ICascade> {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade] : null;\r\n    }\r\n\r\n    protected _renderList: Array<AbstractMesh>;\r\n\r\n    public get renderList(): Array<AbstractMesh> {\r\n        return this._renderList;\r\n    }\r\n\r\n    public get bias(): number {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.bias : -1;\r\n    }\r\n\r\n    public set bias(bias: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.bias = bias);\r\n    }\r\n\r\n    public get normalBias(): number {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.normalBias : -1;\r\n    }\r\n\r\n    public set normalBias(normalBias: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.normalBias = normalBias);\r\n    }\r\n\r\n    public get blurBoxOffset(): number {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.blurBoxOffset : -1;\r\n    }\r\n\r\n    public set blurBoxOffset(value: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.blurBoxOffset = value);\r\n    }\r\n\r\n    public get blurScale(): number {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.blurScale : -1;\r\n    }\r\n\r\n    public set blurScale(value: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.blurScale = value);\r\n    }\r\n\r\n    public get blurKernel(): number {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.blurKernel : -1;\r\n    }\r\n\r\n    public set blurKernel(value: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.blurKernel = value);\r\n    }\r\n\r\n    public get useKernelBlur(): boolean {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.useKernelBlur : false;\r\n    }\r\n\r\n    public set useKernelBlur(value: boolean) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.useKernelBlur = value);\r\n    }\r\n\r\n    public get depthScale(): number {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.depthScale : -1;\r\n    }\r\n\r\n    public set depthScale(value: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.depthScale = value);\r\n    }\r\n\r\n    public get filter(): number {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.filter : -1;\r\n    }\r\n\r\n    public set filter(value: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.filter = value);\r\n    }\r\n\r\n    public get filteringQuality(): number {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.filteringQuality : -1;\r\n    }\r\n\r\n    public set filteringQuality(filteringQuality: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.filteringQuality = filteringQuality);\r\n    }\r\n\r\n    public get contactHardeningLightSizeUVRatio(): number {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.contactHardeningLightSizeUVRatio : -1;\r\n    }\r\n\r\n    public set contactHardeningLightSizeUVRatio(contactHardeningLightSizeUVRatio: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.contactHardeningLightSizeUVRatio = contactHardeningLightSizeUVRatio);\r\n    }\r\n\r\n    public get darkness() {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.darkness : -1;\r\n    }\r\n\r\n    public set darkness(value: number) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.darkness = value);\r\n    }\r\n\r\n    public get transparencyShadow() {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.transparencyShadow : false;\r\n    }\r\n\r\n    public set transparencyShadow(value: boolean) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.transparencyShadow = value);\r\n    }\r\n\r\n    public get forceBackFacesOnly(): boolean {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.forceBackFacesOnly : false;\r\n    }\r\n\r\n    public set forceBackFacesOnly(value: boolean) {\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.forceBackFacesOnly = value);\r\n    }\r\n\r\n    public get depthClamp(): boolean {\r\n        // @ts-ignore\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.depthClamp : false;\r\n    }\r\n\r\n    public set depthClamp(value: boolean) {\r\n        // @ts-ignore\r\n        this._getActiveCascades().forEach((cascade) => cascade.generator.depthClamp = value);\r\n    }\r\n\r\n    public get viewMatrix(): Nullable<Matrix> {\r\n        return this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? this._cascades[this._activeCascade].generator.viewMatrix : null;\r\n    }\r\n\r\n    public getClassName(): string {\r\n        return \"CSMShadowGenerator\";\r\n    }\r\n\r\n    public addShadowCaster(mesh: AbstractMesh, includeDescendants = true): CSMShadowGenerator {\r\n        this._renderList.push(mesh);\r\n\r\n        if (includeDescendants) {\r\n            this._renderList.push(...mesh.getChildMeshes());\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    public removeShadowCaster(mesh: AbstractMesh, includeDescendants = true): CSMShadowGenerator {\r\n        const index = this._renderList.indexOf(mesh);\r\n\r\n        if (index !== -1) {\r\n            this._renderList.splice(index, 1);\r\n        }\r\n\r\n        if (includeDescendants) {\r\n            for (let child of mesh.getChildren()) {\r\n                this.removeShadowCaster(<any>child);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    protected _getActiveCascades(forceAll: boolean = true): Array<ICascade> {\r\n        return  this._activeCascade === CSMShadowGenerator.CASCADE_ALL || forceAll ? this._cascades :\r\n                this._activeCascade >= 0 && this._activeCascade < this._cascades.length ? [this._cascades[this._activeCascade]] : [];\r\n    }\r\n\r\n    protected _light: IShadowLight;\r\n\r\n    public getLight(): IShadowLight {\r\n        return this._light;\r\n    }\r\n\r\n    protected _scene: Scene;\r\n    protected _mapSize: number;\r\n    protected _usefulFloatFirst: boolean | undefined;\r\n    protected _lightMatrices: Float32Array;\r\n    protected _samplers: Array<RenderTargetTexture>;\r\n    protected _cascadeDepths: Array<number>;\r\n\r\n    constructor(mapSize: number, light: IShadowLight, numCascades: number = 4, usefulFloatFirst?: boolean) {\r\n        if (numCascades < 1) {\r\n            numCascades = 1;\r\n        }\r\n\r\n        if (light.getTypeID() != Light.LIGHTTYPEID_DIRECTIONALLIGHT) {\r\n            console.error('Invalid light type for CSMShadowGenerator! Only directional lights are allowed.');\r\n        }\r\n\r\n        this._cascades = [];\r\n        this._activeCascade = CSMShadowGenerator.CASCADE_ALL;\r\n        this._renderList = [];\r\n        this._numCascades = numCascades;\r\n        this._lambda = 0.7;\r\n        this._minDistance = 0;\r\n        this._maxDistance = 1;\r\n        this._stabilizeCascades = false;\r\n        this._useRightDirectionAsUpForOrthoProj = false;\r\n        this._shadowCastersBoundingInfo = new BoundingInfo(new Vector3(0, 0, 0), new Vector3(0, 0, 0));\r\n        this._lightMatrices = new Float32Array(numCascades * 16);\r\n        this._samplers = new Array(numCascades);\r\n        this._cascadeDepths = new Array(numCascades);\r\n        this._debug = false;\r\n\r\n        this._mapSize = mapSize;\r\n        this._usefulFloatFirst = usefulFloatFirst;\r\n        this._light = light;\r\n        this._scene = light.getScene();\r\n\r\n        ShadowGenerator._SceneComponentInitialization(this._scene);\r\n\r\n        this.freezeShadowCastersBoundingInfo = false;\r\n\r\n        this._initializeGenerator();\r\n    }\r\n\r\n    protected _initializeGenerator(): void {\r\n        this._light._markMeshesAsLightDirty();\r\n        this._initializeCSM();\r\n    }\r\n\r\n    protected _initializeCSM(): void {\r\n        for (let cascadeIndex = 0; cascadeIndex < this._numCascades; ++cascadeIndex) {\r\n            const cascade: ICascade = {\r\n                generator: new CSMShadowMap(this._mapSize, this._light, !!this._usefulFloatFirst, this),\r\n                prevSplitDistance: 0,\r\n                splitDistance: 0,\r\n            };\r\n\r\n            cascade.generator.cascade = cascade;\r\n            // @ts-ignore\r\n            cascade.generator.renderList = this._renderList;\r\n\r\n            this._cascades.push(cascade);\r\n        }\r\n\r\n        if (this._activeCascade !== CSMShadowGenerator.CASCADE_ALL && this._activeCascade >= this._numCascades) {\r\n            this._activeCascade = 0;\r\n        }\r\n\r\n        this.setDistanceSplit();\r\n    }\r\n\r\n    public setDistanceSplit(): void {\r\n        let camera = this._scene.activeCamera;\r\n        if (!camera) {\r\n            return;\r\n        }\r\n\r\n        const near = camera.minZ,\r\n              far = camera.maxZ,\r\n              cameraRange = far - near;\r\n\r\n        const minZ = near + this._minDistance * cameraRange,\r\n              maxZ = near + this._maxDistance * cameraRange;\r\n\r\n        const range = maxZ - minZ,\r\n              ratio = maxZ / minZ;\r\n\r\n        for (let cascadeIndex = 0; cascadeIndex < this._cascades.length; ++cascadeIndex) {\r\n            const p = (cascadeIndex + 1) / this._numCascades,\r\n                  log = minZ * (ratio ** p),\r\n                  uniform = minZ + range * p;\r\n\r\n            const d = this._lambda * (log - uniform) + uniform;\r\n\r\n            this._cascades[cascadeIndex].prevSplitDistance = cascadeIndex === 0 ? this._minDistance : this._cascades[cascadeIndex - 1].splitDistance;\r\n            this._cascades[cascadeIndex].splitDistance = (d - near) / cameraRange;\r\n        }\r\n    }\r\n\r\n    protected _computeShadowCastersBoundingInfo(): void {\r\n        const min = new Vector3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE),\r\n              max = new Vector3(Number.MIN_VALUE, Number.MIN_VALUE, Number.MIN_VALUE);\r\n\r\n        for (let meshIndex = 0; meshIndex < this._renderList.length; meshIndex++) {\r\n            const mesh = this._renderList[meshIndex];\r\n\r\n            if (!mesh) {\r\n                continue;\r\n            }\r\n\r\n            const boundingInfo = mesh.getBoundingInfo(),\r\n                  boundingBox = boundingInfo.boundingBox;\r\n\r\n            min.minimizeInPlace(boundingBox.minimumWorld);\r\n            max.maximizeInPlace(boundingBox.maximumWorld);\r\n        }\r\n\r\n        this._shadowCastersBoundingInfo.reConstruct(min, max);\r\n    }\r\n\r\n    public get mustRender(): boolean {\r\n        return this.renderList.length > 0;\r\n    }\r\n\r\n    isReady(subMesh: SubMesh, useInstances: boolean): boolean {\r\n        let ready = true;\r\n\r\n        for (let cascadeIndex = 0; cascadeIndex < this._cascades.length && ready; ++cascadeIndex) {\r\n            ready = ready && this._cascades[cascadeIndex].generator.isReady(subMesh, useInstances);\r\n        }\r\n\r\n        return ready;\r\n    }\r\n\r\n    getShadowMaps(): Array<RenderTargetTexture> {\r\n        const rttList: Array<RenderTargetTexture> = [];\r\n\r\n        for (let cascadeIndex = 0; cascadeIndex < this._cascades.length; ++cascadeIndex) {\r\n            const cascade = this._cascades[cascadeIndex],\r\n                  rtt = cascade.generator.getShadowMap();\r\n\r\n            if (rtt) {\r\n                rttList.push(rtt);\r\n            }\r\n        }\r\n\r\n        return rttList;\r\n    }\r\n\r\n    prepareDefines(defines: MaterialDefines, lightIndex: number): void {\r\n        var scene = this._scene;\r\n        var light = this._light;\r\n\r\n        if (!scene.shadowsEnabled || !light.shadowEnabled || this._cascades.length < 1) {\r\n            return;\r\n        }\r\n\r\n        this._cascades[0].generator.prepareDefines(defines, lightIndex);\r\n\r\n        defines[\"SHADOWCSM\" + lightIndex] = true;\r\n        defines[\"SHADOWCSM\" + lightIndex + \"_NUMCASCADES\"] = this._numCascades;\r\n        defines[\"SHADOWCSM\" + lightIndex + \"_DEBUG\"] = this._debug;\r\n    }\r\n\r\n    bindShadowLight(lightIndex: string, effect: Effect): void {\r\n        const light = this._light;\r\n        const scene = this._scene;\r\n\r\n        if (!scene.shadowsEnabled || !light.shadowEnabled || this._cascades.length < 1) {\r\n            return;\r\n        }\r\n\r\n        let camera = scene.activeCamera;\r\n        if (!camera) {\r\n            return;\r\n        }\r\n\r\n        let masterGenerator = this._cascades[0].generator;\r\n        let shadowMap0 = masterGenerator.getShadowMap();\r\n\r\n        if (!shadowMap0) {\r\n            return;\r\n        }\r\n\r\n        const cameraRange = camera.maxZ - camera.minZ;\r\n\r\n        for (let cascadeIndex = 0; cascadeIndex < this._cascades.length; ++cascadeIndex) {\r\n            const cascade = this._cascades[cascadeIndex];\r\n\r\n            let matrix = cascade.generator.getTransformMatrix();\r\n\r\n            matrix.copyToArray(this._lightMatrices, cascadeIndex * 16);\r\n\r\n            if (masterGenerator.filter === ShadowGenerator.FILTER_PCF) {\r\n                effect.setDepthStencilTexture(\"shadowSampler\" + lightIndex + \"_\" + cascadeIndex, cascade.generator.getShadowMapForRendering());\r\n            } else {\r\n                this._samplers[cascadeIndex] = cascade.generator.getShadowMapForRendering()!;\r\n            }\r\n\r\n            this._cascadeDepths[cascadeIndex] = camera.minZ + cascade.splitDistance * cameraRange;\r\n        }\r\n\r\n        if (!light.needCube()) {\r\n            effect.setMatrices(\"lightMatrix\" + lightIndex, this._lightMatrices);\r\n        }\r\n\r\n        effect.setInt(\"numCascades\" + lightIndex, this._cascades.length);\r\n        if (masterGenerator.filter !== ShadowGenerator.FILTER_PCF) {\r\n            effect.setTextureArray(\"shadowSampler\" + lightIndex, this._samplers);\r\n        }\r\n        effect.setArray(\"cascadeSplits\" + lightIndex, this._cascadeDepths);\r\n\r\n        if (masterGenerator.filter === ShadowGenerator.FILTER_PCF) {\r\n            light._uniformBuffer.updateFloat4(\"shadowsInfo\", masterGenerator.getDarkness(), shadowMap0.getSize().width, 1 / shadowMap0.getSize().width, masterGenerator.frustumEdgeFalloff, lightIndex);\r\n        } else if (masterGenerator.filter === ShadowGenerator.FILTER_PCSS) {\r\n            light._uniformBuffer.updateFloat4(\"shadowsInfo\", masterGenerator.getDarkness(), 1 / shadowMap0.getSize().width, masterGenerator.contactHardeningLightSizeUVRatio * shadowMap0.getSize().width, masterGenerator.frustumEdgeFalloff, lightIndex);\r\n        } else {\r\n            light._uniformBuffer.updateFloat4(\"shadowsInfo\", masterGenerator.getDarkness(), masterGenerator.blurScale / shadowMap0.getSize().width, masterGenerator.depthScale, masterGenerator.frustumEdgeFalloff, lightIndex);\r\n        }\r\n\r\n        light._uniformBuffer.updateFloat2(\"depthValues\", this.getLight().getDepthMinZ(camera), this.getLight().getDepthMinZ(camera) + this.getLight().getDepthMaxZ(camera), lightIndex);\r\n    }\r\n\r\n    recreate(): void {\r\n        for (let cascadeIndex = 0; cascadeIndex < this._cascades.length; ++cascadeIndex) {\r\n            // @ts-ignore\r\n            this._cascades[cascadeIndex].generator.recreate();\r\n        }\r\n    }\r\n\r\n    forceCompilation(onCompiled?: (generator: ShadowGenerator) => void, options?: Partial<{ useInstances: boolean }>): void {\r\n        // todo\r\n    }\r\n\r\n    forceCompilationAsync(options?: Partial<{ useInstances: boolean }>): Promise<void> {\r\n        // todo\r\n        return Promise.resolve();\r\n    }\r\n\r\n    serialize(): any {\r\n        // todo\r\n    }\r\n\r\n    dispose(): void {\r\n        for (let cascadeIndex = 0; cascadeIndex < this._cascades.length; ++cascadeIndex) {\r\n            this._cascades[cascadeIndex].generator.dispose();\r\n        }\r\n        this._cascades = [];\r\n        this._numCascades = 0;\r\n        if (this._freezeShadowCastersBoundingInfoObservable) {\r\n            this._scene.onBeforeRenderObservable.remove(this._freezeShadowCastersBoundingInfoObservable);\r\n            this._freezeShadowCastersBoundingInfoObservable = null;\r\n        }\r\n    }\r\n\r\n}","import {\r\n    IShadowLight,\r\n    Matrix,\r\n    Nullable,\r\n    ShadowGenerator,\r\n    Vector3,\r\n} from 'babylonjs';\r\n\r\ndeclare type ShadowCSMGenerator = import(\"./csmShadowGenerator\").CSMShadowGenerator;\r\ndeclare type ICascade = import(\"./csmShadowGenerator\").ICascade;\r\n\r\nconst UpDir = Vector3.Up();\r\nconst RightDir = Vector3.Right();\r\nconst ZeroVec = Vector3.Zero();\r\n\r\nlet tmpv1 = new Vector3(),\r\n    tmpv2 = new Vector3(),\r\n    matrix = new Matrix();\r\n\r\nexport class CSMShadowMap extends ShadowGenerator {\r\n\r\n    protected static readonly frustumCornersNDCSpace = [\r\n        new Vector3(-1.0, +1.0, -1.0),\r\n        new Vector3(+1.0, +1.0, -1.0),\r\n        new Vector3(+1.0, -1.0, -1.0),\r\n        new Vector3(-1.0, -1.0, -1.0),\r\n        new Vector3(-1.0, +1.0, +1.0),\r\n        new Vector3(+1.0, +1.0, +1.0),\r\n        new Vector3(+1.0, -1.0, +1.0),\r\n        new Vector3(-1.0, -1.0, +1.0),\r\n    ];\r\n\r\n    protected _lightMinExtents: Vector3;\r\n\r\n    public get lightMinExtents(): Vector3 {\r\n        return this._lightMinExtents;\r\n    }\r\n\r\n    protected _lightMaxExtents: Vector3;\r\n\r\n    public get lightMaxExtents(): Vector3 {\r\n        return this._lightMaxExtents;\r\n    }\r\n\r\n    protected _parent: ShadowCSMGenerator;\r\n    protected _cascade: Nullable<ICascade>;\r\n    protected _frustumCornersWorldSpace: Array<Vector3>;\r\n    protected _minExtents: Vector3;\r\n    protected _maxExtents: Vector3;\r\n    protected _frustumCenter: Vector3;\r\n    protected _cascadeExtents: Vector3;\r\n    protected _shadowCameraPos: Vector3;\r\n\r\n    constructor(mapSize: number, light: IShadowLight, usefulFloatFirst: boolean, parent: ShadowCSMGenerator) {\r\n        super(mapSize, light, usefulFloatFirst);\r\n\r\n        // @ts-ignore\r\n        this._light._shadowGenerator = parent;\r\n        this._parent = parent;\r\n        this._cascade = null;\r\n        this._lightMinExtents = new Vector3(0, 0, 0);\r\n        this._lightMaxExtents = new Vector3(0, 0, 0);\r\n\r\n        this._frustumCornersWorldSpace = [];\r\n\r\n        for (let i = 0; i < CSMShadowMap.frustumCornersNDCSpace.length; ++i) {\r\n            this._frustumCornersWorldSpace.push(new Vector3());\r\n        }\r\n\r\n        this._minExtents = new Vector3();\r\n        this._maxExtents = new Vector3();\r\n        this._frustumCenter = new Vector3();\r\n        this._cascadeExtents = new Vector3();\r\n        this._shadowCameraPos = new Vector3();\r\n    }\r\n\r\n    public get viewMatrix(): Matrix {\r\n        // @ts-ignore\r\n        return this._viewMatrix;\r\n    }\r\n\r\n    public get cascade(): Nullable<ICascade> {\r\n        return this._cascade;\r\n    }\r\n\r\n    public set cascade(cascade: Nullable<ICascade>) {\r\n        this._cascade = cascade;\r\n    }\r\n\r\n    public getTransformMatrix(): Matrix {\r\n        // @ts-ignore\r\n        var scene = this._scene;\r\n        // @ts-ignore\r\n        if (this._currentRenderID === scene.getRenderId() && this._currentFaceIndexCache === this._currentFaceIndex) {\r\n            // @ts-ignore\r\n            return this._transformMatrix;\r\n        }\r\n\r\n        // @ts-ignore\r\n        this._currentRenderID = scene.getRenderId();\r\n        // @ts-ignore\r\n        this._currentFaceIndexCache = this._currentFaceIndex;\r\n\r\n        // @ts-ignore\r\n        var lightPosition = this._light.position;\r\n        // @ts-ignore\r\n        if (this._light.computeTransformedInformation()) {\r\n            // @ts-ignore\r\n            lightPosition = this._light.transformedPosition;\r\n        }\r\n\r\n        // @ts-ignore\r\n        Vector3.NormalizeToRef(this._light.getShadowDirection(this._currentFaceIndex), this._lightDirection);\r\n        // @ts-ignore\r\n        if (Math.abs(Vector3.Dot(this._lightDirection, Vector3.Up())) === 1.0) {\r\n            // @ts-ignore\r\n            this._lightDirection.z = 0.0000000000001; // Required to avoid perfectly perpendicular light\r\n        }\r\n\r\n        // @ts-ignore\r\n        if (this._light.needProjectionMatrixCompute() || !this._cachedPosition || !this._cachedDirection || !lightPosition.equals(this._cachedPosition) || !this._lightDirection.equals(this._cachedDirection)) {\r\n            // @ts-ignore\r\n            this._cachedPosition.copyFrom(lightPosition);\r\n            // @ts-ignore\r\n            this._cachedDirection.copyFrom(this._lightDirection);\r\n\r\n            this._computeLightMatrices();\r\n        }\r\n\r\n        // @ts-ignore\r\n        return this._transformMatrix;\r\n    }\r\n\r\n    // Get the 8 points of the view frustum in world space\r\n    protected _computeFrustumInWorldSpace(): void {\r\n        // @ts-ignore\r\n        if (!this._cascade || !this._scene.activeCamera) {\r\n            return;\r\n        }\r\n\r\n        const prevSplitDist = this._cascade.prevSplitDistance,\r\n              splitDist = this._cascade.splitDistance;\r\n\r\n        // @ts-ignore\r\n        this._scene.activeCamera.getViewMatrix(); // make sure the transformation matrix we get when calling 'getTransformationMatrix()' is calculated with an up to date view matrix\r\n\r\n        // @ts-ignore\r\n        const invViewProj = Matrix.Invert(this._scene.activeCamera.getTransformationMatrix());\r\n        for (let cornerIndex = 0; cornerIndex < CSMShadowMap.frustumCornersNDCSpace.length; ++cornerIndex) {\r\n            Vector3.TransformCoordinatesToRef(CSMShadowMap.frustumCornersNDCSpace[cornerIndex], invViewProj, this._frustumCornersWorldSpace[cornerIndex]);\r\n        }\r\n\r\n        // Get the corners of the current cascade slice of the view frustum\r\n        for (let cornerIndex = 0; cornerIndex < CSMShadowMap.frustumCornersNDCSpace.length / 2; ++cornerIndex) {\r\n            tmpv1.copyFrom(this._frustumCornersWorldSpace[cornerIndex + 4]).subtractInPlace(this._frustumCornersWorldSpace[cornerIndex]);\r\n            tmpv2.copyFrom(tmpv1).scaleInPlace(prevSplitDist); // near corner ray\r\n            tmpv1.scaleInPlace(splitDist); // far corner ray\r\n\r\n            tmpv1.addInPlace(this._frustumCornersWorldSpace[cornerIndex]);\r\n\r\n            this._frustumCornersWorldSpace[cornerIndex + 4].copyFrom(tmpv1);\r\n            this._frustumCornersWorldSpace[cornerIndex].addInPlace(tmpv2);\r\n        }\r\n    }\r\n\r\n    protected _computeLightFrustum(): void {\r\n        this._minExtents.copyFromFloats(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\r\n        this._maxExtents.copyFromFloats(Number.MIN_VALUE, Number.MIN_VALUE, Number.MIN_VALUE);\r\n        this._frustumCenter.copyFromFloats(0, 0, 0);\r\n\r\n        // @ts-ignore\r\n        const camera = this._scene.activeCamera;\r\n\r\n        if (!camera) {\r\n            return;\r\n        }\r\n\r\n        // Calculate the centroid of the view frustum slice\r\n        for (let cornerIndex = 0; cornerIndex < this._frustumCornersWorldSpace.length; ++cornerIndex) {\r\n            this._frustumCenter.addInPlace(this._frustumCornersWorldSpace[cornerIndex]);\r\n        }\r\n\r\n        this._frustumCenter.scaleInPlace(1 / this._frustumCornersWorldSpace.length);\r\n\r\n        if (this._parent.stabilizeCascades) {\r\n            // Calculate the radius of a bounding sphere surrounding the frustum corners\r\n            let sphereRadius = 0;\r\n            for (let cornerIndex = 0; cornerIndex < this._frustumCornersWorldSpace.length; ++cornerIndex) {\r\n                const dist = this._frustumCornersWorldSpace[cornerIndex].subtract(this._frustumCenter).length();\r\n                sphereRadius = Math.max(sphereRadius, dist);\r\n            }\r\n\r\n            sphereRadius = Math.ceil(sphereRadius * 16) / 16;\r\n\r\n            this._maxExtents.copyFromFloats(sphereRadius, sphereRadius, sphereRadius);\r\n            this._minExtents.copyFromFloats(-sphereRadius, -sphereRadius, -sphereRadius);\r\n        } else {\r\n            // Create a temporary view matrix for the light\r\n            const upDir = this._parent.useRightDirectionAsUpForOrthoProj ? camera.getDirection(RightDir) : UpDir;\r\n\r\n            const lightCameraPos = this._frustumCenter;\r\n\r\n            // @ts-ignore\r\n            this._frustumCenter.addToRef(this._lightDirection, tmpv1); // tmpv1 = look at\r\n\r\n            Matrix.LookAtLHToRef(lightCameraPos, tmpv1, upDir, matrix); // matrix = lightView\r\n\r\n            // Calculate an AABB around the frustum corners\r\n            for (let cornerIndex = 0; cornerIndex < this._frustumCornersWorldSpace.length; ++cornerIndex) {\r\n                Vector3.TransformCoordinatesToRef(this._frustumCornersWorldSpace[cornerIndex], matrix, tmpv1);\r\n\r\n                this._minExtents.minimizeInPlace(tmpv1);\r\n                this._maxExtents.maximizeInPlace(tmpv1);\r\n            }\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    protected _computeLightMatrices(): void {\r\n        // @ts-ignore\r\n        const camera = this._scene.activeCamera;\r\n\r\n        if (!camera) {\r\n            return;\r\n        }\r\n\r\n        this._computeFrustumInWorldSpace();\r\n\r\n        this._computeLightFrustum();\r\n\r\n        this._maxExtents.subtractToRef(this._minExtents, this._cascadeExtents);\r\n\r\n        // Get position of the shadow camera\r\n        // @ts-ignore\r\n        this._frustumCenter.addToRef(this._lightDirection.scale(this._minExtents.z), this._shadowCameraPos);\r\n\r\n        // Come up with a new orthographic camera for the shadow caster\r\n        const upDir = this._parent.stabilizeCascades || !this._parent.useRightDirectionAsUpForOrthoProj ? UpDir : camera.getDirection(RightDir);\r\n\r\n        // @ts-ignore\r\n        Matrix.LookAtLHToRef(this._shadowCameraPos, this._frustumCenter, upDir, this._viewMatrix);\r\n\r\n        let minZ = 0, maxZ = this._cascadeExtents.z;\r\n\r\n        // Try to tighten minZ and maxZ based on the bounding box of the shadow casters\r\n        const boundingInfo = this._parent.shadowCastersBoundingInfo;\r\n\r\n        // @ts-ignore\r\n        boundingInfo.update(this._viewMatrix);\r\n\r\n        maxZ = Math.min(maxZ, boundingInfo.boundingBox.maximumWorld.z);\r\n\r\n        if (!this._parent.depthClamp) {\r\n            // If we don't use depth clamping, we must set minZ so that all shadow casters are in the light frustum\r\n            minZ = Math.min(minZ, boundingInfo.boundingBox.minimumWorld.z);\r\n        } else {\r\n            // If using depth clamping, we can adjust minZ to reduce the [minZ, maxZ] range (and get some additional precision in the shadow map)\r\n            minZ = Math.max(minZ, boundingInfo.boundingBox.minimumWorld.z);\r\n        }\r\n\r\n        // @ts-ignore\r\n        if (this._scene.useRightHandedSystem) {\r\n            // @ts-ignore\r\n            Matrix.OrthoOffCenterRHToRef(this._minExtents.x, this._maxExtents.x, this._minExtents.y, this._maxExtents.y, minZ, maxZ, this._projectionMatrix);\r\n        } else {\r\n            // @ts-ignore\r\n            Matrix.OrthoOffCenterLHToRef(this._minExtents.x, this._maxExtents.x, this._minExtents.y, this._maxExtents.y, minZ, maxZ, this._projectionMatrix);\r\n        }\r\n\r\n        this._lightMinExtents.set(this._minExtents.x, this._minExtents.y, minZ);\r\n        this._lightMaxExtents.set(this._maxExtents.x, this._maxExtents.y, maxZ);\r\n\r\n        // @ts-ignore\r\n        this._viewMatrix.multiplyToRef(this._projectionMatrix, this._transformMatrix);\r\n\r\n        if (this._parent.stabilizeCascades) {\r\n            // Create the rounding matrix, by projecting the world-space origin and determining\r\n            // the fractional offset in texel space\r\n            // @ts-ignore\r\n            Vector3.TransformCoordinatesToRef(ZeroVec, this._transformMatrix, tmpv1); // tmpv1 = shadowOrigin\r\n            // @ts-ignore\r\n            tmpv1.scaleInPlace(this._mapSize / 2);\r\n\r\n            tmpv2.copyFromFloats(Math.round(tmpv1.x), Math.round(tmpv1.y), Math.round(tmpv1.z)); // tmpv2 = roundedOrigin\r\n            // @ts-ignore\r\n            tmpv2.subtractInPlace(tmpv1).scaleInPlace(2 / this._mapSize); // tmpv2 = roundOffset\r\n\r\n            Matrix.TranslationToRef(tmpv2.x, tmpv2.y, 0.0, matrix);\r\n\r\n            // @ts-ignore\r\n            this._projectionMatrix.multiplyToRef(matrix, this._projectionMatrix);\r\n            // @ts-ignore\r\n            this._viewMatrix.multiplyToRef(this._projectionMatrix, this._transformMatrix);\r\n        }\r\n    }\r\n}\r\n","import {\r\n    Scene,\r\n    Vector3,\r\n    Color3,\r\n    Color4,\r\n    SceneLoader,\r\n    UniversalCamera,\r\n    Engine,\r\n} from \"babylonjs\";\r\n\r\nimport Sample, { enumSplitMode } from \"../Sample\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\n\r\nimport GlobalGUI from \"./GlobalGUI\";\r\nimport StandardShadow from \"./StandardShadow\";\r\nimport CSM from \"./CSM\";\r\n\r\nexport default class CSMSample extends Sample {\r\n\r\n    protected _sunDir:          Vector3;\r\n    protected _ambientColor:    Color3;\r\n\r\n    constructor(engine: Engine, canvas: HTMLCanvasElement) {\r\n        super(engine, canvas);\r\n\r\n        this._sunDir = new Vector3(-1, -1, -1);\r\n//        this._sunDir = new Vector3(32, -30, 22);\r\n        this._sunDir.normalize();\r\n        this._ambientColor = new Color3(0.3, 0.3, 0.3);\r\n        this._clearColor = new Color4(0.17773, 0.41797, 0.65234, 1);\r\n\r\n        this.registerClass(\"std\", StandardShadow);\r\n        this.registerClass(\"csm\", CSM);\r\n\r\n        this.splitMode = enumSplitMode.LINEAR;\r\n        this.splitType = \"csm\";\r\n\r\n        this._gui = new GlobalGUI(\"Global settings\", this._engine, this);\r\n\r\n        let ocont = jQuery('<div id=\"fps2\"></div>').css('position', 'absolute').css('left', '2px').css('top', '2px').css('z-index', '201');\r\n\r\n        jQuery(document.body).append(ocont);\r\n    }\r\n\r\n    protected create(): void {\r\n        Promise.all([this.createNewSplit()]).then(() => {\r\n            SceneLoader.ShowLoadingScreen = false;\r\n            this.createGUI();\r\n        });\r\n    }\r\n\r\n    public createGUI(): void {\r\n        this._gui!.zIndex = 200;\r\n        this._gui!.createGUI();\r\n    }\r\n\r\n    public async createNewSplit() {\r\n        this.detachControlFromAllCameras();\r\n\r\n        let split = this.addSplit(this.splitType!, this.splitClasses.get(this.splitType!)!.className, false, false) as ISampleSplit,\r\n            camera = split.camera;\r\n\r\n        const gscene = (this._gui as GlobalGUI)!.scenes[(this._gui as GlobalGUI).selectedScene];\r\n\r\n        split.group = (this._gui as GlobalGUI).selectedScene;\r\n        split.isLoading = true;\r\n\r\n        camera.position = gscene.camera.position.clone();\r\n        camera.setTarget(gscene.camera.target.clone());\r\n\r\n        return split.initialize(gscene, this._ambientColor, this._sunDir.clone()).then(() => {\r\n            split.isLoading = false;\r\n            split.createGUI();\r\n            this.resyncCameras();\r\n            this.attachControlToAllCameras();\r\n        });\r\n    }\r\n\r\n    public render(): void {\r\n        super.render();\r\n\r\n        jQuery('#fps2').html(this._engine.getFps().toFixed() + \" fps\");\r\n    }\r\n\r\n    protected createSceneAndCamera(attachControls: boolean): [Scene, UniversalCamera] {\r\n        const [scene, camera] = super.createSceneAndCamera(attachControls);\r\n\r\n        scene.ambientColor = new Color3(1, 1, 1);\r\n        scene.clearColor = this._clearColor;\r\n\r\n        camera.fov = Math.PI / 4 * 0.75;\r\n        camera.minZ = 0.25;\r\n        camera.maxZ = 250;\r\n\r\n        return [scene, camera];\r\n    }\r\n\r\n}\r\n\r\nSample.registerSampleClass(\"csm\", {\r\n    \"displayName\": \"Implementation of the Cascaded Shadow Maps rendering technic\",\r\n    \"description\": \"\",\r\n    \"class\": CSMSample,\r\n});\r\n","import {\r\n    /*CascadedShadowGenerator,*/\r\n    Scene,\r\n    ShadowGenerator,\r\n    StandardMaterial,\r\n    UniversalCamera,\r\n    Vector3,\r\n    Nullable,\r\n    Matrix,\r\n} from \"babylonjs\";\r\n\r\nimport Sample from \"../Sample\";\r\nimport StandardShadow from \"./StandardShadow\";\r\nimport CSMGUI from \"./CSMGUI\";\r\nimport { DepthReducer} from \"./DepthReducer\";\r\nimport { CascadedShadowGenerator } from \"./cascadedShadowGenerator\";\r\n\r\nexport default class CSM extends StandardShadow {\r\n\r\n    public static className: string = \"CSM\";\r\n\r\n    private _oldMin: number = -1;\r\n    private _oldMax: number = -1;\r\n    private _depthReducer: DepthReducer;\r\n\r\n    constructor(scene: Scene, camera: UniversalCamera, parent: Sample, name: string) {\r\n        super(scene, camera, parent, name);\r\n\r\n        this._shadowMapFilter = CascadedShadowGenerator.FILTER_PCF;\r\n\r\n        (window as any).csm = this;\r\n\r\n        this._depthReducer = new DepthReducer(this.camera);\r\n        this._depthReducer.onAfterReductionPerformed.add((minmax: { min: number, max: number}) => {\r\n            let min = minmax.min, max = minmax.max;\r\n            if (min >= max) {\r\n                min = 0;\r\n                max = 1;\r\n            }\r\n            if (min != this._oldMin || max != this._oldMax) {\r\n                this.getCSMGenerator().setMinMaxDistance(min, max);\r\n                this._oldMin = min;\r\n                this._oldMax = max;\r\n                //console.log(min, max);\r\n            }\r\n        });\r\n\r\n        this._depthReducer.setDepthRenderer();\r\n    }\r\n\r\n    protected getCSMGenerator(): CascadedShadowGenerator {\r\n        return (this._shadowGenerator as unknown as CascadedShadowGenerator);\r\n    }\r\n\r\n    public get cameraNearPlane(): number {\r\n        return this._cameraNearPlane;\r\n    }\r\n\r\n    public set cameraNearPlane(cnp: number) {\r\n        this._cameraNearPlane = cnp;\r\n        this.camera.minZ = cnp;\r\n        const val = this.getCSMGenerator().shadowMaxZ;\r\n        this.getCSMGenerator().shadowMaxZ = this._cameraNearPlane; // make shadowMaxZ change\r\n        this.getCSMGenerator().shadowMaxZ = val; // so trigger a cascade recomputation\r\n    }\r\n\r\n    public get cameraFarPlane(): number {\r\n        return this._cameraFarPlane;\r\n    }\r\n\r\n    public set cameraFarPlane(cfp: number) {\r\n        this._cameraFarPlane = cfp;\r\n        this.camera.maxZ = cfp;\r\n        const val = this.getCSMGenerator().shadowMaxZ;\r\n        this.getCSMGenerator().shadowMaxZ = this._cameraNearPlane; // make shadowMaxZ change\r\n        this.getCSMGenerator().shadowMaxZ = val; // so trigger a cascade recomputation\r\n        this._csmShadowMaxZ = this.getCSMGenerator().shadowMaxZ;\r\n\r\n        const event = new CustomEvent('gui_set_value', { detail: { type: 'setShadowMaxZ' } });\r\n        window.dispatchEvent(event);\r\n    }\r\n\r\n    public get csmNumCascades(): number {\r\n        return this._csmNumCascades;\r\n    }\r\n\r\n    public set csmNumCascades(num: number) {\r\n        this._csmNumCascades = num;\r\n        this.getCSMGenerator().numCascades = num;\r\n    }\r\n\r\n    public get csmActiveCascade(): number {\r\n        return this._csmActiveCascade;\r\n    }\r\n\r\n    public set csmActiveCascade(cac: number) {\r\n        this._csmActiveCascade = cac;\r\n\r\n        this.setShadowMapViewerTexture();\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    public get csmVisualizeCascades(): boolean {\r\n        return this._csmVisualizeCascades;\r\n    }\r\n\r\n    public set csmVisualizeCascades(cvc: boolean) {\r\n        this._csmVisualizeCascades = cvc;\r\n        this.getCSMGenerator().debug = cvc;\r\n    }\r\n\r\n    public get csmStabilizeCascades(): boolean {\r\n        return this._csmStabilizeCascades;\r\n    }\r\n\r\n    public set csmStabilizeCascades(ssc: boolean) {\r\n        this._csmStabilizeCascades = ssc;\r\n        this.getCSMGenerator().stabilizeCascades = ssc;\r\n        window.setTimeout(this.buildLightHelper.bind(this), 100);\r\n    }\r\n\r\n    public get csmDepthClamp(): boolean {\r\n        return this._csmDepthClamp;\r\n    }\r\n\r\n    public set csmDepthClamp(cdc: boolean) {\r\n        this._csmDepthClamp = cdc;\r\n        this.getCSMGenerator().depthClamp = cdc;\r\n        window.setTimeout(this.buildLightHelper.bind(this), 100);\r\n    }\r\n\r\n    public get csmLambda(): number {\r\n        return this._csmLambda;\r\n    }\r\n\r\n    public set csmLambda(cl: number) {\r\n        this._csmLambda = cl;\r\n        this.getCSMGenerator().lambda = cl;\r\n    }\r\n\r\n    public get csmSplitBlendPercentage(): number {\r\n        return this._csmSplitBlendPercentage;\r\n    }\r\n\r\n    public set csmSplitBlendPercentage(csbp: number) {\r\n        this._csmSplitBlendPercentage = csbp;\r\n        this.getCSMGenerator().cascadeBlendPercentage = csbp;\r\n    }\r\n\r\n    public get csmPenumbraDarkness(): number {\r\n        return this._csmPenumbraDarkness;\r\n    }\r\n\r\n    public set csmPenumbraDarkness(cpd: number) {\r\n        this._csmPenumbraDarkness = cpd;\r\n        this.getCSMGenerator().penumbraDarkness = cpd;\r\n    }\r\n\r\n    public get csmShadowMaxZ(): number {\r\n        return this._csmShadowMaxZ;\r\n    }\r\n\r\n    public set csmShadowMaxZ(csmz: number) {\r\n        this._csmShadowMaxZ = csmz;\r\n        this.getCSMGenerator().shadowMaxZ = csmz;\r\n        this._csmShadowMaxZ = this.getCSMGenerator().shadowMaxZ;\r\n\r\n        const event = new CustomEvent('gui_set_value', { detail: { type: 'setShadowMaxZ' } });\r\n        window.dispatchEvent(event);\r\n    }\r\n\r\n    public get csmAutoCalcDepthBounds(): boolean {\r\n        return this._csmAutoCalcDepthBounds;\r\n    }\r\n\r\n    public set csmAutoCalcDepthBounds(cacdb: boolean) {\r\n        if (this._csmAutoCalcDepthBounds === cacdb) {\r\n            return;\r\n        }\r\n\r\n        this._csmAutoCalcDepthBounds = cacdb;\r\n\r\n        if (!this._csmAutoCalcDepthBounds) {\r\n            this._oldMin = 0;\r\n            this._oldMax = 1;\r\n            this._depthReducer.deactivate();\r\n            this.getCSMGenerator().setMinMaxDistance(0, 1);\r\n        } else {\r\n            this._depthReducer.activate();\r\n        }\r\n    }\r\n\r\n    protected getLightExtents(): { min: Vector3, max: Vector3 } | null {\r\n        const min = this.getCSMGenerator().getCascadeMinExtents(this._csmActiveCascade),\r\n              max = this.getCSMGenerator().getCascadeMaxExtents(this._csmActiveCascade);\r\n\r\n        return {\r\n            \"min\": min!,\r\n            \"max\": max!,\r\n        }\r\n    }\r\n\r\n    protected getViewMatrix(): Matrix | null {\r\n        return this.getCSMGenerator().getCascadeViewMatrix(this._csmActiveCascade);\r\n    }\r\n\r\n    public createGUI(): void {\r\n        this.gui = new CSMGUI(this.name, this.scene.getEngine(), this._container, this);\r\n\r\n        this.gui.createGUI();\r\n    }\r\n\r\n    protected createGenerator(): ShadowGenerator {\r\n        const generator = new CascadedShadowGenerator(this.shadowMapSize, this.sun);\r\n\r\n        generator.numCascades = this._csmNumCascades;\r\n\r\n        return generator as unknown as ShadowGenerator;\r\n    }\r\n\r\n    protected setShadowMapViewerTexture(): void {\r\n        (this._shadowMapPlane.material as StandardMaterial).diffuseTexture = this.getCSMGenerator().getShadowMap();\r\n    }\r\n\r\n    protected createShadowGenerator(): void {\r\n        super.createShadowGenerator();\r\n\r\n        const shadowGenerator = this.getCSMGenerator();\r\n\r\n        shadowGenerator.stabilizeCascades = this._csmStabilizeCascades;\r\n        shadowGenerator.depthClamp = this._csmDepthClamp;\r\n        shadowGenerator.lambda = this._csmLambda;\r\n        shadowGenerator.debug = this._csmVisualizeCascades\r\n        shadowGenerator.cascadeBlendPercentage = this._csmSplitBlendPercentage;\r\n        shadowGenerator.penumbraDarkness = this._csmPenumbraDarkness;\r\n        shadowGenerator.shadowMaxZ = this._csmShadowMaxZ;\r\n        shadowGenerator.freezeShadowCastersBoundingInfo = true;\r\n\r\n        this.setShadowMapViewerTexture();\r\n    }\r\n\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n    Engine,\r\n} from 'babylonjs';\r\n\r\nimport SplitBaseGUI from \"./SplitBaseGUI\";\r\nimport Sample from \"../Sample\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\n\r\nexport default class CSMGUI extends SplitBaseGUI {\r\n\r\n    constructor(name: string, engine: Engine, container: Sample, parent: ISampleSplit) {\r\n        super(name, engine, container, parent);\r\n\r\n        this._showAutoCalcPlanes = false;\r\n        this._showCSM = true;\r\n        this.dimensions.height = 950;\r\n    }\r\n\r\n    protected createCustomGUIProperties(): React.ReactElement {\r\n        const Properties = () => {\r\n\r\n            return (\r\n                <>\r\n                </>\r\n            );\r\n        };\r\n\r\n        return Properties();\r\n    }\r\n\r\n}\r\n","import {\r\n    Camera,\r\n    Constants,\r\n    DepthRenderer,\r\n    Nullable,\r\n} from \"babylonjs\";\r\n\r\nimport { MinMaxReducer } from \"./MinMaxReducer\";\r\n\r\nexport class DepthReducer extends MinMaxReducer {\r\n\r\n    private _depthRenderer: Nullable<DepthRenderer>;\r\n    private _depthRendererId: string;\r\n\r\n    constructor(camera: Camera) {\r\n        super(camera);\r\n    }\r\n\r\n    public setDepthRenderer(depthRenderer: Nullable<DepthRenderer> = null, type: number = Constants.TEXTURETYPE_HALF_FLOAT, forceFullscreenViewport = true): void {\r\n        const scene = this._camera.getScene();\r\n\r\n        if (this._depthRenderer) {\r\n            delete scene._depthRenderer[this._depthRendererId];\r\n\r\n            this._depthRenderer.dispose();\r\n            this._depthRenderer = null;\r\n        }\r\n\r\n        if (depthRenderer === null) {\r\n            if (!scene._depthRenderer) {\r\n                scene._depthRenderer = {};\r\n            }\r\n\r\n            depthRenderer = this._depthRenderer = new DepthRenderer(scene, type, this._camera, false);\r\n\r\n            depthRenderer.getDepthMap().updateSamplingMode(Constants.TEXTURE_NEAREST_NEAREST);\r\n            depthRenderer.enabled = false;\r\n\r\n            this._depthRendererId = \"minmax\" + this._camera.id;\r\n\r\n            scene._depthRenderer[this._depthRendererId] = depthRenderer;\r\n        }\r\n\r\n        super.setSourceTexture(depthRenderer.getDepthMap(), true, type, forceFullscreenViewport);\r\n    }\r\n\r\n    public activate(): void {\r\n        if (this._depthRenderer) {\r\n            this._depthRenderer.enabled = true;\r\n        }\r\n\r\n        super.activate();\r\n    }\r\n\r\n    public deactivate(): void {\r\n        super.deactivate();\r\n\r\n        if (this._depthRenderer) {\r\n            this._depthRenderer.enabled = false;\r\n        }\r\n    }\r\n\r\n    public dispose(disposeAll = true): void {\r\n        super.dispose(disposeAll);\r\n\r\n        if (this._depthRenderer && disposeAll) {\r\n            delete this._depthRenderer.getDepthMap().getScene()?._depthRenderer[this._depthRendererId];\r\n\r\n            this._depthRenderer.dispose();\r\n            this._depthRenderer = null;\r\n        }\r\n    }\r\n\r\n}","import * as React from \"react\";\r\n\r\nimport {\r\n    Grid,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n    Vector3,\r\n    Color3,\r\n    Engine,\r\n} from \"babylonjs\";\r\n\r\nimport MainGUI from \"../MainGUI\";\r\nimport Sample from \"../Sample\";\r\n\r\nexport interface ISceneDescription {\r\n    dname: string;\r\n    path: string;\r\n    name: string;\r\n    backfaceCulling: boolean;\r\n    camera: {\r\n        position: Vector3,\r\n        target: Vector3,\r\n        rotation?: Vector3,\r\n    };\r\n    scaling: number;\r\n    sunColor: Color3;\r\n    light: {\r\n        nearPlane: number,\r\n        farPlane: number,\r\n    };\r\n}\r\n\r\nexport default class GlobalGUI extends MainGUI {\r\n\r\n    public scenes:  Array<ISceneDescription>;\r\n\r\n    protected _selectedScene:   number;\r\n\r\n    public get selectedScene(): number {\r\n        return this._selectedScene;\r\n    }\r\n\r\n    constructor(name: string, engine: Engine, parent: Sample) {\r\n        super(name, engine, parent);\r\n\r\n        this._selectedScene = 0;\r\n        this.scenes = [\r\n            {\r\n                \"dname\": \"Power Plant\",\r\n                \"path\": \"./resources/3d/powerplant/\",\r\n                \"name\": \"powerplant.obj\",\r\n                \"backfaceCulling\": false,  // Some meshes have incorrect winding orders... use no backface culling for now\r\n                \"camera\": {\r\n                    \"position\": new Vector3(40, 5, 5),\r\n                    \"target\": new Vector3(0, 0, 5),\r\n                    /*\"position\": new Vector3(40.26686072438635, 4.554735288570352, -17.89867939154),\r\n                    \"rotation\": new Vector3(0.16435499454676133, -4.264821326794872, 0),*/\r\n                    /*\"position\": new Vector3(39.748889110647276, 6.671463042219519, -15.973865130460444),\r\n                    \"rotation\": new Vector3(0.15435499454676105, -3.9848213267948602, 0),*/\r\n                },\r\n                \"scaling\": 0.5,\r\n                \"sunColor\": new Color3(1, 1, 1),\r\n                \"light\": {\r\n                    \"nearPlane\": -90,\r\n                    \"farPlane\": 130,\r\n                },\r\n            },\r\n            {\r\n                \"dname\": \"Tower\",\r\n                \"path\": \"./resources/3d/Tower/\",\r\n                \"name\": \"Tower.obj\",\r\n                \"backfaceCulling\": true,\r\n                \"camera\": {\r\n                    \"position\": new Vector3(40, 5, 5),\r\n                    \"target\": new Vector3(0, 5, 5),\r\n                },\r\n                \"scaling\": 0.025,\r\n                \"sunColor\": new Color3(1, 0.8, 0.5),\r\n                \"light\": {\r\n                    \"nearPlane\": -50,\r\n                    \"farPlane\": 150,\r\n                },\r\n            }/*,\r\n            {\r\n                \"dname\": \"Dude\",\r\n                \"path\": \"./resources/3d/Dude/\",\r\n                \"name\": \"dude.babylon\",\r\n                \"backfaceCulling\": true,\r\n                \"camera\": {\r\n                    \"position\": new Vector3(0, 76, 154),\r\n                    \"target\": new Vector3(0, 0, 0),\r\n                },\r\n                \"scaling\": 0.25,\r\n            }*/,\r\n            {\r\n                \"dname\": \"Columns\",\r\n                \"path\": \"./resources/3d/Columns/\",\r\n                \"name\": \"Columns.obj\",\r\n                \"backfaceCulling\": true,\r\n                \"camera\": {\r\n                    \"position\": new Vector3(40, 5, 5),\r\n                    \"target\": new Vector3(0, 5, 5),\r\n                },\r\n                \"scaling\": 0.25,\r\n                \"sunColor\": new Color3(1, 0.8, 0.5),\r\n                \"light\": {\r\n                    \"nearPlane\": -92,\r\n                    \"farPlane\": 150,\r\n                },\r\n            }\r\n        ];\r\n    }\r\n\r\n    protected createCustomGUIProperties(): React.ReactElement {\r\n        const classes = this._useStyles();\r\n        const [scene, setScene] = React.useState(this._selectedScene);\r\n\r\n        const changeScene = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n            this._selectedScene = event.target.value as number;\r\n            setScene(this._selectedScene);\r\n        };\r\n\r\n        return (\r\n            <React.Fragment>\r\n                <Grid item xs={6}>\r\n                    <Paper className={classes.propertyTitle}>Scene</Paper>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                    <Select\r\n                        className={classes.propertyValue}\r\n                        id=\"scene\"\r\n                        value={scene}\r\n                        onChange={changeScene}\r\n                        >\r\n                        { this.scenes.map((scene: any, idx: number) => {\r\n                            return (\r\n                                <MenuItem key={idx} value={idx}>{scene.dname}</MenuItem>\r\n                            );\r\n                        }) }\r\n                    </Select>\r\n                </Grid>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n}\r\n","import {\r\n    Camera,\r\n    Constants,\r\n    Effect,\r\n    PostProcess,\r\n    PostProcessManager,\r\n    Nullable,\r\n    RenderTargetTexture,\r\n    Observable,\r\n    Observer,\r\n} from \"babylonjs\";\r\n\r\nexport class MinMaxReducer {\r\n\r\n    /**\r\n     * Observable triggered when the computation has been performed\r\n     */\r\n    public onAfterReductionPerformed = new Observable<{ min: number, max: number }>();\r\n\r\n    protected _camera: Camera;\r\n    protected _sourceTexture: Nullable<RenderTargetTexture>;\r\n    protected _reductionSteps: Nullable<Array<PostProcess>>;\r\n    protected _postProcessManager: PostProcessManager;\r\n    protected _onAfterUnbindObserver: Nullable<Observer<RenderTargetTexture>>;\r\n    protected _forceFullscreenViewport: boolean = true;\r\n\r\n    constructor(camera: Camera) {\r\n        MinMaxReducer.registerShader();\r\n\r\n        this._camera = camera;\r\n        this._postProcessManager = new PostProcessManager(camera.getScene());\r\n    }\r\n\r\n    public get sourceTexture(): Nullable<RenderTargetTexture> {\r\n        return this._sourceTexture;\r\n    }\r\n\r\n    public setSourceTexture(sourceTexture: RenderTargetTexture, depthRedux: boolean, type: number = Constants.TEXTURETYPE_HALF_FLOAT, forceFullscreenViewport = true): void {\r\n        if (sourceTexture === this._sourceTexture) {\r\n            return;\r\n        }\r\n\r\n        this.dispose(false);\r\n\r\n        this._sourceTexture = sourceTexture;\r\n        this._reductionSteps = [];\r\n        this._forceFullscreenViewport = forceFullscreenViewport;\r\n\r\n        const scene = this._camera.getScene();\r\n\r\n        // create the first step\r\n        let reductionInitial = new PostProcess(\r\n            'Initial reduction phase',\r\n            'minmaxReducer',  // shader\r\n            ['texSize'],\r\n            ['sourceTexture'], // textures\r\n            1.0,  // options\r\n            null, // camera\r\n            Constants.TEXTURE_NEAREST_NEAREST, // sampling\r\n            scene.getEngine(), // engine\r\n            false, // reusable\r\n            \"#define INITIAL\" + (depthRedux ? \"\\n#define DEPTH_REDUX\" : \"\"), // defines\r\n            type,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            Constants.TEXTUREFORMAT_RG,\r\n        );\r\n\r\n        reductionInitial.autoClear = false;\r\n        reductionInitial.forceFullscreenViewport = forceFullscreenViewport;\r\n\r\n        let w = this._sourceTexture.getRenderWidth(), h = this._sourceTexture.getRenderHeight();\r\n\r\n        reductionInitial.onApply = ((w: number, h: number) => {\r\n            return (effect: Effect) => {\r\n                effect.setTexture('sourceTexture', this._sourceTexture);\r\n                effect.setFloatArray2('texSize', new Float32Array([w, h]));\r\n            };\r\n        })(w, h);\r\n\r\n        this._reductionSteps.push(reductionInitial);\r\n\r\n        let index = 1;\r\n\r\n        // create the additional steps\r\n        while (w > 1 || h > 1) {\r\n            w = Math.max(Math.round(w / 2), 1);\r\n            h = Math.max(Math.round(h / 2), 1);\r\n\r\n            let reduction = new PostProcess(\r\n                'Reduction phase ' + index,\r\n                'minmaxReducer',  // shader\r\n                ['texSize'],\r\n                null,\r\n                { width: w, height: h },  // options\r\n                null, // camera\r\n                Constants.TEXTURE_NEAREST_NEAREST, // sampling\r\n                scene.getEngine(), // engine\r\n                false, // reusable\r\n                \"#define \" + ((w == 1 && h == 1) ? 'LAST' : (w == 1 || h == 1) ? 'ONEBEFORELAST' : 'MAIN'), // defines\r\n                type,\r\n                undefined,\r\n                undefined,\r\n                undefined,\r\n                Constants.TEXTUREFORMAT_RG,\r\n            );\r\n\r\n            reduction.autoClear = false;\r\n            reduction.forceFullscreenViewport = forceFullscreenViewport;\r\n\r\n            reduction.onApply = ((w: number, h: number) => {\r\n                return (effect: Effect) => {\r\n                    if (w == 1 || h == 1) {\r\n                        effect.setIntArray2('texSize', new Int32Array([w, h]));\r\n                    } else {\r\n                        effect.setFloatArray2('texSize', new Float32Array([w, h]));\r\n                    }\r\n                };\r\n            })(w, h);\r\n\r\n            this._reductionSteps.push(reduction);\r\n\r\n            index++;\r\n\r\n            if (w == 1 && h == 1) {\r\n                let func = (w: number, h: number, reduction: PostProcess) => {\r\n                    let buffer0 = new Float32Array(4 * w * h);\r\n                    return () => {\r\n                        scene.getEngine()._readTexturePixels(reduction.inputTexture, w, h, -1, 0, buffer0);\r\n                        let min = buffer0[0], max = buffer0[1];\r\n                        this.onAfterReductionPerformed.notifyObservers({ min, max });\r\n                    };\r\n                };\r\n                reduction.onAfterRenderObservable.add(func(w, h, reduction));\r\n            }\r\n        }\r\n    }\r\n\r\n    public activate(): void {\r\n        if (this._onAfterUnbindObserver || !this._sourceTexture) {\r\n            return;\r\n        }\r\n\r\n        this._onAfterUnbindObserver = this._sourceTexture.onAfterUnbindObservable.add(() => {\r\n            this._reductionSteps![0].activate(this._camera);\r\n            this._postProcessManager.directRender(this._reductionSteps!, this._reductionSteps![0].inputTexture, this._forceFullscreenViewport);\r\n            this._camera.getScene().getEngine().unBindFramebuffer(this._reductionSteps![0].inputTexture, false);\r\n        });\r\n    }\r\n\r\n    public deactivate(): void {\r\n        if (!this._onAfterUnbindObserver || !this._sourceTexture) {\r\n            return;\r\n        }\r\n\r\n        this._sourceTexture.onAfterUnbindObservable.remove(this._onAfterUnbindObserver);\r\n        this._onAfterUnbindObserver = null;\r\n}\r\n\r\n    public dispose(disposeAll = true): void {\r\n        if (disposeAll) {\r\n            this.onAfterReductionPerformed.clear();\r\n        }\r\n\r\n        this.deactivate();\r\n\r\n        if (this._reductionSteps) {\r\n            for (let i = 0; i < this._reductionSteps.length; ++i) {\r\n                this._reductionSteps[i].dispose();\r\n            }\r\n            this._reductionSteps = null;\r\n        }\r\n\r\n        if (this._postProcessManager && disposeAll) {\r\n            this._postProcessManager.dispose();\r\n        }\r\n\r\n        this._sourceTexture = null;\r\n    }\r\n\r\n    public static registerShader(): void {\r\n        Effect.ShadersStore.minmaxReducerFragmentShader = `\r\n            #version 300 es\r\n            precision highp float;\r\n            precision highp int;\r\n\r\n            in vec2 vUV;\r\n\r\n            uniform sampler2D textureSampler;\r\n\r\n            out vec2 glFragColor;\r\n\r\n        #ifdef INITIAL\r\n            uniform sampler2D sourceTexture;\r\n            uniform vec2 texSize;\r\n\r\n            void main(void)\r\n            {\r\n                ivec2 coord = ivec2(vUV * (texSize - 1.0));\r\n\r\n                float f1 = texelFetch(sourceTexture, coord, 0).r;\r\n                float f2 = texelFetch(sourceTexture, coord + ivec2(1, 0), 0).r;\r\n                float f3 = texelFetch(sourceTexture, coord + ivec2(1, 1), 0).r;\r\n                float f4 = texelFetch(sourceTexture, coord + ivec2(0, 1), 0).r;\r\n\r\n                float minz = min(min(min(f1, f2), f3), f4);\r\n                #ifdef DEPTH_REDUX\r\n                    float maxz = max(max(max(sign(1.0 - f1) * f1, sign(1.0 - f2) * f2), sign(1.0 - f3) * f3), sign(1.0 - f4) * f4);\r\n                #else\r\n                    float maxz = max(max(max(f1, f2), f3), f4);\r\n                #endif\r\n\r\n                glFragColor = vec2(minz, maxz);\r\n            }\r\n\r\n        #elif defined(MAIN)\r\n            uniform vec2 texSize;\r\n\r\n            void main(void)\r\n            {\r\n                ivec2 coord = ivec2(vUV * (texSize - 1.0));\r\n\r\n                vec2 f1 = texelFetch(textureSampler, coord, 0).rg;\r\n                vec2 f2 = texelFetch(textureSampler, coord + ivec2(1, 0), 0).rg;\r\n                vec2 f3 = texelFetch(textureSampler, coord + ivec2(1, 1), 0).rg;\r\n                vec2 f4 = texelFetch(textureSampler, coord + ivec2(0, 1), 0).rg;\r\n\r\n                float minz = min(min(min(f1.x, f2.x), f3.x), f4.x);\r\n                float maxz = max(max(max(f1.y, f2.y), f3.y), f4.y);\r\n\r\n                glFragColor = vec2(minz, maxz);\r\n            }\r\n\r\n        #elif defined(ONEBEFORELAST)\r\n            uniform ivec2 texSize;\r\n\r\n            void main(void)\r\n            {\r\n                ivec2 coord = ivec2(vUV * vec2(texSize - 1));\r\n\r\n                vec2 f1 = texelFetch(textureSampler, coord % texSize, 0).rg;\r\n                vec2 f2 = texelFetch(textureSampler, (coord + ivec2(1, 0)) % texSize, 0).rg;\r\n                vec2 f3 = texelFetch(textureSampler, (coord + ivec2(1, 1)) % texSize, 0).rg;\r\n                vec2 f4 = texelFetch(textureSampler, (coord + ivec2(0, 1)) % texSize, 0).rg;\r\n\r\n                float minz = min(f1.x, f2.x);\r\n                float maxz = max(f1.y, f2.y);\r\n\r\n                glFragColor = vec2(minz, maxz);\r\n            }\r\n\r\n        #elif defined(LAST)\r\n            void main(void)\r\n            {\r\n                discard;\r\n                glFragColor = vec2(0.);\r\n            }\r\n        #endif\r\n        `;\r\n    }\r\n}","import {\r\n    Color3,\r\n    Effect,\r\n    Engine,\r\n    Matrix,\r\n    Mesh,\r\n    MeshBuilder,\r\n    Nullable,\r\n    Observer,\r\n    Quaternion,\r\n    Scene,\r\n    ShaderMaterial,\r\n    ShadowGenerator,\r\n    StandardMaterial,\r\n    UniversalCamera,\r\n    Vector3,\r\n} from \"babylonjs\";\r\n\r\nimport Sample, { enumSplitMode } from \"../Sample\";\r\nimport Split from \"../Split\";\r\nimport Utils from \"../Utils\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\nimport { ISceneDescription } from \"./GlobalGUI\";\r\n\r\nexport default class SplitBase extends Split implements ISampleSplit {\r\n\r\n    protected _sunDir: Vector3;\r\n    protected _sceneName: string;\r\n    protected _cameraNearPlane: number;\r\n    protected _cameraFarPlane: number;\r\n    protected _sunColor: Color3;\r\n    protected _animateLight: boolean;\r\n    protected _autoCalcShadowZBounds: boolean;\r\n    protected _lightNearPlane: number;\r\n    protected _lightFarPlane: number;\r\n    protected _showLightHelper: boolean;\r\n    protected _rotateLightObservable: Nullable<Observer<Scene>>;\r\n    protected _shadowMapPlane: Mesh;\r\n    protected _shadowMapShowDepthMap: boolean;\r\n    protected _showDepthMapObservable: Nullable<Observer<Scene>>;\r\n    protected _shadowMapSize: number;\r\n    protected _shadowMapFilter: number;\r\n    protected _shadowMapBias: number;\r\n    protected _shadowMapNormalBias: number;\r\n    protected _shadowMapDarkness: number;\r\n    protected _shadowMapQuality: number;\r\n    protected _shadowMapDepthScale: number;\r\n    protected _shadowMapBlurScale: number;\r\n    protected _shadowMapUseKernelBlur: boolean;\r\n    protected _shadowMapBlurKernel: number;\r\n    protected _shadowMapBlurBoxOffset: number;\r\n    protected _shadowMapLightSizeUVRatio: number;\r\n\r\n    protected _csmNumCascades: number;\r\n    protected _csmActiveCascade: number;\r\n    protected _csmVisualizeCascades: boolean;\r\n    protected _csmStabilizeCascades: boolean;\r\n    protected _csmDepthClamp: boolean;\r\n    protected _csmLambda: number;\r\n    protected _csmSplitBlendPercentage: number;\r\n    protected _csmPenumbraDarkness: number;\r\n    protected _csmShadowMaxZ: number;\r\n    protected _csmAutoCalcDepthBounds: boolean;\r\n\r\n    constructor(scene: Scene, camera: UniversalCamera, parent: Sample, name: string) {\r\n        super(scene, camera, parent, name);\r\n\r\n        this._sunDir = new Vector3();\r\n        this._sunColor = new Color3();\r\n        this._sceneName = \"\";\r\n        this._cameraNearPlane = 0.25;\r\n        this._cameraFarPlane = 250;\r\n        this._animateLight = false;\r\n        this._autoCalcShadowZBounds = false;\r\n        this._lightNearPlane = -90;\r\n        this._lightFarPlane = 130;\r\n        this._showLightHelper = false;\r\n        this._rotateLightObservable = null;\r\n        this._shadowMapShowDepthMap = false;\r\n        this._showDepthMapObservable = null;\r\n        this._shadowMapSize = 1024;\r\n        this._shadowMapFilter = ShadowGenerator.FILTER_PCF;\r\n        this._shadowMapBias = 0.003;\r\n        this._shadowMapNormalBias = 0;\r\n        this._shadowMapDarkness = 0;\r\n        this._shadowMapQuality = ShadowGenerator.QUALITY_MEDIUM;\r\n        this._shadowMapDepthScale = 25;\r\n        this._shadowMapBlurScale = 2;\r\n        this._shadowMapUseKernelBlur = true;\r\n        this._shadowMapBlurKernel = 1;\r\n        this._shadowMapBlurBoxOffset = 1;\r\n        this._shadowMapLightSizeUVRatio = 0.01;\r\n\r\n        this._csmNumCascades = 4;\r\n        this._csmActiveCascade = 0;\r\n        this._csmVisualizeCascades = false;\r\n        this._csmStabilizeCascades = false;\r\n        this._csmDepthClamp = true;\r\n        this._csmLambda = 0.7;\r\n        this._csmSplitBlendPercentage = 0.05;\r\n        this._csmPenumbraDarkness = 0.7;\r\n        this._csmShadowMaxZ = 250;\r\n        this._csmAutoCalcDepthBounds = false;\r\n\r\n        this._shadowMapPlane = null as any;\r\n\r\n        const size = 1;\r\n\r\n        this._shadowMapPlane = MeshBuilder.CreatePlane(this.name + \"_shadowmap\", {\r\n            \"width\": size,\r\n            \"height\": size,\r\n        }, this.scene);\r\n\r\n        this._shadowMapPlane.position.x += size / 2;\r\n        this._shadowMapPlane.position.y -= size / 2;\r\n        this._shadowMapPlane.bakeCurrentTransformIntoVertices();\r\n        this._shadowMapPlane.alwaysSelectAsActiveMesh = true;\r\n\r\n        //const material = this.buildShaderMaterial();\r\n        const material = new StandardMaterial(this.name + \"_shadowmap_material\", scene);\r\n\r\n        material.emissiveColor = new Color3(1, 1, 1);\r\n        material.disableLighting = true;\r\n        material.depthFunction = Engine.ALWAYS;\r\n\r\n        this._shadowMapPlane.material = material;\r\n\r\n        this._shadowMapPlane.setEnabled(false);\r\n    }\r\n\r\n    protected buildShaderMaterial(): ShaderMaterial {\r\n        Effect.ShadersStore[\"customVertexShader\"]= `   \r\n        precision highp float;\r\n\r\n        attribute vec3 position;\r\n        attribute vec2 uv;\r\n        \r\n        uniform mat4 world;\r\n        uniform mat4 worldViewProjection;\r\n        \r\n        varying vec2 vUv;\r\n        \r\n        void main(void) {\r\n            vUv = uv;\r\n            gl_Position = worldViewProjection * vec4(position, 1.0);\r\n        }\r\n        `;        \r\n\r\n        Effect.ShadersStore[\"customFragmentShader\"]=`\r\n        precision highp float;\r\n\r\n        varying vec2 vUv;\r\n    \tuniform highp sampler2DArrayShadow textureSampler;\r\n        \r\n        void main(void) {\r\n            float shadow = texelFetch(textureSampler, vUv, 0);\r\n            gl_FragColor = shadow;//vec4(vec3(shadow), 1.0);\r\n        }\r\n        `;\r\n\r\n        var mat = new ShaderMaterial(\"shader\", this.scene, {\r\n            vertex: \"custom\",\r\n            fragment: \"custom\",\r\n            },\r\n            {\r\n                attributes: [\"position\", \"uv\"],\r\n                uniforms: [\"world\", \"worldViewProjection\"],\r\n            }\r\n        );\r\n\r\n        return mat;\r\n    }\r\n\r\n    public render(): void {\r\n        const sky = this.scene.getMeshByName(\"skyBox\");\r\n        if (sky) {\r\n            sky.position.set(this.camera.position.x, this.camera.position.y, this.camera.position.z);\r\n        }\r\n\r\n        super.render();\r\n    }\r\n\r\n    public get shadowMapPlane(): Mesh {\r\n        return this._shadowMapPlane;\r\n    }\r\n\r\n    public initialize(scene: ISceneDescription, ambientColor: Color3, sunDir: Vector3): Promise<ISampleSplit> {\r\n        return Promise.resolve(this);\r\n    }\r\n\r\n    public get sceneName(): string {\r\n        return this._sceneName;\r\n    }\r\n\r\n    public get cameraNearPlane(): number {\r\n        return this._cameraNearPlane;\r\n    }\r\n\r\n    public set cameraNearPlane(cnp: number) {\r\n        this._cameraNearPlane = cnp;\r\n        this.camera.minZ = cnp;\r\n    }\r\n\r\n    public get cameraFarPlane(): number {\r\n        return this._cameraFarPlane;\r\n    }\r\n\r\n    public set cameraFarPlane(cfp: number) {\r\n        this._cameraFarPlane = cfp;\r\n        this.camera.maxZ = cfp;\r\n    }\r\n\r\n    public get animateLight(): boolean {\r\n        return this._animateLight;\r\n    }\r\n\r\n    public set animateLight(al: boolean) {\r\n        if (this._rotateLightObservable && !al) {\r\n            this.scene.onBeforeRenderObservable.remove(this._rotateLightObservable);\r\n            this._rotateLightObservable = null;\r\n        }\r\n\r\n        this._animateLight = al;\r\n\r\n        if (!this._rotateLightObservable && al) {\r\n            this._rotateLightObservable = this.scene.onBeforeRenderObservable.add(this.rotateLight.bind(this));\r\n        }\r\n\r\n        this.setDirectionFromSibling(this._animateLight);\r\n    }\r\n\r\n    public get lightColor(): string {\r\n        return this._sunColor.toHexString();\r\n    }\r\n\r\n    public set lightColor(lc: string) {\r\n        this._sunColor = Color3.FromHexString(lc);\r\n    }\r\n\r\n    public get lightDirection(): Vector3 {\r\n        return this._sunDir;\r\n    }\r\n\r\n    public set lightDirection(ld: Vector3) {\r\n        this._sunDir = ld;\r\n    }\r\n\r\n    public get showLightHelper(): boolean {\r\n        return this._showLightHelper;\r\n    }\r\n\r\n    public set showLightHelper(slh: boolean) {\r\n        this._showLightHelper = slh;\r\n    }\r\n\r\n    public get shadowMapShowDepthMap(): boolean {\r\n        return this._shadowMapShowDepthMap;\r\n    }\r\n\r\n    public set shadowMapShowDepthMap(smsdm: boolean) {\r\n        if (this._shadowMapShowDepthMap && !smsdm) {\r\n            this.scene.onBeforeRenderObservable.remove(this._showDepthMapObservable);\r\n            this._showDepthMapObservable = null;\r\n        }\r\n\r\n        this._shadowMapShowDepthMap = smsdm;\r\n        this._shadowMapPlane.setEnabled(smsdm);\r\n\r\n        if (!this._showDepthMapObservable && smsdm) {\r\n            this._showDepthMapObservable = this.scene.onBeforeRenderObservable.add(this.showDepthMap.bind(this));\r\n        }\r\n    }\r\n\r\n    public get shadowMapSize(): number {\r\n        return this._shadowMapSize;\r\n    }\r\n\r\n    public set shadowMapSize(sms: number) {\r\n        this._shadowMapSize = sms;\r\n    }\r\n\r\n    public get shadowMapFilter(): number {\r\n        return this._shadowMapFilter;\r\n    }\r\n\r\n    public set shadowMapFilter(smf: number) {\r\n        this._shadowMapFilter = smf;\r\n    }\r\n\r\n    public get shadowMapBias(): number {\r\n        return this._shadowMapBias;\r\n    }\r\n\r\n    public set shadowMapBias(smb: number) {\r\n        this._shadowMapBias = smb;\r\n    }\r\n\r\n    public get shadowMapNormalBias(): number {\r\n        return this._shadowMapNormalBias;\r\n    }\r\n\r\n    public set shadowMapNormalBias(smnb: number) {\r\n        this._shadowMapNormalBias = smnb;\r\n    }\r\n\r\n    public get shadowMapDarkness(): number {\r\n        return this._shadowMapDarkness;\r\n    }\r\n\r\n    public set shadowMapDarkness(smd: number) {\r\n        this._shadowMapDarkness = smd;\r\n    }\r\n\r\n    public get shadowMapQuality(): number {\r\n        return this._shadowMapQuality;\r\n    }\r\n\r\n    public set shadowMapQuality(smq: number) {\r\n        this._shadowMapQuality = smq;\r\n    }\r\n\r\n    public get shadowMapDepthScale(): number {\r\n        return this._shadowMapDepthScale;\r\n    }\r\n\r\n    public set shadowMapDepthScale(smds: number) {\r\n        this._shadowMapDepthScale = smds;\r\n    }\r\n\r\n    public get shadowMapBlurScale(): number {\r\n        return this._shadowMapBlurScale;\r\n    }\r\n\r\n    public set shadowMapBlurScale(smbs: number) {\r\n        this._shadowMapBlurScale = smbs;\r\n    }\r\n\r\n    public get shadowMapUseKernelBlur(): boolean {\r\n        return this._shadowMapUseKernelBlur;\r\n    }\r\n\r\n    public set shadowMapUseKernelBlur(smukb: boolean) {\r\n        this._shadowMapUseKernelBlur = smukb;\r\n    }\r\n\r\n    public get shadowMapBlurKernel(): number {\r\n        return this._shadowMapBlurKernel;\r\n    }\r\n\r\n    public set shadowMapBlurKernel(smbk: number) {\r\n        this._shadowMapBlurKernel = smbk;\r\n    }\r\n\r\n    public get shadowMapBlurBoxOffset(): number {\r\n        return this._shadowMapBlurBoxOffset;\r\n    }\r\n\r\n    public set shadowMapBlurBoxOffset(smbbo: number) {\r\n        this._shadowMapBlurBoxOffset = smbbo;\r\n    }\r\n\r\n    public get shadowMapLightSizeUVRatio(): number {\r\n        return this._shadowMapLightSizeUVRatio;\r\n    }\r\n\r\n    public set shadowMapLightSizeUVRatio(smlsuvr: number) {\r\n        this._shadowMapLightSizeUVRatio = smlsuvr;\r\n    }\r\n\r\n    public get lightNearPlane(): number {\r\n        return this._lightNearPlane;\r\n    }\r\n\r\n    public set lightNearPlane(lnp: number) {\r\n        this._lightNearPlane = lnp;\r\n    }\r\n\r\n    public get lightFarPlane(): number {\r\n        return this._lightFarPlane;\r\n    }\r\n\r\n    public set lightFarPlane(lfp: number) {\r\n        this._lightFarPlane = lfp;\r\n    }\r\n\r\n    public get autoCalcShadowZBounds(): boolean {\r\n        return this._autoCalcShadowZBounds;\r\n    }\r\n\r\n    public set autoCalcShadowZBounds(acszb: boolean) {\r\n        this._autoCalcShadowZBounds = acszb;\r\n    }\r\n\r\n    public get csmNumCascades(): number {\r\n        return this._csmNumCascades;\r\n    }\r\n\r\n    public set csmNumCascades(num: number) {\r\n        this._csmNumCascades = num;\r\n    }\r\n\r\n    public get csmActiveCascade(): number {\r\n        return this._csmActiveCascade;\r\n    }\r\n\r\n    public set csmActiveCascade(cac: number) {\r\n        this._csmActiveCascade = cac;\r\n    }\r\n\r\n    public get csmVisualizeCascades(): boolean {\r\n        return this._csmVisualizeCascades;\r\n    }\r\n\r\n    public set csmVisualizeCascades(cvc: boolean) {\r\n        this._csmVisualizeCascades = cvc;\r\n    }\r\n\r\n    public get csmStabilizeCascades(): boolean {\r\n        return this._csmStabilizeCascades;\r\n    }\r\n\r\n    public set csmStabilizeCascades(csc: boolean) {\r\n        this._csmStabilizeCascades = csc;\r\n    }\r\n\r\n    public get csmDepthClamp(): boolean {\r\n        return this._csmDepthClamp;\r\n    }\r\n\r\n    public set csmDepthClamp(cdc: boolean) {\r\n        this._csmDepthClamp = cdc;\r\n    }\r\n\r\n    public get csmLambda(): number {\r\n        return this._csmLambda;\r\n    }\r\n\r\n    public set csmLambda(cl: number) {\r\n        this._csmLambda = cl;\r\n    }\r\n\r\n    public get csmSplitBlendPercentage(): number {\r\n        return this._csmSplitBlendPercentage;\r\n    }\r\n\r\n    public set csmSplitBlendPercentage(csbp: number) {\r\n        this._csmSplitBlendPercentage = csbp;\r\n    }\r\n\r\n    public get csmPenumbraDarkness(): number {\r\n        return this._csmPenumbraDarkness;\r\n    }\r\n\r\n    public set csmPenumbraDarkness(cpd: number) {\r\n        this._csmPenumbraDarkness = cpd;\r\n    }\r\n\r\n    public get csmShadowMaxZ(): number {\r\n        return this._csmShadowMaxZ;\r\n    }\r\n\r\n    public set csmShadowMaxZ(csmz: number) {\r\n        this._csmShadowMaxZ = csmz;\r\n    }\r\n\r\n    public get csmAutoCalcDepthBounds(): boolean {\r\n        return this._csmAutoCalcDepthBounds;\r\n    }\r\n\r\n    public set csmAutoCalcDepthBounds(cacdb: boolean) {\r\n        this._csmAutoCalcDepthBounds = cacdb;\r\n    }\r\n\r\n    protected setDirectionFromSibling(checkAnimate: boolean = true): void {\r\n        for (let i = 0; i < this._container.splits.length; ++i) {\r\n            const ssplit = this._container.splits[i] as SplitBase;\r\n\r\n            if (ssplit !== this && (ssplit.animateLight === checkAnimate) && ssplit.group === this.group) {\r\n                this.lightDirection = ssplit.lightDirection.clone();\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    protected rotateLight(): void {\r\n        const deltaTime = this.scene.getEngine().getDeltaTime() / 1000;\r\n\r\n        let matrix = new Matrix();\r\n\r\n        let rotY = Utils.XMScalarModAngle(deltaTime * 0.25);\r\n\r\n        let rotation = Quaternion.RotationAxis(new Vector3(0.0, 1.0, 0.0), rotY);\r\n\r\n        Matrix.FromQuaternionToRef(rotation, matrix);\r\n        Vector3.TransformCoordinatesToRef(this._sunDir, matrix, this._sunDir);\r\n\r\n        this.lightDirection = this._sunDir;\r\n    }\r\n\r\n    protected showDepthMap(): void {\r\n        this.camera.getViewMatrix(); // make sure the transformation matrix we get when calling 'getTransformationMatrix()' is calculated with an up to date view matrix\r\n\r\n        let invertCameraViewProj = Matrix.Invert(this.camera.getTransformationMatrix());\r\n\r\n        let h = 256 / this.scene.getEngine().getRenderWidth(true);\r\n\r\n        let pOfst = 0;\r\n\r\n        if (this._container.splitMode === enumSplitMode.LINEAR) {\r\n            let sidx = this._container.splits.indexOf(this),\r\n                sw = 2 / this._container.splits.length;\r\n            pOfst = sw * sidx + sw / 2 - h;\r\n        } else {\r\n            pOfst = 1 - h;\r\n        }\r\n\r\n        let p = new Vector3(-1, 1, -1 + 0.001);\r\n        let q = new Vector3(-1 + h * 2, 1, -1 + 0.001);\r\n\r\n        let pt = Vector3.TransformCoordinates(p, invertCameraViewProj);\r\n        let qt = Vector3.TransformCoordinates(q, invertCameraViewProj);\r\n        let d = qt.subtract(pt).length();\r\n\r\n        this.shadowMapPlane.scaling = new Vector3(d, d, 1);\r\n\r\n        p.x += pOfst;\r\n\r\n        this.shadowMapPlane.rotation = this.camera.rotation;\r\n        this.shadowMapPlane.position = Vector3.TransformCoordinates(p, invertCameraViewProj);\r\n    }\r\n\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n    ExpansionPanel,\r\n    ExpansionPanelDetails,\r\n    ExpansionPanelSummary,\r\n    Grid,\r\n    Icon,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    Switch,\r\n    TextField,\r\n    Typography,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n    Engine,\r\n    ShadowGenerator,\r\n} from 'babylonjs';\r\n\r\nimport { PrettoSlider } from \"../GUI\";\r\nimport Sample from \"../Sample\";\r\nimport SplitGUI from \"../SplitGUI\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\nimport { CascadedShadowGenerator } from \"./cascadedShadowGenerator\";\r\n\r\nexport default class SplitBaseGUI extends SplitGUI {\r\n\r\n    protected _sparent: ISampleSplit;\r\n    protected _showAutoCalcPlanes: boolean;\r\n    protected _showCSM: boolean;\r\n\r\n    constructor(name: string, engine: Engine, container: Sample, parent: ISampleSplit) {\r\n        super(name, engine, container, parent);\r\n\r\n        this._sparent = parent;\r\n        this._showAutoCalcPlanes = true;\r\n        this._showCSM = false;\r\n        this.dimensions.width = 320;\r\n        this.dimensions.height = 750;\r\n    }\r\n\r\n    protected createCustomGUI(): React.ReactElement {\r\n        const classes = this._useStyles();\r\n\r\n        const Properties = () => {\r\n            //const [ignored, forceUpdate] = React.useReducer((x) => x + 1, 0);\r\n\r\n            const [cameraNearPlane, setCameraNearPlane] = React.useState(this._sparent.cameraNearPlane);\r\n            const [cameraFarPlane, setCameraFarPlane] = React.useState(this._sparent.cameraFarPlane);\r\n\r\n            const [animateLight, setAnimateLight] = React.useState(this._sparent.animateLight);\r\n            const [lightColor, setLightColor] = React.useState(this._sparent.lightColor);\r\n            const [lightNearPlane, setLightNearPlane] = React.useState(Math.floor(this._sparent.lightNearPlane));\r\n            const [lightFarPlane, setLightFarPlane] = React.useState(Math.floor(this._sparent.lightFarPlane));\r\n            const [autoCalcShadowZBounds, setAutoCalcShadowZBounds] = React.useState(this._sparent.autoCalcShadowZBounds);\r\n            const [showLightHelper, setShowLightHelper] = React.useState(this._sparent.showLightHelper);\r\n\r\n            const [shadowMapShowDepthMap, setShadowMapShowDepthMap] = React.useState(this._sparent.shadowMapShowDepthMap);\r\n            const [shadowMapSize, setShadowMapSize] = React.useState(this._sparent.shadowMapSize);\r\n            const [shadowMapBias, setShadowMapBias] = React.useState(this._sparent.shadowMapBias);\r\n            const [shadowMapNormalBias, setShadowMapNormalBias] = React.useState(this._sparent.shadowMapNormalBias);\r\n            const [shadowMapDarkness, setShadowMapDarkness] = React.useState(this._sparent.shadowMapDarkness);\r\n            const [shadowMapFilter, setShadowMapFilter] = React.useState(this._sparent.shadowMapFilter);\r\n            const [shadowMapQuality, setShadowMapQuality] = React.useState(this._sparent.shadowMapQuality);\r\n            const [shadowMapDepthScale, setShadowMapDepthScale] = React.useState(this._sparent.shadowMapDepthScale);\r\n            const [shadowMapBlurScale, setShadowMapBlurScale] = React.useState(this._sparent.shadowMapBlurScale);\r\n            const [shadowMapUseKernelBlur, setShadowMapUseKernelBlur] = React.useState(this._sparent.shadowMapUseKernelBlur);\r\n            const [shadowMapBlurKernel, setShadowMapBlurKernel] = React.useState(this._sparent.shadowMapBlurKernel);\r\n            const [shadowMapBlurBoxOffset, setShadowMapBlurBoxOffset] = React.useState(this._sparent.shadowMapBlurBoxOffset);\r\n            const [shadowMapLightSizeUVRatio, setShadowMapLightSizeUVRatio] = React.useState(this._sparent.shadowMapLightSizeUVRatio);\r\n\r\n            const [csmNumCascades, setCSMNumCascades] = React.useState(this._sparent.csmNumCascades);\r\n            const [csmActiveCascade, setCSMActiveCascade] = React.useState(this._sparent.csmActiveCascade);\r\n            const [csmVisualizeCascades, setCSMVisualizeCascades] = React.useState(this._sparent.csmVisualizeCascades);\r\n            const [csmStabilizeCascades, setCSMStabilizeCascades] = React.useState(this._sparent.csmStabilizeCascades);\r\n            const [csmDepthClamp, setCSMDepthClamp] = React.useState(this._sparent.csmDepthClamp);\r\n            const [csmLambda, setCSMLambda] = React.useState(this._sparent.csmLambda);\r\n            const [csmSplitBlendPercentage, setCSMSplitBlendPercentage] = React.useState(this._sparent.csmSplitBlendPercentage);\r\n            const [csmPenumbraDarkness, setCSMPenumbraDarkness] = React.useState(this._sparent.csmPenumbraDarkness);\r\n            const [csmShadowMaxZ, setCSMShadowMaxZ] = React.useState(this._sparent.csmShadowMaxZ);\r\n            const [csmAutoCalcDepthBounds, setCSMAutoCalcDepthBounds] = React.useState(this._sparent.csmAutoCalcDepthBounds);\r\n\r\n            const changeCameraNearPlane = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.cameraNearPlane = value as number;\r\n                setCameraNearPlane(this._sparent.cameraNearPlane);\r\n            };\r\n\r\n            const changeCameraFarPlane = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.cameraFarPlane = value as number;\r\n                setCameraFarPlane(this._sparent.cameraFarPlane);\r\n            };\r\n\r\n            const changeAnimateLight = (event: React.ChangeEvent, checked: boolean) => {\r\n                setAnimateLight(checked);\r\n                this._sparent.animateLight = checked;\r\n            };\r\n\r\n            const changeLightColor = (event: React.ChangeEvent<Element>) => {\r\n                this._sparent.lightColor = (event.target as any).value;\r\n                setLightColor(this._sparent.lightColor);\r\n            };\r\n\r\n            const changeLightNearPlane = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.lightNearPlane = value as number;\r\n                setLightNearPlane(this._sparent.lightNearPlane);\r\n            };\r\n\r\n            const changeLightFarPlane = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.lightFarPlane = value as number;\r\n                setLightFarPlane(this._sparent.lightFarPlane);\r\n            };\r\n\r\n            const changeAutoCalcShadowZBounds = (event: React.ChangeEvent, checked: boolean) => {\r\n                setAutoCalcShadowZBounds(checked);\r\n                this._sparent.autoCalcShadowZBounds = checked;\r\n            };\r\n\r\n            const changeShowLightHelper = (event: React.ChangeEvent, checked: boolean) => {\r\n                setShowLightHelper(checked);\r\n                this._sparent.showLightHelper = checked;\r\n            };\r\n\r\n            const changeShadowMapShowDepthMap = (event: React.ChangeEvent, checked: boolean) => {\r\n                setShadowMapShowDepthMap(checked);\r\n                this._sparent.shadowMapShowDepthMap = checked;\r\n            };\r\n\r\n            const changeShadowMapSize = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.shadowMapSize = event.target.value as number;\r\n                setShadowMapSize(this._sparent.shadowMapSize);\r\n            };\r\n\r\n            const changeShadowMapBias = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\r\n                this._sparent.shadowMapBias = event.target.value as number;\r\n                setShadowMapBias(this._sparent.shadowMapBias);\r\n            };\r\n\r\n            const changeShadowMapNormalBias = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\r\n                this._sparent.shadowMapNormalBias = event.target.value as number;\r\n                setShadowMapNormalBias(this._sparent.shadowMapNormalBias);\r\n            };\r\n\r\n            const changeShadowMapDarkness = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.shadowMapDarkness = value as number;\r\n                setShadowMapDarkness(this._sparent.shadowMapDarkness);\r\n            };\r\n\r\n            const changeShadowMapFilter = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.shadowMapFilter = event.target.value as number;\r\n                setShadowMapFilter(this._sparent.shadowMapFilter);\r\n            };\r\n\r\n            const changeShadowMapQuality = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.shadowMapQuality = event.target.value as number;\r\n                setShadowMapQuality(this._sparent.shadowMapQuality);\r\n            };\r\n\r\n            const changeShadowMapDepthScale = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\r\n                this._sparent.shadowMapDepthScale = event.target.value as number;\r\n                setShadowMapDepthScale(this._sparent.shadowMapDepthScale);\r\n            };\r\n\r\n            const changeShadowMapBlurScale = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.shadowMapBlurScale = value as number;\r\n                setShadowMapBlurScale(this._sparent.shadowMapBlurScale);\r\n            };\r\n\r\n            const changeShadowMapUseKernelBlur = (event: React.ChangeEvent, checked: boolean) => {\r\n                setShadowMapUseKernelBlur(checked);\r\n                this._sparent.shadowMapUseKernelBlur = checked;\r\n            };\r\n\r\n            const changeShadowMapBlurKernel = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.shadowMapBlurKernel = value as number;\r\n                setShadowMapBlurKernel(this._sparent.shadowMapBlurKernel);\r\n            };\r\n\r\n            const changeShadowMapBlurBoxOffset = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.shadowMapBlurBoxOffset = value as number;\r\n                setShadowMapBlurBoxOffset(this._sparent.shadowMapBlurBoxOffset);\r\n            };\r\n\r\n            const changeShadowMapLightSizeUVRatio = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>) => {\r\n                this._sparent.shadowMapLightSizeUVRatio = event.target.value as number;\r\n                setShadowMapLightSizeUVRatio(this._sparent.shadowMapLightSizeUVRatio);\r\n            };\r\n\r\n            const changeNumCascades = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.csmNumCascades = event.target.value as number;\r\n                setCSMNumCascades(this._sparent.csmNumCascades);\r\n                setCSMActiveCascade(this._sparent.csmActiveCascade);\r\n            };\r\n\r\n            const changeActiveCascade = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._sparent.csmActiveCascade = event.target.value as number;\r\n                setCSMActiveCascade(this._sparent.csmActiveCascade);\r\n                setShadowMapBias(this._sparent.shadowMapBias);\r\n                setShadowMapNormalBias(this._sparent.shadowMapNormalBias);\r\n                setShadowMapDarkness(this._sparent.shadowMapDarkness);\r\n                setShadowMapFilter(this._sparent.shadowMapFilter);\r\n                setShadowMapQuality(this._sparent.shadowMapQuality);\r\n            };\r\n\r\n            const changeCSMVisualizeCascades = (event: React.ChangeEvent, checked: boolean) => {\r\n                setCSMVisualizeCascades(checked);\r\n                this._sparent.csmVisualizeCascades = checked;\r\n            };\r\n\r\n            const changeCSMStabilizeCascades = (event: React.ChangeEvent, checked: boolean) => {\r\n                setCSMStabilizeCascades(checked);\r\n                this._sparent.csmStabilizeCascades = checked;\r\n            };\r\n\r\n            const changeCSMDepthClamp = (event: React.ChangeEvent, checked: boolean) => {\r\n                setCSMDepthClamp(checked);\r\n                this._sparent.csmDepthClamp = checked;\r\n            };\r\n\r\n            const changeCSMLambda = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.csmLambda = value as number;\r\n                setCSMLambda(this._sparent.csmLambda);\r\n            };\r\n\r\n            const changeCSMSplitBlendPercentage = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.csmSplitBlendPercentage = value as number;\r\n                setCSMSplitBlendPercentage(this._sparent.csmSplitBlendPercentage);\r\n            };\r\n\r\n            const changeCSMPenumbraDarkness = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.csmPenumbraDarkness = value as number;\r\n                setCSMPenumbraDarkness(this._sparent.csmPenumbraDarkness);\r\n            };\r\n\r\n            const changeCSMShadowMaxZ = (event: React.ChangeEvent<{}>, value: number | number[]) => {\r\n                this._sparent.csmShadowMaxZ = value as number;\r\n                setCSMShadowMaxZ(this._sparent.csmShadowMaxZ);\r\n            };\r\n\r\n            const changeCSMAutoCalcDepthBounds = (event: React.ChangeEvent, checked: boolean) => {\r\n                setCSMAutoCalcDepthBounds(checked);\r\n                this._sparent.csmAutoCalcDepthBounds = checked;\r\n            };\r\n\r\n\r\n            React.useEffect(() => {\r\n                const handler = (event: Event) => {\r\n                    switch ((event as CustomEvent).detail.type) {\r\n                        case 'setShadowZBounds': {\r\n                            setLightNearPlane(Math.floor(this._sparent.lightNearPlane));\r\n                            setLightFarPlane(Math.floor(this._sparent.lightFarPlane));\r\n                            break;\r\n                        }\r\n\r\n                        case 'setShadowMaxZ': {\r\n                            setCSMShadowMaxZ(Math.floor(this._sparent.csmShadowMaxZ));\r\n                            break;\r\n                        }\r\n                    }\r\n                };\r\n\r\n                window.addEventListener('gui_set_value', handler);\r\n\r\n                return () => {\r\n                    window.removeEventListener('gui_set_value', handler);\r\n                };\r\n            }, []);\r\n\r\n            return (\r\n                <>\r\n                    <ExpansionPanel defaultExpanded={true}>\r\n                        <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\r\n                            <Typography>Scene</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <Grid container spacing={1}>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Current Scene</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>{this._sparent.sceneName}</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Camera Near Plane</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <PrettoSlider valueLabelDisplay=\"auto\" value={cameraNearPlane} min={0} max={10} step={0.01} onChange={changeCameraNearPlane} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Camera Far Plane</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <PrettoSlider valueLabelDisplay=\"auto\" value={cameraFarPlane} min={0} max={2000} step={10} onChange={changeCameraFarPlane} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                            </Grid>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    <ExpansionPanel defaultExpanded={true}>\r\n                        <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\r\n                            <Typography>Light</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <Grid container spacing={1}>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Show Helper</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <Switch checked={showLightHelper} onChange={changeShowLightHelper} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Animate</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <Switch checked={animateLight} onChange={changeAnimateLight} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Color</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <TextField type=\"color\" value={lightColor} variant=\"filled\" onChange={changeLightColor} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                { this._showAutoCalcPlanes && <>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Auto Calc Planes</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <Switch checked={autoCalcShadowZBounds} onChange={changeAutoCalcShadowZBounds} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                { true && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Near Plane</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider disabled={autoCalcShadowZBounds} valueLabelDisplay=\"auto\" value={lightNearPlane} min={-250} max={250} step={1} onChange={changeLightNearPlane} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Far Plane</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider disabled={autoCalcShadowZBounds} valueLabelDisplay=\"auto\" value={lightFarPlane} min={0} max={500} step={1} onChange={changeLightFarPlane} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </> }\r\n                                </> }\r\n                            </Grid>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    { this._showCSM && <>\r\n                        <ExpansionPanel defaultExpanded={true}>\r\n                            <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\r\n                                <Typography>Cascaded Shadow Maps</Typography>\r\n                            </ExpansionPanelSummary>\r\n                            <ExpansionPanelDetails>\r\n                                <Grid container spacing={1}>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Num of Cascades</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={csmNumCascades}\r\n                                            onChange={changeNumCascades}\r\n                                        >\r\n                                            { [...Array(3).keys()].map((_, i) => <MenuItem key={i + 2} value={i + 2}>{i + 2}</MenuItem>) }\r\n                                        </Select>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Active Cascade</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={csmActiveCascade}\r\n                                            onChange={changeActiveCascade}\r\n                                        >\r\n                                            { [...Array(csmNumCascades).keys()].map((_, i) => <MenuItem key={i} value={i}>{i + 1}</MenuItem>) }\r\n                                        </Select>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Visualize Cascades</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={csmVisualizeCascades} onChange={changeCSMVisualizeCascades} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Stabilize Cascades</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={csmStabilizeCascades} onChange={changeCSMStabilizeCascades} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Lambda</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider valueLabelDisplay=\"auto\" value={csmLambda} min={0} max={1} step={0.01} onChange={changeCSMLambda} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Cascade Blend</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider valueLabelDisplay=\"auto\" value={csmSplitBlendPercentage} min={0} max={1} step={0.01} onChange={changeCSMSplitBlendPercentage} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Auto-Calc Depth</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={csmAutoCalcDepthBounds} onChange={changeCSMAutoCalcDepthBounds} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Shadow MaxZ</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider valueLabelDisplay=\"auto\" value={csmShadowMaxZ} min={0} max={500} step={10} onChange={changeCSMShadowMaxZ} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </Grid>\r\n                            </ExpansionPanelDetails>\r\n                        </ExpansionPanel>\r\n                    </> }\r\n                    <ExpansionPanel defaultExpanded={true}>\r\n                        <ExpansionPanelSummary expandIcon={<Icon>expand_more</Icon>}>\r\n                            <Typography>{ this._showCSM ? \"Cascade\" : \"Shadow Map\" }</Typography>\r\n                        </ExpansionPanelSummary>\r\n                        <ExpansionPanelDetails>\r\n                            <Grid container spacing={1}>\r\n                                { (!this._showCSM || this._showCSM && shadowMapFilter === CascadedShadowGenerator.FILTER_NONE) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Show Depth Map</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={shadowMapShowDepthMap} onChange={changeShadowMapShowDepthMap} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </> }\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Size</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Select\r\n                                        className={classes.propertyValue}\r\n                                        value={shadowMapSize}\r\n                                        onChange={changeShadowMapSize}\r\n                                        >\r\n                                        <MenuItem value={2048}>2048x2048</MenuItem>\r\n                                        <MenuItem value={1024}>1024x1024</MenuItem>\r\n                                        <MenuItem value={512}>512x512</MenuItem>\r\n                                        <MenuItem value={256}>256x256</MenuItem>\r\n                                    </Select>\r\n                                </Grid>\r\n                                { this._showCSM && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Depth Clamp</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={csmDepthClamp} onChange={changeCSMDepthClamp} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </> }\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Bias</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <TextField type=\"number\" value={shadowMapBias} variant=\"standard\" inputProps={{ step: \"0.001\" }} onChange={changeShadowMapBias} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Normal Bias</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <TextField type=\"number\" value={shadowMapNormalBias} variant=\"standard\" inputProps={{ step: \"0.001\" }} onChange={changeShadowMapNormalBias} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Darkness</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    <Paper className={classes.propertyValue}>\r\n                                        <PrettoSlider valueLabelDisplay=\"auto\" value={shadowMapDarkness} min={0} max={1} step={0.01} onChange={changeShadowMapDarkness} />\r\n                                    </Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6}>\r\n                                    <Paper className={classes.subPropertyTitle}>Filter Type</Paper>\r\n                                </Grid>\r\n                                <Grid item xs={6} className={classes.propertyValue}>\r\n                                    { !this._showCSM && <>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={shadowMapFilter}\r\n                                            onChange={changeShadowMapFilter}\r\n                                            >\r\n                                            <MenuItem value={ShadowGenerator.FILTER_PCSS}>PCSS</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_PCF}>PCF</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP}>CESM (Blur)</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_CLOSEEXPONENTIALSHADOWMAP}>CESM</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP}>ESM (Blur)</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_EXPONENTIALSHADOWMAP}>ESM</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_POISSONSAMPLING}>Poisson</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.FILTER_NONE}>None</MenuItem>\r\n                                        </Select>\r\n                                    </> }\r\n                                    { this._showCSM && <>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={shadowMapFilter}\r\n                                            onChange={changeShadowMapFilter}\r\n                                            >\r\n                                            <MenuItem value={CascadedShadowGenerator.FILTER_PCSS}>PCSS</MenuItem>\r\n                                            <MenuItem value={CascadedShadowGenerator.FILTER_PCF}>PCF</MenuItem>\r\n                                            <MenuItem value={CascadedShadowGenerator.FILTER_NONE}>None</MenuItem>\r\n                                        </Select>\r\n                                    </> }\r\n                                </Grid>\r\n                                {((shadowMapFilter === ShadowGenerator.FILTER_PCSS || shadowMapFilter === ShadowGenerator.FILTER_PCF) && !this._showCSM || (shadowMapFilter === CascadedShadowGenerator.FILTER_PCSS || shadowMapFilter === CascadedShadowGenerator.FILTER_PCF) && this._showCSM) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Filtering Quality</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Select\r\n                                            className={classes.propertyValue}\r\n                                            value={shadowMapQuality}\r\n                                            onChange={changeShadowMapQuality}\r\n                                            >\r\n                                            <MenuItem value={ShadowGenerator.QUALITY_LOW}>Low</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.QUALITY_MEDIUM}>Medium</MenuItem>\r\n                                            <MenuItem value={ShadowGenerator.QUALITY_HIGH}>High</MenuItem>\r\n                                        </Select>\r\n                                    </Grid>\r\n                                </> }\r\n                                {((shadowMapFilter === ShadowGenerator.FILTER_PCSS) && !this._showCSM || (shadowMapFilter === CascadedShadowGenerator.FILTER_PCSS) && this._showCSM) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Light Size UV Ratio</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <TextField type=\"number\" value={shadowMapLightSizeUVRatio} variant=\"standard\" inputProps={{ step: \"0.001\" }} onChange={changeShadowMapLightSizeUVRatio} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    { this._showCSM && <>\r\n                                        <Grid item xs={6}>\r\n                                            <Paper className={classes.subPropertyTitle}>Penumbra Darkness</Paper>\r\n                                        </Grid>\r\n                                        <Grid item xs={6} className={classes.propertyValue}>\r\n                                            <Paper className={classes.propertyValue}>\r\n                                                <PrettoSlider valueLabelDisplay=\"auto\" value={csmPenumbraDarkness} min={0} max={1} step={0.01} onChange={changeCSMPenumbraDarkness} />\r\n                                            </Paper>\r\n                                        </Grid>\r\n                                    </> }\r\n                                </> }\r\n                                {!this._showCSM && (shadowMapFilter === ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP || shadowMapFilter === ShadowGenerator.FILTER_EXPONENTIALSHADOWMAP) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Depth Scale</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <TextField type=\"number\" value={shadowMapDepthScale} variant=\"standard\" inputProps={{ step: \"1\" }} onChange={changeShadowMapDepthScale} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </> }\r\n                                {!this._showCSM && (shadowMapFilter === ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Blur Scale</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <PrettoSlider valueLabelDisplay=\"auto\" defaultValue={shadowMapBlurScale} min={1} max={4} step={1} onChange={changeShadowMapBlurScale} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                </> }\r\n                                {!this._showCSM && (shadowMapFilter === ShadowGenerator.FILTER_BLURCLOSEEXPONENTIALSHADOWMAP || shadowMapFilter === ShadowGenerator.FILTER_BLUREXPONENTIALSHADOWMAP) && <>\r\n                                    <Grid item xs={6}>\r\n                                        <Paper className={classes.subPropertyTitle}>Use Kernel Blur</Paper>\r\n                                    </Grid>\r\n                                    <Grid item xs={6} className={classes.propertyValue}>\r\n                                        <Paper className={classes.propertyValue}>\r\n                                            <Switch checked={shadowMapUseKernelBlur} onChange={changeShadowMapUseKernelBlur} />\r\n                                        </Paper>\r\n                                    </Grid>\r\n                                    {shadowMapUseKernelBlur && <>\r\n                                        <Grid item xs={6}>\r\n                                            <Paper className={classes.subPropertyTitle}>Blur Kernel</Paper>\r\n                                        </Grid>\r\n                                        <Grid item xs={6} className={classes.propertyValue}>\r\n                                            <Paper className={classes.propertyValue}>\r\n                                                <PrettoSlider valueLabelDisplay=\"auto\" defaultValue={shadowMapBlurKernel} min={1} max={64} step={1} onChange={changeShadowMapBlurKernel} />\r\n                                            </Paper>\r\n                                        </Grid>\r\n                                    </> }\r\n                                    {!shadowMapUseKernelBlur && <>\r\n                                        <Grid item xs={6}>\r\n                                            <Paper className={classes.subPropertyTitle}>Blur Box Offset</Paper>\r\n                                        </Grid>\r\n                                        <Grid item xs={6} className={classes.propertyValue}>\r\n                                            <Paper className={classes.propertyValue}>\r\n                                                <PrettoSlider valueLabelDisplay=\"auto\" defaultValue={shadowMapBlurBoxOffset} min={1} max={64} step={1} onChange={changeShadowMapBlurBoxOffset} />\r\n                                            </Paper>\r\n                                        </Grid>\r\n                                    </> }\r\n                                </> }\r\n                            </Grid>\r\n                        </ExpansionPanelDetails>\r\n                    </ExpansionPanel>\r\n                    {this.createCustomGUIProperties()}\r\n                </>\r\n            );\r\n        };\r\n\r\n        return Properties();\r\n    }\r\n\r\n    protected createCustomGUIProperties(): React.ReactElement {\r\n        return (\r\n            <>\r\n            </>\r\n        );\r\n    }\r\n\r\n}\r\n","import {\r\n    AbstractMesh,\r\n    Color3,\r\n    DirectionalLight,\r\n    IShadowGenerator,\r\n    LightGizmo,\r\n    Matrix,\r\n    Mesh,\r\n    MeshBuilder,\r\n    Scene,\r\n    ShadowGenerator,\r\n    StandardMaterial,\r\n    UniversalCamera,\r\n    Vector3,\r\n    VertexData,\r\n} from \"babylonjs\";\r\n\r\nimport Sample from \"../Sample\";\r\nimport Utils from \"../Utils\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\nimport { ISceneDescription } from \"./GlobalGUI\";\r\nimport SplitBase from \"./SplitBase\";\r\nimport StandardShadowGUI from \"./StandardShadowGUI\";\r\n\r\nexport default class StandardShadow extends SplitBase {\r\n\r\n    public static className: string = \"Standard\";\r\n\r\n    protected sun: DirectionalLight;\r\n    protected _shadowGenerator: IShadowGenerator;\r\n    protected _lightHelperFrustumLines: Array<Mesh>;\r\n    protected _lightGizmo: LightGizmo;\r\n    protected _skybox: Mesh;\r\n\r\n    constructor(scene: Scene, camera: UniversalCamera, parent: Sample, name: string) {\r\n        super(scene, camera, parent, name);\r\n\r\n        this.sun = null as any;\r\n        this._shadowGenerator = null as any;\r\n        this._lightHelperFrustumLines = [];\r\n        this._lightGizmo = null as any;\r\n    }\r\n\r\n    protected getStandardGenerator(): ShadowGenerator {\r\n        return this._shadowGenerator as unknown as ShadowGenerator;\r\n    }\r\n\r\n    public get lightColor(): string {\r\n        return this._sunColor.toHexString();\r\n    }\r\n\r\n    public set lightColor(lc: string) {\r\n        this._sunColor = Color3.FromHexString(lc);\r\n        this.sun.diffuse = this._sunColor;\r\n    }\r\n\r\n    public get lightDirection(): Vector3 {\r\n        return this._sunDir;\r\n    }\r\n\r\n    public set lightDirection(ld: Vector3) {\r\n        this._sunDir = ld;\r\n        this.sun.direction = ld;\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    public get shadowMapSize(): number {\r\n        return this._shadowMapSize;\r\n    }\r\n\r\n    public set shadowMapSize(sms: number) {\r\n        this._shadowMapSize = sms;\r\n        this.createShadowGenerator();\r\n    }\r\n\r\n    public get shadowMapFilter(): number {\r\n        return this._shadowMapFilter;\r\n    }\r\n\r\n    public set shadowMapFilter(smf: number) {\r\n        this.getStandardGenerator().filter = smf;\r\n        this._shadowMapFilter = this.getStandardGenerator().filter;\r\n        this.setShadowMapViewerTexture();\r\n    }\r\n\r\n    public get shadowMapBias(): number {\r\n        return this._shadowMapBias;\r\n    }\r\n\r\n    public set shadowMapBias(smb: number) {\r\n        this._shadowMapBias = smb;\r\n        this.getStandardGenerator().bias = smb;\r\n    }\r\n\r\n    public get shadowMapNormalBias(): number {\r\n        return this._shadowMapNormalBias;\r\n    }\r\n\r\n    public set shadowMapNormalBias(smnb: number) {\r\n        this._shadowMapNormalBias = smnb;\r\n        this.getStandardGenerator().normalBias = smnb;\r\n    }\r\n\r\n    public get shadowMapDarkness(): number {\r\n        return this._shadowMapDarkness;\r\n    }\r\n\r\n    public set shadowMapDarkness(smd: number) {\r\n        this._shadowMapDarkness = smd;\r\n        this.getStandardGenerator().darkness = smd;\r\n    }\r\n\r\n    public get shadowMapQuality(): number {\r\n        return this._shadowMapQuality;\r\n    }\r\n\r\n    public set shadowMapQuality(smq: number) {\r\n        this._shadowMapQuality = smq;\r\n        this.getStandardGenerator().filteringQuality = smq;\r\n    }\r\n\r\n    public get shadowMapDepthScale(): number {\r\n        return this._shadowMapDepthScale;\r\n    }\r\n\r\n    public set shadowMapDepthScale(smds: number) {\r\n        this._shadowMapDepthScale = smds;\r\n        this.getStandardGenerator().depthScale = smds;\r\n    }\r\n\r\n    public get shadowMapBlurScale(): number {\r\n        return this._shadowMapBlurScale;\r\n    }\r\n\r\n    public set shadowMapBlurScale(smbs: number) {\r\n        this._shadowMapBlurScale = smbs;\r\n        this.getStandardGenerator().blurScale = smbs;\r\n    }\r\n\r\n    public get shadowMapUseKernelBlur(): boolean {\r\n        return this._shadowMapUseKernelBlur;\r\n    }\r\n\r\n    public set shadowMapUseKernelBlur(smukb: boolean) {\r\n        this._shadowMapUseKernelBlur = smukb;\r\n        this.getStandardGenerator().useKernelBlur = smukb;\r\n    }\r\n\r\n    public get shadowMapBlurKernel(): number {\r\n        return this._shadowMapBlurKernel;\r\n    }\r\n\r\n    public set shadowMapBlurKernel(smbk: number) {\r\n        this._shadowMapBlurKernel = smbk;\r\n        this.getStandardGenerator().blurKernel = smbk;\r\n    }\r\n\r\n    public get shadowMapBlurBoxOffset(): number {\r\n        return this._shadowMapBlurBoxOffset;\r\n    }\r\n\r\n    public set shadowMapBlurBoxOffset(smbbo: number) {\r\n        this._shadowMapBlurBoxOffset = smbbo;\r\n        this.getStandardGenerator().blurBoxOffset = smbbo;\r\n    }\r\n\r\n    public get shadowMapLightSizeUVRatio(): number {\r\n        return this._shadowMapLightSizeUVRatio;\r\n    }\r\n\r\n    public set shadowMapLightSizeUVRatio(smlsuvr: number) {\r\n        this._shadowMapLightSizeUVRatio = smlsuvr;\r\n        this.getStandardGenerator().contactHardeningLightSizeUVRatio = smlsuvr;\r\n    }\r\n\r\n    public get lightNearPlane(): number {\r\n        return this._lightNearPlane;\r\n    }\r\n\r\n    public set lightNearPlane(lnp: number) {\r\n        this._lightNearPlane = lnp;\r\n        this.sun.shadowMinZ = lnp;\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    public get lightFarPlane(): number {\r\n        return this._lightFarPlane;\r\n    }\r\n\r\n    public set lightFarPlane(lfp: number) {\r\n        this._lightFarPlane = lfp;\r\n        this.sun.shadowMaxZ = lfp;\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    public get showLightHelper(): boolean {\r\n        return this._showLightHelper;\r\n    }\r\n\r\n    public set showLightHelper(slh: boolean) {\r\n        this._showLightHelper = slh;\r\n\r\n        if (this._lightGizmo && !slh) {\r\n            this._lightGizmo.dispose();\r\n            this._lightGizmo = null as any;\r\n        }\r\n\r\n        if (slh) {\r\n            this._lightGizmo = new LightGizmo();\r\n            this._lightGizmo.light = this.sun;\r\n        }\r\n\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    public get autoCalcShadowZBounds(): boolean {\r\n        return this._autoCalcShadowZBounds;\r\n    }\r\n\r\n    public set autoCalcShadowZBounds(acszb: boolean) {\r\n        this._autoCalcShadowZBounds = acszb;\r\n        this.sun.autoCalcShadowZBounds = acszb;\r\n        if (this._autoCalcShadowZBounds) {\r\n            this.sun.setShadowProjectionMatrix(Matrix.Identity(), (this.getStandardGenerator() as any)._viewMatrix, this.getStandardGenerator().getShadowMap()!.renderList!);\r\n        } else {\r\n            this._lightNearPlane = this.sun.shadowMinZ;\r\n            this._lightFarPlane = this.sun.shadowMaxZ;\r\n\r\n            const event = new CustomEvent('gui_set_value', { detail: { type: 'setShadowZBounds' } });\r\n\r\n            window.dispatchEvent(event);\r\n        }\r\n        this.buildLightHelper();\r\n    }\r\n\r\n    protected getLightExtents(): { min: Vector3, max: Vector3 } | null {\r\n        const light = this.sun as any;\r\n\r\n        return {\r\n            \"min\": new Vector3(light._orthoLeft, light._orthoBottom, this.sun.shadowMinZ),\r\n            \"max\": new Vector3(light._orthoRight, light._orthoTop, this.sun.shadowMaxZ),\r\n        };\r\n    }\r\n\r\n    protected getViewMatrix(): Matrix | null {\r\n        return (this.getStandardGenerator() as any)._viewMatrix;\r\n    }\r\n\r\n    protected buildLightHelper(): void {\r\n        this._lightHelperFrustumLines.forEach((mesh) => {\r\n            mesh.dispose();\r\n        });\r\n\r\n        this._lightHelperFrustumLines = [];\r\n\r\n        if (!this._showLightHelper) {\r\n            return;\r\n        }\r\n\r\n        const lightExtents = this.getLightExtents();\r\n        const lightView = this.getViewMatrix();\r\n\r\n        if (!lightExtents || !lightView) {\r\n            return;\r\n        }\r\n\r\n        const invLightView = Matrix.Invert(lightView);\r\n\r\n        const n1 = new Vector3(lightExtents.max.x, lightExtents.max.y, lightExtents.min.z);\r\n        const n2 = new Vector3(lightExtents.max.x, lightExtents.min.y, lightExtents.min.z);\r\n        const n3 = new Vector3(lightExtents.min.x, lightExtents.min.y, lightExtents.min.z);\r\n        const n4 = new Vector3(lightExtents.min.x, lightExtents.max.y, lightExtents.min.z);\r\n\r\n        const near1 = Vector3.TransformCoordinates(n1, invLightView);\r\n        const near2 = Vector3.TransformCoordinates(n2, invLightView);\r\n        const near3 = Vector3.TransformCoordinates(n3, invLightView);\r\n        const near4 = Vector3.TransformCoordinates(n4, invLightView);\r\n\r\n        const f1 = new Vector3(lightExtents.max.x, lightExtents.max.y, lightExtents.max.z);\r\n        const f2 = new Vector3(lightExtents.max.x, lightExtents.min.y, lightExtents.max.z);\r\n        const f3 = new Vector3(lightExtents.min.x, lightExtents.min.y, lightExtents.max.z);\r\n        const f4 = new Vector3(lightExtents.min.x, lightExtents.max.y, lightExtents.max.z);\r\n\r\n        const far1 = Vector3.TransformCoordinates(f1, invLightView);\r\n        const far2 = Vector3.TransformCoordinates(f2, invLightView);\r\n        const far3 = Vector3.TransformCoordinates(f3, invLightView);\r\n        const far4 = Vector3.TransformCoordinates(f4, invLightView);\r\n\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"nearlines\", { points: [near1, near2, near3, near4, near1] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"farlines\",  { points: [far1, far2, far3, far4, far1] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"trlines\", { points: [ near1, far1 ] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"brlines\", { points: [ near2, far2 ] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"tllines\", { points: [ near3, far3 ] }, this.scene));\r\n        this._lightHelperFrustumLines.push(MeshBuilder.CreateLines(\"bllines\", { points: [ near4, far4 ] }, this.scene));\r\n\r\n        const makePlane = (name: string, color: Color3, positions: Array<number>) => {\r\n            let plane = new Mesh(name + \"plane\", this.scene),\r\n                mat = new StandardMaterial(name + \"PlaneMat\", this.scene);\r\n\r\n            plane.material = mat;\r\n\r\n            mat.emissiveColor = color;\r\n            mat.alpha = 0.3;\r\n            mat.backFaceCulling = false;\r\n            mat.disableLighting = true;\r\n\r\n            const indices = [0, 1, 2, 0, 2, 3];\r\n\r\n            const vertexData = new VertexData();\r\n\r\n            vertexData.positions = positions;\r\n            vertexData.indices = indices;\r\n\r\n            vertexData.applyToMesh(plane);\r\n\r\n            this._lightHelperFrustumLines.push(plane);\r\n        };\r\n\r\n        makePlane(\"near\",   new Color3(1, 0, 0),    [near1.x, near1.y, near1.z, near2.x, near2.y, near2.z, near3.x, near3.y, near3.z, near4.x, near4.y, near4.z ]);\r\n        makePlane(\"far\",    new Color3(0.3, 0, 0),  [far1.x, far1.y, far1.z, far2.x, far2.y, far2.z, far3.x, far3.y, far3.z, far4.x, far4.y, far4.z ]);\r\n        makePlane(\"right\",  new Color3(0, 1, 0),    [near1.x, near1.y, near1.z, far1.x, far1.y, far1.z, far2.x, far2.y, far2.z, near2.x, near2.y, near2.z ]);\r\n        makePlane(\"left\",   new Color3(0, 0.3, 0),  [near4.x, near4.y, near4.z, far4.x, far4.y, far4.z, far3.x, far3.y, far3.z, near3.x, near3.y, near3.z ]);\r\n        makePlane(\"top\",    new Color3(0, 0, 1),    [near1.x, near1.y, near1.z, far1.x, far1.y, far1.z, far4.x, far4.y, far4.z, near4.x, near4.y, near4.z ]);\r\n        makePlane(\"bottom\", new Color3(0, 0, 0.3),  [near2.x, near2.y, near2.z, far2.x, far2.y, far2.z, far3.x, far3.y, far3.z, near3.x, near3.y, near3.z ]);\r\n    }\r\n\r\n    public createGUI(): void {\r\n        this.gui = new StandardShadowGUI(this.name, this.scene.getEngine(), this._container, this);\r\n\r\n        this.gui.createGUI();\r\n    }\r\n\r\n    public async initialize(scene: ISceneDescription, ambientColor: Color3, sunDir: Vector3): Promise<ISampleSplit> {\r\n        this.scene.metadata = { \"name\": this.name };\r\n        this._sceneName = scene.dname;\r\n\r\n        this._sunDir = sunDir;\r\n        this._sunColor = scene.sunColor.clone();\r\n\r\n        this.sun = new DirectionalLight(\"sun\", sunDir, this.scene);\r\n        this.sun.intensity = 1;\r\n        this.sun.shadowMinZ = scene.light.nearPlane;\r\n        this.sun.shadowMaxZ = scene.light.farPlane;\r\n        this.sun.diffuse = this._sunColor;\r\n\r\n        (window as any).sun = this.sun;\r\n\r\n        this._skybox = Utils.addSkybox(\"Clouds.dds\", this.scene, 100);\r\n\r\n        await Utils.loadObj(this.scene, scene.path, scene.name);\r\n\r\n        this.scene.activeCamera = this.camera;\r\n\r\n        this.scene.meshes.forEach((m) => {\r\n            if (m.name == 'skyBox' || m.name.indexOf(\"_shadowmap\") >= 0) { return; }\r\n\r\n            if (!m.material) { return; }\r\n\r\n            const mat = m.material as StandardMaterial;\r\n\r\n            mat.diffuseColor = new Color3(1., 1., 1.);\r\n            mat.specularColor = new Color3(0., 0., 0.);\r\n            mat.ambientColor = ambientColor;\r\n            mat.ambientTexture = null;\r\n            mat.backFaceCulling = scene.backfaceCulling;\r\n\r\n            if (!mat.diffuseTexture) {\r\n                mat.ambientColor = new Color3(0, 0, 0);\r\n            }\r\n            //!mat.freeze();\r\n\r\n            m.receiveShadows = true;\r\n\r\n            if (scene.scaling != 1) {\r\n                let matrix = Matrix.Identity();\r\n                matrix.scaleToRef(scene.scaling, matrix);\r\n                matrix.setRowFromFloats(3, 0, 0, 0, 1);\r\n                (m as Mesh).bakeTransformIntoVertices(matrix);\r\n                m.refreshBoundingInfo();\r\n            }\r\n        });\r\n\r\n        this.createShadowGenerator();\r\n\r\n        return this;\r\n    }\r\n\r\n    protected createGenerator(): ShadowGenerator {\r\n        return new ShadowGenerator(this.shadowMapSize, this.sun);\r\n    }\r\n\r\n    protected setShadowMapViewerTexture(): void {\r\n        (this._shadowMapPlane.material as StandardMaterial).diffuseTexture = this._shadowMapFilter !== ShadowGenerator.FILTER_PCF ? (this._shadowGenerator as any).getShadowMap() : null;\r\n    }\r\n\r\n    protected createShadowGenerator(): void {\r\n        if (this._shadowGenerator) {\r\n            this._shadowGenerator.dispose();\r\n            this._shadowGenerator = null as any;\r\n        }\r\n\r\n        const shadowGenerator = this.createGenerator();\r\n\r\n        this._shadowGenerator = shadowGenerator;\r\n\r\n        shadowGenerator.bias = this._shadowMapBias;\r\n        shadowGenerator.normalBias = this._shadowMapNormalBias;\r\n        shadowGenerator.darkness = this._shadowMapDarkness;\r\n        shadowGenerator.filter = this._shadowMapFilter;\r\n        shadowGenerator.filteringQuality = this._shadowMapQuality;\r\n        shadowGenerator.depthScale = this._shadowMapDepthScale;\r\n        shadowGenerator.blurScale = this._shadowMapBlurScale;\r\n        shadowGenerator.useKernelBlur = this._shadowMapUseKernelBlur;\r\n        shadowGenerator.blurKernel = this._shadowMapBlurKernel;\r\n        shadowGenerator.blurBoxOffset = this._shadowMapBlurBoxOffset;\r\n        shadowGenerator.contactHardeningLightSizeUVRatio = this._shadowMapLightSizeUVRatio;\r\n\r\n        this.setShadowMapViewerTexture();\r\n\r\n        (window as any).sg = shadowGenerator;\r\n\r\n        const renderList = shadowGenerator.getShadowMap()?.renderList!;\r\n\r\n        let num = 0, lstm: Array<AbstractMesh> = [];\r\n        this.scene.meshes.forEach((m) => {\r\n            if (m.name == 'skyBox') { return; }\r\n            renderList.push(m);\r\n        });\r\n        lstm.forEach((m) => {\r\n            m.dispose();\r\n        });\r\n    }\r\n\r\n    public render(): void {\r\n        this._skybox.position.copyFrom(this.camera.position);\r\n        this.scene.render();\r\n\r\n        /*if (this._animateLight && this._autoCalcShadowZBounds) {\r\n            this._lightNearPlane = this.sun.shadowMinZ;\r\n            this._lightFarPlane = this.sun.shadowMaxZ;\r\n\r\n            const event = new CustomEvent('gui_set_value', { detail: { type: 'setShadowZBounds' } });\r\n\r\n            window.dispatchEvent(event);\r\n        }*/\r\n    }\r\n\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport SplitBaseGUI from \"./SplitBaseGUI\";\r\n\r\nexport default class StandardShadowGUI extends SplitBaseGUI {\r\n\r\n    protected createCustomGUIProperties(): React.ReactElement {\r\n        const Properties = () => {\r\n            return (\r\n                <>\r\n                </>\r\n            );\r\n        };\r\n\r\n        return Properties();\r\n    }\r\n\r\n}\r\n","import {\r\n    SmartArray,\r\n    Nullable,\r\n    Scene,\r\n    Matrix, Vector3,\r\n    Color4,\r\n    VertexBuffer,\r\n    SubMesh,\r\n    AbstractMesh,\r\n    Mesh,\r\n    Material,\r\n    MaterialHelper,\r\n    Effect,\r\n    Texture,\r\n    RenderTargetTexture,\r\n    Constants,\r\n    Observable,\r\n    EffectFallbacks,\r\n    IShadowGenerator,\r\n    DirectionalLight,\r\n    SceneComponentConstants,\r\n    ShadowGeneratorSceneComponent,\r\n    Observer,\r\n    BoundingInfo,\r\n} from 'babylonjs';\r\n\r\n//import \"../../Shaders/shadowMap.fragment\";\r\n//import \"../../Shaders/shadowMap.vertex\";\r\n//import \"../../Shaders/depthBoxBlur.fragment\";\r\n\r\ninterface ICascade {\r\n    prevBreakDistance: number;\r\n    breakDistance: number;\r\n}\r\n\r\nconst UpDir = Vector3.Up();\r\nconst ZeroVec = Vector3.Zero();\r\n\r\nlet tmpv1 = new Vector3(),\r\n    tmpv2 = new Vector3(),\r\n    matrix = new Matrix();\r\n\r\n/**\r\n * A CSM implementation allowing casting shadows on large scenes.\r\n * Documentation : https://doc.babylonjs.com/babylon101/cascadedShadows\r\n * Based on: https://johanmedestrom.wordpress.com/2016/03/18/opengl-cascaded-shadow-maps/\r\n */\r\nexport class CascadedShadowGenerator implements IShadowGenerator {\r\n\r\n    public get renderList(): Array<AbstractMesh> {\r\n        return [];\r\n    }\r\n\r\n    public get mustRender(): boolean {\r\n        return true;\r\n    }\r\n\r\n    public getShadowMaps(): Array<RenderTargetTexture> {\r\n        return [];\r\n    }\r\n\r\n    public recreate(): void {\r\n        this.recreateShadowMap();\r\n    }\r\n\r\n    private static readonly frustumCornersNDCSpace = [\r\n        new Vector3(-1.0, +1.0, -1.0),\r\n        new Vector3(+1.0, +1.0, -1.0),\r\n        new Vector3(+1.0, -1.0, -1.0),\r\n        new Vector3(-1.0, -1.0, -1.0),\r\n        new Vector3(-1.0, +1.0, +1.0),\r\n        new Vector3(+1.0, +1.0, +1.0),\r\n        new Vector3(+1.0, -1.0, +1.0),\r\n        new Vector3(-1.0, -1.0, +1.0),\r\n    ];\r\n\r\n    /**\r\n     * Defines the default number of cascades used by the CSM.\r\n     */\r\n    public static readonly DEFAULT_CASCADES_COUNT = 4;\r\n    /**\r\n     * Defines the minimum number of cascades used by the CSM.\r\n     */\r\n    public static readonly MIN_CASCADES_COUNT = 2;\r\n    /**\r\n     * Defines the maximum number of cascades used by the CSM.\r\n     */\r\n    public static readonly MAX_CASCADES_COUNT = 4;\r\n\r\n    /**\r\n     * Shadow generator mode None: no filtering applied.\r\n     */\r\n    public static readonly FILTER_NONE = 0;\r\n    /**\r\n     * Shadow generator mode PCF: Percentage Closer Filtering\r\n     * benefits from Webgl 2 shadow samplers. Fallback to Poisson Sampling in Webgl 1\r\n     * (https://developer.nvidia.com/gpugems/GPUGems/gpugems_ch11.html)\r\n     */\r\n    public static readonly FILTER_PCF = 6;\r\n    /**\r\n     * Shadow generator mode PCSS: Percentage Closering Soft Shadow.\r\n     * benefits from Webgl 2 shadow samplers. Fallback to Poisson Sampling in Webgl 1\r\n     * Contact Hardening\r\n     */\r\n    public static readonly FILTER_PCSS = 7;\r\n\r\n    /**\r\n     * Reserved for PCF and PCSS\r\n     * Highest Quality.\r\n     *\r\n     * Execute PCF on a 5*5 kernel improving a lot the shadow aliasing artifacts.\r\n     *\r\n     * Execute PCSS with 32 taps blocker search and 64 taps PCF.\r\n     */\r\n    public static readonly QUALITY_HIGH = 0;\r\n    /**\r\n     * Reserved for PCF and PCSS\r\n     * Good tradeoff for quality/perf cross devices\r\n     *\r\n     * Execute PCF on a 3*3 kernel.\r\n     *\r\n     * Execute PCSS with 16 taps blocker search and 32 taps PCF.\r\n     */\r\n    public static readonly QUALITY_MEDIUM = 1;\r\n    /**\r\n     * Reserved for PCF and PCSS\r\n     * The lowest quality but the fastest.\r\n     *\r\n     * Execute PCF on a 1*1 kernel.\r\n     *\r\n     * Execute PCSS with 16 taps blocker search and 16 taps PCF.\r\n     */\r\n    public static readonly QUALITY_LOW = 2;\r\n\r\n    private static readonly _CLEARONE = new Color4(1.0, 1.0, 1.0, 1.0);\r\n\r\n    /**\r\n     * Observable triggered before the shadow is rendered. Can be used to update internal effect state\r\n     */\r\n    public onBeforeShadowMapRenderObservable = new Observable<Effect>();\r\n\r\n    /**\r\n     * Observable triggered after the shadow is rendered. Can be used to restore internal effect state\r\n     */\r\n    public onAfterShadowMapRenderObservable = new Observable<Effect>();\r\n\r\n    /**\r\n     * Observable triggered before a mesh is rendered in the shadow map.\r\n     * Can be used to update internal effect state (that you can get from the onBeforeShadowMapRenderObservable)\r\n     */\r\n    public onBeforeShadowMapRenderMeshObservable = new Observable<Mesh>();\r\n\r\n    /**\r\n     * Observable triggered after a mesh is rendered in the shadow map.\r\n     * Can be used to update internal effect state (that you can get from the onAfterShadowMapRenderObservable)\r\n     */\r\n    public onAfterShadowMapRenderMeshObservable = new Observable<Mesh>();\r\n\r\n    private _bias = 0.00005;\r\n    /**\r\n     * Gets the bias: offset applied on the depth preventing acnea (in light direction).\r\n     */\r\n    public get bias(): number {\r\n        return this._bias;\r\n    }\r\n    /**\r\n     * Sets the bias: offset applied on the depth preventing acnea (in light direction).\r\n     */\r\n    public set bias(bias: number) {\r\n        this._bias = bias;\r\n    }\r\n\r\n    private _normalBias = 0;\r\n    /**\r\n     * Gets the normalBias: offset applied on the depth preventing acnea (along side the normal direction and proportinal to the light/normal angle).\r\n     */\r\n    public get normalBias(): number {\r\n        return this._normalBias;\r\n    }\r\n    /**\r\n     * Sets the normalBias: offset applied on the depth preventing acnea (along side the normal direction and proportinal to the light/normal angle).\r\n     */\r\n    public set normalBias(normalBias: number) {\r\n        this._normalBias = normalBias;\r\n    }\r\n\r\n    private _filter = CascadedShadowGenerator.FILTER_PCF;\r\n    /**\r\n     * Gets the current mode of the shadow generator (normal, PCF, PCSS...).\r\n     * The returned value is a number equal to one of the available mode defined in ShadowMap.FILTER_x like _FILTER_NONE\r\n     */\r\n    public get filter(): number {\r\n        return this._filter;\r\n    }\r\n    /**\r\n     * Sets the current mode of the shadow generator (normal, PCF, PCSS...).\r\n     * The returned value is a number equal to one of the available mode defined in ShadowMap.FILTER_x like _FILTER_NONE\r\n     */\r\n    public set filter(value: number) {\r\n        if (this._filter === value) {\r\n            return;\r\n        }\r\n\r\n        this._filter = value;\r\n        this._applyFilterValues();\r\n        this._light._markMeshesAsLightDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets if the current filter is set to \"PCF\" (percentage closer filtering).\r\n     */\r\n    public get usePercentageCloserFiltering(): boolean {\r\n        return this.filter === CascadedShadowGenerator.FILTER_PCF;\r\n    }\r\n    /**\r\n     * Sets the current filter to \"PCF\" (percentage closer filtering).\r\n     */\r\n    public set usePercentageCloserFiltering(value: boolean) {\r\n        if (!value && this.filter !== CascadedShadowGenerator.FILTER_PCF) {\r\n            return;\r\n        }\r\n        this.filter = (value ? CascadedShadowGenerator.FILTER_PCF : CascadedShadowGenerator.FILTER_NONE);\r\n    }\r\n\r\n    private _filteringQuality = CascadedShadowGenerator.QUALITY_HIGH;\r\n    /**\r\n     * Gets the PCF or PCSS Quality.\r\n     * Only valid if usePercentageCloserFiltering or usePercentageCloserFiltering is true.\r\n     */\r\n    public get filteringQuality(): number {\r\n        return this._filteringQuality;\r\n    }\r\n    /**\r\n     * Sets the PCF or PCSS Quality.\r\n     * Only valid if usePercentageCloserFiltering or usePercentageCloserFiltering is true.\r\n     */\r\n    public set filteringQuality(filteringQuality: number) {\r\n        if (this._filteringQuality === filteringQuality) {\r\n            return;\r\n        }\r\n\r\n        this._filteringQuality = filteringQuality;\r\n\r\n        this._applyFilterValues();\r\n        this._light._markMeshesAsLightDirty();\r\n    }\r\n\r\n    /**\r\n     * Gets if the current filter is set to \"PCSS\" (contact hardening).\r\n     */\r\n    public get useContactHardeningShadow(): boolean {\r\n        return this.filter === CascadedShadowGenerator.FILTER_PCSS;\r\n    }\r\n    /**\r\n     * Sets the current filter to \"PCSS\" (contact hardening).\r\n     */\r\n    public set useContactHardeningShadow(value: boolean) {\r\n        if (!value && this.filter !== CascadedShadowGenerator.FILTER_PCSS) {\r\n            return;\r\n        }\r\n        this.filter = (value ? CascadedShadowGenerator.FILTER_PCSS : CascadedShadowGenerator.FILTER_NONE);\r\n    }\r\n\r\n    private _contactHardeningLightSizeUVRatio = 0.1;\r\n    /**\r\n     * Gets the Light Size (in shadow map uv unit) used in PCSS to determine the blocker search area and the penumbra size.\r\n     * Using a ratio helps keeping shape stability independently of the map size.\r\n     *\r\n     * It does not account for the light projection as it was having too much\r\n     * instability during the light setup or during light position changes.\r\n     *\r\n     * Only valid if useContactHardeningShadow is true.\r\n     */\r\n    public get contactHardeningLightSizeUVRatio(): number {\r\n        return this._contactHardeningLightSizeUVRatio;\r\n    }\r\n    /**\r\n     * Sets the Light Size (in shadow map uv unit) used in PCSS to determine the blocker search area and the penumbra size.\r\n     * Using a ratio helps keeping shape stability independently of the map size.\r\n     *\r\n     * It does not account for the light projection as it was having too much\r\n     * instability during the light setup or during light position changes.\r\n     *\r\n     * Only valid if useContactHardeningShadow is true.\r\n     */\r\n    public set contactHardeningLightSizeUVRatio(contactHardeningLightSizeUVRatio: number) {\r\n        this._contactHardeningLightSizeUVRatio = contactHardeningLightSizeUVRatio;\r\n    }\r\n\r\n    private _darkness = 0;\r\n\r\n    /** Gets or sets the actual darkness of a shadow */\r\n    public get darkness() {\r\n        return this._darkness;\r\n    }\r\n\r\n    public set darkness(value: number) {\r\n        this.setDarkness(value);\r\n    }\r\n\r\n    /**\r\n     * Returns the darkness value (float). This can only decrease the actual darkness of a shadow.\r\n     * 0 means strongest and 1 would means no shadow.\r\n     * @returns the darkness.\r\n     */\r\n    public getDarkness(): number {\r\n        return this._darkness;\r\n    }\r\n    /**\r\n     * Sets the darkness value (float). This can only decrease the actual darkness of a shadow.\r\n     * @param darkness The darkness value 0 means strongest and 1 would means no shadow.\r\n     * @returns the shadow generator allowing fluent coding.\r\n     */\r\n    public setDarkness(darkness: number): CascadedShadowGenerator {\r\n        if (darkness >= 1.0) {\r\n            this._darkness = 1.0;\r\n        }\r\n        else if (darkness <= 0.0) {\r\n            this._darkness = 0.0;\r\n        }\r\n        else {\r\n            this._darkness = darkness;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the actual darkness of the soft shadows while using PCSS filtering (value between 0. and 1.)\r\n     */\r\n    public penumbraDarkness: number = 1.0;\r\n\r\n    private _transparencyShadow = false;\r\n\r\n    /** Gets or sets the ability to have transparent shadow  */\r\n    public get transparencyShadow() {\r\n        return this._transparencyShadow;\r\n    }\r\n\r\n    public set transparencyShadow(value: boolean) {\r\n        this.setTransparencyShadow(value);\r\n    }\r\n\r\n    /**\r\n     * Sets the ability to have transparent shadow (boolean).\r\n     * @param transparent True if transparent else False\r\n     * @returns the shadow generator allowing fluent coding\r\n     */\r\n    public setTransparencyShadow(transparent: boolean): CascadedShadowGenerator {\r\n        this._transparencyShadow = transparent;\r\n        return this;\r\n    }\r\n\r\n    private _numCascades = CascadedShadowGenerator.DEFAULT_CASCADES_COUNT;\r\n\r\n    /**\r\n     * Gets or set the number of cascades used by the CSM.\r\n     */\r\n    public get numCascades(): number {\r\n        return this._numCascades;\r\n    }\r\n\r\n    public set numCascades(value: number) {\r\n        value = Math.min(Math.max(value, CascadedShadowGenerator.MIN_CASCADES_COUNT), CascadedShadowGenerator.MAX_CASCADES_COUNT);\r\n        if (value === this._numCascades) {\r\n            return;\r\n        }\r\n\r\n        this._numCascades = value;\r\n        this.recreateShadowMap();\r\n    }\r\n\r\n    /**\r\n     * Sets this to true if you want that the edges of the shadows don't \"swimm\" / \"shimmer\" when rotating the camera.\r\n     * The trade off is that you loose some precision in the shadow rendering when enabling this setting.\r\n     */\r\n    public stabilizeCascades: boolean = false;\r\n\r\n    private _shadowMap: Nullable<RenderTargetTexture>;\r\n    /**\r\n     * Gets the main RTT containing the shadow map (usually storing depth from the light point of view).\r\n     * @returns The render target texture if present otherwise, null\r\n     */\r\n    public getShadowMap(): Nullable<RenderTargetTexture> {\r\n        return this._shadowMap;\r\n    }\r\n\r\n    protected _freezeShadowCastersBoundingInfo: boolean = false;\r\n    private _freezeShadowCastersBoundingInfoObservable: Nullable<Observer<Scene>> = null;\r\n\r\n    /**\r\n     * Enables or disables the shadow casters bounding info computation.\r\n     * If your shadow casters don't move, you can disable this feature.\r\n     * If it is enabled, the bounding box computation is done every frame.\r\n     */\r\n    public get freezeShadowCastersBoundingInfo(): boolean {\r\n        return this._freezeShadowCastersBoundingInfo;\r\n    }\r\n\r\n    public set freezeShadowCastersBoundingInfo(freeze: boolean) {\r\n        if (this._freezeShadowCastersBoundingInfoObservable && freeze) {\r\n            this._scene.onBeforeRenderObservable.remove(this._freezeShadowCastersBoundingInfoObservable);\r\n            this._freezeShadowCastersBoundingInfoObservable = null;\r\n        }\r\n\r\n        if (!this._freezeShadowCastersBoundingInfoObservable && !freeze) {\r\n            this._freezeShadowCastersBoundingInfoObservable = this._scene.onBeforeRenderObservable.add(this._computeShadowCastersBoundingInfo.bind(this));\r\n        }\r\n\r\n        this._freezeShadowCastersBoundingInfo = freeze;\r\n\r\n        if (freeze) {\r\n            this._computeShadowCastersBoundingInfo();\r\n        }\r\n    }\r\n\r\n    private _scbiMin = new Vector3(0, 0, 0);\r\n    private _scbiMax = new Vector3(0, 0, 0);\r\n\r\n    protected _computeShadowCastersBoundingInfo(): void {\r\n        this._scbiMin.copyFromFloats(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\r\n        this._scbiMax.copyFromFloats(Number.MIN_VALUE, Number.MIN_VALUE, Number.MIN_VALUE);\r\n\r\n        if (this._shadowMap && this._shadowMap.renderList) {\r\n            const renderList = this._shadowMap.renderList;\r\n            for (let meshIndex = 0; meshIndex < renderList.length; meshIndex++) {\r\n                const mesh = renderList[meshIndex];\r\n\r\n                if (!mesh) {\r\n                    continue;\r\n                }\r\n\r\n                const boundingInfo = mesh.getBoundingInfo(),\r\n                      boundingBox = boundingInfo.boundingBox;\r\n\r\n                this._scbiMin.minimizeInPlace(boundingBox.minimumWorld);\r\n                this._scbiMax.maximizeInPlace(boundingBox.maximumWorld);\r\n            }\r\n        }\r\n\r\n        this._shadowCastersBoundingInfo.reConstruct(this._scbiMin, this._scbiMax);\r\n    }\r\n\r\n    protected _shadowCastersBoundingInfo: BoundingInfo;\r\n\r\n    /**\r\n     * Gets or sets the shadow casters bounding info.\r\n     * If you provide your own shadow casters bounding info, first enable freezeShadowCastersBoundingInfo\r\n     * so that the system won't overwrite the bounds you provide\r\n     */\r\n    public get shadowCastersBoundingInfo(): BoundingInfo {\r\n        return this._shadowCastersBoundingInfo;\r\n    }\r\n\r\n    public set shadowCastersBoundingInfo(boundingInfo: BoundingInfo) {\r\n        this._shadowCastersBoundingInfo = boundingInfo;\r\n    }\r\n\r\n    protected _breaksAreDirty: boolean = true;\r\n\r\n    protected _minDistance: number = 0;\r\n    protected _maxDistance: number = 1;\r\n\r\n    /**\r\n     * Sets the minimal and maximal distances to use when computing the cascade breaks.\r\n     * \r\n     * The values of min / max are typically the zmin and zmax values of your scene, for a given frame.\r\n     * If you don't know these values, simply leave them to their defaults and don't call this function.\r\n     * @param min minimal distance for the breaks (default to 0.)\r\n     * @param max maximal distance for the breaks (default to 1.)\r\n     */\r\n    public setMinMaxDistance(min: number, max: number): void {\r\n        if (this._minDistance === min && this._maxDistance === max) {\r\n            return;\r\n        }\r\n\r\n        if (min > max) {\r\n            min = 0;\r\n            max = 1;\r\n        }\r\n\r\n        if (min < 0) {\r\n            min = 0;\r\n        }\r\n\r\n        if (max > 1) {\r\n            max = 1;\r\n        }\r\n\r\n        this._minDistance = min;\r\n        this._maxDistance = max;\r\n        this._breaksAreDirty = true;\r\n    }\r\n\r\n    /**\r\n     * Gets the class name of that object\r\n     * @returns \"ShadowGenerator\"\r\n     */\r\n    public getClassName(): string {\r\n        return \"CascadedShadowGenerator\";\r\n    }\r\n\r\n    /**\r\n     * Helper function to add a mesh and its descendants to the list of shadow casters.\r\n     * @param mesh Mesh to add\r\n     * @param includeDescendants boolean indicating if the descendants should be added. Default to true\r\n     * @returns the Shadow Generator itself\r\n     */\r\n    public addShadowCaster(mesh: AbstractMesh, includeDescendants = true): CascadedShadowGenerator {\r\n        if (!this._shadowMap) {\r\n            return this;\r\n        }\r\n\r\n        if (!this._shadowMap.renderList) {\r\n            this._shadowMap.renderList = [];\r\n        }\r\n\r\n        this._shadowMap.renderList.push(mesh);\r\n\r\n        if (includeDescendants) {\r\n            this._shadowMap.renderList.push(...mesh.getChildMeshes());\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Helper function to remove a mesh and its descendants from the list of shadow casters\r\n     * @param mesh Mesh to remove\r\n     * @param includeDescendants boolean indicating if the descendants should be removed. Default to true\r\n     * @returns the Shadow Generator itself\r\n     */\r\n    public removeShadowCaster(mesh: AbstractMesh, includeDescendants = true): CascadedShadowGenerator {\r\n        if (!this._shadowMap || !this._shadowMap.renderList) {\r\n            return this;\r\n        }\r\n\r\n        var index = this._shadowMap.renderList.indexOf(mesh);\r\n\r\n        if (index !== -1) {\r\n            this._shadowMap.renderList.splice(index, 1);\r\n        }\r\n\r\n        if (includeDescendants) {\r\n            for (var child of mesh.getChildren()) {\r\n                this.removeShadowCaster(<any>child);\r\n            }\r\n        }\r\n\r\n        return this;\r\n    }\r\n\r\n    /**\r\n     * Controls the extent to which the shadows fade out at the edge of the frustum\r\n     */\r\n    public frustumEdgeFalloff = 0;\r\n\r\n    private _light: DirectionalLight;\r\n    /**\r\n     * Returns the associated light object.\r\n     * @returns the light generating the shadow\r\n     */\r\n    public getLight(): DirectionalLight {\r\n        return this._light;\r\n    }\r\n\r\n    /**\r\n     * If true the shadow map is generated by rendering the back face of the mesh instead of the front face.\r\n     * This can help with self-shadowing as the geometry making up the back of objects is slightly offset.\r\n     * It might on the other hand introduce peter panning.\r\n     */\r\n    public forceBackFacesOnly = false;\r\n\r\n    private _cascadeMinExtents: Array<Vector3>;\r\n    private _cascadeMaxExtents: Array<Vector3>;\r\n\r\n    /**\r\n     * Gets a cascade minimum extents\r\n     * @param cascadeIndex index of the cascade\r\n     */\r\n    public getCascadeMinExtents(cascadeIndex: number): Nullable<Vector3> {\r\n        return cascadeIndex >= 0 && cascadeIndex < this._numCascades ? this._cascadeMinExtents[cascadeIndex] : null;\r\n    }\r\n\r\n    /**\r\n     * Gets a cascade maximum extents\r\n     * @param cascadeIndex index of the cascade\r\n     */\r\n    public getCascadeMaxExtents(cascadeIndex: number): Nullable<Vector3> {\r\n        return cascadeIndex >= 0 && cascadeIndex < this._numCascades ? this._cascadeMaxExtents[cascadeIndex] : null;\r\n    }\r\n\r\n    private _scene: Scene;\r\n    private _lightDirection = Vector3.Zero();\r\n\r\n    private _effect: Effect;\r\n\r\n    private _cascades: Array<ICascade>;\r\n    private _cachedPosition: Vector3 = new Vector3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\r\n    private _cachedDirection: Vector3 = new Vector3(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\r\n    private _cachedDefines: string;\r\n    private _currentRenderID: Array<number>;\r\n    private _mapSize: number;\r\n    private _currentLayer = 0;\r\n    private _textureType: number;\r\n    private _defaultTextureMatrix = Matrix.Identity();\r\n    private _storedUniqueId: Nullable<number>;\r\n\r\n    private _viewSpaceFrustumsZ: Array<number>;\r\n    private _viewMatrices: Array<Matrix>;\r\n    private _projectionMatrices: Array<Matrix>;\r\n    private _transformMatrices: Array<Matrix>;\r\n    private _transformMatricesAsArray: Float32Array;\r\n    private _frustumLengths: Array<number>;\r\n    private _lightSizeUVCorrection: Array<number>;\r\n    private _depthCorrection: Array<number>;\r\n    private _frustumCornersWorldSpace: Array<Array<Vector3>>;\r\n    private _frustumCenter: Array<Vector3>;\r\n    private _shadowCameraPos: Array<Vector3>;\r\n\r\n    private _shadowMaxZ: number;\r\n    /**\r\n     * Gets the shadow max z distance. It's the limit beyond which shadows are not displayed.\r\n     * It defaults to camera.maxZ\r\n     */\r\n    public get shadowMaxZ(): number {\r\n        if (!this._scene || !this._scene.activeCamera) {\r\n            return 0;\r\n        }\r\n        return this._shadowMaxZ;\r\n    }\r\n    /**\r\n     * Sets the shadow max z distance.\r\n     */\r\n    public set shadowMaxZ(value: number) {\r\n        if (!this._scene || !this._scene.activeCamera) {\r\n            this._shadowMaxZ = value;\r\n            return;\r\n        }\r\n        if (this._shadowMaxZ === value || value < this._scene.activeCamera.minZ || value > this._scene.activeCamera.maxZ) {\r\n            return;\r\n        }\r\n        this._shadowMaxZ = value;\r\n        this._breaksAreDirty = true;\r\n    }\r\n\r\n    protected _debug = false;\r\n\r\n    /**\r\n     * Gets or sets the debug flag.\r\n     * When enabled, the cascades are materialized by different colors on the screen.\r\n     */\r\n    public get debug(): boolean {\r\n        return this._debug;\r\n    }\r\n\r\n    public set debug(dbg: boolean) {\r\n        this._debug = dbg;\r\n        this._light._markMeshesAsLightDirty();\r\n    }\r\n\r\n    private _depthClamp = true;\r\n\r\n    /**\r\n     * Gets or sets the depth clamping value.\r\n     * \r\n     * When enabled, it improves the shadow quality because the near z plane of the light frustum don't need to be adjusted\r\n     * to account for the shadow casters far away.\r\n     * \r\n     * Note that this property is incompatible with PCSS filtering, so it won't be used in that case.\r\n     */\r\n    public get depthClamp(): boolean {\r\n        return this._depthClamp;\r\n    }\r\n    \r\n    public set depthClamp(value: boolean) {\r\n        this._depthClamp = value;\r\n    }\r\n\r\n    /**\r\n     * Gets or sets the percentage of blending between two cascades (value between 0. and 1.).\r\n     * It defaults to 0.1 (10% blending).\r\n     */\r\n    public cascadeBlendPercentage: number = 0.1;\r\n\r\n    private _lambda = 0.5;\r\n\r\n    /**\r\n     * Gets or set the lambda parameter.\r\n     * This parameter is used to split the camera frustum and create the cascades.\r\n     * It's a value between 0. and 1.: If 0, the split is a uniform split of the frustum, if 1 it is a logarithmic split.\r\n     * For all values in-between, it's a linear combination of the uniform and logarithm split algorithm.\r\n     */\r\n    public get lambda(): number {\r\n        return this._lambda;\r\n    }\r\n\r\n    public set lambda(value: number) {\r\n        const lambda = Math.min(Math.max(value, 0), 1);\r\n        if (this._lambda == lambda) {\r\n            return;\r\n        }\r\n        this._lambda = lambda;\r\n        this._breaksAreDirty = true;\r\n    }\r\n\r\n    /**\r\n     * Gets the view matrix corresponding to a given cascade\r\n     * @param cascadeNum cascade to retrieve the view matrix from\r\n     */\r\n    public getCascadeViewMatrix(cascadeNum: number): Nullable<Matrix> {\r\n        return cascadeNum >= 0 && cascadeNum < this._numCascades ? this._viewMatrices[cascadeNum] : null;\r\n    }\r\n\r\n    /**\r\n     * Create the cascade breaks according to the lambda, shadowMaxZ and min/max distance properties, as well as the camera near and far planes.\r\n     * This function is automatically called when updating lambda, shadowMaxZ and min/max distances, however you should call it yourself if\r\n     * you change the camera near/far planes!\r\n     */\r\n    public splitFrustum(): void {\r\n        this._breaksAreDirty = true;\r\n    }\r\n\r\n    private _splitFrustum(): void {\r\n        let camera = this._scene.activeCamera;\r\n        if (!camera) {\r\n            return;\r\n        }\r\n\r\n        const near = camera.minZ,\r\n              far = camera.maxZ,\r\n              cameraRange = far - near,\r\n              minDistance = this._minDistance,\r\n              maxDistance = this._shadowMaxZ < far && this._shadowMaxZ >= near ? Math.min((this._shadowMaxZ - near) / (far - near), this._maxDistance) : this._maxDistance;\r\n\r\n        const minZ = near + minDistance * cameraRange,\r\n              maxZ = near + maxDistance * cameraRange;\r\n\r\n        const range = maxZ - minZ,\r\n              ratio = maxZ / minZ;\r\n\r\n        for (let cascadeIndex = 0; cascadeIndex < this._cascades.length; ++cascadeIndex) {\r\n            const p = (cascadeIndex + 1) / this._numCascades,\r\n                  log = minZ * (ratio ** p),\r\n                  uniform = minZ + range * p;\r\n\r\n            const d = this._lambda * (log - uniform) + uniform;\r\n\r\n            this._cascades[cascadeIndex].prevBreakDistance = cascadeIndex === 0 ? minDistance : this._cascades[cascadeIndex - 1].breakDistance;\r\n            this._cascades[cascadeIndex].breakDistance = (d - near) / cameraRange;\r\n\r\n            this._viewSpaceFrustumsZ[cascadeIndex] = near + this._cascades[cascadeIndex].breakDistance * cameraRange;\r\n            this._frustumLengths[cascadeIndex] = (this._cascades[cascadeIndex].breakDistance - this._cascades[cascadeIndex].prevBreakDistance) * cameraRange;\r\n        }\r\n\r\n        this._breaksAreDirty = false;\r\n    }\r\n\r\n    /**\r\n     * Gets the CSM transformation matrix used to project the meshes into the map from the light point of view.\r\n     * (eq to view projection * shadow projection matrices)\r\n\t * @param cascadeIndex index number of the cascaded shadow map\r\n     * @returns The transform matrix used to create the CSM shadow map\r\n     */\r\n    public getCSMTransformMatrix(cascadeIndex: number): Matrix {\r\n        var scene = this._scene;\r\n        if (this._currentRenderID[cascadeIndex] === scene.getRenderId()) {\r\n            return this._transformMatrices[cascadeIndex];\r\n        }\r\n\r\n        let camera = scene.activeCamera;\r\n        if (!camera) {\r\n            return this._transformMatrices[cascadeIndex];\r\n        }\r\n\r\n        this._currentRenderID[cascadeIndex] = scene.getRenderId();\r\n\r\n        var lightPosition = this._light.position;\r\n        if (this._light.computeTransformedInformation()) {\r\n            lightPosition = this._light.transformedPosition;\r\n        }\r\n\r\n        Vector3.NormalizeToRef(this._light.getShadowDirection(0), this._lightDirection);\r\n        if (Math.abs(Vector3.Dot(this._lightDirection, Vector3.Up())) === 1.0) {\r\n            this._lightDirection.z = 0.0000000000001; // Required to avoid perfectly perpendicular light\r\n        }\r\n\r\n        if (this._light.needProjectionMatrixCompute() || !this._cachedPosition || !this._cachedDirection || !lightPosition.equals(this._cachedPosition) || !this._lightDirection.equals(this._cachedDirection)) {\r\n            this._cachedPosition.copyFrom(lightPosition);\r\n            this._cachedDirection.copyFrom(this._lightDirection);\r\n\r\n            this._computeFrustumInWorldSpace(cascadeIndex);\r\n            this._computeCascadeFrustum(cascadeIndex);\r\n    \r\n            this._cascadeMaxExtents[cascadeIndex].subtractToRef(this._cascadeMinExtents[cascadeIndex], tmpv1); // tmpv1 = cascadeExtents\r\n\r\n            // Get position of the shadow camera\r\n            this._frustumCenter[cascadeIndex].addToRef(this._lightDirection.scale(this._cascadeMinExtents[cascadeIndex].z), this._shadowCameraPos[cascadeIndex]);\r\n    \r\n            // Come up with a new orthographic camera for the shadow caster\r\n            Matrix.LookAtLHToRef(this._shadowCameraPos[cascadeIndex], this._frustumCenter[cascadeIndex], UpDir, this._viewMatrices[cascadeIndex]);\r\n    \r\n            let minZ = 0, maxZ = tmpv1.z;\r\n    \r\n            // Try to tighten minZ and maxZ based on the bounding box of the shadow casters\r\n            const boundingInfo = this._shadowCastersBoundingInfo;\r\n    \r\n            boundingInfo.update(this._viewMatrices[cascadeIndex]);\r\n    \r\n            maxZ = Math.min(maxZ, boundingInfo.boundingBox.maximumWorld.z);\r\n    \r\n            if (!this._depthClamp || this.filter === CascadedShadowGenerator.FILTER_PCSS) {\r\n                // If we don't use depth clamping, we must set minZ so that all shadow casters are in the light frustum\r\n                minZ = Math.min(minZ, boundingInfo.boundingBox.minimumWorld.z);\r\n            } else {\r\n                // If using depth clamping, we can adjust minZ to reduce the [minZ, maxZ] range (and get some additional precision in the shadow map)\r\n                minZ = Math.max(minZ, boundingInfo.boundingBox.minimumWorld.z);\r\n            }\r\n    \r\n            if (this._scene.useRightHandedSystem) {\r\n                Matrix.OrthoOffCenterRHToRef(this._cascadeMinExtents[cascadeIndex].x, this._cascadeMaxExtents[cascadeIndex].x, this._cascadeMinExtents[cascadeIndex].y, this._cascadeMaxExtents[cascadeIndex].y, minZ, maxZ, this._projectionMatrices[cascadeIndex]);\r\n            } else {\r\n                Matrix.OrthoOffCenterLHToRef(this._cascadeMinExtents[cascadeIndex].x, this._cascadeMaxExtents[cascadeIndex].x, this._cascadeMinExtents[cascadeIndex].y, this._cascadeMaxExtents[cascadeIndex].y, minZ, maxZ, this._projectionMatrices[cascadeIndex]);\r\n            }\r\n    \r\n            this._cascadeMinExtents[cascadeIndex].z = minZ;\r\n            this._cascadeMaxExtents[cascadeIndex].z = maxZ;\r\n    \r\n            this._viewMatrices[cascadeIndex].multiplyToRef(this._projectionMatrices[cascadeIndex], this._transformMatrices[cascadeIndex]);\r\n    \r\n            // Create the rounding matrix, by projecting the world-space origin and determining\r\n            // the fractional offset in texel space\r\n            Vector3.TransformCoordinatesToRef(ZeroVec, this._transformMatrices[cascadeIndex], tmpv1); // tmpv1 = shadowOrigin\r\n            tmpv1.scaleInPlace(this._mapSize / 2);\r\n\r\n            tmpv2.copyFromFloats(Math.round(tmpv1.x), Math.round(tmpv1.y), Math.round(tmpv1.z)); // tmpv2 = roundedOrigin\r\n            tmpv2.subtractInPlace(tmpv1).scaleInPlace(2 / this._mapSize); // tmpv2 = roundOffset\r\n\r\n            Matrix.TranslationToRef(tmpv2.x, tmpv2.y, 0.0, matrix);\r\n\r\n            this._projectionMatrices[cascadeIndex].multiplyToRef(matrix, this._projectionMatrices[cascadeIndex]);\r\n            this._viewMatrices[cascadeIndex].multiplyToRef(this._projectionMatrices[cascadeIndex], this._transformMatrices[cascadeIndex]);\r\n        }\r\n\r\n        this._transformMatrices[cascadeIndex].copyToArray(this._transformMatricesAsArray, cascadeIndex * 16);\r\n\r\n        return this._transformMatrices[cascadeIndex];\r\n    }\r\n\r\n    // Get the 8 points of the view frustum in world space\r\n    private _computeFrustumInWorldSpace(cascadeIndex: number): void {\r\n        if (!this._scene.activeCamera) {\r\n            return;\r\n        }\r\n\r\n        const prevSplitDist = this._cascades[cascadeIndex].prevBreakDistance,\r\n              splitDist = this._cascades[cascadeIndex].breakDistance;\r\n\r\n        this._scene.activeCamera.getViewMatrix(); // make sure the transformation matrix we get when calling 'getTransformationMatrix()' is calculated with an up to date view matrix\r\n\r\n        const invViewProj = Matrix.Invert(this._scene.activeCamera.getTransformationMatrix());\r\n        for (let cornerIndex = 0; cornerIndex < CascadedShadowGenerator.frustumCornersNDCSpace.length; ++cornerIndex) {\r\n            Vector3.TransformCoordinatesToRef(CascadedShadowGenerator.frustumCornersNDCSpace[cornerIndex], invViewProj, this._frustumCornersWorldSpace[cascadeIndex][cornerIndex]);\r\n        }\r\n\r\n        // Get the corners of the current cascade slice of the view frustum\r\n        for (let cornerIndex = 0; cornerIndex < CascadedShadowGenerator.frustumCornersNDCSpace.length / 2; ++cornerIndex) {\r\n            tmpv1.copyFrom(this._frustumCornersWorldSpace[cascadeIndex][cornerIndex + 4]).subtractInPlace(this._frustumCornersWorldSpace[cascadeIndex][cornerIndex]);\r\n            tmpv2.copyFrom(tmpv1).scaleInPlace(prevSplitDist); // near corner ray\r\n            tmpv1.scaleInPlace(splitDist); // far corner ray\r\n\r\n            tmpv1.addInPlace(this._frustumCornersWorldSpace[cascadeIndex][cornerIndex]);\r\n\r\n            this._frustumCornersWorldSpace[cascadeIndex][cornerIndex + 4].copyFrom(tmpv1);\r\n            this._frustumCornersWorldSpace[cascadeIndex][cornerIndex].addInPlace(tmpv2);\r\n        }\r\n    }\r\n\r\n    private _computeCascadeFrustum(cascadeIndex: number): void {\r\n        this._cascadeMinExtents[cascadeIndex].copyFromFloats(Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE);\r\n        this._cascadeMaxExtents[cascadeIndex].copyFromFloats(Number.MIN_VALUE, Number.MIN_VALUE, Number.MIN_VALUE);\r\n        this._frustumCenter[cascadeIndex].copyFromFloats(0, 0, 0);\r\n\r\n        const camera = this._scene.activeCamera;\r\n\r\n        if (!camera) {\r\n            return;\r\n        }\r\n\r\n        // Calculate the centroid of the view frustum slice\r\n        for (let cornerIndex = 0; cornerIndex < this._frustumCornersWorldSpace[cascadeIndex].length; ++cornerIndex) {\r\n            this._frustumCenter[cascadeIndex].addInPlace(this._frustumCornersWorldSpace[cascadeIndex][cornerIndex]);\r\n        }\r\n\r\n        this._frustumCenter[cascadeIndex].scaleInPlace(1 / this._frustumCornersWorldSpace[cascadeIndex].length);\r\n\r\n        if (this.stabilizeCascades) {\r\n            // Calculate the radius of a bounding sphere surrounding the frustum corners\r\n            let sphereRadius = 0;\r\n            for (let cornerIndex = 0; cornerIndex < this._frustumCornersWorldSpace[cascadeIndex].length; ++cornerIndex) {\r\n                const dist = this._frustumCornersWorldSpace[cascadeIndex][cornerIndex].subtractToRef(this._frustumCenter[cascadeIndex], tmpv1).length();\r\n                sphereRadius = Math.max(sphereRadius, dist);\r\n            }\r\n\r\n            sphereRadius = Math.ceil(sphereRadius * 16) / 16;\r\n\r\n            this._cascadeMaxExtents[cascadeIndex].copyFromFloats(sphereRadius, sphereRadius, sphereRadius);\r\n            this._cascadeMinExtents[cascadeIndex].copyFromFloats(-sphereRadius, -sphereRadius, -sphereRadius);\r\n        } else {\r\n            // Create a temporary view matrix for the light\r\n            const lightCameraPos = this._frustumCenter[cascadeIndex];\r\n\r\n            this._frustumCenter[cascadeIndex].addToRef(this._lightDirection, tmpv1); // tmpv1 = look at\r\n\r\n            Matrix.LookAtLHToRef(lightCameraPos, tmpv1, UpDir, matrix); // matrix = lightView\r\n\r\n            // Calculate an AABB around the frustum corners\r\n            for (let cornerIndex = 0; cornerIndex < this._frustumCornersWorldSpace[cascadeIndex].length; ++cornerIndex) {\r\n                Vector3.TransformCoordinatesToRef(this._frustumCornersWorldSpace[cascadeIndex][cornerIndex], matrix, tmpv1);\r\n\r\n                this._cascadeMinExtents[cascadeIndex].minimizeInPlace(tmpv1);\r\n                this._cascadeMaxExtents[cascadeIndex].maximizeInPlace(tmpv1);\r\n            }\r\n        }\r\n\r\n        return;\r\n    }\r\n\r\n    /** @hidden */\r\n    protected static _SceneComponentInitialization(scene: Scene) {\r\n        let component = scene._getComponent(SceneComponentConstants.NAME_SHADOWGENERATOR);\r\n        if (!component) {\r\n            component = new ShadowGeneratorSceneComponent(scene);\r\n            scene._addComponent(component);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Creates a Cascaded Shadow Generator object.\r\n     * A ShadowGenerator is the required tool to use the shadows.\r\n     * Each directional light casting shadows needs to use its own ShadowGenerator.\r\n     * Documentation : https://doc.babylonjs.com/babylon101/cascadedShadows\r\n     * @param mapSize The size of the texture what stores the shadows. Example : 1024.\r\n     * @param light The directional light object generating the shadows.\r\n     * @param usefulFloatFirst By default the generator will try to use half float textures but if you need precision (for self shadowing for instance), you can use this option to enforce full float texture.\r\n     */\r\n    constructor(mapSize: number, light: DirectionalLight, usefulFloatFirst?: boolean) {\r\n        this._scene = light.getScene();\r\n        if (this._scene.getEngine().webGLVersion == 1) {\r\n            throw \"CSM can only be used in WebGL2\";\r\n        }\r\n\r\n        this._light = light;\r\n        this._mapSize = mapSize;\r\n        light._shadowGenerator = this;\r\n        this._shadowMaxZ = this._scene.activeCamera?.maxZ ?? 10000;\r\n        this._shadowCastersBoundingInfo = new BoundingInfo(new Vector3(0, 0, 0), new Vector3(0, 0, 0));\r\n        this.freezeShadowCastersBoundingInfo = false;\r\n\r\n        CascadedShadowGenerator._SceneComponentInitialization(this._scene);\r\n\r\n        // Texture type fallback from float to int if not supported.\r\n        var caps = this._scene.getEngine().getCaps();\r\n\r\n        if (!usefulFloatFirst) {\r\n            if (caps.textureHalfFloatRender && caps.textureHalfFloatLinearFiltering) {\r\n                this._textureType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n            }\r\n            else if (caps.textureFloatRender && caps.textureFloatLinearFiltering) {\r\n                this._textureType = Constants.TEXTURETYPE_FLOAT;\r\n            }\r\n            else {\r\n                this._textureType = Constants.TEXTURETYPE_UNSIGNED_INT;\r\n            }\r\n        } else {\r\n            if (caps.textureFloatRender && caps.textureFloatLinearFiltering) {\r\n                this._textureType = Constants.TEXTURETYPE_FLOAT;\r\n            }\r\n            else if (caps.textureHalfFloatRender && caps.textureHalfFloatLinearFiltering) {\r\n                this._textureType = Constants.TEXTURETYPE_HALF_FLOAT;\r\n            }\r\n            else {\r\n                this._textureType = Constants.TEXTURETYPE_UNSIGNED_INT;\r\n            }\r\n        }\r\n\r\n        this._initializeGenerator();\r\n        this._applyFilterValues();\r\n    }\r\n\r\n    private _initializeGenerator(): void {\r\n        this._light._markMeshesAsLightDirty();\r\n        this._initializeShadowMap();\r\n    }\r\n\r\n    private _initializeShadowMap(): void {\r\n        // CSM\r\n        this._transformMatricesAsArray = new Float32Array(this._numCascades * 16);\r\n        this._viewSpaceFrustumsZ = new Array(this._numCascades);\r\n        this._frustumLengths = new Array(this._numCascades);\r\n        this._currentRenderID = new Array(this._numCascades);\r\n        this._lightSizeUVCorrection = new Array(this._numCascades * 2);\r\n        this._depthCorrection = new Array(this._numCascades);\r\n\r\n        this._cascades = [];\r\n        this._viewMatrices = [];\r\n        this._projectionMatrices = [];\r\n        this._transformMatrices = [];\r\n        this._cascadeMinExtents = [];\r\n        this._cascadeMaxExtents = [];\r\n        this._frustumCenter = [];\r\n        this._shadowCameraPos = [];\r\n        this._frustumCornersWorldSpace = [];\r\n\r\n        for (let cascadeIndex = 0; cascadeIndex < this._numCascades; ++cascadeIndex) {\r\n            this._cascades[cascadeIndex] = {\r\n                prevBreakDistance: 0,\r\n                breakDistance: 0,\r\n            };\r\n\r\n            this._viewMatrices[cascadeIndex] = Matrix.Zero();\r\n            this._projectionMatrices[cascadeIndex] = Matrix.Zero();\r\n            this._transformMatrices[cascadeIndex] = Matrix.Zero();\r\n            this._cascadeMinExtents[cascadeIndex] = new Vector3();\r\n            this._cascadeMaxExtents[cascadeIndex] = new Vector3();\r\n            this._frustumCenter[cascadeIndex] = new Vector3();\r\n            this._shadowCameraPos[cascadeIndex] = new Vector3();\r\n            this._frustumCornersWorldSpace[cascadeIndex] = new Array(CascadedShadowGenerator.frustumCornersNDCSpace.length);\r\n\r\n            for (let i = 0; i < CascadedShadowGenerator.frustumCornersNDCSpace.length; ++i) {\r\n                this._frustumCornersWorldSpace[cascadeIndex][i] = new Vector3();\r\n            }\r\n        }\r\n\r\n        // Render target\r\n        let engine = this._scene.getEngine();\r\n\r\n        const size = { width: this._mapSize, height: this._mapSize, layers: this.numCascades };\r\n        this._shadowMap = new RenderTargetTexture(this._light.name + \"_shadowMap\", size, this._scene, false, true, this._textureType, false, undefined, false, false, undefined, Constants.TEXTUREFORMAT_RED);\r\n        this._shadowMap.createDepthStencilTexture(Constants.LESS, true);\r\n\r\n        this._shadowMap.wrapU = Texture.CLAMP_ADDRESSMODE;\r\n        this._shadowMap.wrapV = Texture.CLAMP_ADDRESSMODE;\r\n        this._shadowMap.anisotropicFilteringLevel = 4;\r\n        this._shadowMap.updateSamplingMode(Texture.BILINEAR_SAMPLINGMODE);\r\n        this._shadowMap.renderParticles = false;\r\n        this._shadowMap.ignoreCameraViewport = true;\r\n        if (this._storedUniqueId) {\r\n            this._shadowMap.uniqueId = this._storedUniqueId;\r\n        }\r\n\r\n        this._shadowMap.onBeforeBindObservable.add(() => {\r\n            if (this._breaksAreDirty) {\r\n                this._splitFrustum();\r\n            }\r\n        });\r\n\r\n        // Record Face Index before render.\r\n        this._shadowMap.onBeforeRenderObservable.add((layer: number) => {\r\n            this._currentLayer = layer;\r\n            if (this._filter === CascadedShadowGenerator.FILTER_PCF) {\r\n                engine.setColorWrite(this.debug);\r\n            }\r\n        });\r\n\r\n        // Custom render function.\r\n        this._shadowMap.customRenderFunction = this._renderForShadowMap.bind(this);\r\n\r\n        // Restore state after bind.\r\n        this._shadowMap.onAfterUnbindObservable.add(() => {\r\n            if (this._filter === CascadedShadowGenerator.FILTER_PCF) {\r\n                engine.setColorWrite(true);\r\n            }\r\n        });\r\n\r\n        // Clear according to the chosen filter.\r\n        this._shadowMap.onClearObservable.add((engine) => {\r\n            if (this._filter === CascadedShadowGenerator.FILTER_PCF) {\r\n                engine.clear(CascadedShadowGenerator._CLEARONE, this.debug, true, false);\r\n            }\r\n            else {\r\n                engine.clear(CascadedShadowGenerator._CLEARONE, true, true, false);\r\n            }\r\n        });\r\n\r\n        // Recreate on resize.\r\n        this._shadowMap.onResizeObservable.add((RTT) => {\r\n            this._storedUniqueId = this._shadowMap!.uniqueId;\r\n            this._mapSize = RTT.getRenderSize();\r\n            this._light._markMeshesAsLightDirty();\r\n            this.recreateShadowMap();\r\n        });\r\n\r\n        this._splitFrustum();\r\n    }\r\n\r\n    private _renderForShadowMap(opaqueSubMeshes: SmartArray<SubMesh>, alphaTestSubMeshes: SmartArray<SubMesh>, transparentSubMeshes: SmartArray<SubMesh>, depthOnlySubMeshes: SmartArray<SubMesh>): void {\r\n        var index: number;\r\n        let engine = this._scene.getEngine();\r\n\r\n        const colorWrite = engine.getColorWrite();\r\n        if (depthOnlySubMeshes.length) {\r\n            engine.setColorWrite(false);\r\n            for (index = 0; index < depthOnlySubMeshes.length; index++) {\r\n                this._renderSubMeshForShadowMap(depthOnlySubMeshes.data[index]);\r\n            }\r\n            engine.setColorWrite(colorWrite);\r\n        }\r\n\r\n        for (index = 0; index < opaqueSubMeshes.length; index++) {\r\n            this._renderSubMeshForShadowMap(opaqueSubMeshes.data[index]);\r\n        }\r\n\r\n        for (index = 0; index < alphaTestSubMeshes.length; index++) {\r\n            this._renderSubMeshForShadowMap(alphaTestSubMeshes.data[index]);\r\n        }\r\n\r\n        if (this._transparencyShadow) {\r\n            for (index = 0; index < transparentSubMeshes.length; index++) {\r\n                this._renderSubMeshForShadowMap(transparentSubMeshes.data[index]);\r\n            }\r\n        }\r\n    }\r\n\r\n    private _renderSubMeshForShadowMap(subMesh: SubMesh): void {\r\n        var mesh = subMesh.getRenderingMesh();\r\n        var scene = this._scene;\r\n        var engine = scene.getEngine();\r\n        let material = subMesh.getMaterial();\r\n\r\n        mesh._internalAbstractMeshDataInfo._isActiveIntermediate = false;\r\n\r\n        if (!material || subMesh.verticesCount === 0) {\r\n            return;\r\n        }\r\n\r\n        // Culling\r\n        engine.setState(material.backFaceCulling);\r\n\r\n        // Managing instances\r\n        var batch = mesh._getInstancesRenderList(subMesh._id);\r\n        if (batch.mustReturn) {\r\n            return;\r\n        }\r\n\r\n        var hardwareInstancedRendering = (engine.getCaps().instancedArrays) && (batch.visibleInstances[subMesh._id] !== null) && (batch.visibleInstances[subMesh._id] !== undefined);\r\n        if (this.isReady(subMesh, hardwareInstancedRendering)) {\r\n            engine.enableEffect(this._effect);\r\n            mesh._bind(subMesh, this._effect, Material.TriangleFillMode);\r\n\r\n            this._effect.setFloat3(\"biasAndScale\", this.bias, this.normalBias, 0);\r\n\r\n            this._effect.setMatrix(\"viewProjection\", this.getCSMTransformMatrix(this._currentLayer));\r\n            this._effect.setVector3(\"lightData\", this._cachedDirection);\r\n\r\n            if (scene.activeCamera) {\r\n                this._effect.setFloat2(\"depthValues\", this.getLight().getDepthMinZ(scene.activeCamera), this.getLight().getDepthMinZ(scene.activeCamera) + this.getLight().getDepthMaxZ(scene.activeCamera));\r\n            }\r\n\r\n            // Alpha test\r\n            if (material && material.needAlphaTesting()) {\r\n                var alphaTexture = material.getAlphaTestTexture();\r\n                if (alphaTexture) {\r\n                    this._effect.setTexture(\"diffuseSampler\", alphaTexture);\r\n                    this._effect.setMatrix(\"diffuseMatrix\", alphaTexture.getTextureMatrix() || this._defaultTextureMatrix);\r\n                }\r\n            }\r\n\r\n            // Bones\r\n            if (mesh.useBones && mesh.computeBonesUsingShaders && mesh.skeleton) {\r\n                const skeleton = mesh.skeleton;\r\n\r\n                if (skeleton.isUsingTextureForMatrices) {\r\n                    const boneTexture = skeleton.getTransformMatrixTexture(mesh);\r\n\r\n                    if (!boneTexture) {\r\n                        return;\r\n                    }\r\n\r\n                    this._effect.setTexture(\"boneSampler\", boneTexture);\r\n                    this._effect.setFloat(\"boneTextureWidth\", 4.0 * (skeleton.bones.length + 1));\r\n                } else {\r\n                    this._effect.setMatrices(\"mBones\", skeleton.getTransformMatrices((mesh)));\r\n                }\r\n            }\r\n\r\n            // Morph targets\r\n            MaterialHelper.BindMorphTargetParameters(mesh, this._effect);\r\n\r\n            if (this.forceBackFacesOnly) {\r\n                engine.setState(true, 0, false, true);\r\n            }\r\n\r\n            // Observables\r\n            this.onBeforeShadowMapRenderMeshObservable.notifyObservers(mesh);\r\n            this.onBeforeShadowMapRenderObservable.notifyObservers(this._effect);\r\n\r\n            // Draw\r\n            mesh._processRendering(subMesh, this._effect, Material.TriangleFillMode, batch, hardwareInstancedRendering,\r\n                (isInstance, world) => this._effect.setMatrix(\"world\", world));\r\n\r\n            if (this.forceBackFacesOnly) {\r\n                engine.setState(true, 0, false, false);\r\n            }\r\n\r\n            // Observables\r\n            this.onAfterShadowMapRenderObservable.notifyObservers(this._effect);\r\n            this.onAfterShadowMapRenderMeshObservable.notifyObservers(mesh);\r\n\r\n        } else {\r\n            // Need to reset refresh rate of the shadowMap\r\n            if (this._shadowMap) {\r\n                this._shadowMap.resetRefreshCounter();\r\n            }\r\n        }\r\n    }\r\n\r\n    private _applyFilterValues(): void {\r\n        if (!this._shadowMap) {\r\n            return;\r\n        }\r\n\r\n        if (this.filter === CascadedShadowGenerator.FILTER_PCSS) {\r\n            this._shadowMap.updateSamplingMode(Texture.NEAREST_SAMPLINGMODE);\r\n        } else {\r\n            this._shadowMap.updateSamplingMode(Texture.BILINEAR_SAMPLINGMODE);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Forces all the attached effect to compile to enable rendering only once ready vs. lazyly compiling effects.\r\n     * @param onCompiled Callback triggered at the and of the effects compilation\r\n     * @param options Sets of optional options forcing the compilation with different modes\r\n     */\r\n    public forceCompilation(onCompiled?: (generator: IShadowGenerator) => void, options?: Partial<{ useInstances: boolean }>): void {\r\n        let localOptions = {\r\n            useInstances: false,\r\n            ...options\r\n        };\r\n\r\n        let shadowMap = this.getShadowMap();\r\n        if (!shadowMap) {\r\n            if (onCompiled) {\r\n                onCompiled(this);\r\n            }\r\n            return;\r\n        }\r\n\r\n        let renderList = shadowMap.renderList;\r\n        if (!renderList) {\r\n            if (onCompiled) {\r\n                onCompiled(this);\r\n            }\r\n            return;\r\n        }\r\n\r\n        var subMeshes = new Array<SubMesh>();\r\n        for (var mesh of renderList) {\r\n            subMeshes.push(...mesh.subMeshes);\r\n        }\r\n        if (subMeshes.length === 0) {\r\n            if (onCompiled) {\r\n                onCompiled(this);\r\n            }\r\n            return;\r\n        }\r\n\r\n        var currentIndex = 0;\r\n\r\n        var checkReady = () => {\r\n            if (!this._scene || !this._scene.getEngine()) {\r\n                return;\r\n            }\r\n\r\n            while (this.isReady(subMeshes[currentIndex], localOptions.useInstances)) {\r\n                currentIndex++;\r\n                if (currentIndex >= subMeshes.length) {\r\n                    if (onCompiled) {\r\n                        onCompiled(this);\r\n                    }\r\n                    return;\r\n                }\r\n            }\r\n            setTimeout(checkReady, 16);\r\n        };\r\n\r\n        checkReady();\r\n    }\r\n\r\n    /**\r\n     * Forces all the attached effect to compile to enable rendering only once ready vs. lazyly compiling effects.\r\n     * @param options Sets of optional options forcing the compilation with different modes\r\n     * @returns A promise that resolves when the compilation completes\r\n     */\r\n    public forceCompilationAsync(options?: Partial<{ useInstances: boolean }>): Promise<void> {\r\n        return new Promise((resolve) => {\r\n            this.forceCompilation(() => {\r\n                resolve();\r\n            }, options);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Determine wheter the shadow generator is ready or not (mainly all effects and related post processes needs to be ready).\r\n     * @param subMesh The submesh we want to render in the shadow map\r\n     * @param useInstances Defines wether will draw in the map using instances\r\n     * @returns true if ready otherwise, false\r\n     */\r\n    public isReady(subMesh: SubMesh, useInstances: boolean): boolean {\r\n        var defines = [];\r\n\r\n        if (this._textureType !== Constants.TEXTURETYPE_UNSIGNED_INT) {\r\n            defines.push(\"#define FLOAT\");\r\n        }\r\n\r\n        defines.push(\"#define DEPTHTEXTURE\");\r\n\r\n        if (this._depthClamp && this._filter !== CascadedShadowGenerator.FILTER_PCSS) {\r\n            defines.push(\"#define DEPTHCLAMP\");\r\n        }\r\n\r\n        var attribs = [VertexBuffer.PositionKind];\r\n\r\n        var mesh = subMesh.getMesh();\r\n        var material = subMesh.getMaterial();\r\n\r\n        // Normal bias.\r\n        if (this.normalBias && mesh.isVerticesDataPresent(VertexBuffer.NormalKind)) {\r\n            attribs.push(VertexBuffer.NormalKind);\r\n            defines.push(\"#define NORMAL\");\r\n            defines.push(\"#define DIRECTIONINLIGHTDATA\");\r\n        }\r\n\r\n        // Alpha test\r\n        if (material && material.needAlphaTesting()) {\r\n            var alphaTexture = material.getAlphaTestTexture();\r\n            if (alphaTexture) {\r\n                defines.push(\"#define ALPHATEST\");\r\n                if (mesh.isVerticesDataPresent(VertexBuffer.UVKind)) {\r\n                    attribs.push(VertexBuffer.UVKind);\r\n                    defines.push(\"#define UV1\");\r\n                }\r\n                if (mesh.isVerticesDataPresent(VertexBuffer.UV2Kind)) {\r\n                    if (alphaTexture.coordinatesIndex === 1) {\r\n                        attribs.push(VertexBuffer.UV2Kind);\r\n                        defines.push(\"#define UV2\");\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // Bones\r\n        const fallbacks = new EffectFallbacks();\r\n        if (mesh.useBones && mesh.computeBonesUsingShaders && mesh.skeleton) {\r\n            attribs.push(VertexBuffer.MatricesIndicesKind);\r\n            attribs.push(VertexBuffer.MatricesWeightsKind);\r\n            if (mesh.numBoneInfluencers > 4) {\r\n                attribs.push(VertexBuffer.MatricesIndicesExtraKind);\r\n                attribs.push(VertexBuffer.MatricesWeightsExtraKind);\r\n            }\r\n            const skeleton = mesh.skeleton;\r\n            defines.push(\"#define NUM_BONE_INFLUENCERS \" + mesh.numBoneInfluencers);\r\n            if (mesh.numBoneInfluencers > 0) {\r\n                fallbacks.addCPUSkinningFallback(0, mesh);\r\n            }\r\n\r\n            if (skeleton.isUsingTextureForMatrices) {\r\n                defines.push(\"#define BONETEXTURE\");\r\n            } else {\r\n                defines.push(\"#define BonesPerMesh \" + (skeleton.bones.length + 1));\r\n            }\r\n\r\n        } else {\r\n            defines.push(\"#define NUM_BONE_INFLUENCERS 0\");\r\n        }\r\n\r\n        // Morph targets\r\n        var manager = (<Mesh>mesh).morphTargetManager;\r\n        let morphInfluencers = 0;\r\n        if (manager) {\r\n            if (manager.numInfluencers > 0) {\r\n                defines.push(\"#define MORPHTARGETS\");\r\n                morphInfluencers = manager.numInfluencers;\r\n                defines.push(\"#define NUM_MORPH_INFLUENCERS \" + morphInfluencers);\r\n                MaterialHelper.PrepareAttributesForMorphTargetsInfluencers(attribs, mesh, morphInfluencers);\r\n            }\r\n        }\r\n\r\n        // Instances\r\n        if (useInstances) {\r\n            defines.push(\"#define INSTANCES\");\r\n            MaterialHelper.PushAttributesForInstances(attribs);\r\n        }\r\n\r\n        // Get correct effect\r\n        var join = defines.join(\"\\n\");\r\n        if (this._cachedDefines !== join) {\r\n            this._cachedDefines = join;\r\n\r\n            let shaderName = \"shadowMap\";\r\n            let uniforms = [\"world\", \"mBones\", \"viewProjection\", \"diffuseMatrix\", \"lightData\", \"depthValues\", \"biasAndScale\", \"morphTargetInfluences\", \"boneTextureWidth\"];\r\n            let samplers = [\"diffuseSampler\", \"boneSampler\"];\r\n\r\n            this._effect = this._scene.getEngine().createEffect(shaderName,\r\n                attribs, uniforms,\r\n                samplers, join,\r\n                fallbacks, undefined, undefined, { maxSimultaneousMorphTargets: morphInfluencers });\r\n        }\r\n\r\n        if (!this._effect.isReady()) {\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * Prepare all the defines in a material relying on a shadow map at the specified light index.\r\n     * @param defines Defines of the material we want to update\r\n     * @param lightIndex Index of the light in the enabled light list of the material\r\n     */\r\n    public prepareDefines(defines: any, lightIndex: number): void {\r\n        var scene = this._scene;\r\n        var light = this._light;\r\n\r\n        if (!scene.shadowsEnabled || !light.shadowEnabled) {\r\n            return;\r\n        }\r\n\r\n        defines[\"SHADOW\" + lightIndex] = true;\r\n\r\n        defines[\"SHADOWCSM\" + lightIndex] = true;\r\n        defines[\"SHADOWCSMDEBUG\" + lightIndex] = this.debug;\r\n        defines[\"SHADOWCSMNUM_CASCADES\" + lightIndex] = this.numCascades;\r\n\r\n        const camera = scene.activeCamera;\r\n\r\n        if (camera && this._shadowMaxZ < camera.maxZ) {\r\n            defines[\"SHADOWCSMUSESHADOWMAXZ\" + lightIndex] = true;\r\n        }\r\n\r\n        if (this.useContactHardeningShadow) {\r\n            defines[\"SHADOWPCSS\" + lightIndex] = true;\r\n            if (this._filteringQuality === CascadedShadowGenerator.QUALITY_LOW) {\r\n                defines[\"SHADOWLOWQUALITY\" + lightIndex] = true;\r\n            }\r\n            else if (this._filteringQuality === CascadedShadowGenerator.QUALITY_MEDIUM) {\r\n                defines[\"SHADOWMEDIUMQUALITY\" + lightIndex] = true;\r\n            }\r\n            // else default to high.\r\n        }\r\n        else if (this.usePercentageCloserFiltering) {\r\n            defines[\"SHADOWPCF\" + lightIndex] = true;\r\n            if (this._filteringQuality === CascadedShadowGenerator.QUALITY_LOW) {\r\n                defines[\"SHADOWLOWQUALITY\" + lightIndex] = true;\r\n            }\r\n            else if (this._filteringQuality === CascadedShadowGenerator.QUALITY_MEDIUM) {\r\n                defines[\"SHADOWMEDIUMQUALITY\" + lightIndex] = true;\r\n            }\r\n            // else default to high.\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Binds the shadow related information inside of an effect (information like near, far, darkness...\r\n     * defined in the generator but impacting the effect).\r\n     * @param lightIndex Index of the light in the enabled light list of the material owning the effect\r\n     * @param effect The effect we are binfing the information for\r\n     */\r\n    public bindShadowLight(lightIndex: string, effect: Effect): void {\r\n        const light = this._light;\r\n        const scene = this._scene;\r\n\r\n        if (!scene.shadowsEnabled || !light.shadowEnabled) {\r\n            return;\r\n        }\r\n\r\n        const camera = scene.activeCamera;\r\n        if (!camera) {\r\n            return;\r\n        }\r\n\r\n        const shadowMap = this.getShadowMap();\r\n        if (!shadowMap) {\r\n            return;\r\n        }\r\n\r\n        const width = shadowMap.getSize().width;\r\n\r\n        effect.setMatrices(\"lightMatrix\" + lightIndex, this._transformMatricesAsArray);\r\n        effect.setArray(\"viewFrustumZ\" + lightIndex, this._viewSpaceFrustumsZ);\r\n        effect.setFloat(\"cascadeBlendFactor\" + lightIndex, this.cascadeBlendPercentage === 0 ? 10000 : 1 / this.cascadeBlendPercentage);\r\n        effect.setArray(\"frustumLengths\" + lightIndex, this._frustumLengths);\r\n\r\n        // Only PCF uses depth stencil texture.\r\n        if (this._filter === CascadedShadowGenerator.FILTER_PCF) {\r\n            effect.setDepthStencilTexture(\"shadowSampler\" + lightIndex, shadowMap);\r\n            light._uniformBuffer.updateFloat4(\"shadowsInfo\", this.getDarkness(), width, 1 / width, this.frustumEdgeFalloff, lightIndex);\r\n        } else if (this._filter === CascadedShadowGenerator.FILTER_PCSS) {\r\n            for (let cascadeIndex = 0; cascadeIndex < this._numCascades; ++cascadeIndex) {\r\n                this._lightSizeUVCorrection[cascadeIndex * 2 + 0] = cascadeIndex === 0 ? 1 : (this._cascadeMaxExtents[0].x - this._cascadeMinExtents[0].x) / (this._cascadeMaxExtents[cascadeIndex].x - this._cascadeMinExtents[cascadeIndex].x); // x correction\r\n                this._lightSizeUVCorrection[cascadeIndex * 2 + 1] = cascadeIndex === 0 ? 1 : (this._cascadeMaxExtents[0].y - this._cascadeMinExtents[0].y) / (this._cascadeMaxExtents[cascadeIndex].y - this._cascadeMinExtents[cascadeIndex].y); // y correction\r\n                this._depthCorrection[cascadeIndex] = cascadeIndex === 0 ? 1 : (this._cascadeMaxExtents[cascadeIndex].z - this._cascadeMinExtents[cascadeIndex].z) / (this._cascadeMaxExtents[0].z - this._cascadeMinExtents[0].z);\r\n            }\r\n            effect.setDepthStencilTexture(\"shadowSampler\" + lightIndex, shadowMap);\r\n            effect.setTexture(\"depthSampler\" + lightIndex, shadowMap);\r\n            effect.setArray2(\"lightSizeUVCorrection\" + lightIndex, this._lightSizeUVCorrection);\r\n            effect.setArray(\"depthCorrection\" + lightIndex, this._depthCorrection);\r\n            effect.setFloat(\"penumbraDarkness\" + lightIndex, this.penumbraDarkness);\r\n            light._uniformBuffer.updateFloat4(\"shadowsInfo\", this.getDarkness(), 1 / width, this._contactHardeningLightSizeUVRatio * width, this.frustumEdgeFalloff, lightIndex);\r\n        }\r\n        else {\r\n            effect.setTexture(\"shadowSampler\" + lightIndex, shadowMap);\r\n            light._uniformBuffer.updateFloat4(\"shadowsInfo\", this.getDarkness(), width, 1 / width, this.frustumEdgeFalloff, lightIndex);\r\n        }\r\n\r\n        light._uniformBuffer.updateFloat2(\"depthValues\", this.getLight().getDepthMinZ(camera), this.getLight().getDepthMinZ(camera) + this.getLight().getDepthMaxZ(camera), lightIndex);\r\n    }\r\n\r\n    /**\r\n     * Gets the transformation matrix of the first cascade used to project the meshes into the map from the light point of view.\r\n     * (eq to view projection * shadow projection matrices)\r\n     * @returns The transform matrix used to create the shadow map\r\n     */\r\n    public getTransformMatrix(): Matrix {\r\n        return this.getCSMTransformMatrix(0);\r\n    }\r\n\r\n    /**\r\n     * Recreates the shadow map dependencies like RTT and post processes. This can be used during the switch between\r\n     * Cube and 2D textures for instance.\r\n     */\r\n    public recreateShadowMap(): void {\r\n        let shadowMap = this._shadowMap;\r\n        if (!shadowMap) {\r\n            return;\r\n        }\r\n\r\n        // Track render list.\r\n        var renderList = shadowMap.renderList;\r\n        // Clean up existing data.\r\n        this._disposeRTT();\r\n        // Reinitializes.\r\n        this._initializeGenerator();\r\n        // Reaffect the filter to ensure a correct fallback if necessary.\r\n        this.filter = this.filter;\r\n        // Reaffect the filter.\r\n        this._applyFilterValues();\r\n        // Reaffect Render List.\r\n        this._shadowMap!.renderList = renderList;\r\n    }\r\n\r\n    private _disposeRTT(): void {\r\n        if (this._shadowMap) {\r\n            this._shadowMap.dispose();\r\n            this._shadowMap = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Disposes the ShadowGenerator.\r\n     * Returns nothing.\r\n     */\r\n    public dispose(): void {\r\n        this._disposeRTT();\r\n\r\n        if (this._light) {\r\n            this._light._shadowGenerator = null;\r\n            this._light._markMeshesAsLightDirty();\r\n        }\r\n\r\n        this.onBeforeShadowMapRenderMeshObservable.clear();\r\n        this.onBeforeShadowMapRenderObservable.clear();\r\n        this.onAfterShadowMapRenderMeshObservable.clear();\r\n        this.onAfterShadowMapRenderObservable.clear();\r\n\r\n        if (this._freezeShadowCastersBoundingInfoObservable) {\r\n            this._scene.onBeforeRenderObservable.remove(this._freezeShadowCastersBoundingInfoObservable);\r\n            this._freezeShadowCastersBoundingInfoObservable = null;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Serializes the shadow generator setup to a json object.\r\n     * @returns The serialized JSON object\r\n     */\r\n    public serialize(): any {\r\n        var serializationObject: any = {};\r\n        var shadowMap = this.getShadowMap();\r\n\r\n        if (!shadowMap) {\r\n            return serializationObject;\r\n        }\r\n\r\n        serializationObject.lightId = this._light.id;\r\n        serializationObject.mapSize = shadowMap.getRenderSize();\r\n        serializationObject.forceBackFacesOnly = this.forceBackFacesOnly;\r\n        serializationObject.darkness = this.getDarkness();\r\n        serializationObject.transparencyShadow = this._transparencyShadow;\r\n        serializationObject.frustumEdgeFalloff = this.frustumEdgeFalloff;\r\n        serializationObject.numCascades = this._numCascades;\r\n        serializationObject.stabilizeCascades = this.stabilizeCascades;\r\n        serializationObject.depthClamp = this._depthClamp;\r\n        serializationObject.lambda = this._lambda;\r\n        serializationObject.freezeShadowCastersBoundingInfo = this._freezeShadowCastersBoundingInfo;\r\n        serializationObject.shadowMaxZ = this._shadowMaxZ;\r\n        serializationObject.cascadeBlendPercentage = this.cascadeBlendPercentage;\r\n\r\n        serializationObject.bias = this.bias;\r\n        serializationObject.normalBias = this.normalBias;\r\n\r\n        serializationObject.usePercentageCloserFiltering = this.usePercentageCloserFiltering;\r\n        serializationObject.useContactHardeningShadow = this.useContactHardeningShadow;\r\n        serializationObject.filteringQuality = this.filteringQuality;\r\n        serializationObject.contactHardeningLightSizeUVRatio = this.contactHardeningLightSizeUVRatio;\r\n        serializationObject.penumbraDarkness = this.penumbraDarkness;\r\n\r\n        serializationObject.renderList = [];\r\n        if (shadowMap.renderList) {\r\n            for (var meshIndex = 0; meshIndex < shadowMap.renderList.length; meshIndex++) {\r\n                var mesh = shadowMap.renderList[meshIndex];\r\n\r\n                serializationObject.renderList.push(mesh.id);\r\n            }\r\n        }\r\n\r\n        return serializationObject;\r\n    }\r\n\r\n    /**\r\n     * Parses a serialized ShadowGenerator and returns a new ShadowGenerator.\r\n     * @param parsedShadowGenerator The JSON object to parse\r\n     * @param scene The scene to create the shadow map for\r\n     * @returns The parsed shadow generator\r\n     */\r\n    public static Parse(parsedShadowGenerator: any, scene: Scene): CascadedShadowGenerator {\r\n        var light = <DirectionalLight>scene.getLightByID(parsedShadowGenerator.lightId);\r\n        var shadowGenerator = new CascadedShadowGenerator(parsedShadowGenerator.mapSize, light);\r\n        var shadowMap = shadowGenerator.getShadowMap();\r\n\r\n        for (var meshIndex = 0; meshIndex < parsedShadowGenerator.renderList.length; meshIndex++) {\r\n            var meshes = scene.getMeshesByID(parsedShadowGenerator.renderList[meshIndex]);\r\n            meshes.forEach(function(mesh) {\r\n                if (!shadowMap) {\r\n                    return;\r\n                }\r\n                if (!shadowMap.renderList) {\r\n                    shadowMap.renderList = [];\r\n                }\r\n                shadowMap.renderList.push(mesh);\r\n            });\r\n        }\r\n\r\n        if (parsedShadowGenerator.usePercentageCloserFiltering) {\r\n            shadowGenerator.usePercentageCloserFiltering = true;\r\n        }\r\n        else if (parsedShadowGenerator.useContactHardeningShadow) {\r\n            shadowGenerator.useContactHardeningShadow = true;\r\n        }\r\n\r\n        if (parsedShadowGenerator.filteringQuality !== undefined) {\r\n            shadowGenerator.filteringQuality = parsedShadowGenerator.filteringQuality;\r\n        }\r\n\r\n        if (parsedShadowGenerator.contactHardeningLightSizeUVRatio !== undefined) {\r\n            shadowGenerator.contactHardeningLightSizeUVRatio = parsedShadowGenerator.contactHardeningLightSizeUVRatio;\r\n        }\r\n\r\n        if (parsedShadowGenerator.bias !== undefined) {\r\n            shadowGenerator.bias = parsedShadowGenerator.bias;\r\n        }\r\n\r\n        if (parsedShadowGenerator.normalBias !== undefined) {\r\n            shadowGenerator.normalBias = parsedShadowGenerator.normalBias;\r\n        }\r\n\r\n        if (parsedShadowGenerator.frustumEdgeFalloff !== undefined) {\r\n            shadowGenerator.frustumEdgeFalloff = parsedShadowGenerator.frustumEdgeFalloff;\r\n        }\r\n\r\n        if (parsedShadowGenerator.darkness !== undefined) {\r\n            shadowGenerator.setDarkness(parsedShadowGenerator.darkness);\r\n        }\r\n\r\n        if (parsedShadowGenerator.transparencyShadow) {\r\n            shadowGenerator.setTransparencyShadow(true);\r\n        }\r\n\r\n        shadowGenerator.forceBackFacesOnly = !!parsedShadowGenerator.forceBackFacesOnly;\r\n\r\n        if (parsedShadowGenerator.stabilizeCascades !== undefined) {\r\n            shadowGenerator.stabilizeCascades = parsedShadowGenerator.stabilizeCascades;\r\n        }\r\n\r\n        if (parsedShadowGenerator.depthClamp !== undefined) {\r\n             shadowGenerator.depthClamp = parsedShadowGenerator.depthClamp;\r\n        }\r\n\r\n        if (parsedShadowGenerator.lambda !== undefined) {\r\n             shadowGenerator.lambda = parsedShadowGenerator.lambda;\r\n        }\r\n\r\n        if (parsedShadowGenerator.freezeShadowCastersBoundingInfo !== undefined) {\r\n            shadowGenerator.freezeShadowCastersBoundingInfo = parsedShadowGenerator.freezeShadowCastersBoundingInfo;\r\n        }\r\n\r\n        if (parsedShadowGenerator.shadowMaxZ !== undefined) {\r\n             shadowGenerator.shadowMaxZ = parsedShadowGenerator.shadowMaxZ;\r\n        }\r\n\r\n        if (parsedShadowGenerator.cascadeBlendPercentage !== undefined) {\r\n             shadowGenerator.cascadeBlendPercentage = parsedShadowGenerator.cascadeBlendPercentage;\r\n        }\r\n\r\n        if (parsedShadowGenerator.penumbraDarkness !== undefined) {\r\n            shadowGenerator.penumbraDarkness = parsedShadowGenerator.penumbraDarkness;\r\n        }\r\n\r\n        if (parsedShadowGenerator.numCascades !== undefined) {\r\n            shadowGenerator.numCascades = parsedShadowGenerator.numCascades;\r\n        }\r\n\r\n        return shadowGenerator;\r\n    }\r\n}\r\n","import {\r\n    Scene,\r\n    Vector3,\r\n    Color3,\r\n    Color4,\r\n    SceneLoader,\r\n    UniversalCamera,\r\n    Engine,\r\n} from \"babylonjs\";\r\n\r\nimport Sample, { enumSplitMode } from \"../Sample\";\r\nimport ISampleSplit from \"./ISampleSplit\";\r\n\r\nimport GlobalGUI from \"./GlobalGUI\";\r\nimport StandardShadow from \"./StandardShadow\";\r\nimport CSM from \"./CSM\";\r\n\r\nexport default class CSMSample extends Sample {\r\n\r\n    protected _sunDir:          Vector3;\r\n    protected _ambientColor:    Color3;\r\n\r\n    constructor(engine: Engine, canvas: HTMLCanvasElement) {\r\n        super(engine, canvas);\r\n\r\n        this._sunDir = new Vector3(-1, -1, -1);\r\n//        this._sunDir = new Vector3(32, -30, 22);\r\n        this._sunDir.normalize();\r\n        this._ambientColor = new Color3(0.3, 0.3, 0.3);\r\n        this._clearColor = new Color4(0.17773, 0.41797, 0.65234, 1);\r\n\r\n        this.registerClass(\"std\", StandardShadow);\r\n        this.registerClass(\"csm\", CSM);\r\n\r\n        this.splitMode = enumSplitMode.LINEAR;\r\n        this.splitType = \"csm\";\r\n\r\n        this._gui = new GlobalGUI(\"Global settings\", this._engine, this);\r\n\r\n        let ocont = jQuery('<div id=\"fps2\"></div>').css('position', 'absolute').css('left', '2px').css('top', '2px').css('z-index', '201');\r\n\r\n        jQuery(document.body).append(ocont);\r\n    }\r\n\r\n    protected create(): void {\r\n        Promise.all([this.createNewSplit()]).then(() => {\r\n            SceneLoader.ShowLoadingScreen = false;\r\n            this.createGUI();\r\n        });\r\n    }\r\n\r\n    public createGUI(): void {\r\n        this._gui!.zIndex = 200;\r\n        this._gui!.createGUI();\r\n    }\r\n\r\n    public async createNewSplit() {\r\n        this.detachControlFromAllCameras();\r\n\r\n        let split = this.addSplit(this.splitType!, this.splitClasses.get(this.splitType!)!.className, false, false) as ISampleSplit,\r\n            camera = split.camera;\r\n\r\n        const gscene = (this._gui as GlobalGUI)!.scenes[(this._gui as GlobalGUI).selectedScene];\r\n\r\n        split.group = (this._gui as GlobalGUI).selectedScene;\r\n        split.isLoading = true;\r\n\r\n        camera.position = gscene.camera.position.clone();\r\n        if (gscene.camera.rotation) {\r\n            camera.rotation.copyFrom(gscene.camera.rotation);\r\n        } else {\r\n            camera.setTarget(gscene.camera.target.clone());\r\n        }\r\n\r\n        return split.initialize(gscene, this._ambientColor, this._sunDir.clone()).then(() => {\r\n            split.isLoading = false;\r\n            split.createGUI();\r\n            this.resyncCameras();\r\n            this.attachControlToAllCameras();\r\n        });\r\n    }\r\n\r\n    public render(): void {\r\n        super.render();\r\n\r\n        jQuery('#fps2').html(this._engine.getFps().toFixed() + \" fps\");\r\n    }\r\n\r\n    protected createSceneAndCamera(attachControls: boolean): [Scene, UniversalCamera] {\r\n        const [scene, camera] = super.createSceneAndCamera(attachControls);\r\n\r\n        scene.ambientColor = new Color3(1, 1, 1);\r\n        scene.clearColor = this._clearColor;\r\n\r\n        camera.fov = Math.PI / 4 * 0.75;\r\n        camera.minZ = 0.25;\r\n        camera.maxZ = 250;\r\n\r\n        return [scene, camera];\r\n    }\r\n\r\n}\r\n\r\nSample.registerSampleClass(\"csm2\", {\r\n    \"displayName\": \"Implementation of the Cascaded Shadow Maps rendering technic\",\r\n    \"description\": \"\",\r\n    \"class\": CSMSample,\r\n});\r\n","import {\r\n    DirectionalLight,\r\n    Scene,\r\n    Vector3,\r\n    UniversalCamera,\r\n    HemisphericLight,\r\n    Matrix,\r\n    Mesh,\r\n    InternalTexture,\r\n    Nullable,\r\n    Engine,\r\n    PassPostProcess,\r\n    Texture,\r\n    Effect,\r\n    PostProcess,\r\n    PostProcessRenderPipeline,\r\n    PostProcessRenderEffect,\r\n    RenderTargetTexture,\r\n    Constants,\r\n    PostProcessManager,\r\n} from \"babylonjs\";\r\n\r\nimport SampleBasic from \"../SampleBasic\";\r\nimport Utils from \"../Utils\";\r\n\r\nexport default class DepthMinMax extends SampleBasic {\r\n\r\n    private _dummyFramebuffer: WebGLFramebuffer;\r\n    private _skyBox: Mesh;\r\n\r\n    protected async populateScene(scene: Scene, camera: UniversalCamera) {\r\n        camera.position.x = 40;\r\n        camera.position.y = 5;\r\n        camera.position.z = 5;\r\n\r\n        camera.fov = Math.PI / 4 * 0.75;\r\n        camera.minZ = 0.25;\r\n        camera.maxZ = 250;\r\n\r\n        camera.setTarget(new Vector3(39, 5, 5));\r\n\r\n        //this._skyBox = Utils.addSkybox(\"Clouds.dds\", scene, 100);\r\n\r\n        await Utils.loadObj(scene, \"./resources/3d/powerplant/\", \"powerplant.obj\");\r\n\r\n        const scaling = 0.5;\r\n\r\n        scene.meshes.forEach((m) => {\r\n            if (m.name == 'skyBox') { return; }\r\n\r\n            if (!m.material) { return; }\r\n\r\n            let matrix = Matrix.Identity();\r\n            matrix.scaleToRef(scaling, matrix);\r\n            matrix.setRowFromFloats(3, 0, 0, 0, 1);\r\n            (m as Mesh).bakeTransformIntoVertices(matrix);\r\n            m.refreshBoundingInfo();\r\n        });\r\n\r\n        let sunDir = new Vector3(32, -30, 22);\r\n\r\n        let sun = new DirectionalLight(\"sun\", sunDir, scene);\r\n        sun.intensity = 1;\r\n\r\n        let hemil = new HemisphericLight(\"hemil\", new Vector3(0, 1, 0), scene);\r\n        hemil.intensity = 1;\r\n\r\n        var depthRenderer = scene.enableDepthRenderer(camera, false);\r\n\r\n        depthRenderer.getDepthMap().updateSamplingMode(Constants.TEXTURE_NEAREST_NEAREST/*Texture.NEAREST_SAMPLINGMODE*/);\r\n        depthRenderer.useOnlyInActiveCamera = true;\r\n        depthRenderer.getDepthMap().ignoreCameraViewport = false;\r\n\r\n        var depthMap = depthRenderer.getDepthMap();\r\n\r\n        //\r\n        Effect.ShadersStore.depthReductionInitialFragmentShader = `\r\n            #version 300 es\r\n            precision highp float;\r\n            precision highp int;\r\n\r\n            in vec2 vUV;\r\n\r\n            uniform sampler2D textureSampler;\r\n            uniform sampler2D depthTexture;\r\n\r\n            //#define METHOD1\r\n\r\n            out vec2 glFragColor;\r\n\r\n            void main(void)\r\n            {\r\n            #ifdef METHOD1\r\n                ivec2 size = textureSize(depthTexture, 0);\r\n                vec2 texelSize = vec2(1.0 / float(size.x), 1.0 / float(size.y));\r\n\r\n                float f1 = texture(depthTexture, vUV).r;\r\n                float f2 = texture(depthTexture, vUV + vec2(texelSize.x, 0.0)).r;\r\n                float f3 = texture(depthTexture, vUV + vec2(texelSize.x, texelSize.y)).r;\r\n                float f4 = texture(depthTexture, vUV + vec2(0.0, texelSize.y)).r;\r\n            #else\r\n                vec2 size = vec2(textureSize(depthTexture, 0) - 1);\r\n                vec2 texcoord = vUV * size;\r\n                ivec2 coord = ivec2(texcoord);\r\n\r\n                float f1 = texelFetch(depthTexture, coord, 0).r;\r\n                float f2 = texelFetch(depthTexture, coord + ivec2(1, 0), 0).r;\r\n                float f3 = texelFetch(depthTexture, coord + ivec2(1, 1), 0).r;\r\n                float f4 = texelFetch(depthTexture, coord + ivec2(0, 1), 0).r;\r\n            #endif\r\n\r\n                float minz = min(min(min(f1, f2), f3), f4);\r\n                float maxz = max(max(max(sign(1.0 - f1) * f1, sign(1.0 - f2) * f2), sign(1.0 - f3) * f3), sign(1.0 - f4) * f4);\r\n\r\n                glFragColor = vec2(minz, maxz);\r\n            }\r\n        `;\r\n\r\n        //\r\n        Effect.ShadersStore.depthReductionFragmentShader = `\r\n            #version 300 es\r\n            precision highp float;\r\n            precision highp int;\r\n\r\n            in vec2 vUV;\r\n\r\n            uniform sampler2D textureSampler;\r\n\r\n            //#define METHOD1\r\n\r\n            out vec2 glFragColor;\r\n\r\n            void main(void)\r\n            {\r\n            #ifdef METHOD1\r\n                ivec2 size = textureSize(textureSampler, 0);\r\n                vec2 texelSize = vec2(1.0 / float(size.x), 1.0 / float(size.y));\r\n\r\n                vec2 f1 = texture(textureSampler, vUV).rg;\r\n                vec2 f2 = texture(textureSampler, vUV + vec2(texelSize.x, 0.0)).rg;\r\n                vec2 f3 = texture(textureSampler, vUV + vec2(texelSize.x, texelSize.y)).rg;\r\n                vec2 f4 = texture(textureSampler, vUV + vec2(0.0, texelSize.y)).rg;\r\n            #else\r\n                vec2 size = vec2(textureSize(textureSampler, 0) - 1);\r\n                vec2 texcoord = vUV * size;\r\n                ivec2 coord = ivec2(texcoord);\r\n\r\n                vec2 f1 = texelFetch(textureSampler, coord, 0).rg;\r\n                vec2 f2 = texelFetch(textureSampler, coord + ivec2(1, 0), 0).rg;\r\n                vec2 f3 = texelFetch(textureSampler, coord + ivec2(1, 1), 0).rg;\r\n                vec2 f4 = texelFetch(textureSampler, coord + ivec2(0, 1), 0).rg;\r\n            #endif\r\n\r\n                float minz = min(min(min(f1.x, f2.x), f3.x), f4.x);\r\n                float maxz = max(max(max(f1.y, f2.y), f3.y), f4.y);\r\n\r\n                glFragColor = vec2(minz, maxz);\r\n            }\r\n        `;\r\n\r\n        //\r\n        Effect.ShadersStore.depthReductionALastFragmentShader = `\r\n            #version 300 es\r\n            precision highp float;\r\n            precision highp int;\r\n\r\n            in vec2 vUV;\r\n\r\n            uniform sampler2D textureSampler;\r\n\r\n            out vec2 glFragColor;\r\n\r\n            void main(void)\r\n            {\r\n                ivec2 size = textureSize(textureSampler, 0);\r\n                vec2 texcoord = vUV * (vec2(size - 1));\r\n                ivec2 coord = ivec2(texcoord);\r\n\r\n                vec2 f1 = texelFetch(textureSampler, coord % size, 0).rg;\r\n                vec2 f2 = texelFetch(textureSampler, (coord + ivec2(1, 0)) % size, 0).rg;\r\n                vec2 f3 = texelFetch(textureSampler, (coord + ivec2(1, 1)) % size, 0).rg;\r\n                vec2 f4 = texelFetch(textureSampler, (coord + ivec2(0, 1)) % size, 0).rg;\r\n\r\n                float minz = min(f1.x, f2.x);\r\n                float maxz = max(f1.y, f2.y);\r\n\r\n                glFragColor = vec2(minz, maxz);\r\n            }\r\n        `;\r\n\r\n        //\r\n        Effect.ShadersStore.depthReductionLastFragmentShader = `\r\n            #version 300 es\r\n            precision highp float;\r\n            precision highp int;\r\n\r\n            in vec2 vUV;\r\n\r\n            uniform sampler2D textureSampler;\r\n\r\n            out vec2 glFragColor;\r\n\r\n            void main(void)\r\n            {\r\n                vec2 f1 = texelFetch(textureSampler, ivec2(0), 0).rg;\r\n\r\n                glFragColor = f1;\r\n            }\r\n        `;\r\n\r\n        //var imagePass = new PassPostProcess(\"imagePass\", 1.0, null, Texture.NEAREST_SAMPLINGMODE, this._engine);\r\n\r\n        var depthReductionPhases: PostProcess[] = [];\r\n\r\n        // phase 0\r\n        var depthReductionInitial = new (PostProcess as any)(\r\n            'Initial depth reduction phase',\r\n            'depthReductionInitial',  // shader\r\n            null,\r\n            ['depthTexture'], // textures\r\n            1.0,  // options\r\n            null, // camera\r\n            Constants.TEXTURE_NEAREST_NEAREST, // sampling\r\n            this._engine, // engine\r\n            false, // reusable\r\n            undefined, // defines\r\n            Constants.TEXTURETYPE_HALF_FLOAT,\r\n            undefined,\r\n            undefined,\r\n            undefined,\r\n            Constants.TEXTUREFORMAT_RG,\r\n        );\r\n\r\n        depthReductionInitial.autoClear = false;\r\n        depthReductionInitial.forceFullscreenViewport = false;\r\n\r\n        depthReductionInitial.onApply = (effect: Effect) => {\r\n            effect.setTexture('depthTexture', depthMap);\r\n        };\r\n\r\n        depthReductionPhases.push(depthReductionInitial);\r\n\r\n        let w = depthMap.getSize().width, h = depthMap.getSize().height;\r\n        let index = 1;\r\n        let depthReduction: PostProcess;\r\n\r\n        while (w > 1 || h > 1) {\r\n            w = Math.max(Math.round(w / 2), 1);\r\n            h = Math.max(Math.round(h / 2), 1);\r\n\r\n            console.log(w, h);\r\n\r\n            depthReduction = new (PostProcess as any)(\r\n                'Depth reduction phase ' + index,\r\n                (w == 1 && h == 1) ? 'depthReductionLast' : (w == 1 || h == 1) ? 'depthReductionALast' : 'depthReduction',  // shader\r\n                null, // attributes\r\n                null,\r\n                { width: w, height: h },  // options\r\n                null, // camera\r\n                Constants.TEXTURE_NEAREST_NEAREST, // sampling\r\n                this._engine, // engine\r\n                false, // reusable\r\n                undefined, // defines\r\n                Constants.TEXTURETYPE_HALF_FLOAT,\r\n                undefined,\r\n                undefined,\r\n                undefined,\r\n                Constants.TEXTUREFORMAT_RG,\r\n            );\r\n\r\n            depthReduction.autoClear = false;\r\n            depthReduction.forceFullscreenViewport = false;\r\n\r\n            depthReductionPhases.push(depthReduction);\r\n\r\n            index++;\r\n\r\n            if ((w == 1 && h == 1) || (w == 2 && h == 1)/* || (w == 6 && h == 3)*/) {\r\n                let func = (w: number, h: number, depthReduction: PostProcess) => {\r\n                    let first0 = true;\r\n                    let buffer0 = new Float32Array(4 * w * h);\r\n                    return () => {\r\n                        if (first0) {\r\n                            let texture = depthReduction.inputTexture;\r\n                            this._readTexturePixels(scene.getEngine(), texture, w, h, -1, 0, buffer0);\r\n                            if ((buffer0[0] != 0 && buffer0[0] != 1) || buffer0[1] != 0) {\r\n                                first0 = false;\r\n                                console.log('w = ' + w + ', h = ' + h, buffer0);\r\n                            }\r\n                        }\r\n                    };\r\n                };\r\n                depthReduction.onAfterRenderObservable.add(func(w, h, depthReduction));\r\n\r\n            }\r\n        }\r\n\r\n        /*var imagePass = new (PassPostProcess as any)(\r\n            \"imagePass\",\r\n            { width: w, height: h },\r\n            null,\r\n            Constants.TEXTURE_NEAREST_NEAREST,\r\n            this._engine,\r\n            false,\r\n            Constants.TEXTURETYPE_HALF_FLOAT,\r\n            undefined,\r\n            Constants.TEXTUREFORMAT_RG,\r\n        );\r\n\r\n        imagePass.autoClear = false;\r\n        imagePass.forceFullscreenViewport = false;\r\n\r\n        depthReductionPhases.push(imagePass);\r\n\r\n        imagePass.onApply = (effect: Effect) => {\r\n            effect.setTextureFromPostProcess('textureSampler', depthReductionPhases[1]);\r\n        };*/\r\n\r\n        // the render pipeline\r\n        /*var pipeline = new PostProcessRenderPipeline(this._engine, 'pipeline');\r\n        var renderPasses = new PostProcessRenderEffect(\r\n            this._engine, 'renderPasses', function() { return depthReductionPhases; });\r\n\r\n        pipeline.addEffect(renderPasses);\r\n        scene.postProcessRenderPipelineManager.addPipeline(pipeline);\r\n        scene.postProcessRenderPipelineManager.attachCamerasToRenderPipeline('pipeline', camera);*/\r\n\r\n        let postProcessManager = new PostProcessManager(scene);\r\n\r\n        scene.onBeforeDrawPhaseObservable.add(() => {\r\n            //postProcessManager._prepareFrame(depthMap.getInternalTexture(), depthReductionPhases);\r\n            depthReductionPhases[0].activate(camera, depthMap.getInternalTexture());\r\n\r\n            postProcessManager.directRender(depthReductionPhases, depthReductionPhases[0].inputTexture, false);\r\n\r\n            this._engine.unBindFramebuffer(depthReductionPhases[0].inputTexture, false);\r\n        });\r\n\r\n        var buffer = new Float32Array(4 * depthMap.getSize().width * depthMap.getSize().height);\r\n\r\n        let first = true;\r\n\r\n        scene.onBeforeRenderObservable.add(() => {\r\n            if (this._skyBox) {\r\n                this._skyBox.position.copyFrom(camera.position);\r\n            }\r\n        });\r\n\r\n        scene.onAfterRenderObservable.add(() => {\r\n\r\n            if (first) {\r\n                this._readTexturePixels(scene.getEngine(), depthMap._texture!, depthMap.getSize().width, depthMap.getSize().height, -1, 0, buffer);\r\n                first = false;\r\n                console.log('calc min max', this.calcMinMax(buffer));\r\n                console.log(buffer);\r\n            }\r\n\r\n        });\r\n\r\n        return Promise.resolve(0);\r\n    }\r\n\r\n    public _readTexturePixels(engine: Engine, texture: InternalTexture, width: number, height: number, faceIndex = -1, level = 0, buffer: Nullable<ArrayBufferView> = null): ArrayBufferView {\r\n        let gl = engine._gl;\r\n        if (!this._dummyFramebuffer) {\r\n            let dummy = gl.createFramebuffer();\r\n\r\n            if (!dummy) {\r\n                throw new Error(\"Unable to create dummy framebuffer\");\r\n            }\r\n\r\n            this._dummyFramebuffer = dummy;\r\n        }\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, this._dummyFramebuffer);\r\n\r\n        if (faceIndex > -1) {\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_CUBE_MAP_POSITIVE_X + faceIndex, texture._webGLTexture, level);\r\n        } else {\r\n            gl.framebufferTexture2D(gl.FRAMEBUFFER, gl.COLOR_ATTACHMENT0, gl.TEXTURE_2D, texture._webGLTexture, level);\r\n        }\r\n\r\n        let readType = (texture.type !== undefined) ? engine._getWebGLTextureType(texture.type) : gl.UNSIGNED_BYTE;\r\n\r\n        switch (readType) {\r\n            case gl.UNSIGNED_BYTE:\r\n                if (!buffer) {\r\n                    buffer = new Uint8Array(4 * width * height);\r\n                }\r\n                readType = gl.UNSIGNED_BYTE;\r\n                break;\r\n            default:\r\n                if (!buffer) {\r\n                    buffer = new Float32Array(4 * width * height);\r\n                }\r\n                readType = gl.FLOAT;\r\n                break;\r\n        }\r\n\r\n        gl.readPixels(0, 0, width, height, gl.RGBA, readType, <DataView>buffer);\r\n        gl.bindFramebuffer(gl.FRAMEBUFFER, (engine as any)._currentFramebuffer);\r\n\r\n        return buffer;\r\n    }\r\n\r\n    protected calcMinMax(buffer: Float32Array): [number, number] {\r\n        let min = 1, max = 0;\r\n\r\n        for (let i = 0; i < buffer.length; i += 4) {\r\n            let f = buffer[i];\r\n\r\n            if (f < min) {\r\n                min = f;\r\n            }\r\n            if (f > max && f < 1.0) {\r\n                max = f;\r\n            }\r\n        }\r\n\r\n        return [min, max];\r\n    }\r\n\r\n}\r\n\r\nSampleBasic.registerSampleClass(\"depthminmax\", {\r\n    \"displayName\": \"Calculate depth min and max in scene zbuffer\",\r\n    \"description\": \"\",\r\n    \"class\": DepthMinMax,\r\n});\r\n","import {\r\n    Scene,\r\n    Vector3,\r\n    UniversalCamera,\r\n    HemisphericLight,\r\n    StandardMaterial,\r\n    MeshBuilder,\r\n    Effect,\r\n    ShaderMaterial,\r\n    Color4,\r\n    PointLight,\r\n    Color3,\r\n    Mesh,\r\n    Engine,\r\n    DynamicTexture,\r\n    AbstractMesh,\r\n    Material,\r\n} from \"babylonjs\";\r\n\r\nimport * as GUI from \"babylonjs-gui\";\r\n\r\nimport SampleBasic from \"../SampleBasic\";\r\n\r\nexport default class DrawEdges extends SampleBasic {\r\n\r\n    protected populateScene(scene: Scene, camera: UniversalCamera) {\r\n        camera.position.x = 0;\r\n        camera.position.y = 5;\r\n        camera.position.z = -10;\r\n\r\n        camera.setTarget(Vector3.Zero());\r\n\r\n        scene.clearColor = new Color4(0.54, 0.74, 1., 1);\r\n\r\n        var light = new HemisphericLight(\"light1\", new Vector3(0, 1, 0), scene);\r\n        light.intensity = 0.7;\r\n        var pl = new PointLight(\"pl\", Vector3.Zero(), scene);\r\n        pl.diffuse = new Color3(1, 1, 1);\r\n        pl.specular = new Color3(1, 1, 1);\r\n        pl.intensity = 0.8;\r\n\r\n        // GUI\r\n        var advancedTexture = GUI.AdvancedDynamicTexture.CreateFullscreenUI(\"ui1\");\r\n\r\n        var createLabel = function(mesh: AbstractMesh) {\r\n            var label = new GUI.Rectangle(\"label for \" + mesh.name);\r\n            label.height = \"30px\";\r\n            label.alpha = 0.5;\r\n            label.width = \"100px\";\r\n            label.linkOffsetY = 30;\r\n            advancedTexture.addControl(label);\r\n            label.linkWithMesh(mesh);\r\n\r\n            var text1 = new GUI.TextBlock();\r\n            text1.text = mesh.name;\r\n            text1.color = \"black\";\r\n            label.addControl(text1);\r\n\r\n            return label;\r\n        };\r\n\r\n        const whiteMaterials = true;\r\n\r\n        Effect.ShadersStore[\"customVertexShader\"] = `\r\n            precision highp float;\r\n            // Attributes\r\n            attribute vec3 position;\r\n            // Uniforms\r\n            uniform mat4 worldViewProjection;\r\n            uniform mat4 world;\r\n            // Varying\r\n            varying vec4 wpos;\r\n            void main(void) {\r\n                vec4 q = vec4(position, 1.0);\r\n                wpos = world * q;\r\n                gl_Position = worldViewProjection * q;\r\n            }`;\r\n\r\n        Effect.ShadersStore[\"customFragmentShader\"] = `\r\n            precision highp float;\r\n            uniform vec3 lineColor;\r\n            varying vec4 wpos;\r\n            void main(void) {\r\n                vec4 col = vec4(lineColor, 1.);\r\n                float sum = wpos.x + wpos.y + wpos.z;\r\n                if (mod(sum, .33) < 0.12) discard;\r\n                gl_FragColor = vec4(col.xyz, 0.3);\r\n            }`;\r\n\r\n        // define material\r\n        const lineMaterial1 = new StandardMaterial(\"lineMaterial_1\", scene);\r\n        lineMaterial1.emissiveColor = whiteMaterials ? new Color3(0, 0, 0) : new Color3(1, 1, 1);\r\n        lineMaterial1.disableLighting = true;\r\n\r\n        var lineMaterial1_hidden = new ShaderMaterial(\"shader\", scene, {\r\n            vertex: \"custom\",\r\n            fragment: \"custom\",\r\n            },\r\n            {\r\n                attributes: [\"position\"],\r\n                uniforms: [\"world\", \"worldViewProjection\", \"lineColor\"],\r\n                needAlphaBlending: true\r\n            });\r\n\r\n        lineMaterial1_hidden.setColor3(\"lineColor\", lineMaterial1.emissiveColor);\r\n        lineMaterial1_hidden.depthFunction = Engine.ALWAYS;\r\n\r\n        const lineMaterial2 = new StandardMaterial(\"lineMaterial_2\", scene);\r\n        lineMaterial2.diffuseColor = new Color3(1, 0, 0);\r\n\r\n        const materialX = new StandardMaterial(\"materialX\", scene);\r\n        materialX.diffuseColor = whiteMaterials ? new Color3(1, 1, 1) : new Color3(0, 0, 1);\r\n        if (whiteMaterials) {\r\n            materialX.emissiveColor = materialX.diffuseColor;\r\n            materialX.disableLighting = true;\r\n        }\r\n        // materialX.alpha = 0.2;\r\n\r\n        const materialZ = new StandardMaterial(\"materialZ\", scene);\r\n        materialZ.diffuseColor = whiteMaterials ? new Color3(1, 1, 1) : new Color3(0, 1, 0);\r\n        if (whiteMaterials) {\r\n            materialZ.emissiveColor = materialZ.diffuseColor;\r\n            materialZ.disableLighting = true;\r\n        }\r\n        // materialZ.alpha = 0.2;\r\n\r\n        const materialY = new StandardMaterial(\"materialY\", scene);\r\n        materialY.diffuseColor = whiteMaterials ? new Color3(1, 1, 1) : new Color3(1, 0, 0);\r\n        if (whiteMaterials) {\r\n            materialY.emissiveColor = materialY.diffuseColor;\r\n            materialY.disableLighting = true;\r\n        }\r\n        // materialY.alpha = 0.2;\r\n\r\n        // create a line\r\n        const createLine = (id: string, position: Vector3, length: number, direction: string, radius: number, mat?: Material) => {\r\n            if (!radius) { radius = 0.005; }\r\n            if (!mat) { mat = lineMaterial1; }\r\n            const points = direction === 'y'\r\n            ? [new Vector3(0, -length / 2, 0), new Vector3(0, length / 2, 0)]\r\n            : direction === 'x'\r\n                ? [new Vector3(-length / 2, 0, 0), new Vector3(length / 2, 0, 0)]\r\n                : [new Vector3(0, 0, -length / 2), new Vector3(0, 0, length / 2)];\r\n\r\n            const shape = MeshBuilder.CreateTube(id, {path: points, radius: radius, sideOrientation: Mesh.DOUBLESIDE}, scene);\r\n            shape.position = position;\r\n            shape.material = mat;\r\n            shape.renderingGroupId = 0;\r\n            return shape;\r\n        };\r\n\r\n        // distance from center of the shape to camera\r\n        const distance = (mesh: AbstractMesh) => {\r\n            const camPos = camera.position;\r\n            const meshPos = mesh.position;\r\n            const pow = Math.pow(meshPos.x - camPos.x, 2) + Math.pow(meshPos.y - camPos.y, 2) + Math.pow(meshPos.z - camPos.z, 2);\r\n            return Math.sqrt(pow);\r\n        };\r\n\r\n        const planes: any = {};\r\n        let counter = 0;\r\n        const markers: any = {};\r\n\r\n        // points should be in counter clockwise order\r\n        const CreatePlanes = (points: Array<Vector3>, y: number) => {\r\n            planes[`horizontal${counter}`] = MeshBuilder\r\n                .CreatePolygon(`horizontal${counter}`, {shape: points, sideOrientation: Mesh.DOUBLESIDE }, scene);\r\n            planes[`horizontal${counter}`].position.y = y;\r\n            planes[`horizontal${counter}`].material = materialY;\r\n            counter++;\r\n        };\r\n\r\n        const CreateMarkers = (points: Array<Vector3>) => {\r\n            points.forEach((p, i) => {\r\n                markers[`marker_${i}`] = Mesh.CreateSphere(`marker_${i}`, 32, 0.2, scene);\r\n                markers[`marker_${i}`].position = new Vector3(p.x, p.y, p.z);\r\n                markers[`marker_${i}`].material = lineMaterial2;\r\n            });\r\n        };\r\n\r\n        const a = 1.5;\r\n        const lineLength = 3;\r\n        const b = lineLength / 2;\r\n\r\n        const data = [\r\n            // top\r\n            { points: [0, a, b], length: lineLength, direction: 'x' },\r\n            { points: [-b, a, 0], length: lineLength, direction: 'z' },\r\n            { points: [0, a, -b], length: lineLength, direction: 'x' },\r\n            { points: [b, a, -b +  lineLength / 6], length: lineLength / 3, direction: 'z' },\r\n            { points: [lineLength / 3, a, -b + (lineLength / 3)], length: lineLength / 3, direction: 'x' },\r\n            { points: [b - lineLength / 3, a, 0], length: lineLength / 3, direction: 'z' },\r\n            { points: [lineLength / 3, a, b - lineLength / 3], length: lineLength / 3, direction: 'x' },\r\n            { points: [b, a, b - lineLength / 6], length: lineLength / 3, direction: 'z' },\r\n            // bottom\r\n            { points: [0, -a, b], length: lineLength, direction: 'x' },\r\n            { points: [-b, -a, 0], length: lineLength, direction: 'z' },\r\n            { points: [0, -a, -b], length: lineLength, direction: 'x' },\r\n            { points: [b, -a, -b +  lineLength / 6], length: lineLength / 3, direction: 'z' },\r\n            { points: [lineLength / 3, -a, -b + (lineLength / 3)], length: lineLength / 3, direction: 'x' },\r\n            { points: [b - lineLength / 3, -a, 0], length: lineLength / 3, direction: 'z' },\r\n            { points: [lineLength / 3, -a, b - lineLength / 3], length: lineLength / 3, direction: 'x' },\r\n            { points: [b, -a, b - lineLength / 6], length: lineLength / 3, direction: 'z' },\r\n            // pillars\r\n            { points: [b, 0, b], length: lineLength, direction: 'y' },\r\n            { points: [-b, 0, b], length: lineLength, direction: 'y' },\r\n            { points: [-b, 0, -b], length: lineLength, direction: 'y' },\r\n            { points: [b, 0, -b], length: lineLength, direction: 'y' },\r\n            { points: [b, 0, -b + lineLength / 3], length: lineLength, direction: 'y' },\r\n            { points: [b - lineLength / 3, 0, -b + lineLength / 3], length: lineLength, direction: 'y' },\r\n            { points: [b - lineLength / 3, 0, b - lineLength / 3], length: lineLength, direction: 'y' },\r\n            { points: [b, 0, b - lineLength / 3], length: lineLength, direction: 'y' }\r\n        ];\r\n\r\n        const genHorizontalFaces = () => {\r\n            // unique y values\r\n            const uniqueValues = [...new Set(data.map((x) => x.points[1]))];\r\n            uniqueValues.forEach((plane) => {\r\n                const f = data.filter((d) => d.points[1] === plane);\r\n                let face: Array<Vector3> = [];\r\n                f.forEach((p) => {\r\n                    if (p.direction === 'z') {\r\n                        face.push(new Vector3(p.points[0], p.points[1], p.points[2] + p.length / 2));\r\n                        face.push(new Vector3(p.points[0], p.points[1], p.points[2] - p.length / 2));\r\n                    }\r\n                    if (p.direction === 'x') {\r\n                        face.push(new Vector3(p.points[0] + p.length / 2, p.points[1], p.points[2]));\r\n                        face.push(new Vector3(p.points[0] - p.length / 2, p.points[1], p.points[2]));\r\n                    }\r\n                });\r\n                // remove duplicates\r\n                const dedup = face.filter((v, i, a) => a.findIndex((t) => (t.x === v.x && t.y === v.y && t.z === v.z)) === i);\r\n                if (dedup.length) {\r\n                    //CreateMarkers(dedup);\r\n                    CreatePlanes(dedup, plane);\r\n                }\r\n            });\r\n        };\r\n\r\n        const genVerticalFacesX = () => {\r\n            // unique y values\r\n            const uniqueValues = [...new Set(data.map((x) => x.points[2]))];\r\n            uniqueValues.forEach((plane) => {\r\n                const f1 = data.filter((d) => d.points[2] === plane && d.direction === 'x');\r\n                if (f1.length) {\r\n                    const unique = [...new Set(f1.map((x) => x.points[2]))];\r\n                    unique.forEach((x) => {\r\n                        const f = f1.filter((d) => d.points[2] === x);\r\n                        const height = f[0].points[1] - f[1].points[1];\r\n                        const yStart = Math.min(f[0].points[1], f[1].points[1]);\r\n                        planes[`verticalX${counter}`] = MeshBuilder\r\n                            .CreateBox(`verticalX${counter}`, {height, width: f[0].length, depth: 0.001}, scene);\r\n                        planes[`verticalX${counter}`].position =  new Vector3(f[0].points[0], 0, f[0].points[2]);\r\n                        planes[`verticalX${counter}`].material = materialX;\r\n                        counter++;\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        const genVerticalFacesZ = () => {\r\n            // unique y values\r\n            const uniqueValues = [...new Set(data.map((x) => x.points[2]))];\r\n            uniqueValues.forEach((plane) => {\r\n                const f1 = data.filter((d) => d.points[2] === plane && d.direction === 'z');\r\n                if (f1.length) {\r\n                    const unique = [...new Set(f1.map((x) => x.points[0]))];\r\n                    unique.forEach((z) => {\r\n                        const f = f1.filter((d) => d.points[0] === z);\r\n                        const height = f[0].points[1] - f[1].points[1];\r\n                        const yStart = Math.min(f[0].points[1], f[1].points[1]);\r\n                        planes[`verticalZ${counter}`] = MeshBuilder\r\n                            .CreateBox(`verticalZ${counter}`, {height, depth: f[0].length, width: 0.001}, scene);\r\n                        planes[`verticalZ${counter}`].position =  new Vector3(f[0].points[0], 0, f[0].points[2]);\r\n                        planes[`verticalZ${counter}`].material = materialZ;\r\n                        counter++;\r\n                    });\r\n                }\r\n            });\r\n        };\r\n\r\n        const genMarkers = () => {\r\n            // unique y values\r\n            const uniqueValues = [...new Set(data.map((x) => x.points[1]))];\r\n            uniqueValues.forEach((plane) => {\r\n                const f = data.filter((d) => d.points[1] === plane);\r\n                let face: Array<Vector3> = [];\r\n                f.forEach((p) => {\r\n                    if (p.direction === 'z') {\r\n                        face.push(new Vector3(p.points[0], p.points[1], p.points[2] + p.length / 2));\r\n                        face.push(new Vector3(p.points[0], p.points[1], p.points[2] - p.length / 2));\r\n                    }\r\n                    if (p.direction === 'x') {\r\n                        face.push(new Vector3(p.points[0] + p.length / 2, p.points[1], p.points[2]));\r\n                        face.push(new Vector3(p.points[0] - p.length / 2, p.points[1], p.points[2]));\r\n                    }\r\n                });\r\n                // remove duplicates\r\n                const dedup = face.filter((v, i, a) => a.findIndex((t) => (t.x === v.x && t.y === v.y && t.z === v.z)) === i);\r\n                if (dedup.length) {\r\n                    CreateMarkers(dedup);\r\n                }\r\n            });\r\n        };\r\n\r\n        // comment these 3 functions to hide planes\r\n        genHorizontalFaces();\r\n        genVerticalFacesX();\r\n        genVerticalFacesZ();\r\n\r\n        const lines: any = {};\r\n        data.forEach((d, i) => {\r\n            const p = d.points;\r\n            lines[`line_${i}`] = createLine(`line_${i}`, new Vector3(p[0], p[1], p[2]) , d.length, d.direction, 0.03);\r\n        });\r\n\r\n        data.forEach((d, i) => {\r\n            const p = d.points;\r\n            const meshl = createLine(`line2_${i}`, new Vector3(p[0], p[1], p[2]) , d.length, d.direction, 0.005, lineMaterial1_hidden);\r\n        });\r\n\r\n        genMarkers();\r\n\r\n        function showWorldAxis(size: number) {\r\n            var makeTextPlane = function(text: string, color: string, size: number) {\r\n                var dynamicTexture = new DynamicTexture(\"DynamicTexture\", 50, scene, true);\r\n                dynamicTexture.hasAlpha = true;\r\n                dynamicTexture.drawText(text, 5, 40, \"bold 36px Arial\", color , \"transparent\", true);\r\n                var plane = Mesh.CreatePlane(\"TextPlane\", size, scene, true);\r\n                plane.material = new StandardMaterial(\"TextPlaneMaterial\", scene);\r\n                plane.material.backFaceCulling = false;\r\n                (plane.material as StandardMaterial).specularColor = new Color3(0, 0, 0);\r\n                (plane.material as StandardMaterial).diffuseTexture = dynamicTexture;\r\n            return plane;\r\n            };\r\n            var axisX = Mesh.CreateLines(\"axisX\", [\r\n            Vector3.Zero(), new Vector3(size, 0, 0), new Vector3(size * 0.95, 0.05 * size, 0),\r\n            new Vector3(size, 0, 0), new Vector3(size * 0.95, -0.05 * size, 0)\r\n            ], scene);\r\n            axisX.color = new Color3(1, 0, 0);\r\n            var xChar = makeTextPlane(\"X\", \"red\", size / 10);\r\n            xChar.position = new Vector3(0.9 * size, -0.05 * size, 0);\r\n            var axisY = Mesh.CreateLines(\"axisY\", [\r\n                Vector3.Zero(), new Vector3(0, size, 0), new Vector3(-0.05 * size, size * 0.95, 0),\r\n                new Vector3(0, size, 0), new Vector3(0.05 * size, size * 0.95, 0)\r\n                ], scene);\r\n            axisY.color = new Color3(0, 1, 0);\r\n            var yChar = makeTextPlane(\"Y\", \"green\", size / 10);\r\n            yChar.position = new Vector3(0, 0.9 * size, -0.05 * size);\r\n            var axisZ = Mesh.CreateLines(\"axisZ\", [\r\n                Vector3.Zero(), new Vector3(0, 0, size), new Vector3(0 , -0.05 * size, size * 0.95),\r\n                new Vector3(0, 0, size), new Vector3(0, 0.05 * size, size * 0.95)\r\n                ], scene);\r\n            axisZ.color = new Color3(0, 0, 1);\r\n            var zChar = makeTextPlane(\"Z\", \"blue\", size / 10);\r\n            zChar.position = new Vector3(0, 0.05 * size, 0.9 * size);\r\n        }\r\n\r\n        showWorldAxis(1);\r\n\r\n    }\r\n\r\n}\r\n\r\nSampleBasic.registerSampleClass(\"drawedges\", {\r\n    \"displayName\": \"Create a Render Target Texture and use it in a post process pass\",\r\n    \"description\": \"\",\r\n    \"class\": DrawEdges,\r\n});\r\n","import * as React from \"react\";\r\n\r\nimport * as ReactDOM from \"react-dom\";\r\n\r\nimport {\r\n    Container,\r\n    Icon,\r\n    IconButton,\r\n    List,\r\n    ListItem,\r\n    ListItemSecondaryAction,\r\n    ListItemText,\r\n    Slider,\r\n    Typography,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n    createMuiTheme,\r\n    makeStyles,\r\n    ThemeProvider,\r\n    withStyles,\r\n} from '@material-ui/core/styles';\r\n\r\nimport { yellow } from '@material-ui/core/colors';\r\n\r\nimport Draggable, { DraggableData, DraggableEvent } from 'react-draggable';\r\nimport { Resizable, ResizeDirection, NumberSize } from 're-resizable';\r\n\r\nimport {\r\n    Engine\r\n} from \"babylonjs\";\r\n\r\nexport interface IDimensions {\r\n    x: number;\r\n    y: number;\r\n    width: number;\r\n    height: number;\r\n    minWidth: number;\r\n    minHeight: number;\r\n}\r\n\r\nexport enum enumDefaultPosition {\r\n    TOP_LEFT,\r\n    TOP_RIGHT,\r\n}\r\n\r\nexport const PrettoSlider = withStyles({\r\n    root: {\r\n      color: '#52af77',\r\n      height: 8,\r\n      width: '90%',\r\n      padding: 0,\r\n    },\r\n    thumb: {\r\n      height: 16,\r\n      width: 16,\r\n      backgroundColor: '#fff',\r\n      border: '2px solid currentColor',\r\n      marginTop: -6,\r\n      marginLeft: -2,\r\n      '&:focus,&:hover,&$active': {\r\n        boxShadow: 'inherit',\r\n      },\r\n      '&.Mui-disabled': {\r\n        width: 12,\r\n        height: 12,\r\n        marginTop: -4,\r\n      },\r\n    },\r\n    active: {},\r\n    valueLabel: {\r\n      left: 'calc(-50% - 4px)',\r\n    },\r\n    track: {\r\n      height: 6,\r\n      borderRadius: 4,\r\n    },\r\n    rail: {\r\n      height: 6,\r\n      borderRadius: 4,\r\n    },\r\n})(Slider);\r\n\r\nexport default class GUI {\r\n\r\n    public dimensions: IDimensions;\r\n    public zIndex: number;\r\n\r\n    protected _name:            string;\r\n    protected _engine:          Engine;\r\n    protected _showCloseButton: boolean;\r\n    protected _guiElemCont:     HTMLElement;\r\n    protected _defaultPos:      enumDefaultPosition;\r\n    protected _useStyles:       any;\r\n\r\n    constructor(name: string, engine: Engine) {\r\n        this._name = name;\r\n        this._engine = engine;\r\n        this._showCloseButton = true;\r\n\r\n        this.dimensions = {\r\n            x: 0,\r\n            y: 0,\r\n            width: 300,\r\n            height: 400,\r\n            minWidth: 100,\r\n            minHeight: 50,\r\n        };\r\n\r\n        this._guiElemCont = null as any;\r\n        this._defaultPos = enumDefaultPosition.TOP_RIGHT;\r\n        this.zIndex = 20;\r\n\r\n        this._useStyles = makeStyles((theme) => ({\r\n            propertyTitle: {\r\n              padding: '4px 0px 4px 8px',\r\n              textAlign: 'left',\r\n              color: 'white',\r\n              whiteSpace: 'nowrap',\r\n              marginBottom: theme.spacing(0),\r\n              textShadow: '1px 1px black',\r\n            },\r\n            propertyValue: {\r\n                padding: '4px 4px 4px 4px',\r\n                textAlign: 'left',\r\n                color: '#00ff00',\r\n                whiteSpace: 'nowrap',\r\n                marginBottom: theme.spacing(0),\r\n                backgroundColor: '#1565c060',\r\n                textShadow: 'none',\r\n            },\r\n            subPropertyTitle: {\r\n                padding: '4px 2px 4px 4px',\r\n                marginLeft: \"-12px\",\r\n                textAlign: 'left',\r\n                color: 'white',\r\n                whiteSpace: 'nowrap',\r\n                marginBottom: theme.spacing(0),\r\n                textShadow: '1px 1px black',\r\n            },\r\n        }));\r\n    }\r\n\r\n    public get showCloseButton(): boolean {\r\n        return this._showCloseButton;\r\n    }\r\n\r\n    public set showCloseButton(s: boolean) {\r\n        this._showCloseButton = s;\r\n    }\r\n\r\n    public get defaultPosition(): enumDefaultPosition {\r\n        return this._defaultPos;\r\n    }\r\n\r\n    public set defaultPosition(d: enumDefaultPosition) {\r\n        this._defaultPos = d;\r\n    }\r\n\r\n    protected createGUITheme() {\r\n        let theme = createMuiTheme({});\r\n        theme = {\r\n            ...theme,\r\n            overrides: {\r\n                MuiButton: {\r\n                },\r\n                MuiContainer: {\r\n                    fixed: {\r\n                        padding: '0',\r\n                        backgroundColor: '#e0e0e080',\r\n                        border: '1px solid white',\r\n                        color: 'white',\r\n                        height: '100%',\r\n                        overflowX: 'hidden',\r\n                        overflowY: 'auto',\r\n                    },\r\n                    maxWidthLg: {\r\n                        [theme.breakpoints.up(\"lg\")]: {\r\n                            maxWidth: 'inherit'\r\n                        },\r\n                    }\r\n                },\r\n                MuiExpansionPanel: {\r\n                    root: {\r\n                        '&$expanded': {\r\n                            margin: '0',\r\n                        }\r\n                    },\r\n                },\r\n                MuiExpansionPanelSummary: {\r\n                    root: {\r\n                        padding: '0 6px 0 4px',\r\n                        color: yellow[300],\r\n                        backgroundColor: '#40C0FF60',\r\n                        minHeight: 'inherit',\r\n                        textShadow: '1px 1px black',\r\n                        '&$expanded': {\r\n                            minHeight: 'inherit',\r\n                        }\r\n                    },\r\n                    expandIcon: {\r\n                        padding: '2px 8px 2px 0px',\r\n                        '&$expanded': {\r\n                            padding: '2px 0 2px 8px',\r\n                        }\r\n                    },\r\n                    content: {\r\n                        margin: 'inherit',\r\n                        '&$expanded': {\r\n                            margin: 'inherit',\r\n                        }\r\n                    },\r\n                },\r\n                MuiFilledInput: {\r\n                    input: {\r\n                        padding: \"0\",\r\n                    },\r\n                    underline: {\r\n                        '&:before': {\r\n                            borderBottom: '0px solid black',\r\n                        },\r\n                    },\r\n                },\r\n                MuiFormControl: {\r\n                    root: {\r\n                        width: \"100%\",\r\n                    },\r\n                },\r\n                MuiGrid: {\r\n                    \"spacing-xs-1\": {\r\n                        \"& > .MuiGrid-item\": {\r\n                            padding: \"1px\",\r\n                        },\r\n                    },\r\n                },\r\n                MuiIcon: {\r\n                    root: {\r\n                        'color': 'white',\r\n                    }\r\n                },\r\n                MuiInput: {\r\n                    underline: {\r\n                        \"&:before\": {\r\n                            borderBottom: \"0px solid black\",\r\n                        },\r\n                    },\r\n                },\r\n                MuiInputBase: {\r\n                    input: {\r\n                        padding: '0',\r\n                        color: '#00ff00',\r\n                    },\r\n                },\r\n                MuiListItem: {\r\n                    root: {\r\n                        textAlign: 'center',\r\n                        paddingTop: '0',\r\n                    },\r\n                },\r\n                MuiMenu: {\r\n                    paper: {\r\n                        backgroundColor: \"white\",\r\n                    },\r\n                },\r\n                MuiPaper: {\r\n                    root: {\r\n                        backgroundColor: 'transparent',\r\n                    },\r\n                },\r\n                MuiSelect: {\r\n                    icon: {\r\n                        color: \"white\",\r\n                    },\r\n                },\r\n                MuiSwitch: {\r\n                    colorSecondary: {\r\n                        \"&$checked\": {\r\n                            color: \"#69f0ae\",\r\n                            \"& + .MuiSwitch-track\": {\r\n                                backgroundColor: \"#69f0ae\",\r\n                            },\r\n                        },\r\n                    },\r\n                    root: {\r\n                        width: \"48px\",\r\n                        height: \"20px\",\r\n                        padding: \"0\",\r\n                    },\r\n                    switchBase: {\r\n                        paddingTop: \"4px\",\r\n                        height: \"12px\",\r\n                    },\r\n                    thumb: {\r\n                        width: '14px',\r\n                        height: '14px',\r\n                    },\r\n                },\r\n            },\r\n\r\n            props: {\r\n            }\r\n        };\r\n\r\n        return theme;\r\n    }\r\n\r\n    protected canClose(): boolean {\r\n        return true;\r\n    }\r\n\r\n    protected closed(): void {\r\n    }\r\n\r\n    public getBounds(): { x: number, y: number, w: number, h: number } {\r\n        return {\r\n            x: 0,\r\n            y: 0,\r\n            w: this._engine.getRenderWidth(),\r\n            h: this._engine.getRenderHeight() - 20\r\n        };\r\n    }\r\n\r\n    protected handleEvent(event: Event): boolean {\r\n        return true;\r\n    }\r\n\r\n    public createGUI(): void {\r\n        const theme = this.createGUITheme();\r\n\r\n        const GUI = () => {\r\n            const [disableCloseButton, setDisableCloseButton] = React.useState(!this.canClose());\r\n            const [bounds, setBounds] = React.useState({left: 0, top: 0, right: this._engine.getRenderWidth() - this.dimensions.width, bottom: this._engine.getRenderHeight() - 20 });\r\n            const [position, setPosition] = React.useState(() => {\r\n                let pos = { x: 2, y: 2 };\r\n\r\n                if (this.defaultPosition == enumDefaultPosition.TOP_RIGHT) {\r\n                    pos.x = Math.max(bounds.right - 2, bounds.left);\r\n                }\r\n\r\n                return  pos;\r\n            });\r\n            const [maxSizes, setMaxSizes] = React.useState({ maxWidth: this._engine.getRenderWidth(), maxHeight: this._engine.getRenderHeight() });\r\n            const [size, setSize] = React.useState({ width: this.dimensions.width, height: this.dimensions.height });\r\n\r\n            const onStopDrag = (e: DraggableEvent, data: DraggableData): void | false => {\r\n                this.dimensions.x = data.x;\r\n                this.dimensions.y = data.y;\r\n                setPosition({ x: this.dimensions.x, y: this.dimensions.y });\r\n                updateMaxSizes();\r\n            };\r\n\r\n            const updateBounds = (setGUIPosition: boolean = true) => {\r\n                const sbounds = this.getBounds();\r\n                setBounds({\r\n                    left: sbounds.x,\r\n                    top: sbounds.y,\r\n                    right: sbounds.x + sbounds.w - this.dimensions.width,\r\n                    bottom: sbounds.y + sbounds.h - 20\r\n                });\r\n                if (setGUIPosition) {\r\n                    this.dimensions.x = this.defaultPosition == enumDefaultPosition.TOP_RIGHT ? Math.max(sbounds.x + sbounds.w - this.dimensions.width - 2, 0) : 2;\r\n                    this.dimensions.y = 2;\r\n                    setPosition({ x: this.dimensions.x, y: this.dimensions.y });\r\n                }\r\n            };\r\n\r\n            const updateMaxSizes = () => {\r\n                const sbounds = this.getBounds();\r\n                setMaxSizes({\r\n                    maxWidth:  Math.max(sbounds.x + sbounds.w - this.dimensions.x, 0),\r\n                    maxHeight: Math.max(sbounds.y + sbounds.h - this.dimensions.y, 0)\r\n                });\r\n            };\r\n\r\n            const onStopResize = (event: MouseEvent | TouchEvent, direction: ResizeDirection, refToElement: HTMLDivElement, delta: NumberSize) => {\r\n                this.dimensions.width += delta.width;\r\n                this.dimensions.height += delta.height;\r\n                setSize({ width: this.dimensions.width, height: this.dimensions.height });\r\n                updateMaxSizes();\r\n                updateBounds(false);\r\n            };\r\n\r\n            const onResizeWindow = (event: Event) => {\r\n                const updatePosition = this.handleEvent(event);\r\n                updateMaxSizes();\r\n                updateBounds(updatePosition);\r\n            };\r\n\r\n            React.useEffect(() => {\r\n                const handler = (event: Event) => {\r\n                    const updatePosition = this.handleEvent(event);\r\n                    setDisableCloseButton(!this.canClose());\r\n                    updateBounds(updatePosition);\r\n                    updateMaxSizes();\r\n                };\r\n\r\n                window.addEventListener('split_added', handler);\r\n                window.addEventListener('split_removed', handler);\r\n                window.addEventListener('resize', onResizeWindow);\r\n\r\n                return () => {\r\n                    window.removeEventListener('split_added', handler);\r\n                    window.removeEventListener('split_removed', handler);\r\n                    window.removeEventListener('resize', onResizeWindow);\r\n                };\r\n            }, []);\r\n\r\n            return (\r\n                <ThemeProvider theme={theme}>\r\n                    <Draggable position={position} handle=\".gui_title\" bounds={bounds} onStop={onStopDrag}>\r\n                        <Resizable\r\n                            size={size}\r\n                            minWidth={this.dimensions.minWidth}\r\n                            minHeight={this.dimensions.minHeight}\r\n                            maxWidth={maxSizes.maxWidth}\r\n                            maxHeight={maxSizes.maxHeight}\r\n                            onResizeStop={onStopResize}\r\n                            enable={{ top: false, right: true, bottom: true, left: false, topRight: false, bottomRight: true, bottomLeft: false, topLeft: false }}\r\n                            style={{ zIndex: this.zIndex}}\r\n                            >\r\n\r\n                            <Container fixed>\r\n                                <List className=\"gui_title\" disablePadding={true}>\r\n                                    <ListItem>\r\n                                        <ListItemText primary={this._name} />\r\n                                        { this._showCloseButton &&\r\n                                            <ListItemSecondaryAction>\r\n                                                <IconButton edge=\"end\" style={{ marginTop: '-12px', marginRight: '-20px'}} onClick={this.closed.bind(this)} disabled={disableCloseButton}><Icon>cancel_presentation</Icon></IconButton>\r\n                                            </ListItemSecondaryAction>\r\n                                        }\r\n                                    </ListItem>\r\n                                </List>\r\n                                {this.createCustomGUI()}\r\n                            </Container>\r\n\r\n                        </Resizable>\r\n                    </Draggable>\r\n                </ThemeProvider>\r\n            );\r\n        };\r\n\r\n        this._guiElemCont = document.createElement(\"div\");\r\n\r\n        jQuery(this._guiElemCont).css('position', 'absolute').css('user-select', 'none').css('top', '0').css('left', '0').css('z-index', this.zIndex);\r\n\r\n        document.body.append(this._guiElemCont);\r\n\r\n        ReactDOM.render(<GUI />, this._guiElemCont);\r\n    }\r\n\r\n    protected createCustomGUI(): React.ReactElement {\r\n        return (\r\n            <React.Fragment>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    public showGUI(show: boolean): void {\r\n        jQuery(this._guiElemCont).css('display', show ? 'block' : 'none');\r\n    }\r\n\r\n    public toggleGUI(): void {\r\n        jQuery(this._guiElemCont).css('display', jQuery(this._guiElemCont).css('display') === 'none' ? 'block' : 'none');\r\n    }\r\n\r\n    public removeGUI(): void {\r\n        ReactDOM.unmountComponentAtNode(this._guiElemCont);\r\n        this._guiElemCont = null as any;\r\n    }\r\n\r\n}\r\n","import jQuery from \"jquery\";\r\n\r\nimport {\r\n    Engine\r\n} from \"babylonjs\";\r\n\r\nimport \"./allSamples\";\r\nimport Browser from \"./Browser\";\r\nimport Sample from \"./Sample\";\r\n\r\ndeclare var glMatrix: any;\r\n\r\nconst showDebugLayer = false;\r\n\r\nglMatrix.glMatrix.setMatrixArrayType(Array);\r\n\r\nconst qs = Browser.QueryString;\r\n\r\nconst canvas = document.getElementById('renderCanvas') as HTMLCanvasElement,\r\n      engine = new Engine(canvas, true, { premultipliedAlpha: false, stencil: true, disableWebGL2Support: false, preserveDrawingBuffer: true, antialias: false });\r\n\r\nfunction setContainerDimensions() {\r\n    engine.resize();\r\n}\r\n\r\njQuery(window).on('resize', setContainerDimensions);\r\njQuery(window).on('load', setContainerDimensions);\r\n\r\nlet sampleName = Sample.sampleList.keys().next().value;\r\n\r\nif (qs['sample']) {\r\n    sampleName = qs['sample'];\r\n}\r\n\r\nconst sample = Sample.createSample(sampleName, engine, canvas) as Sample;\r\n\r\nif (sample === null) {\r\n    alert(`Unknown sample \"${sampleName}\" !`);\r\n} else {\r\n    let divFps = document.getElementById(\"fps\") as HTMLElement;\r\n\r\n    /*if (showDebugLayer) {\r\n        scene.debugLayer.show({ embedMode: false, handleResize: false, overlay: true, showExplorer: true, showInspector: true });\r\n    }*/\r\n\r\n    engine.runRenderLoop(function() {\r\n        sample.onBeforeRender(engine.getDeltaTime() / 1000.0);\r\n\r\n        sample.render();\r\n\r\n        if (divFps) {\r\n            divFps.innerHTML = engine.getFps().toFixed() + \" fps\";\r\n        }\r\n    });\r\n}\r\n","import * as React from \"react\";\r\n\r\nimport {\r\n    Button,\r\n    Grid,\r\n    MenuItem,\r\n    Paper,\r\n    Select,\r\n    Switch,\r\n} from '@material-ui/core';\r\n\r\nimport {\r\n    withStyles,\r\n} from '@material-ui/core/styles';\r\n\r\nimport {\r\n    Engine,\r\n} from \"babylonjs\";\r\n\r\nimport GUI, { enumDefaultPosition } from \"./GUI\";\r\nimport Sample, { enumSplitMode } from \"./Sample\";\r\n\r\nexport default class MainGUI extends GUI {\r\n\r\n    protected _parent:      Sample;\r\n\r\n    constructor(name: string, engine: Engine, parent: Sample) {\r\n        super(name, engine);\r\n\r\n        this._parent = parent;\r\n\r\n        this.dimensions.width = 250;\r\n        this.dimensions.height = 214;\r\n        this.showCloseButton = false;\r\n        this.defaultPosition = enumDefaultPosition.TOP_LEFT;\r\n    }\r\n\r\n    protected handleEvent(event: Event): boolean {\r\n        return false;\r\n    }\r\n\r\n    protected createCustomGUI(): React.ReactElement {\r\n        const GridQwerty = withStyles({\r\n            root: {\r\n                maxWidth: 60,\r\n            },\r\n        })(Grid);\r\n\r\n        const Properties = () => {\r\n            const classes = this._useStyles();\r\n            const [splitLayout, setSplitLayout] = React.useState(this._parent.splitMode);\r\n            const [splitType, setSplitType] = React.useState(this._parent.splitType);\r\n            const [qwertyMode, setQwertyMode] = React.useState(this._parent.qwertyMode);\r\n\r\n            const changeSplitLayout = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._parent.splitMode = event.target.value as number;\r\n                setSplitLayout(this._parent.splitMode);\r\n            };\r\n\r\n            const changeSplitType = (event: React.ChangeEvent<{ name?: string | undefined; value: unknown }>, child: React.ReactNode) => {\r\n                this._parent.splitType = event.target.value as string;\r\n                setSplitType(this._parent.splitType);\r\n            };\r\n\r\n            const changeQwertyMode = (event: React.ChangeEvent, checked: boolean) => {\r\n                setQwertyMode(checked);\r\n                this._parent.qwertyMode = checked;\r\n            };\r\n\r\n            React.useEffect(() => {\r\n                const handler = (event: Event) => {\r\n                    switch ((event as CustomEvent).detail.type) {\r\n                        case 'setSplitLayout': {\r\n                            setSplitLayout(this._parent.splitMode);\r\n                            break;\r\n                        }\r\n                    }\r\n                };\r\n\r\n                window.addEventListener('gui_set_value', handler);\r\n\r\n                return () => {\r\n                    window.removeEventListener('gui_set_value', handler);\r\n                };\r\n            }, []);\r\n\r\n            return (\r\n                <Grid container spacing={1}>\r\n                    <Grid item xs={6}>\r\n                        <Paper className={classes.propertyTitle}>QWERTY mode</Paper>\r\n                    </Grid>\r\n                    <GridQwerty item xs={6} className={classes.propertyValue}>\r\n                        <Paper className={classes.propertyValue}>\r\n                            <Switch checked={qwertyMode} onChange={changeQwertyMode} />\r\n                        </Paper>\r\n                    </GridQwerty>\r\n                    <Grid item xs={6}>\r\n                        <Paper className={classes.propertyTitle}>Split layout</Paper>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                        <Select\r\n                            className={classes.propertyValue}\r\n                            id=\"splitlayout\"\r\n                            value={splitLayout}\r\n                            onChange={changeSplitLayout}\r\n                            >\r\n                            <MenuItem value={enumSplitMode.SIDE_BY_SIDE}>Side by side</MenuItem>\r\n                            <MenuItem value={enumSplitMode.LINEAR}>Linear</MenuItem>\r\n                        </Select>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                        <Paper className={classes.propertyTitle}>Split type</Paper>\r\n                    </Grid>\r\n                    <Grid item xs={6}>\r\n                        <Select\r\n                            className={classes.propertyValue}\r\n                            id=\"splittype\"\r\n                            value={splitType}\r\n                            onChange={changeSplitType}\r\n                            >\r\n                            { Array.from(this._parent.splitClasses.keys()).map((name) => {\r\n                                const stype = this._parent.splitClasses.get(name)!;\r\n                                return (\r\n                                    <MenuItem key={name} value={name}>{stype.className}</MenuItem>\r\n                                );\r\n                            }) }\r\n                        </Select>\r\n                    </Grid>\r\n                    {this.createCustomGUIProperties()}\r\n                    <Grid item xs={12} style={{ textAlign: 'center', marginTop: '8px' }}>\r\n                        <Button variant=\"contained\" color=\"primary\" onClick={this._parent.createNewSplit.bind(this._parent)}>\r\n                            Create Split\r\n                        </Button>\r\n                    </Grid>\r\n                </Grid>\r\n            );\r\n        };\r\n\r\n        return Properties();\r\n    }\r\n\r\n    protected createCustomGUIProperties(): React.ReactElement {\r\n        return (\r\n            <React.Fragment>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n}\r\n","import {\r\n    Scene,\r\n    Vector3,\r\n    UniversalCamera,\r\n    HemisphericLight,\r\n    StandardMaterial,\r\n    Texture,\r\n    MeshBuilder,\r\n    PassPostProcess,\r\n    Effect,\r\n    ShaderMaterial,\r\n    RenderTargetTexture,\r\n    PostProcess,\r\n    PostProcessRenderPipeline,\r\n    PostProcessRenderEffect,\r\n    SceneLoader,\r\n    Nullable,\r\n    MaterialDefines\r\n} from \"babylonjs\";\r\n\r\nimport SampleBasic from \"../SampleBasic\";\r\n\r\nexport default class RTTAndPostProcess extends SampleBasic {\r\n\r\n    protected populateScene(scene: Scene, camera: UniversalCamera) {\r\n        camera.position.x = 0;\r\n        camera.position.y = 5;\r\n        camera.position.z = -10;\r\n\r\n        camera.setTarget(Vector3.Zero());\r\n\r\n        // This creates a light, aiming 0,1,0 - to the sky (non-mesh)\r\n        var light = new HemisphericLight(\"light\", new Vector3(0, 1, 0), scene);\r\n\r\n        // Default intensity is 1. Let's dim the light a small amount\r\n        light.intensity = 0.7;\r\n\r\n        // some material for the sphere.\r\n        var grass0 = new StandardMaterial(\"grass0\", scene);\r\n        grass0.diffuseTexture = new Texture(\"resources/texture/grass.png\", scene);\r\n\r\n        // Our built-in 'ground' shape.\r\n        var ground = MeshBuilder.CreateGround(\"ground\", {width: 6, height: 6}, scene);\r\n        ground.material = grass0;\r\n\r\n        // a depth pass.\r\n        const depthPass = scene.enableDepthRenderer();\r\n\r\n        // first pass, render scene with original materials\r\n        var imagePass = new PassPostProcess(\"imagePass\", 1.0, null, Texture.NEAREST_SAMPLINGMODE, this._engine);\r\n\r\n        // second pass with a shader material\r\n        Effect.ShadersStore.magicVertexShader = `\r\n            precision highp float;\r\n\r\n            attribute vec3 position;\r\n            attribute vec2 uv;\r\n\r\n    #ifdef INSTANCES\r\n        attribute vec4 world0;\r\n        attribute vec4 world1;\r\n        attribute vec4 world2;\r\n        attribute vec4 world3;\r\n    #else\r\n        uniform mat4 world;\r\n    #endif\r\n            uniform mat4 view;\r\n            uniform mat4 projection;\r\n            uniform mat4 worldViewProjection;\r\n\r\n            varying vec2 vUV;\r\n\r\n            #include<bonesDeclaration>\r\n\r\n            void main() {\r\n    #ifdef INSTANCES\r\n        mat4 finalWorld = mat4(world0, world1, world2, world3);\r\n    #else\r\n        mat4 finalWorld = world;\r\n    #endif\r\n\r\n                vec3 positionUpdated = position;\r\n\r\n                #include<bonesVertex>\r\n\r\n                vec4 worldPos = finalWorld * vec4(positionUpdated, 1.0);\r\n\r\n                vUV = uv;\r\n\r\n                gl_Position = projection * view * worldPos;\r\n            }`;\r\n        Effect.ShadersStore.magicFragmentShader = `\r\n            #ifdef GL_ES\r\n            precision mediump float;\r\n            #endif\r\n\r\n            varying vec2 vUV;\r\n\r\n            void main(void)\r\n            {\r\n                // basic, just returns a plain color\r\n                gl_FragColor = vec4(1.0, 1.0, 0.1, 1.0);\r\n            }\r\n        `;\r\n\r\n        const shaderMaterial = new ShaderMaterial(\r\n            'magic shader material', // human name\r\n            scene,\r\n            'magic', // shader path\r\n            {\r\n                attributes: [ 'position', 'normal', 'uv' ],\r\n                uniforms: [ 'world', 'worldView', 'worldViewProjection', 'view', 'projection', 'time', 'direction' ]\r\n            }\r\n        );\r\n\r\n        shaderMaterial.freeze();\r\n\r\n        const shaderMaterialForRobot = shaderMaterial.clone(\"cloned\");\r\n\r\n        shaderMaterialForRobot.freeze();\r\n\r\n        const renderTarget = new RenderTargetTexture('magic texture', 512, scene);\r\n        scene.customRenderTargets.push(renderTarget);\r\n\r\n        renderTarget.onBeforeRender = (e) => {\r\n            // Apply the shader on all meshes\r\n            for (let i = 0; i < renderTarget.renderList!.length; ++i) {\r\n                const mesh = renderTarget.renderList![i];\r\n                mesh.metadata = mesh.metadata || {};\r\n                if (mesh.material && !mesh.material.isFrozen && mesh.isReady(true)) { // the PBR material takes some time to be loaded, it's possible that in the first few frames mesh.material is null...\r\n                    const _orig_subMeshEffects: Array<[Nullable<Effect>, Nullable<MaterialDefines>]> = [];\r\n                    mesh.subMeshes.forEach((submesh) => {\r\n                        _orig_subMeshEffects.push([submesh.effect, submesh._materialDefines]);\r\n                    });\r\n                    mesh.material.freeze();\r\n                    mesh.metadata._saved_orig_material = mesh.material;\r\n                    mesh.metadata._orig_subMeshEffects = _orig_subMeshEffects;\r\n                }\r\n                if (!mesh.metadata._orig_subMeshEffects) { continue; }\r\n                mesh.material = i == 0 ? shaderMaterial : shaderMaterialForRobot;\r\n                if (mesh.metadata._rtt_subMeshEffects) {\r\n                    for (let s = 0; s < mesh.subMeshes.length; ++s) {\r\n                        mesh.subMeshes[s].setEffect(...(mesh.metadata._rtt_subMeshEffects[s] as [Nullable<Effect>, Nullable<MaterialDefines>]));\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        renderTarget.onAfterRender = () => {\r\n            // Set the original shader on all meshes\r\n            for (let i = 0; i < renderTarget.renderList!.length; ++i) {\r\n                const mesh = renderTarget.renderList![i];\r\n                if (!mesh.metadata._orig_subMeshEffects) { continue; }\r\n                if (!mesh.metadata._rtt_subMeshEffects) {\r\n                    mesh.metadata._rtt_subMeshEffects = [];\r\n                    mesh.subMeshes.forEach((submesh) => {\r\n                        mesh.metadata._rtt_subMeshEffects.push([submesh.effect, submesh._materialDefines]);\r\n                    });\r\n                }\r\n                mesh.material = mesh.metadata._saved_orig_material;\r\n                for (let s = 0; s < mesh.subMeshes.length; ++s) {\r\n                    mesh.subMeshes[s].setEffect(...(mesh.metadata._orig_subMeshEffects[s] as [Nullable<Effect>, Nullable<MaterialDefines>]));\r\n                }\r\n            }\r\n        };\r\n\r\n        // third pass: merge two passes\r\n        Effect.ShadersStore.finalVertexShader = `\r\n            precision highp float;\r\n\r\n            attribute vec3 position;\r\n            attribute vec2 uv;\r\n\r\n            uniform mat4 worldViewProjection;\r\n\r\n            varying vec2 vUV;\r\n\r\n            void main() {\r\n                vUV = uv;\r\n                gl_Position = worldViewProjection * vec4(position, 1.0);\r\n            }`;\r\n\r\n        Effect.ShadersStore.finalFragmentShader = `\r\n            #ifdef GL_ES\r\n            precision mediump float;\r\n            #endif\r\n\r\n            varying vec2 vUV;\r\n\r\n            uniform sampler2D textureSampler;\r\n            uniform sampler2D secondTexture;\r\n            uniform sampler2D depthTexture;\r\n\r\n            void main(void)\r\n            {\r\n                vec4 first = texture2D(textureSampler, vUV);\r\n                vec4 second = texture2D(secondTexture, vUV);\r\n                // mixes colors\r\n                gl_FragColor = mix(first, second, vUV.x);\r\n            }\r\n        `;\r\n\r\n        // create the pass\r\n        var finalPass = new PostProcess(\r\n            'Final compose shader',\r\n            'final',  // shader\r\n            null, // attributes\r\n            ['baseTexture', 'secondTexture', 'depthTexture' ], // textures\r\n            1.0,  // options\r\n            null, // camera\r\n            Texture.BILINEAR_SAMPLINGMODE, // sampling\r\n            this._engine // engine\r\n        );\r\n\r\n        finalPass.onApply = (effect) => {\r\n            effect.setTextureFromPostProcess('baseTexture', imagePass);\r\n            effect.setTexture('secondTexture', renderTarget);\r\n            effect.setTexture('depthTexture', depthPass.getDepthMap());\r\n        };\r\n\r\n        // the render pipeline\r\n        var pipeline = new PostProcessRenderPipeline(this._engine, 'pipeline');\r\n        var renderPasses = new PostProcessRenderEffect(\r\n            this._engine, 'renderPasses', function() { return [imagePass, finalPass]; });\r\n\r\n        pipeline.addEffect(renderPasses);\r\n        scene.postProcessRenderPipelineManager.addPipeline(pipeline);\r\n        scene.postProcessRenderPipelineManager.attachCamerasToRenderPipeline('pipeline', camera);\r\n\r\n        // Our built-in 'sphere' shape.\r\n        SceneLoader.ImportMesh(\"\", \"resources/3d/BrainStem/\", \"BrainStem.gltf\", scene, function(meshes) {\r\n            renderTarget.renderList!.push(ground);\r\n            meshes.forEach((mesh) => {\r\n                renderTarget.renderList!.push(mesh);\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n\r\nSampleBasic.registerSampleClass(\"rttandpostprocess\", {\r\n    \"displayName\": \"Create a Render Target Texture and use it in a post process pass\",\r\n    \"description\": \"\",\r\n    \"class\": RTTAndPostProcess,\r\n});\r\n","import {\r\n    Scene,\r\n    Vector3,\r\n    UniversalCamera,\r\n    HemisphericLight,\r\n    MeshBuilder,\r\n    Effect,\r\n    PostProcess,\r\n    Vector2,\r\n    Vector4,\r\n    Color3,\r\n} from \"babylonjs\";\r\n\r\nimport SampleBasic from \"../SampleBasic\";\r\n\r\nexport default class RayMarching extends SampleBasic {\r\n\r\n    protected populateScene(scene: Scene, camera: UniversalCamera) {\r\n        camera.position.x = 10;\r\n        camera.position.y = 10;\r\n        camera.position.z = -10;\r\n\r\n        camera.setTarget(Vector3.Zero());\r\n\r\n        Effect.ShadersStore[\"raymarchVertexShader\"] = `\r\n        attribute vec2 position;\r\n        uniform vec2 scale;\r\n\r\n        // Output\r\n        varying vec2 vUV;\r\n        const vec2 madd = vec2(0.5, 0.5);\r\n        void main(void) {\r\n            vUV = (position * madd + madd) * scale;\r\n            gl_Position = vec4(position, 0.0, 1.0);\r\n        }\r\n    `;\r\n\r\n    Effect.ShadersStore[\"raymarchFragmentShader\"] = `\r\n        #ifdef GL_ES\r\n            precision highp float;\r\n        #endif\r\n\r\n        // Samplers\r\n        varying vec2 vUV;\r\n        uniform sampler2D textureSampler;\r\n        uniform sampler2D depthMap;\r\n\r\n        uniform vec2 resolution;\r\n\r\n        uniform float camMinZ;\r\n        uniform float camMaxZ;\r\n        uniform vec3 camPosition;\r\n        uniform vec3 camDirection;\r\n        uniform vec4 vLightData;\r\n        uniform float camFov;\r\n        uniform float time;\r\n\r\n        uniform mat4 camView;\r\n        uniform mat4 camProjection;\r\n        uniform mat4 camWorld;\r\n        uniform mat4 camTransform;\r\n\r\n        uniform vec3 backgroundColor;\r\n\r\n        #define MTL_BACKGROUND          -1.0\r\n        #define MTL_GROUND              1.0\r\n        #define MTL_AX                  2.0\r\n        #define MTL_AY                  3.0\r\n        #define MTL_AZ                  4.0\r\n        #define MTL_OBJ1                5.0\r\n        #define MTL_OBJ2                6.0\r\n\r\n        #define NORMAL_EPS              0.0001\r\n\r\n        #define MAX_RAYCAST_STEPS       100\r\n        #define STEP_DAMPING            0.86\r\n        #define DIST_EPSILON            0.001\r\n\r\n        #define BACKGROUND_COLOR        vec3(0.3, 0.342, 0.5)\r\n\r\n        #include<helperFunctions>\r\n        #include<__decl__lightFragment>[0]\r\n\r\n        struct lightingInfo\r\n        {\r\n            vec3 diffuse;\r\n            vec3 specular;\r\n        };\r\n\r\n\r\n        lightingInfo computeHemisphericLighting(vec3 viewDirectionW, vec3 vNormal, vec4 lightData, vec3 diffuseColor, vec3 specularColor, vec3 groundColor, float glossiness) {\r\n            lightingInfo result;\r\n\r\n            // Diffuse\r\n            float ndl = dot(vNormal, lightData.xyz) * 0.5 + 0.5;\r\n        #ifdef NDOTL\r\n            result.ndl = ndl;\r\n        #endif\r\n\r\n            result.diffuse = mix(groundColor, diffuseColor, ndl);\r\n\r\n        #ifdef SPECULARTERM\r\n            // Specular\r\n            vec3 angleW = normalize(viewDirectionW + lightData.xyz);\r\n            float specComp = max(0., dot(vNormal, angleW));\r\n            specComp = pow(specComp, max(1., glossiness));\r\n\r\n            result.specular = specComp * specularColor;\r\n        #endif\r\n                return result;\r\n        }\r\n\r\n        // Primitives\r\n        float plane(vec3 p, vec3 n, float offs) { return dot(p, n) - offs; }\r\n        float sphere(vec3 p, float r) { return length(p) - r; }\r\n        float cone(in vec3 p, vec2 n) { return dot(vec2(length(p.xz), p.y), n);}\r\n        float cone(vec3 p, float r, float h) {\r\n            float ang = atan(r, h);\r\n            vec2 n = vec2(cos(ang), sin(ang));\r\n            float d = cone(vec3(p.x, p.y - h, p.z), n);\r\n            return max(d, -p.y);\r\n        }\r\n        float cylinder(in vec3 p, float r) { return length(p.xz) - r; }\r\n        float cylinder(in vec3 p, float r, float h) { return max(cylinder(p, r), abs(p.y) - h*0.5); }\r\n        float torus(vec3 p, float ri, float ro) { return length(vec2(length(p.xz) - ri, p.y)) - ro; }\r\n\r\n        // Boolean operations\r\n        float diff(float d1, float d2) { return max(-d2, d1); }\r\n        float add(float d1, float d2) { return min(d2, d1); }\r\n        float intersect(float d1, float d2) { return max(d2, d1); }\r\n        // Boolean operations (with material ID in second component)\r\n        void diff(inout vec2 d1, in vec2 d2) {\r\n            if (-d2.x > d1.x) {\r\n                d1.x = -d2.x;\r\n                d1.y = d2.y;\r\n            }\r\n        }\r\n        void add(inout vec2 d1, in vec2 d2) { if (d2.x < d1.x) d1 = d2; }\r\n        void intersect(inout vec2 d1, in vec2 d2) { if (d1.x < d2.x) d1 = d2; }\r\n\r\n        // Affine transformations\r\n        vec3 translate(vec3 p, vec3 d) {\r\n            return p - d;\r\n        }\r\n        vec2 rotate(vec2 p, float ang) {\r\n            float c = cos(ang), s = sin(ang);\r\n            return vec2(p.x*c-p.y*s, p.x*s+p.y*c);\r\n        }\r\n        //  Repetition\r\n        float repeat(float coord, float spacing) {\r\n            return mod(coord, spacing) - spacing*0.5;\r\n        }\r\n        vec2 repeatAng(vec2 p, float n) {\r\n            float ang = 2.0*PI/n;\r\n            float sector = floor(atan(p.x, p.y)/ang + 0.5);\r\n            p = rotate(p, sector*ang);\r\n            return p;\r\n        }\r\n        vec3 repeatAngS(vec2 p, float n) {\r\n            float ang = 2.0*PI/n;\r\n            float sector = floor(atan(p.x, p.y)/ang + 0.5);\r\n            p = rotate(p, sector*ang);\r\n            return vec3(p.x, p.y, mod(sector, n));\r\n        }\r\n\r\n        vec2 map(vec3 p) {\r\n            vec3 yP = p;\r\n            yP.y = repeat(yP.y, 2.0);\r\n            vec2 res = vec2(sphere(yP-vec3(2.0,0.0,0.0), 1.0), MTL_GROUND);\r\n            return res;\r\n        }\r\n\r\n\r\n        vec3 calcNormal(in vec3 p)\r\n        {\r\n            vec2 d = vec2(NORMAL_EPS, 0.0);\r\n            return normalize(vec3(\r\n                map(p + d.xyy).x - map(p - d.xyy).x,\r\n                map(p + d.yxy).x - map(p - d.yxy).x,\r\n                map(p + d.yyx).x - map(p - d.yyx).x));\r\n        }\r\n\r\n\r\n        vec2 rayMarch(in vec3 ro, in vec3 rd) {\r\n            float t = 0.0;\r\n            float m = MTL_BACKGROUND;\r\n            for (int i=0; i < MAX_RAYCAST_STEPS; i++) {\r\n                vec2 res = map(ro + rd*t);\r\n                if (res.x < DIST_EPSILON) break;\r\n                t += res.x*STEP_DAMPING;\r\n                m = res.y;\r\n            }\r\n            return vec2(t, m);\r\n        }\r\n\r\n\r\n        vec3 getMaterialColor(float matID) {\r\n            vec3 col = backgroundColor;\r\n            if (matID <= MTL_GROUND) col = vec3(0.8, 0.8, 0.8);\r\n            else if (matID <= MTL_AX) col = vec3(1.0, 0.0, 0.0);\r\n            else if (matID <= MTL_AY) col = vec3(0.0, 1.0, 0.0);\r\n            else if (matID <= MTL_AZ) col = vec3(0.0, 0.0, 1.0);\r\n            else if (matID <= MTL_OBJ1) col = vec3(0.8, 0.8, 1.8);\r\n            else if (matID <= MTL_OBJ2) col = vec3(1.4, 1.3, 0.3);\r\n            else col = vec3(0.7, 0.7, 1.8);\r\n            return col;\r\n        }\r\n\r\n\r\n        vec3 applyFog(vec3 col, float dist) {\r\n            return mix(col, backgroundColor, dist);\r\n        }\r\n\r\n        vec4 render(in vec3 ro, in vec3 rd) {\r\n            vec2 res = rayMarch(ro, rd);\r\n            float t = res.x;\r\n            float mtlID = res.y;\r\n            vec3  lig = -rd;\r\n            vec3 pos = ro + t*rd;\r\n\r\n            vec4 posProj = camTransform * vec4(pos, 1);\r\n            float z = (posProj.z + camMinZ) / (camMaxZ + camMinZ);\r\n            if (z < 0.0 /*|| z > 1.0*/) { // no need to check against 1.0, as if z > 1.0 the check of z against depth in main() will fail\r\n                mtlID = MTL_BACKGROUND;\r\n                z = 1.0; // to be sure the test against depth fails in main()\r\n            }\r\n\r\n            vec3 nor = calcNormal(pos);\r\n            vec3 mtlColor = getMaterialColor(mtlID);\r\n            float ambient = 0.;\r\n            lightingInfo info = computeHemisphericLighting(rd, nor, vLightData, vec3(1.0, 1.0, 1.0)/*Light Color*/, vec3(1.0)/*Light Specular*/, vec3(0.)/*Ground Color*/, 0.0/*Glossy*/);\r\n\r\n            vec3 ref = reflect(rd, nor);\r\n            float specular = pow(clamp(dot(ref, vLightData.xyz), 0.0, 1.0), 16.0);\r\n\r\n            vec3 col = mtlColor*(ambient + info.diffuse + specular);\r\n            col = applyFog(col, z);\r\n\r\n            return vec4(col, z);\r\n        }\r\n\r\n        vec3 getRayFromScreenSpace()\r\n        {\r\n            mat4 invMat =  inverse(camTransform);\r\n            vec4 near = vec4((vUV.x - 0.5) * 2.0, (vUV.y - 0.5) * 2.0, -1, 1.0);\r\n            vec4 far = vec4((vUV.x - 0.5) * 2.0, (vUV.y - 0.5) * 2.0, 1, 1.0);\r\n            vec4 nearResult = invMat*near;\r\n            vec4 farResult = invMat*far;\r\n            nearResult /= nearResult.w;\r\n            farResult /= farResult.w;\r\n            vec3 dir = vec3(farResult - nearResult );\r\n            return normalize(dir);\r\n        }\r\n\r\n        void main(void){\r\n            vec4 baseColor = texture2D(textureSampler, vUV);\r\n            float depth = texture2D(depthMap, vUV).x;\r\n            vec2 p = vUV*2.0-1.0;\r\n            p.x *= resolution.x/resolution.y;\r\n            vec3 rayDir = getRayFromScreenSpace();\r\n            vec4 renderData = render(camPosition, rayDir);\r\n\r\n            if(renderData.w < depth){\r\n                baseColor.rgb = renderData.rgb;\r\n            }\r\n\r\n\r\n            gl_FragColor = baseColor;\r\n        }\r\n    `;\r\n\r\n        camera.minZ = 1;\r\n        camera.maxZ = 100.;\r\n        //scene.fogEnabled = true;\r\n\r\n        var light = new HemisphericLight(\"light\", new Vector3(0, 1, 0), scene);\r\n        light.intensity = 0.7;\r\n\r\n        var sphere = MeshBuilder.CreateSphere(\"sphere\", {diameter: 2, segments: 32}, scene);\r\n        sphere.position.y = 1;\r\n\r\n        var ground = MeshBuilder.CreateGround(\"ground\", {width: 6, height: 6}, scene);\r\n\r\n        var raymarchPass = new PostProcess(\"raymarching\", \"raymarch\",\r\n        [\r\n            'resolution',\r\n            'camMinZ',\r\n            'camMaxZ',\r\n            'camPosition',\r\n            'camDirection',\r\n            'camFov',\r\n            'camView',\r\n            'camProjection',\r\n            'camWorld',\r\n            'camTransform',\r\n            'vLightData',\r\n            'time',\r\n            'backgroundColor'\r\n        ],\r\n        [\r\n            'depthMap'\r\n        ], 1.0, camera, 0, this._engine, false, '', 0, 'raymarch');\r\n\r\n        var render = scene.enableDepthRenderer();\r\n        var time = 0.0;\r\n\r\n        raymarchPass.onApply = function(effect) {\r\n            time += scene.getEngine().getDeltaTime() * 0.001;\r\n            effect.setFloat('time', time);\r\n            effect.setTexture('depthMap', render.getDepthMap());\r\n            let cvas = scene.getEngine().getRenderingCanvas()!;\r\n            effect.setVector2('resolution', new Vector2(cvas.width, cvas.height));\r\n            effect.setVector3('camPosition', scene.activeCamera!.position);\r\n            effect.setVector3('camDirection', scene.activeCamera!.getForwardRay(1).direction);\r\n            effect.setFloat('camMinZ', scene.activeCamera!.minZ);\r\n            effect.setFloat('camMaxZ', scene.activeCamera!.maxZ);\r\n            effect.setFloat('camFov', scene.activeCamera!.fov);\r\n\r\n            effect.setMatrix('camView', scene.activeCamera!.getViewMatrix());\r\n            effect.setMatrix('camProjection', scene.activeCamera!.getProjectionMatrix());\r\n            effect.setMatrix('camWorld', scene.activeCamera!.getWorldMatrix());\r\n            effect.setMatrix('camTransform', scene.activeCamera!.getTransformationMatrix());\r\n\r\n            effect.setColor3('backgroundColor', new Color3(scene.clearColor.r, scene.clearColor.g, scene.clearColor.b));\r\n\r\n            let lightDir = light.direction.clone().normalize();\r\n\r\n            effect.setVector4('vLightData',\r\n                new Vector4(\r\n                    lightDir.x,\r\n                    lightDir.y,\r\n                    lightDir.z,\r\n                    0.0\r\n                )\r\n            );\r\n        };\r\n    }\r\n\r\n}\r\n\r\nSampleBasic.registerSampleClass(\"raymarching\", {\r\n    \"displayName\":  \"A raymarching test\",\r\n    \"description\":  \"\",\r\n    \"class\": RayMarching,\r\n});\r\n","import {\r\n    Engine,\r\n    Scene,\r\n    UniversalCamera,\r\n    Vector3,\r\n    Viewport,\r\n    Color4,\r\n} from \"babylonjs\";\r\n\r\nimport MainGUI from \"./MainGUI\";\r\nimport Split from \"./Split\";\r\n\r\nconst cameraSpeed = 5,\r\n      shiftMultiplier = 3;\r\n\r\nexport enum enumSplitMode {\r\n    SIDE_BY_SIDE,\r\n    LINEAR\r\n}\r\n\r\nexport interface ISampleDescription {\r\n    displayName: string;\r\n    description: string;\r\n    class: typeof Sample;\r\n}\r\n\r\nexport default class Sample {\r\n\r\n    protected static _sampleList: Map<string, ISampleDescription> = new Map();\r\n\r\n    protected static readonly cameraKeys = {\r\n        \"azerty\": {\r\n            \"Up\": 90, // Z\r\n            \"Down\": 83, // S\r\n            \"Left\": 81, // Q\r\n            \"Right\": 68, // D\r\n        },\r\n\r\n        \"qwerty\": {\r\n            \"Up\": 87, // W\r\n            \"Down\": 83, // S\r\n            \"Left\": 65, // A\r\n            \"Right\": 68, // D\r\n        },\r\n    };\r\n\r\n    protected _engine:          Engine;\r\n    protected _canvas:          HTMLCanvasElement;\r\n    protected _mapKeys:         Map<String, boolean>;\r\n    protected _clearColor:      Color4;\r\n    protected _cameraSpeed:     number;\r\n    protected _gui:             MainGUI | null;\r\n    protected _qwertyMode:      boolean;\r\n\r\n    public splits:          Array<Split>;\r\n    public splitMode:       enumSplitMode;\r\n    public splitClasses:    Map<string, typeof Split>;\r\n    public splitType:       string | null;\r\n\r\n    public static get sampleList(): Map<string, ISampleDescription> {\r\n        return Sample._sampleList;\r\n    }\r\n\r\n    public static registerSampleClass(name: string, sample: ISampleDescription): void {\r\n        if (Sample._sampleList.get(name)) {\r\n            throw `registerSampleClass: name \"${name} already registered!\"`;\r\n        }\r\n        Sample._sampleList.set(name, sample);\r\n    }\r\n\r\n    public static createSample(name: string, engine: Engine, canvas: HTMLCanvasElement): Sample | null {\r\n        const sampleDescr = Sample._sampleList.get(name);\r\n\r\n        if (sampleDescr) {\r\n            const sample = new sampleDescr.class(engine, canvas);\r\n\r\n            sample.create();\r\n\r\n            return sample;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    constructor(engine: Engine, canvas: HTMLCanvasElement) {\r\n        this._engine = engine;\r\n        this._canvas = canvas;\r\n        this._mapKeys = new Map<String, boolean>();\r\n        this._clearColor = new Color4(0, 0, 0, 1);\r\n        this._cameraSpeed = cameraSpeed;\r\n        this._qwertyMode = false;\r\n\r\n        this.splits = [];\r\n        this.splitMode = enumSplitMode.LINEAR;\r\n        this.splitClasses = new Map();\r\n        this.splitType = null;\r\n        this._gui = null;\r\n\r\n        (window as any).__sample = this;\r\n        (window as any).__ss = this.splits;\r\n    }\r\n\r\n    public get qwertyMode(): boolean {\r\n        return this._qwertyMode;\r\n    }\r\n\r\n    public set qwertyMode(qm: boolean) {\r\n        this._qwertyMode = qm;\r\n        this.splits.forEach((split) => this.setCameraKeys(split.camera));\r\n    }\r\n\r\n    public get splitNumber(): number {\r\n        return this.splits.length;\r\n    }\r\n\r\n    public createNewSplit(): void {\r\n        if (this.splitClasses.size === 0) {\r\n            return;\r\n        }\r\n\r\n        this.addSplit(this.splitClasses.keys().next().value, \"\");\r\n    }\r\n\r\n    public onBeforeRender(deltaTime: number): void {\r\n        this.splits.forEach((split) => {\r\n            const camera = split.camera;\r\n\r\n            camera.speed = this._cameraSpeed * (this._mapKeys.get('Shift') ? shiftMultiplier : 1);\r\n\r\n            if (this._mapKeys.get(' ')) {\r\n                camera.cameraDirection = new Vector3(0, this._cameraSpeed / 5, 0);\r\n            }\r\n\r\n            if (this._mapKeys.get('x')) {\r\n                camera.cameraDirection = new Vector3(0, -this._cameraSpeed / 5, 0);\r\n            }\r\n        });\r\n\r\n        if (this._mapKeys.get(\"+\")) {\r\n            this._mapKeys.set(\"+\", false);\r\n            this.createNewSplit();\r\n        }\r\n\r\n        if (this._mapKeys.get(\"-\")) {\r\n            this._mapKeys.set(\"-\", false);\r\n            this.splits.forEach((split) => {\r\n                if (split.gui) {\r\n                    split.gui.toggleGUI();\r\n                }\r\n            });\r\n        }\r\n\r\n        if (this._mapKeys.get(\"F10\") && this._gui) {\r\n            this._mapKeys.set(\"F10\", false);\r\n            this._gui.toggleGUI();\r\n        }\r\n\r\n        this.splits.forEach((split, splitIndex) => {\r\n            if (this._mapKeys.get(`F${splitIndex + 1}`) && split.gui) {\r\n                this._mapKeys.set(`F${splitIndex + 1}`, false);\r\n                split.gui.toggleGUI();\r\n            }\r\n        });\r\n\r\n        if (this._mapKeys.get(\"/\")) {\r\n            this._mapKeys.set(\"/\", false);\r\n            this.splitMode = this.splitMode === enumSplitMode.LINEAR ? enumSplitMode.SIDE_BY_SIDE : enumSplitMode.LINEAR;\r\n            window.dispatchEvent(new CustomEvent('gui_set_value', { detail: { type: 'setSplitLayout' } }));\r\n        }\r\n    }\r\n\r\n    public render(): void {\r\n        const w = this._engine.getRenderWidth(),\r\n              h = this._engine.getRenderHeight(),\r\n              stepx = w / this.splits.length;\r\n\r\n        for (let i = 0; i < this.splits.length; ++i) {\r\n            const split = this.splits[i];\r\n\r\n            split.scene.autoClear = (i == 0);\r\n\r\n            switch (this.splitMode) {\r\n                case enumSplitMode.SIDE_BY_SIDE:\r\n                    split.camera.viewport = new Viewport(i / this.splits.length, 0, 1 / this.splits.length, 1);\r\n                    break;\r\n                case enumSplitMode.LINEAR:\r\n                    split.camera.viewport = new Viewport(0, 0, 1, 1);\r\n                    if (this.splits.length > 1) {\r\n                        split.scene.onBeforeDrawPhaseObservable.addOnce(() => {\r\n                            this._engine.enableScissor(stepx * i, 0, stepx * (i + 1), h);\r\n                        });\r\n                        split.scene.onAfterDrawPhaseObservable.addOnce(() => {\r\n                            this._engine.disableScissor();\r\n                        });\r\n                    }\r\n                    break;\r\n            }\r\n\r\n            if (split.isLoading) {\r\n                this._engine.scissorClear(stepx * i, 0, stepx * (i + 1), h, this._clearColor);\r\n            } else {\r\n                split.render();\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public createGUI(): void {\r\n        this._gui = new MainGUI(\"Global settings\", this._engine, this);\r\n\r\n        this._gui.createGUI();\r\n    }\r\n\r\n    protected create(): void {\r\n    }\r\n\r\n    protected resyncCameras(): void {\r\n        const groups = new Map<number, UniversalCamera>();\r\n\r\n        for (let i = 0; i < this.splits.length; ++i) {\r\n            const split = this.splits[i],\r\n                  scamera = split.camera;\r\n\r\n            const camera = groups.get(split.group);\r\n            if (!camera) {\r\n                groups.set(split.group, scamera);\r\n                scamera.update();\r\n                continue;\r\n            }\r\n\r\n            scamera.speed = camera.speed;\r\n            scamera.position = camera.position.clone();\r\n            scamera.rotation = camera.rotation.clone();\r\n            scamera.cameraDirection = camera.cameraDirection.clone();\r\n            scamera.cameraRotation = camera.cameraRotation.clone();\r\n        }\r\n    }\r\n\r\n    protected registerClass(splitClassName: string, splitClass: typeof Split): void {\r\n        this.splitClasses.set(splitClassName, splitClass);\r\n    }\r\n\r\n    public addSplit(splitClassName: string, splitName: string, attachControls: boolean = true, createGUI: boolean = true): Split | null {\r\n        const splitClass = this.splitClasses.get(splitClassName);\r\n\r\n        if (!splitClass) {\r\n            return null;\r\n        }\r\n        let [scene, camera] = this.createSceneAndCamera(attachControls);\r\n\r\n        const split = new splitClass(scene, camera, this, splitName);\r\n\r\n        this.splits.push(split);\r\n\r\n        if (createGUI) {\r\n            split.createGUI();\r\n        }\r\n\r\n        window.setTimeout(() => window.dispatchEvent(new Event('split_added')), 16); // let the time to the GUI to render before sending the event\r\n\r\n        return split;\r\n    }\r\n\r\n    public getSplitBounds(index: number | Split): { x: number, y: number, w: number, h: number } {\r\n        let splitIdx: number = 0;\r\n\r\n        if (typeof(index) == 'number') {\r\n            splitIdx = index;\r\n        } else {\r\n            splitIdx = this.splits.indexOf(index);\r\n        }\r\n\r\n        if (splitIdx < 0) {\r\n            return { x: 0, y: 0, w: 0, h: 0 };\r\n        }\r\n\r\n        let screenWidth = this._engine.getRenderWidth(),\r\n            screenHeight = this._engine.getRenderHeight(),\r\n            w = screenWidth / this.splits.length;\r\n\r\n        return {\r\n            x: splitIdx * screenWidth / this.splits.length,\r\n            y: 0,\r\n            w: w,\r\n            h: screenHeight\r\n        };\r\n    }\r\n\r\n    public removeSplit(index: number | Split): Split | null {\r\n        let split: Split | null = null;\r\n\r\n        if (typeof(index) == 'number') {\r\n            split = this.splits.splice(index, 1)[0];\r\n        } else {\r\n            const idx = this.splits.indexOf(index);\r\n            if (idx !== -1) {\r\n                split = this.splits.splice(idx, 1)[0];\r\n            }\r\n        }\r\n\r\n        if (split && split.gui) {\r\n            split.gui.removeGUI();\r\n        }\r\n\r\n        window.dispatchEvent(new Event('split_removed'));\r\n\r\n        return split;\r\n    }\r\n\r\n    protected attachControlToAllCameras(): void {\r\n        this.splits.forEach((split) => {\r\n            const camera = split.camera;\r\n\r\n            camera.attachControl(this._canvas, true);\r\n        });\r\n    }\r\n\r\n    protected detachControlFromAllCameras(): void {\r\n        this.splits.forEach((split) => {\r\n            const camera = split.camera;\r\n\r\n            camera.detachControl(this._canvas);\r\n        });\r\n    }\r\n\r\n    protected setCameraKeys(camera: UniversalCamera): void {\r\n        camera.keysUp = [Sample.cameraKeys[this._qwertyMode ? \"qwerty\" : \"azerty\"].Up];\r\n        camera.keysDown = [Sample.cameraKeys[this._qwertyMode ? \"qwerty\" : \"azerty\"].Down];\r\n        camera.keysLeft = [Sample.cameraKeys[this._qwertyMode ? \"qwerty\" : \"azerty\"].Left];\r\n        camera.keysRight = [Sample.cameraKeys[this._qwertyMode ? \"qwerty\" : \"azerty\"].Right];\r\n    }\r\n\r\n    protected createSceneAndCamera(attachControls: boolean = true): [Scene, UniversalCamera] {\r\n        const scene = new Scene(this._engine);\r\n        const camera = new UniversalCamera(\"camera\" + this.splits.length, new Vector3(0, 5, -10), scene);\r\n\r\n        camera.fov = Math.PI / 4;\r\n        camera.setTarget(Vector3.Zero());\r\n\r\n        camera.inertia = 0;\r\n        camera.angularSensibility = 500;\r\n\r\n        this.setCameraKeys(camera);\r\n\r\n        scene.onKeyboardObservable.add((kbInfo) => {\r\n            switch (kbInfo.type) {\r\n                case BABYLON.KeyboardEventTypes.KEYDOWN:\r\n                    this._mapKeys.set(kbInfo.event.key, true);\r\n                    if (kbInfo.event.key == \"F1\") {\r\n                        kbInfo.event.preventDefault();\r\n                    }\r\n                    break;\r\n                case BABYLON.KeyboardEventTypes.KEYUP:\r\n                    this._mapKeys.set(kbInfo.event.key, false);\r\n                    break;\r\n            }\r\n        });\r\n\r\n        this.enablePointerLock(scene);\r\n\r\n        if (attachControls) {\r\n            camera.attachControl(this._canvas, true);\r\n        }\r\n\r\n        scene.activeCamera = camera;\r\n\r\n        return [scene, camera];\r\n    }\r\n\r\n    protected enablePointerLock(scene: Scene): void {\r\n        let locked = false;\r\n\r\n        scene.onPointerObservable.add((pointerInfo) => {\r\n            switch (pointerInfo.type) {\r\n                case BABYLON.PointerEventTypes.POINTERDOWN:\r\n                    if (pointerInfo.event.button == 2) {\r\n                        if (!locked) {\r\n                            locked = true;\r\n                            this._canvas.requestPointerLock = this._canvas.requestPointerLock || this._canvas.msRequestPointerLock || this._canvas.mozRequestPointerLock || this._canvas.webkitRequestPointerLock;\r\n                            if (this._canvas.requestPointerLock) {\r\n                                this.detachControlFromAllCameras();\r\n                                this._canvas.requestPointerLock();\r\n                                window.setTimeout(() => this.attachControlToAllCameras(), 100);\r\n                            }\r\n                        } else {\r\n                            this.detachControlFromAllCameras();\r\n                            document.exitPointerLock();\r\n                            locked = false;\r\n                            window.setTimeout(() => this.attachControlToAllCameras(), 100);\r\n                        }\r\n                    }\r\n                    break;\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n","import { Scene, UniversalCamera } from \"babylonjs\";\r\n\r\nimport Sample from \"./Sample\";\r\nimport Split from \"./Split\";\r\n\r\nclass SplitBasic extends Split {\r\n\r\n    constructor(scene: Scene, camera: UniversalCamera, parent: Sample, name: string = \"default\") {\r\n        super(scene, camera, parent, name);\r\n    }\r\n}\r\n\r\nexport default class SampleBasic extends Sample {\r\n\r\n    protected populateScene(scene: Scene, camera: UniversalCamera) {\r\n    }\r\n\r\n    protected create() {\r\n        this.registerClass(\"split\", SplitBasic);\r\n\r\n        let split = this.addSplit(\"split\", \"basic\", true, false) as SplitBasic;\r\n\r\n        this.populateScene(split.scene, split.camera);\r\n\r\n        jQuery(document.body).append('<div id=\"fps\"></div>');\r\n    }\r\n\r\n}\r\n","import {\r\n    Scene,\r\n    StandardMaterial,\r\n    UniversalCamera,\r\n    Texture,\r\n    Vector3,\r\n    HemisphericLight,\r\n    MeshBuilder,\r\n    DepthRenderer,\r\n} from \"babylonjs\";\r\n\r\nimport Sample from \"../Sample\";\r\nimport Split from \"../Split\";\r\n\r\nexport default class DepthLinearNoShader extends Split {\r\n\r\n    public createGUI(): void {\r\n        this.gui!.dimensions.height = 50;\r\n        this.gui!.showCloseButton = false;\r\n\r\n        super.createGUI();\r\n    }\r\n\r\n    public initialize(): void {\r\n        var light = new HemisphericLight(\"HemiLight\", new Vector3(0, 2, 0), this.scene);\r\n\r\n        this.camera.maxZ = 100;\r\n\r\n        var renderer = (this.scene as any).enableDepthRenderer(this.camera, false) as DepthRenderer;\r\n\r\n        renderer.useOnlyInActiveCamera = true;\r\n        renderer.getDepthMap().ignoreCameraViewport = false;\r\n\r\n        // Box1\r\n        var boxMaterial = new StandardMaterial(\"box\", this.scene);\r\n\r\n        boxMaterial.diffuseTexture = new Texture(\"resources/texture/crate.png\", this.scene);\r\n\r\n        var box = MeshBuilder.CreateBox(\"box\", {}, this.scene);\r\n\r\n        box.material = boxMaterial;\r\n\r\n        // Box2\r\n        var box2Material = new StandardMaterial(\"box2\", this.scene);\r\n\r\n        box2Material.diffuseTexture = new Texture(\"resources/texture/crate.png\", this.scene);\r\n\r\n        var box2 = MeshBuilder.CreateBox(\"box2\", {}, this.scene);\r\n\r\n        box2.material = box2Material;\r\n        box2.position.x = 1.5;\r\n        box2.position.z = 2;\r\n\r\n        var canvasZone = document.body;\r\n\r\n        var sprites = [\r\n            { pos: new Vector3(1, 0, 0), elem: document.createElement('div'), color: '#00ff00', width: 40, height: 40 },\r\n            { pos: new Vector3(0, 0.5, 1.0), elem: document.createElement('div'), color: '#ff0000', width: 40, height: 40 }\r\n        ];\r\n\r\n        sprites.forEach((sprite) => {\r\n            sprite.elem.style.position = 'absolute';\r\n            sprite.elem.style.width = sprite.width + 'px';\r\n            sprite.elem.style.height = sprite.height + 'px';\r\n            sprite.elem.style.backgroundColor = sprite.color;\r\n            sprite.elem.style.top = '0px';\r\n            sprite.elem.style.left = '0px';\r\n\r\n            canvasZone.appendChild(sprite.elem);\r\n        });\r\n\r\n        var depthMap = renderer.getDepthMap();\r\n\r\n        var buffer = new Float32Array(4 * depthMap.getSize().width * depthMap.getSize().height);\r\n\r\n        //this.scene.autoClear = true;\r\n\r\n        this.scene.onAfterRenderObservable.add(() => {\r\n\r\n            depthMap.readPixels(0, 0, buffer); // that's too slow to do that each frame...\r\n\r\n            sprites.forEach((sprite) => {\r\n                var posInView = Vector3.TransformCoordinates(sprite.pos, this.scene.getViewMatrix());\r\n                var posInViewProj = Vector3.TransformCoordinates(sprite.pos, this.scene.getTransformMatrix());\r\n                var screenCoords = posInViewProj.multiplyByFloats(0.5, -0.5, 1.0).add(new Vector3(0.5, 0.5, 0.0)).\r\n                                        multiplyByFloats(this.scene.getEngine().getRenderWidth(), this.scene.getEngine().getRenderHeight(), 1);\r\n\r\n                var px = screenCoords.x - sprite.width / 2;\r\n                var py = screenCoords.y - sprite.height / 2;\r\n\r\n                sprite.elem.style.left = (px + canvasZone.offsetLeft) + 'px';\r\n                sprite.elem.style.top = (py + canvasZone.offsetTop) + 'px';\r\n\r\n                px = Math.floor(px + sprite.width / 2);\r\n                py = Math.floor(this.scene.getEngine().getRenderHeight() - (py + sprite.height / 2));\r\n\r\n                var zInZBuff = buffer[4 * (px + py * depthMap.getSize().width)];\r\n\r\n                var z = (posInView.z - this.camera.minZ) / (-this.camera.minZ + this.camera.maxZ);\r\n\r\n                if (z > zInZBuff) {\r\n                    sprite.elem.style.opacity = \"0.3\";\r\n                } else {\r\n                    sprite.elem.style.opacity = \"1.0\";\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n","import {\r\n    Effect,\r\n    Scene,\r\n    ShaderMaterial,\r\n    StandardMaterial,\r\n    UniversalCamera,\r\n    Texture,\r\n    Vector3,\r\n    HemisphericLight,\r\n    MeshBuilder,\r\n    Engine,\r\n    Vector2,\r\n    DepthRenderer,\r\n} from \"babylonjs\";\r\n\r\nimport Sample from \"../Sample\";\r\nimport Split from \"../Split\";\r\n\r\nexport default class DepthLinearShader extends Split {\r\n\r\n    public createGUI(): void {\r\n        this.gui!.dimensions.height = 50;\r\n        this.gui!.showCloseButton = false;\r\n\r\n        super.createGUI();\r\n    }\r\n\r\n    public initialize(): void {\r\n        var light = new HemisphericLight(\"HemiLight2\", new Vector3(0, 2, 0), this.scene);\r\n\r\n        var renderer = (this.scene as any).enableDepthRenderer(this.camera, false) as DepthRenderer;\r\n\r\n        renderer.useOnlyInActiveCamera = true;\r\n        renderer.getDepthMap().ignoreCameraViewport = false;\r\n\r\n        Effect.ShadersStore[\"custom2VertexShader\"] = `\r\n            precision highp float;\r\n            attribute vec3 position;\r\n            attribute vec2 uv;\r\n            uniform mat4 worldViewProjection;\r\n            varying vec2 vUV;\r\n            void main(void) {\r\n                gl_Position = worldViewProjection * vec4(position, 1.0);\r\n                vUV = uv;\r\n            }`;\r\n\r\n        Effect.ShadersStore[\"custom2FragmentShader\"] = `\r\n            precision highp float;\r\n            const float znear = 1.0;\r\n            const float zfar = 10000.0;\r\n            varying vec2 vUV;\r\n            uniform vec2 screenSize;\r\n            uniform sampler2D textureSampler;\r\n            uniform highp sampler2D depth;\r\n            float linearDepth(float z) {\r\n                float zlin = (znear * zfar) / (zfar - z * (zfar - znear));\r\n                return (zlin - znear) / (zfar - znear);\r\n            }\r\n            void main(void) {\r\n                vec2 coords = gl_FragCoord.xy / screenSize;\r\n                float d = texture2D(depth, coords).x;\r\n                float z = linearDepth(gl_FragCoord.z);\r\n                float a = z > d ? 0.3 : 1.0;\r\n                gl_FragColor = vec4(texture2D(textureSampler, vUV).xyz, a);\r\n            }`;\r\n\r\n        // Box1\r\n        var boxMaterial = new StandardMaterial(\"boxb\", this.scene);\r\n\r\n        boxMaterial.diffuseTexture = new Texture(\"resources/texture/crate.png\", this.scene);\r\n\r\n        var box = MeshBuilder.CreateBox(\"boxb\", {}, this.scene);\r\n\r\n        box.material = boxMaterial;\r\n\r\n        // Box2\r\n        var box2Material = new StandardMaterial(\"box2b\", this.scene);\r\n\r\n        box2Material.diffuseTexture = new Texture(\"resources/texture/crate.png\", this.scene);\r\n\r\n        var box2 = MeshBuilder.CreateBox(\"box2b\", {}, this.scene);\r\n\r\n        box2.material = box2Material;\r\n        box2.position.x = 1.5;\r\n        box2.position.z = 2;\r\n\r\n        // Sprite1\r\n        var spriteMaterial = new ShaderMaterial(\"mat2\", this.scene, {\r\n            vertex: \"custom2\",\r\n            fragment: \"custom2\",\r\n            },\r\n            {\r\n                attributes: [\"position\", \"uv\"],\r\n                uniforms: [\"worldViewProjection\", \"screenSize\"],\r\n                needAlphaBlending: true\r\n            });\r\n\r\n        spriteMaterial.setTexture(\"depth\", renderer.getDepthMap());\r\n        spriteMaterial.setTexture(\"textureSampler\", new Texture(\"resources/texture/floor.png\", this.scene));\r\n        spriteMaterial.backFaceCulling = false;\r\n        spriteMaterial.disableDepthWrite = true;\r\n        spriteMaterial.alphaMode = Engine.ALPHA_COMBINE;\r\n        spriteMaterial.depthFunction = Engine.ALWAYS;\r\n\r\n        var sprite = MeshBuilder.CreatePlane(\"spriteb\", { size: 0.3 }, this.scene);\r\n\r\n        sprite.material = spriteMaterial;\r\n        sprite.position.x = 1.0;\r\n\r\n        // Sprite2\r\n        var sprite2 = MeshBuilder.CreatePlane(\"spriteb\", { size: 0.3 }, this.scene);\r\n\r\n        sprite2.material = spriteMaterial;\r\n        sprite2.position.y = 0.5;\r\n        sprite2.position.z = 1.0;\r\n\r\n        var engine = this.scene.getEngine();\r\n\r\n        this.scene.onBeforeRenderObservable.add(() => {\r\n            spriteMaterial.setVector2(\"screenSize\", new Vector2(engine.getRenderWidth(), engine.getRenderHeight()));\r\n        });\r\n\r\n        [sprite, sprite2].forEach((spr) => {\r\n            spr.onBeforeRenderObservable.add(() => {\r\n                spr.lookAt(this.camera.position);\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n","import {\r\n    Effect,\r\n    Scene,\r\n    ShaderMaterial,\r\n    StandardMaterial,\r\n    UniversalCamera,\r\n    Texture,\r\n    Vector3,\r\n    HemisphericLight,\r\n    MeshBuilder,\r\n    Engine,\r\n    Vector2,\r\n    DepthRenderer,\r\n} from \"babylonjs\";\r\n\r\nimport Sample from \"../Sample\";\r\nimport Split from \"../Split\";\r\n\r\nexport default class DepthNonLinearShader extends Split {\r\n\r\n    public createGUI(): void {\r\n        this.gui!.dimensions.height = 50;\r\n        this.gui!.showCloseButton = false;\r\n\r\n        super.createGUI();\r\n    }\r\n\r\n    public initialize(): void {\r\n        var light = new HemisphericLight(\"HemiLight\", new Vector3(0, 2, 0), this.scene);\r\n\r\n        var renderer = (this.scene as any).enableDepthRenderer(this.camera, true) as DepthRenderer;\r\n\r\n        renderer.useOnlyInActiveCamera = true;\r\n        renderer.getDepthMap().ignoreCameraViewport = false;\r\n\r\n        Effect.ShadersStore[\"custom1VertexShader\"] = `\r\n            precision highp float;\r\n            attribute vec3 position;\r\n            attribute vec2 uv;\r\n            uniform mat4 worldViewProjection;\r\n            varying vec2 vUV;\r\n            void main(void) {\r\n                gl_Position = worldViewProjection * vec4(position, 1.0);\r\n                vUV = uv;\r\n            }`;\r\n\r\n        Effect.ShadersStore[\"custom1FragmentShader\"] = `\r\n            precision highp float;\r\n            varying vec2 vUV;\r\n            uniform vec2 screenSize;\r\n            uniform sampler2D textureSampler;\r\n            uniform highp sampler2D depth;\r\n               void main(void) {\r\n                vec2 coords = gl_FragCoord.xy / screenSize;\r\n                float d = texture2D(depth, coords).x;\r\n                float z = gl_FragCoord.z;\r\n                float a = z > d ? 0.3 : 1.0;\r\n                gl_FragColor = vec4(texture2D(textureSampler, vUV).xyz, a);\r\n            }`;\r\n\r\n        // Box1\r\n        var boxMaterial = new StandardMaterial(\"box\", this.scene);\r\n\r\n        boxMaterial.diffuseTexture = new Texture(\"resources/texture/crate.png\", this.scene);\r\n\r\n        var box = MeshBuilder.CreateBox(\"box\", {}, this.scene);\r\n\r\n        box.material = boxMaterial;\r\n\r\n        // Box2\r\n        var box2Material = new StandardMaterial(\"box2\", this.scene);\r\n\r\n        box2Material.diffuseTexture = new Texture(\"resources/texture/crate.png\", this.scene);\r\n\r\n        var box2 = MeshBuilder.CreateBox(\"box2\", {}, this.scene);\r\n\r\n        box2.material = box2Material;\r\n        box2.position.x = 1.5;\r\n        box2.position.z = 2;\r\n\r\n        // Sprite1\r\n        var spriteMaterial = new ShaderMaterial(\"mat1\", this.scene, {\r\n            vertex: \"custom1\",\r\n            fragment: \"custom1\",\r\n            },\r\n            {\r\n                attributes: [\"position\", \"uv\"],\r\n                uniforms: [\"worldViewProjection\", \"screenSize\"],\r\n                needAlphaBlending: true\r\n            });\r\n\r\n        spriteMaterial.setTexture(\"depth\", renderer.getDepthMap());\r\n        spriteMaterial.setTexture(\"textureSampler\", new Texture(\"resources/texture/floor.png\", this.scene));\r\n        spriteMaterial.backFaceCulling = false;\r\n        spriteMaterial.disableDepthWrite = true;\r\n        spriteMaterial.alphaMode = Engine.ALPHA_COMBINE;\r\n        spriteMaterial.depthFunction = Engine.ALWAYS;\r\n\r\n        var sprite = MeshBuilder.CreatePlane(\"sprite\", { size: 0.3 }, this.scene);\r\n\r\n        sprite.material = spriteMaterial;\r\n        sprite.position.x = 1.0;\r\n\r\n        // Sprite2\r\n        var sprite2 = MeshBuilder.CreatePlane(\"sprite\", { size: 0.3 }, this.scene);\r\n\r\n        sprite2.material = spriteMaterial;\r\n        sprite2.position.y = 0.5;\r\n        sprite2.position.z = 1.0;\r\n\r\n        var engine = this.scene.getEngine();\r\n\r\n        this.scene.autoClear = true;\r\n\r\n        this.scene.onBeforeRenderObservable.add(() => {\r\n            spriteMaterial.setVector2(\"screenSize\", new Vector2(engine.getRenderWidth(), engine.getRenderHeight()));\r\n        });\r\n\r\n        [sprite, sprite2].forEach((spr) => {\r\n            spr.onBeforeRenderObservable.add(() => {\r\n                spr.lookAt(this.camera.position);\r\n            });\r\n        });\r\n    }\r\n\r\n}\r\n","import {\r\n    Scene,\r\n    Vector3,\r\n    Color3,\r\n    Color4,\r\n    Quaternion,\r\n    Matrix,\r\n    SceneLoader,\r\n    UniversalCamera,\r\n    Engine,\r\n} from \"babylonjs\";\r\n\r\nimport Sample, { enumSplitMode } from \"../Sample\";\r\n\r\nimport DepthNonLinearShader from \"./DepthNonLinearShader\";\r\nimport DepthLinearShader from \"./DepthLinearShader\";\r\nimport DepthLinearNoShader from \"./DepthLinearNoShader\";\r\n\r\nexport default class CSMSample extends Sample {\r\n\r\n    constructor(engine: Engine, canvas: HTMLCanvasElement) {\r\n        super(engine, canvas);\r\n\r\n        this._clearColor = new Color4(51 / 255, 52 / 255, 75 / 255, 1);\r\n        this._cameraSpeed = 2.5;\r\n        this.splitMode = enumSplitMode.SIDE_BY_SIDE;\r\n\r\n        this.registerClass(\"depth_nonlinear_shader\", DepthNonLinearShader);\r\n        this.registerClass(\"depth_linear_shader\", DepthLinearShader);\r\n        this.registerClass(\"depth_linear_noshader\", DepthLinearNoShader);\r\n    }\r\n\r\n    protected create(): void {\r\n        let split1 = this.addSplit(\"depth_nonlinear_shader\", \"Non linear depth\") as DepthNonLinearShader;\r\n\r\n        split1.initialize();\r\n\r\n        let split2 = this.addSplit(\"depth_linear_shader\", \"Linear depth\") as DepthLinearShader;\r\n\r\n        split2.initialize();\r\n\r\n        /*let split3 = this.addSplit(\"depth_linear_noshader\", \"s3\") as DepthLinearNoShader;\r\n\r\n        split3.initialize();*/\r\n    }\r\n\r\n    public createNewSplit(): void {\r\n    }\r\n\r\n    protected createSceneAndCamera(attachControls: boolean): [Scene, UniversalCamera] {\r\n        const [scene, camera] = super.createSceneAndCamera(attachControls);\r\n\r\n        scene.clearColor = this._clearColor;\r\n        scene.autoClear = false;\r\n\r\n        camera.angularSensibility = 1500;\r\n\r\n        return [scene, camera];\r\n    }\r\n\r\n}\r\n\r\nSample.registerSampleClass(\"sketchfabmarkers\", {\r\n    \"displayName\": \"Show front-facing markers as in Sketchfab\",\r\n    \"description\": \"\",\r\n    \"class\": CSMSample,\r\n});\r\n","import {\r\n    Scene,\r\n    UniversalCamera,\r\n} from \"babylonjs\";\r\n\r\nimport SplitGUI from \"./SplitGUI\";\r\nimport Sample from \"./Sample\";\r\n\r\nexport default class Split {\r\n\r\n    public static className: string = \"Split\";\r\n\r\n    public scene:           Scene;\r\n    public camera:          UniversalCamera;\r\n    public name:            string;\r\n    public isLoading:       boolean;\r\n    public group:           number;\r\n    public gui:             SplitGUI | null;\r\n\r\n    protected _container:   Sample;\r\n\r\n    constructor(scene: Scene, camera: UniversalCamera, parent: Sample, name: string = \"default\") {\r\n        this.scene = scene;\r\n        this.camera = camera;\r\n        this.name = name;\r\n        this.isLoading = false;\r\n        this.group = 0;\r\n        this._container = parent;\r\n        this.gui = new SplitGUI(this.name, this.scene.getEngine(), this._container, this);\r\n    }\r\n\r\n    public render(): void {\r\n        this.scene.render();\r\n    }\r\n\r\n    public createGUI(): void {\r\n        this.gui!.createGUI();\r\n    }\r\n\r\n}\r\n","import {\r\n    Engine,\r\n} from \"babylonjs\";\r\n\r\nimport GUI from \"./GUI\";\r\nimport Sample from \"./Sample\";\r\nimport Split from \"./Split\";\r\n\r\nexport default class SplitGUI extends GUI {\r\n\r\n    protected _container:   Sample;\r\n    protected _parent:      Split;\r\n\r\n    constructor(name: string, engine: Engine, container: Sample, parent: Split) {\r\n        super(name, engine);\r\n\r\n        this._container = container;\r\n        this._parent = parent;\r\n    }\r\n\r\n    public getBounds(): { x: number, y: number, w: number, h: number } {\r\n        return this._container.getSplitBounds(this._parent);\r\n    }\r\n\r\n    public canClose(): boolean {\r\n        return this._container.splitNumber > 1;\r\n    }\r\n\r\n    public closed(): void {\r\n        this._container.removeSplit(this._parent);\r\n    }\r\n\r\n}\r\n","import {\r\n    Color3,\r\n    CubeTexture,\r\n    Mesh,\r\n    MeshBuilder,\r\n    SceneLoader,\r\n    StandardMaterial,\r\n    Scene\r\n} from \"babylonjs\";\r\n\r\nimport {\r\n    OBJFileLoader\r\n} from \"babylonjs-loaders\";\r\n\r\nexport default class Utils {\r\n\r\n    public static XMScalarModAngle(angle: number): number {\r\n        // Normalize the range from 0.0f to XM_2PI\r\n        angle = angle + Math.PI;\r\n\r\n        // Perform the modulo, unsigned\r\n        let fTemp = Math.abs(angle);\r\n\r\n        const PIPI = Math.PI * 2;\r\n\r\n        fTemp = fTemp - (PIPI * Math.floor(fTemp / PIPI));\r\n\r\n        // Restore the number to the range of -XM_PI to XM_PI-epsilon\r\n        fTemp = fTemp - Math.PI;\r\n\r\n        // If the modulo'd value was negative, restore negation\r\n        if (angle < 0.0) {\r\n            fTemp = -fTemp;\r\n        }\r\n\r\n        return fTemp;\r\n    }\r\n\r\n    public static addSkybox(skyboxName: string = \"Runyon_Canyon_A_2k_cube_specular.dds\", scene: Scene, size: number = 1000): Mesh {\r\n        const skybox = MeshBuilder.CreateBox(\"skyBox\", { size: size }, scene);\r\n        const skyboxMaterial = new StandardMaterial(\"skyBox\", scene);\r\n\r\n        skyboxMaterial.backFaceCulling = false;\r\n        skyboxMaterial.reflectionTexture = new CubeTexture(\"resources/texture/\" + skyboxName, scene);\r\n        skyboxMaterial.reflectionTexture!.coordinatesMode = BABYLON.Texture.SKYBOX_MODE;\r\n        skyboxMaterial.diffuseColor = new Color3(0, 0, 0);\r\n        skyboxMaterial.specularColor = new Color3(0, 0, 0);\r\n        skyboxMaterial.disableLighting = true;\r\n        skyboxMaterial.disableDepthWrite = true;\r\n\r\n        skybox.material = skyboxMaterial;\r\n        skybox.alwaysSelectAsActiveMesh = true;\r\n\r\n        return skybox;\r\n    }\r\n\r\n    public static async loadObj(scene: Scene, path: string, name: string) {\r\n        //OBJFileLoader.COMPUTE_NORMALS = true;\r\n        //OBJFileLoader.INVERT_Y  = false;\r\n        OBJFileLoader.OPTIMIZE_WITH_UV = true;\r\n        OBJFileLoader.MATERIAL_LOADING_FAILS_SILENTLY = false;\r\n        OBJFileLoader.INVERT_TEXTURE_Y  = false;\r\n\r\n        return SceneLoader.AppendAsync(path, name, scene);\r\n    }\r\n\r\n}\r\n","import \"./CSM/index\";\r\nimport \"./CSM2/index\";\r\nimport \"./DepthMinMax/index\";\r\nimport \"./DrawEdges/index\";\r\nimport \"./Raymarching/index\";\r\nimport \"./RTTAndPostProcess/index\";\r\nimport \"./SketchfabMarkers/index\";\r\n","module.exports = MaterialUI;","module.exports = MaterialUI.colors;","module.exports = BABYLON;","module.exports = jQuery;","module.exports = React;","module.exports = ReactDOM;"],"sourceRoot":""}